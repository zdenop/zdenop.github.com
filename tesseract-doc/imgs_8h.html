<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tesseract: tesseract-ocr/image/imgs.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('imgs_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tesseract-ocr/image/imgs.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="img_8h_source.html">img.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="params_8h_source.html">params.h</a>&quot;</code><br/>
</div>
<p><a href="imgs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#a0df725752395af1328217c86bf552ed4">check_legal_image_size</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bits_per_pixel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#adf532c19ebf5ba5ec70086035b874dbc">copy_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#ad524b64ac508eee1576a4787e1f5f457">enlarge_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#ace8abc71ce7c0bb82ff54377abf45e66">fast_reduce_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#a987ea5c1e5f652311b99892283211a79">reduce_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#aa6bebc6424c5e6afcb08178ed6b44158">invert_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *image)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#af97bc85bee81f1d6a028bb3f8a1e607c">bias_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bias)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#a8e16bf9c8a0b05003c82b692f5549b40">starbase_to_normal</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> preserve_grey)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="imgs_8h.html#abb295cc164b06bec36f29e95a78733bb">image_default_resolution</a> = 300</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af97bc85bee81f1d6a028bb3f8a1e607c"></a><!-- doxytag: member="imgs.h::bias_sub_image" ref="af97bc85bee81f1d6a028bb3f8a1e607c" args="(IMAGE *source, inT32 xstart, inT32 ystart, inT32 xext, inT32 yext, uinT8 bias)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void bias_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>&#160;</td>
          <td class="paramname"><em>bias</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00831">831</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                            {
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *copy;                   <span class="comment">//source pointer</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> pixel;                   <span class="comment">//pixel index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y;                       <span class="comment">//line index</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bytespp;                 <span class="comment">//bytes per pixel</span>

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0)
    <span class="keywordflow">return</span>;
  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = source-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> (); <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xstart)
                                 <span class="comment">//clip to smallest</span>
    xext = source-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xstart;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = source-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> (); <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ystart)
                                 <span class="comment">//clip to smallest</span>
    yext = source-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ystart;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  bytespp = source-&gt;<a class="code" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> () == 24 ? 3 : 1;
  <span class="keywordflow">for</span> (y = 0; y &lt; yext; y++) {
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + y, xext);
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + y, xext, &amp;copyline);
    <span class="keywordflow">for</span> (pixel = xext * bytespp, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &gt; 0;
      pixel--, copy++)
    *copy += bias;               <span class="comment">//add bias</span>

    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a97634582d0c01e510827711338a50425">fast_put_line</a> (xstart, ystart + y, xext, &amp;copyline);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0df725752395af1328217c86bf552ed4"></a><!-- doxytag: member="imgs.h::check_legal_image_size" ref="a0df725752395af1328217c86bf552ed4" args="(inT32 x, inT32 y, inT8 bits_per_pixel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> check_legal_image_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td>
          <td class="paramname"><em>bits_per_pixel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00240">240</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                              {
  <span class="keywordflow">if</span> (x &lt;= 0 || y &lt;= 0) {
    <a class="code" href="imgerrs_8h.html#ae511546aebaf910a87fb3ca25b62da6a">BADIMAGESIZE</a>.<a class="code" href="class_e_r_r_c_o_d_e.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;check_legal_image_size&quot;</span>, <a class="code" href="errcode_8h.html#a8a3a2e51383909b357fcdf8eda803637a13d4c6d048f76d5b02c6f1b70323e770">TESSLOG</a>, <span class="stringliteral">&quot;(%d,%d)&quot;</span>, x, y);
    <span class="keywordflow">return</span> -1;                   <span class="comment">//failed</span>
  }
  <span class="keywordflow">if</span> (bits_per_pixel != 1 &amp;&amp; bits_per_pixel != 2
      &amp;&amp; bits_per_pixel != 4 &amp;&amp; bits_per_pixel != 5
      &amp;&amp; bits_per_pixel != 6 &amp;&amp; bits_per_pixel != 8 &amp;&amp; bits_per_pixel != 24
      &amp;&amp; bits_per_pixel != 32) {
    <a class="code" href="imgerrs_8h.html#af2f32937d04ae19ccae856ff89d08992">BADBPP</a>.<a class="code" href="class_e_r_r_c_o_d_e.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;check_legal_image_size&quot;</span>, <a class="code" href="errcode_8h.html#a8a3a2e51383909b357fcdf8eda803637a13d4c6d048f76d5b02c6f1b70323e770">TESSLOG</a>, <span class="stringliteral">&quot;%d&quot;</span>, bits_per_pixel);
    <span class="keywordflow">return</span> -1;
  }
                                 <span class="comment">//bytes per line</span>
  <span class="keywordflow">return</span> <a class="code" href="img_8h.html#a0ee65bc5580141bc6e2f538915b8af70">COMPUTE_IMAGE_XDIM</a> (x, bits_per_pixel);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adf532c19ebf5ba5ec70086035b874dbc"></a><!-- doxytag: member="imgs.h::copy_sub_image" ref="adf532c19ebf5ba5ec70086035b874dbc" args="(IMAGE *source, inT32 xstart, inT32 ystart, inT32 xext, inT32 yext, IMAGE *dest, inT32 xdest, inT32 ydest, BOOL8 adjust_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void copy_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00269">269</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                            {
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *copy;                   <span class="comment">//source pointer</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> pixel;                   <span class="comment">//pixel index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y;                       <span class="comment">//line index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> bytesize;                <span class="comment">//no of bytes to copy</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> srcppb;                  <span class="comment">//pixels per byte</span>
  <a class="code" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> aligned;

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;
  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = source-&gt;xsize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)
                                 <span class="comment">//clip to smallest</span>
      xext = source-&gt;xsize - xstart;
  <span class="keywordflow">if</span> (xext &gt; dest-&gt;xsize - xdest)
    xext = dest-&gt;xsize - xdest;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = source-&gt;ysize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)
                                 <span class="comment">//clip to smallest</span>
      yext = source-&gt;ysize - ystart;
  <span class="keywordflow">if</span> (yext &gt; dest-&gt;ysize - ydest)
    yext = dest-&gt;ysize - ydest;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  srcppb = 8 / source-&gt;bpp;      <span class="comment">//pixels per byte</span>
  <span class="keywordflow">if</span> (source-&gt;bpp == dest-&gt;bpp || !adjust_grey)
    shift = 0;                   <span class="comment">//no adjustment</span>
  <span class="keywordflow">else</span> {
    shift = source-&gt;bps - dest-&gt;bps;
    <span class="keywordflow">if</span> (shift &lt; 0)
      shift = -shift;            <span class="comment">//keep positive</span>
  }
  aligned = source-&gt;bpp == dest-&gt;bpp;
  <span class="keywordflow">if</span> (aligned &amp;&amp; srcppb != 0) {
    aligned = xstart % srcppb == 0
      &amp;&amp; xdest % srcppb == 0
      &amp;&amp; (xext % srcppb == 0 || xdest + xext == dest-&gt;xsize);
  }
  <span class="keywordflow">for</span> (y = 0; y &lt; yext; y++) {
    <span class="keywordflow">if</span> (ystart &gt;= ydest)
      yoffset = y;               <span class="comment">//top down</span>
    <span class="keywordflow">else</span>
      yoffset = yext - y - 1;    <span class="comment">//bottom up</span>
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);
    <span class="keywordflow">if</span> (aligned) {
      bytesize = <a class="code" href="img_8h.html#a0ee65bc5580141bc6e2f538915b8af70">COMPUTE_IMAGE_XDIM</a> (xext, source-&gt;bpp);
      <span class="comment">//get bytes per line</span>
      <span class="keywordflow">if</span> (srcppb == 0)
                                 <span class="comment">//do cheap move</span>
        memmove (dest-&gt;image + (dest-&gt;ymax - 1 - ydest - yoffset) * dest-&gt;xdim + xdest * 3, source-&gt;image + (source-&gt;ymax - 1 - ystart - yoffset) * source-&gt;xdim + xstart * 3, (<span class="keywordtype">unsigned</span>) bytesize);
      <span class="keywordflow">else</span>
                                 <span class="comment">//do cheap move</span>
        memmove (dest-&gt;image + (dest-&gt;ymax - 1 - ydest - yoffset) * dest-&gt;xdim + xdest / srcppb, source-&gt;image + (source-&gt;ymax - 1 - ystart - yoffset) * source-&gt;xdim + xstart / srcppb, (<span class="keywordtype">unsigned</span>) bytesize);
    }
    <span class="keywordflow">else</span> {
      <span class="keywordflow">if</span> (shift == 0) {
        source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext,
          &amp;copyline);
      }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (source-&gt;bpp &lt; dest-&gt;bpp) {
        source-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);
        <span class="keywordflow">if</span> (source-&gt;bpp &lt;= shift
        &amp;&amp; (source-&gt;bpp == 1 || source-&gt;bpp == 4)) {
          <span class="keywordflow">if</span> (source-&gt;bpp == 1) {
            <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;
              pixel++, copy++)
            <span class="keywordflow">if</span> (*copy)
              *copy = 0xff;
          }
          <span class="keywordflow">else</span> {
            <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;
              pixel++, copy++)
                                 <span class="comment">//scale up</span>
            *copy = (*copy &lt;&lt; shift) | *copy;
          }
        }
        <span class="keywordflow">else</span> {
          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;
            pixel++)
          *copy++ &lt;&lt;= shift;     <span class="comment">//scale up</span>
        }
      }
      <span class="keywordflow">else</span> {
        source-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);
        <span class="keywordflow">if</span> (source-&gt;bpp == 24) {
          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> + 1; pixel &lt; xext;
          pixel++) {
            *copy &gt;&gt;= shift;
            copy += 3;
          }
        }
        <span class="keywordflow">else</span> {
          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;
            pixel++)
          *copy++ &gt;&gt;= shift;     <span class="comment">//scale down</span>
        }
      }
      dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;copyline, 0);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad524b64ac508eee1576a4787e1f5f457"></a><!-- doxytag: member="imgs.h::enlarge_sub_image" ref="ad524b64ac508eee1576a4787e1f5f457" args="(IMAGE *source, inT32 xstart, inT32 ystart, IMAGE *dest, inT32 xdest, inT32 ydest, inT32 xext, inT32 yext, inT32 scale, BOOL8 adjust_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void enlarge_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00397">397</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                               {
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> pixel;                   <span class="comment">//current pixel</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> srcext;                  <span class="comment">//source extent</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xoffset;                 <span class="comment">//column index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//line index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//index in super pixel</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> startxindex;             <span class="comment">//initial x index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xscale;                  <span class="comment">//x scale factor</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pixels</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *destpix;                <span class="comment">//dest pixels</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> bigline;             <span class="comment">//expanded line</span>

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = dest-&gt;xsize;          <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize * scale - xstart)
                                 <span class="comment">//clip to smallest</span>
    xext = source-&gt;xsize * scale - xstart;
  <span class="keywordflow">if</span> (xext &gt; dest-&gt;xsize - xdest)
    xext = dest-&gt;xsize - xdest;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = dest-&gt;ysize;          <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize * scale - ystart)
    yext = source-&gt;ysize * scale - ystart;
  <span class="keywordflow">if</span> (yext &gt; dest-&gt;ysize - ydest)
    yext = dest-&gt;ysize - ydest;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  xindex = xstart % scale;       <span class="comment">//offset in super pixel</span>
  startxindex = xindex;
  yindex = ystart % scale;
                                 <span class="comment">//no of source pixels</span>
  srcext = (xext + xindex + scale - 1) / scale;
  xstart /= scale;               <span class="comment">//actual start</span>
  ystart /= scale;
  <span class="keywordflow">if</span> (adjust_grey) {
    shift = dest-&gt;bps - source-&gt;bps;
  }
  <span class="keywordflow">else</span>
    shift = 0;                   <span class="comment">//no adjustment</span>
  bigline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (xext * 3);
  bigline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = dest-&gt;bpp == 24 ? source-&gt;bpp : dest-&gt;bpp;

  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ystart++) {
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart, srcext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart, srcext, &amp;copyline);
    src = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
    destpix = bigline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
    xscale = scale;              <span class="comment">//enlargement factor</span>
    <span class="keywordflow">if</span> (source-&gt;bpp == 24 &amp;&amp; dest-&gt;bpp == 24) {
      <span class="keywordflow">for</span> (xoffset = 0, xindex = startxindex; xoffset &lt; xext;
      src += source-&gt;bytespp) {
        xoffset += xscale - xindex;
        <span class="keywordflow">if</span> (xoffset &gt; xext)
          xscale -= xoffset - xext;
        <span class="keywordflow">for</span> (; xindex &lt; xscale; xindex++) {
          *destpix++ = *src;
          *destpix++ = *(src + 1);
          *destpix++ = *(src + 2);
        }
        xindex = 0;
      }
    }
    <span class="keywordflow">else</span> {
      <span class="keywordflow">if</span> (source-&gt;bpp == 24)
        src++;
      <span class="keywordflow">for</span> (xoffset = 0, xindex = startxindex; xoffset &lt; xext;
      src += source-&gt;bytespp) {
        xoffset += xscale - xindex;
        <span class="keywordflow">if</span> (xoffset &gt; xext)
                                 <span class="comment">//clip to dest limit</span>
            xscale -= xoffset - xext;
        <span class="keywordflow">if</span> (shift == 0)
          pixel = *src;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shift &gt; 0)
          pixel = *src &lt;&lt; shift;
        <span class="keywordflow">else</span>
          pixel = *src &gt;&gt; (-shift);
        <span class="keywordflow">for</span> (; xindex &lt; xscale; xindex++)
          *destpix++ = pixel;    <span class="comment">//duplicate pixel</span>
        xindex = 0;
      }
    }
    <span class="keywordflow">for</span> (; yoffset &lt; yext &amp;&amp; yindex &lt; scale; yindex++, yoffset++) {
      dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;bigline, 0);
    }
    yindex = 0;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ace8abc71ce7c0bb82ff54377abf45e66"></a><!-- doxytag: member="imgs.h::fast_reduce_sub_image" ref="ace8abc71ce7c0bb82ff54377abf45e66" args="(IMAGE *source, inT32 xstart, inT32 ystart, inT32 xext, inT32 yext, IMAGE *dest, inT32 xdest, inT32 ydest, inT32 scale, BOOL8 adjust_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void fast_reduce_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00515">515</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xfactor;                 <span class="comment">//run on x coord</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> divisor;                 <span class="comment">//total cell area</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//into averaging square</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xcoord;                  <span class="comment">//current x coord</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> destext;                 <span class="comment">//destination size</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixel;                  <span class="comment">//ptr to source pixels</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *sums;                   <span class="comment">//ptr to sums array</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *linesums;               <span class="comment">//averaging sums</span>

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;
  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = source-&gt;xsize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)
                                 <span class="comment">//clip to smallest</span>
      xext = source-&gt;xsize - xstart;
  <span class="keywordflow">if</span> (xext &gt; (dest-&gt;xsize - xdest) * scale)
    xext = (dest-&gt;xsize - xdest) * scale;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = source-&gt;ysize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)
                                 <span class="comment">//clip to smallest</span>
      yext = source-&gt;ysize - ystart;
  <span class="keywordflow">if</span> (yext &gt; (dest-&gt;ysize - ydest) * scale)
    yext = (dest-&gt;ysize - ydest) * scale;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  xfactor = xext % scale;        <span class="comment">//left overs</span>
  <span class="keywordflow">if</span> (xfactor == 0)
    xfactor = scale;
                                 <span class="comment">//destination pixels</span>
  destext = (xext + scale - 1) / scale;
  <span class="keywordflow">if</span> (adjust_grey)
                                 <span class="comment">//shift factor</span>
    shift = dest-&gt;bps - source-&gt;bps;
  <span class="keywordflow">else</span>
    shift = 0;                   <span class="comment">//no adjustment</span>
  linesums = <span class="keyword">new</span> <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>[destext * source-&gt;bytespp];

  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ydest++) {
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest, destext);
    <span class="keywordflow">for</span> (xindex = destext * source-&gt;bytespp - 1; xindex &gt;= 0; xindex--)
      linesums[xindex] = 0;      <span class="comment">//zero sums</span>
    <span class="keywordflow">for</span> (yindex = 0; yindex &lt; scale
    &amp;&amp; ystart + yoffset &lt; source-&gt;ysize; yindex += 3) {
      source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline);
      pixel = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;   <span class="comment">//start of line</span>
      <span class="keywordflow">if</span> (source-&gt;bpp == 24) {
        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;
        xcoord++, sums += 3) {
          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex += 2) {
            *sums += *pixel++;
            *(sums + 1) += *pixel++;
            *(sums + 2) += *pixel++;
            pixel += 3;
          }
          <span class="keywordflow">if</span> (scale &amp; 1)
            pixel -= 3;          <span class="comment">//correct position</span>
        }
        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex += 2) {
          *sums += *pixel++;
          *(sums + 1) += *pixel++;
          *(sums + 2) += *pixel++;
          pixel += 3;
        }
      }
      <span class="keywordflow">else</span> {
        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;
        xcoord++, sums++) {
          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex += 2) {
            *sums += *pixel;
            pixel += 2;
          }
          <span class="keywordflow">if</span> (scale &amp; 1)
            pixel--;             <span class="comment">//correct position</span>
        }
        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex += 2) {
          *sums += *pixel;
          pixel += 2;
        }
      }
      yoffset += 3;              <span class="comment">//every 3 lines</span>
    }
    <span class="keywordflow">if</span> (yindex &gt; scale)
      yoffset -= yindex - scale; <span class="comment">//back on right scale</span>
    copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();            <span class="comment">//set pixels back to array</span>
    copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = source-&gt;bpp;
    pixel = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
                                 <span class="comment">//pixels in block</span>
    divisor = ((yindex + 2) / 3) * ((scale + 1) / 2);
    <span class="keywordflow">if</span> (shift &lt;= 0) {
      divisor &lt;&lt;= (-shift);      <span class="comment">//do greyscale correction</span>
      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;
        xindex &gt; 0; xindex--)
                                 <span class="comment">//turn to destination value</span>
      *pixel++ = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) (*sums++ / divisor);
      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)
        *pixel++ = *sums++
          / (((yindex + 2) / 3) * ((xfactor + 1) / 2) &lt;&lt; (-shift));
      <span class="comment">//lastone different</span>
    }
    <span class="keywordflow">else</span> {
      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;
        xindex &gt; 0; xindex--)
      *pixel++ = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((*sums++ &lt;&lt; shift) / divisor);
      <span class="comment">//destination value</span>
      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)
                                 <span class="comment">//last one different</span>
        *pixel++ = (*(sums++) &lt;&lt; shift) / (((yindex + 2) / 3) * ((xfactor + 1) / 2));
    }
                                 <span class="comment">//put in destination</span>
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest, destext, &amp;copyline, 0);
  }
  <span class="keyword">delete</span> [] linesums;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa6bebc6424c5e6afcb08178ed6b44158"></a><!-- doxytag: member="imgs.h::invert_image" ref="aa6bebc6424c5e6afcb08178ed6b44158" args="(IMAGE *image)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void invert_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00796">796</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                          {
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> mask;                    <span class="comment">//bit mask</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bytespp;                 <span class="comment">//bytes per pixel</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xsize, ysize;            <span class="comment">/*size of image */</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">/*index into image */</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixel;                  <span class="comment">/*current pixel */</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> line;                <span class="comment">/*line of image */</span>

  bytespp = image-&gt;<a class="code" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> () == 24 ? 3 : 1;
  xsize = image-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> ();   <span class="comment">/*find sizes */</span>
  ysize = image-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> ();
                                 <span class="comment">//pixel mask</span>
  mask = (1 &lt;&lt; image-&gt;<a class="code" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ()) - 1;
                                 <span class="comment">/*do each line */</span>
  <span class="keywordflow">for</span> (yindex = ysize - 1; yindex &gt;= 0; yindex--) {
    image-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (0, yindex, xsize, &amp;line);
    <span class="keywordflow">for</span> (pixel = line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>, xindex = xsize * bytespp; xindex &gt; 0;
      xindex--) {
      *pixel = (*pixel) ^ mask;  <span class="comment">//invert image only</span>
      ++pixel;
    }
                                 <span class="comment">/*put it back */</span>
    image-&gt;<a class="code" href="class_i_m_a_g_e.html#a97634582d0c01e510827711338a50425">fast_put_line</a> (0, yindex, xsize, &amp;line);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a987ea5c1e5f652311b99892283211a79"></a><!-- doxytag: member="imgs.h::reduce_sub_image" ref="a987ea5c1e5f652311b99892283211a79" args="(IMAGE *source, inT32 xstart, inT32 ystart, inT32 xext, inT32 yext, IMAGE *dest, inT32 xdest, inT32 ydest, inT32 scale, BOOL8 adjust_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void reduce_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00657">657</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                              {
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xfactor;                 <span class="comment">//run on x coord</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> divisor;                 <span class="comment">//total cell area</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> div2;                    <span class="comment">//total cell area divided by 2</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//into averaging square</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xcoord;                  <span class="comment">//current x coord</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> destext;                 <span class="comment">//destination size</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixel;                  <span class="comment">//ptr to source pixels</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *sums;                   <span class="comment">//ptr to sums array</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *linesums;               <span class="comment">//averaging sums</span>

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;
  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = source-&gt;xsize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)
                                 <span class="comment">//clip to smallest</span>
      xext = source-&gt;xsize - xstart;
  <span class="keywordflow">if</span> (xext &gt; (dest-&gt;xsize - xdest) * scale)
    xext = (dest-&gt;xsize - xdest) * scale;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = source-&gt;ysize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)
                                 <span class="comment">//clip to smallest</span>
      yext = source-&gt;ysize - ystart;
  <span class="keywordflow">if</span> (yext &gt; (dest-&gt;ysize - ydest) * scale)
    yext = (dest-&gt;ysize - ydest) * scale;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  xfactor = xext % scale;        <span class="comment">//left overs</span>
  <span class="keywordflow">if</span> (xfactor == 0)
    xfactor = scale;
                                 <span class="comment">//destination pixels</span>
  destext = (xext + scale - 1) / scale;
  <span class="keywordflow">if</span> (adjust_grey)
                                 <span class="comment">//shift factor</span>
    shift = dest-&gt;bps - source-&gt;bps;
  <span class="keywordflow">else</span>
    shift = 0;                   <span class="comment">//no adjustment</span>
  linesums = <span class="keyword">new</span> <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>[destext * source-&gt;bytespp];

  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ydest++) {
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest, destext);
    <span class="keywordflow">for</span> (xindex = 0; xindex &lt; (destext) * source-&gt;bytespp; xindex++)
      linesums[xindex] = 0;      <span class="comment">//zero sums</span>
    <span class="keywordflow">for</span> (yindex = 0; yindex &lt; scale &amp;&amp; ystart + yoffset &lt; source-&gt;ysize;
    yindex++) {
      source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline);
      pixel = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;   <span class="comment">//start of line</span>
      <span class="keywordflow">if</span> (source-&gt;bpp == 24) {
        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;
        xcoord++, sums += 3) {
          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex++) {
            *sums += *pixel++;
            *(sums + 1) += *pixel++;
            *(sums + 2) += *pixel++;
          }
        }
        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex++) {
          *sums += *pixel++;
          *(sums + 1) += *pixel++;
          *(sums + 2) += *pixel++;
        }
      }
      <span class="keywordflow">else</span> {
        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;
        xcoord++, sums++) {
          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex++)
            *sums += *pixel++;
        }
        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex++)
          *sums += *pixel++;
      }
      yoffset++;                 <span class="comment">//next line</span>
    }
    copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();            <span class="comment">//set pixels back to array</span>
    copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (source-&gt;bpp);
    pixel = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
    divisor = yindex * scale;
    <span class="keywordflow">if</span> (divisor == 0) {
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>
        (<span class="stringliteral">&quot;Impossible:divisor=0!, yindex=%d, scale=%d, yoffset=%d,yext=%d\n&quot;</span>,
        yindex, scale, yoffset, yext);
      <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">if</span> (shift &lt;= 0) {
      divisor &lt;&lt;= (-shift);      <span class="comment">//do greyscale correction</span>
      div2 = divisor / 2;
      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;
        xindex &gt; 0; xindex--)
      *pixel++ = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + *sums++) / divisor);
      <span class="comment">//turn to destination value</span>
      div2 = (yindex * xfactor &lt;&lt; (-shift)) / 2;
      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)
        *pixel++ =
          (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + *sums++) / (yindex * xfactor &lt;&lt; (-shift)));
      <span class="comment">//lastone different</span>
    }
    <span class="keywordflow">else</span> {
      div2 = divisor / 2;
      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;
        xindex &gt; 0; xindex--)
      *pixel++ = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + (*sums++ &lt;&lt; shift)) / divisor);
      <span class="comment">//destination value</span>
      div2 = (yindex * xfactor) / 2;
      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)
        *pixel++ =
          (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + (*sums++ &lt;&lt; shift)) / (yindex * xfactor));
      <span class="comment">//last one different</span>
    }
                                 <span class="comment">//put in destination</span>
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest, destext, &amp;copyline, 0);
  }
  <span class="keyword">delete</span> [] linesums;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8e16bf9c8a0b05003c82b692f5549b40"></a><!-- doxytag: member="imgs.h::starbase_to_normal" ref="a8e16bf9c8a0b05003c82b692f5549b40" args="(IMAGE *source, inT32 xstart, inT32 ystart, inT32 xext, inT32 yext, IMAGE *dest, inT32 xdest, inT32 ydest, BOOL8 preserve_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void starbase_to_normal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>preserve_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00881">881</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                {
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *copy;                   <span class="comment">//source pointer</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift4;                   <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift6;                   <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> colour_shift;             <span class="comment">//shift of colours</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> white_level;             <span class="comment">//dest white value</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> pixel;                   <span class="comment">//pixel index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y;                       <span class="comment">//line index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> srcppb;                   <span class="comment">//pixels per byte</span>

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;
  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = source-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> (); <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xstart)
                                 <span class="comment">//clip to smallest</span>
    xext = source-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xstart;
  <span class="keywordflow">if</span> (xext &gt; dest-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xdest)
    xext = dest-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xdest;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = source-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> (); <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ystart)
                                 <span class="comment">//clip to smallest</span>
    yext = source-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ystart;
  <span class="keywordflow">if</span> (yext &gt; dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ydest)
    yext = dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ydest;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

                                 <span class="comment">//pixels per byte</span>
  srcppb = 8 / source-&gt;<a class="code" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ();
  shift4 = 4 - dest-&gt;<a class="code" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> (); <span class="comment">//for different bpps</span>
  shift6 = 6 - dest-&gt;<a class="code" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ();
                                 <span class="comment">//for grey preserve</span>
  colour_shift = 8 - dest-&gt;<a class="code" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ();
  white_level = dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afa7970786b9c8a5e93b5496b5a3ae71a">get_white_level</a> ();
  <span class="keywordflow">for</span> (y = 0; y &lt; yext; y++) {
    <span class="keywordflow">if</span> (ystart &gt;= ydest)
      yoffset = y;               <span class="comment">//top down</span>
    <span class="keywordflow">else</span>
      yoffset = yext - y - 1;    <span class="comment">//bottom up</span>
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);
    <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext; pixel++) {
      <span class="keywordflow">if</span> (*copy &lt; <a class="code" href="imgs_8cpp.html#afe6424da3124ece686c28e5098738357">FIXED_COLOURS</a> &amp;&amp; preserve_grey)
        *copy = <a class="code" href="imgs_8cpp.html#acbb702db45cd9f85936cb0cd8b9652bd">grey_scales</a>[*copy] &gt;&gt; colour_shift;
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*copy &lt; <a class="code" href="imgs_8cpp.html#afe6424da3124ece686c28e5098738357">FIXED_COLOURS</a>) {
        <span class="keywordflow">if</span> (*copy == <a class="code" href="imgs_8cpp.html#a31503e4b0f23137edefe782ad5632878">BLACK_PIX</a>)
          *copy = white_level;   <span class="comment">//black-&gt;white</span>
        <span class="keywordflow">else</span>
          *copy = 0;             <span class="comment">//others-&gt;black</span>
      }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*copy &gt;= <a class="code" href="imgs_8cpp.html#a1660edd57e10b58c80d61135cfbb605e">MIN_4BIT</a> &amp;&amp; *copy &lt; <a class="code" href="imgs_8cpp.html#a3994c0a53601a0cece4b5ec6f9245d0d">MAX_4BIT</a>) {
        <span class="keywordflow">if</span> (shift4 &lt; 0)
          *copy = (*copy - <a class="code" href="imgs_8cpp.html#a1660edd57e10b58c80d61135cfbb605e">MIN_4BIT</a>) &lt;&lt; (-shift4);
        <span class="keywordflow">else</span>
          *copy = (*copy - <a class="code" href="imgs_8cpp.html#a1660edd57e10b58c80d61135cfbb605e">MIN_4BIT</a>) &gt;&gt; shift4;
      }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*copy &gt;= <a class="code" href="imgs_8cpp.html#ad683ffb2275a912ba4dc7a7b4370e31c">MIN_6BIT</a> &amp;&amp; *copy &lt; <a class="code" href="imgs_8cpp.html#a8243e83cdb4b1c26cf2fecf744f5b0b4">MAX_6BIT</a>) {
        <span class="keywordflow">if</span> (shift6 &lt; 0)
          *copy = (*copy - <a class="code" href="imgs_8cpp.html#ad683ffb2275a912ba4dc7a7b4370e31c">MIN_6BIT</a>) &lt;&lt; (-shift6);
        <span class="keywordflow">else</span>
          *copy = (*copy - <a class="code" href="imgs_8cpp.html#ad683ffb2275a912ba4dc7a7b4370e31c">MIN_6BIT</a>) &gt;&gt; shift6;
      }
      <span class="keywordflow">else</span> {
        *copy = white_level;     <span class="comment">//white the rest</span>
      }
      copy++;
    }
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;copyline, 0);
  }
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="abb295cc164b06bec36f29e95a78733bb"></a><!-- doxytag: member="imgs.h::image_default_resolution" ref="abb295cc164b06bec36f29e95a78733bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="imgs_8h.html#abb295cc164b06bec36f29e95a78733bb">image_default_resolution</a> = 300</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Image resolution dpi" </p>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00064">64</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="imgs_8h.html">imgs.h</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Thu Mar 29 2012 23:42:16 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
