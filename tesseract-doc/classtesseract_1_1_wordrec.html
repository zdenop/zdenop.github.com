<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tesseract: tesseract::Wordrec Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classtesseract_1_1_wordrec.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">tesseract::Wordrec Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="tesseract::Wordrec" --><!-- doxytag: inherits="tesseract::Classify" -->
<p><code>#include &lt;<a class="el" href="wordrec_8h_source.html">wordrec.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tesseract::Wordrec:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classtesseract_1_1_wordrec.png" usemap="#tesseract::Wordrec_map" alt=""/>
  <map id="tesseract::Wordrec_map" name="tesseract::Wordrec_map">
<area href="classtesseract_1_1_classify.html" alt="tesseract::Classify" shape="rect" coords="0,168,124,192"/>
<area href="classtesseract_1_1_c_c_struct.html" alt="tesseract::CCStruct" shape="rect" coords="0,112,124,136"/>
<area href="classtesseract_1_1_c_util.html" alt="tesseract::CUtil" shape="rect" coords="0,56,124,80"/>
<area href="classtesseract_1_1_c_c_util.html" alt="tesseract::CCUtil" shape="rect" coords="0,0,124,24"/>
<area href="classtesseract_1_1_tesseract.html" alt="tesseract::Tesseract" shape="rect" coords="0,280,124,304"/>
</map>
 </div></div>

<p><a href="classtesseract_1_1_wordrec-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a05c88ec72e6bc64cc79471145906ab12">Wordrec</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#acaace271520291eb5c8d5cd02fbe2ed4">~Wordrec</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a6e9f488de12a12cd99ae4c2c55c87bc6">CopyCharChoices</a> (const <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> &amp;from, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *to)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ac05db9a605bcb460b6b1abdaf03ee6c4">ChoiceIsCorrect</a> (const <a class="el" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> &amp;uni_set, const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *choice, const <a class="el" href="class_generic_vector.html">GenericVector</a>&lt; <a class="el" href="class_s_t_r_i_n_g.html">STRING</a> &gt; &amp;truth_text)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a3e07fc3051cf28bed0511983b8f8b69d">SaveAltChoices</a> (const <a class="el" href="baseapi_8h.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> &amp;best_choices, <a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a7b5bc2e6f3a8666f5bcb4a539c29c823">FillLattice</a> (const <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> &amp;ratings, const <a class="el" href="baseapi_8h.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> &amp;best_choices, const <a class="el" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> &amp;<a class="el" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a57cb744b40e142b6cb03de0e8998dafc">CallFillLattice</a> (const <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> &amp;ratings, const <a class="el" href="baseapi_8h.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> &amp;best_choices, const <a class="el" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> &amp;<a class="el" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a1a00e14baaad0a404bb90ac8fe4663f6">update_ratings</a> (const <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> &amp;new_choices, const <a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, const <a class="el" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a> search_state)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aea3997058b7c1683957d275d17bc20d6">SegSearch</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *best_choice, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *best_char_choices, <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *raw_choice, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *output_best_state, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a488dbf71180ee93aec63ad825be08444">attempt_blob_chop</a> (<a class="el" href="struct_t_w_e_r_d.html">TWERD</a> *word, <a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blob, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> blob_number, bool italic_blob, <a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> seam_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ab39c4eff1c3255a37a38f5f32956e6c2">chop_numbered_blob</a> (<a class="el" href="struct_t_w_e_r_d.html">TWERD</a> *word, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> blob_number, bool italic_blob, <a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> seam_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a60f3ee36bfbef64013dd7b199248cf0e">chop_overlapping_blob</a> (const <a class="el" href="class_generic_vector.html">GenericVector</a>&lt; <a class="el" href="class_t_b_o_x.html">TBOX</a> &gt; &amp;boxes, <a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word_res, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *blob_number, bool italic_blob, <a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> seam_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a5b02ea635cd52437ade4200ed2734941">junk_worst_seam</a> (<a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a> seams, <a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *new_seam, float new_priority)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#afa230ef31fc03aff58ebd4d2de2df68b">choose_best_seam</a> (<a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a> seam_queue, <a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a> *seam_pile, <a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *split, <a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> priority, <a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> **seam_result, <a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blob)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a11c3678047ab91731c5628c49e0b9858">combine_seam</a> (<a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a> seam_queue, <a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a> seam_pile, <a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *seam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ab304a891354f890ed124488273b57b19">constrained_split</a> (<a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *split, <a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blob)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a15fb0ba7f97dd0ad49f30fb7861717c4">delete_seam_pile</a> (<a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a> seam_pile)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#adeb84d8b94a6c87354fc452461de3b39">pick_good_seam</a> (<a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blob)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a239d08f59bdd41a53ab489ca138fa989">seam_priority</a> (<a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *seam, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> xmin, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> xmax)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#afaf3a51721ceaa661e9e1919d4ea48e7">try_point_pairs</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *points[MAX_NUM_POINTS], <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_points, <a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a> seam_queue, <a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a> *seam_pile, <a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> **seam, <a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blob)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a2f5dad2d83fa6f5b28819f13eabf41ba">try_vertical_splits</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *points[MAX_NUM_POINTS], <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_points, EDGEPT_CLIST *new_points, <a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a> seam_queue, <a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a> *seam_pile, <a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> **seam, <a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blob)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a409c4fc630ecbc283e3a6aa1b08debf7">full_split_priority</a> (<a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *split, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> xmin, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> xmax)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#abbeec661b51bf52c5dd3ccbb64567690">grade_center_of_blob</a> (register <a class="el" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a> rect)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a483f88dc4b24f7055448259c42e1867d">grade_overlap</a> (register <a class="el" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a> rect)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a26ed8c156b2be0e7e38bd5437b71c10f">grade_split_length</a> (register <a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *split)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ab3df13db044c39b2d9aa4e6bf105d309">grade_sharpness</a> (register <a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *split)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a03ae9b642499f15b4fe4348d9d0ee3c2">grade_width_change</a> (register <a class="el" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a> rect)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a764fd79db0c80638187f4751626bb12e">set_outline_bounds</a> (register <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point1, register <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point2, <a class="el" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a> rect)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a6ad6a99cdee8d3a3ceaec40afade8714">crosses_outline</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *p0, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *p1, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *outline)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#af5466c6b57ff40780c0be86b1330f1cf">is_crossed</a> (<a class="el" href="struct_t_p_o_i_n_t.html">TPOINT</a> a0, <a class="el" href="struct_t_p_o_i_n_t.html">TPOINT</a> a1, <a class="el" href="struct_t_p_o_i_n_t.html">TPOINT</a> b0, <a class="el" href="struct_t_p_o_i_n_t.html">TPOINT</a> b1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a67574237703ce6757f28d9cdcef7d301">is_same_edgept</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *p1, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *p2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a746f8a2ed6b50a3669a2fe6dcd053eec">near_point</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *line_pt_0, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *line_pt_1, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> **near_pt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad88a55a41c46135e8173fd81cbeb1751">reverse_outline</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *outline)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual BLOB_CHOICE_LIST *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad59946532b08a90f940ecfa994b06653">classify_piece</a> (<a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *pieces, const <a class="el" href="class_d_e_n_o_r_m.html">DENORM</a> &amp;denorm, <a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> seams, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> start, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> end, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a60e821ddb0f98741bb729c5163e1189c">merge_fragments</a> (<a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_blobs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a53e7fd43e3657ffc3bc76a18f4e52291">get_fragment_lists</a> (<a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> current_frag, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> current_row, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> start, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_frag_parts, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_blobs, <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings, BLOB_CHOICE_LIST *choice_lists)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#af657001729e7bc45e381614497adcc19">merge_and_put_fragment_lists</a> (<a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> row, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> column, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_frag_parts, BLOB_CHOICE_LIST *choice_lists, <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a82e3d17abe8744c66fe3aa67fe2ea0f3">fill_filtered_fragment_list</a> (BLOB_CHOICE_LIST *choices, int fragment_pos, int num_frag_parts, BLOB_CHOICE_LIST *filtered_choices)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BLOB_CHOICE_LIST *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aab16c53ccf9c888874c2e7ae65b6ed04">get_piece_rating</a> (<a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings, <a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blobs, const <a class="el" href="class_d_e_n_o_r_m.html">DENORM</a> &amp;denorm, <a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> seams, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> start, <a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> end, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_t_b_o_x.html">TBOX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aa635d222f122122d4abad1b883d92fb5">record_blob_bounds</a> (<a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blobs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a9f070b021f06de480fda80a61a772d47">record_piece_ratings</a> (<a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blobs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a20332a4dd1d38ef7c6bf04d8dd4a98b7">state_char_widths</a> (<a class="el" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *chunk_widths, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state, int <a class="el" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ac0868afc87448dc583dad4d67dd8b1a8">get_width_variance</a> (<a class="el" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *wrec, float norm_height)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad77b8ca8f655ae0bfe16f352f3d01830">get_gap_variance</a> (<a class="el" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *wrec, float norm_height)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a5ad58d7dcf5cbe7852aefb3b35a9ce33">prioritize_state</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *the_search)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a6e963a2c089d890de52254b85b2c0cac">width_priority</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state, int <a class="el" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aa5fd4729ef162689b68d20f9bdeb0c3e">seamcut_priority</a> (<a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> seams, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state, int <a class="el" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a1dd426293ba3d6d90f8740285190336f">rating_priority</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state, int <a class="el" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>)</td></tr>
<tr><td colspan="2"><div class="groupHeader">program_editup</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Initialize all the things in the program that need to be initialized. init_permute determines whether to initialize the permute functions and <a class="el" href="classtesseract_1_1_dawg.html">Dawg</a> models. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a318cffefddd77027079285472c9c54a2">program_editup</a> (const char *textbase, bool init_classifier, bool init_permute)</td></tr>
<tr><td colspan="2"><div class="groupHeader">cc_recog</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Recognize a word. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad5643a29cad973e306bb84fb843397af">cc_recog</a> (<a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word)</td></tr>
<tr><td colspan="2"><div class="groupHeader">program_editdown</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>This function holds any nessessary post processing for the Wise Owl program. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a5b44d020ea7f9d19d2e8f71b4e83113c">program_editdown</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> elasped_time)</td></tr>
<tr><td colspan="2"><div class="groupHeader">set_pass1</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Get ready to do some pass 1 stuff. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a15740f1d66aa061522c69b948e901e70">set_pass1</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader">set_pass2</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Get ready to do some pass 2 stuff. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a883211e914cb31146b8dd9ace419c843">set_pass2</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader">end_recog</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Cleanup and exit the recog program. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ae0e2f8d5761f19008b20943a6e8ba130">end_recog</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader">call_matcher</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Called from Tess with a blob in tess form. The blob may need rotating to the correct orientation for classification. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BLOB_CHOICE_LIST *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a2399813e1c656f6638ce7d09ac3a101b">call_matcher</a> (const <a class="el" href="class_d_e_n_o_r_m.html">DENORM</a> *denorm, <a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blob)</td></tr>
<tr><td colspan="2"><div class="groupHeader">dict_word()</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Test the dictionaries, returning NO_PERM (0) if not found, or one of the PermuterType values if found, according to the dictionary. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a13f2efa710b3a68e30e8bc2f69bee578">dict_word</a> (const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> &amp;word)</td></tr>
<tr><td colspan="2"><div class="groupHeader">classify_blob</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="el" href="classtesseract_1_1_classify.html">Classify</a> the this blob if it is not already recorded in the match table. Attempt to recognize this blob as a character. The recognition rating for this blob will be stored as a part of the blob. This value will also be returned to the caller. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">blob</td><td>Current blob </td></tr>
    <tr><td class="paramname">string</td><td>The string to display in <a class="el" href="class_scroll_view.html">ScrollView</a> </td></tr>
    <tr><td class="paramname">color</td><td>The colour to use when displayed with <a class="el" href="class_scroll_view.html">ScrollView</a> </td></tr>
  </table>
  </dd>
</dl>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BLOB_CHOICE_LIST *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a7127d481d5ea12e3253fb3719fd2170c">classify_blob</a> (<a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *blob, const <a class="el" href="class_d_e_n_o_r_m.html">DENORM</a> &amp;denorm, const char *string, <a class="el" href="callcpp_8h.html#a17bc059e437838f094a5a25c2d5ab88f">C_COL</a> color, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BLOB_CHOICE_LIST *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ae15505acaad8195b1b96de4a393bfc3e">fake_classify_blob</a> (<a class="el" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> class_id, float rating, float certainty)</td></tr>
<tr><td colspan="2"><div class="groupHeader">update_blob_classifications</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>For each blob in the given word update match_table with the corresponding BLOB_CHOICES_LIST from choices. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a63db9b85fa1350dfccfd4d6e548290d4">update_blob_classifications</a> (<a class="el" href="struct_t_w_e_r_d.html">TWERD</a> *word, const <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> &amp;choices)</td></tr>
<tr><td colspan="2"><div class="groupHeader">best_first_search</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Find the best segmentation by doing a best first search of the solution space. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a17730ff30d62f74a4a14904664bd8656">evaluate_chunks</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a> search_state, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad717bb181d1b89496be0b042347d9753">best_first_search</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *best_char_choices, <a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state, <a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *fixpt, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *best_state)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a138fe5d0ffacb19535094f221a9e6511">delete_search</a> (<a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *the_search)</td></tr>
<tr><td colspan="2"><div class="groupHeader">evaluate_state</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Evaluate the segmentation that is represented by this state in the best first search. Add this state to the "states_seen" list. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad9eb2175e0e99588f283809bea8cdf2b">evaluate_state</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *the_search, <a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *fixpt, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a540decbb88b2e701402b80fd7395d03e">rebuild_current_state</a> (<a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *char_choices, <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings)</td></tr>
<tr><td colspan="2"><div class="groupHeader">new_search</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Create and initialize a new search record. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a6532056b5f7dcdff1a64898d1c3b6bfc">new_search</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, int <a class="el" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *best_char_choices, <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *best_choice, <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *raw_choice, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state)</td></tr>
<tr><td colspan="2"><div class="groupHeader">expand_node</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Create the states that are attached to this one. Check to see that each one has not already been visited. If not add it to the priority queue. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a03931abc6310dd587fdaff3ccf272887">expand_node</a> (<a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> worst_priority, <a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *the_search)</td></tr>
<tr><td colspan="2"><div class="groupHeader">replace_char_widths</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Replace the value of the char_width field in the chunks_record with the updated width measurements from the last_segmentation. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a35746f8e970b19443f459c060a8775c9">replace_char_widths</a> (<a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a> state)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#afba032e7e9cea932a806e56424966237">rebuild_fragments</a> (const char *unichar, const char *expanded_fragment_lengths, int choice_index, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *old_choices)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BLOB_CHOICE_LIST *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aad7c820e5bb342d7ea7743269e160a20">join_blobs_and_classify</a> (<a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word, int x, int y, int choice_index, <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *old_choices)</td></tr>
<tr><td colspan="2"><div class="groupHeader">pop_queue</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Get this state from the priority queue. It should be the state that has the greatest urgency to be evaluated. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a24a13455e56ef38b4270f672fa639d62">pop_queue</a> (<a class="el" href="struct_h_e_a_p.html">HEAP</a> *queue)</td></tr>
<tr><td colspan="2"><div class="groupHeader">push_queue</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Add this state into the priority queue. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aeec11442b97898cd44ddfe568dd9ee0f">push_queue</a> (<a class="el" href="struct_h_e_a_p.html">HEAP</a> *queue, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state, <a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> worst_priority, <a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> priority, bool debug)</td></tr>
<tr><td colspan="2"><div class="groupHeader">point_priority</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Assign a priority to and edge point that might be used as part of a split. The argument should be of type <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a>. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#adfe6b5aa74fe948a11bf631af18e7494">point_priority</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point)</td></tr>
<tr><td colspan="2"><div class="groupHeader">add_point_to_list</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Add an edge point to a POINT_GROUP containg a list of other points. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a6b73b33a1a883abc117c676b64816c6f">add_point_to_list</a> (<a class="el" href="chop_8h.html#a55d3249c77c934468c72f606ce08354f">POINT_GROUP</a> point_list, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point)</td></tr>
<tr><td colspan="2"><div class="groupHeader">angle_change</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Return the change in angle (degrees) of the line segments between points one and two, and two and three. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a6cad89fa254226bb11cc6eacfd7f0ffa">angle_change</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point1, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point2, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point3)</td></tr>
<tr><td colspan="2"><div class="groupHeader">is_little_chunk</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Return TRUE if one of the pieces resulting from this split would less than some number of edge points. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ada66e05fa0ae8dc79b9de78f5f6efadf">is_little_chunk</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point1, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point2)</td></tr>
<tr><td colspan="2"><div class="groupHeader">is_small_area</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Test the area defined by a split accross this outline. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a71c9cce736fd886763722cf34ddd0ab7">is_small_area</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point1, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *point2)</td></tr>
<tr><td colspan="2"><div class="groupHeader">pick_close_point</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Choose the edge point that is closest to the critical point. This point may not be exactly vertical from the critical point. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a79aec1d9a1c9c001a24838117585091a">pick_close_point</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *critical_point, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *vertical_point, int *best_dist)</td></tr>
<tr><td colspan="2"><div class="groupHeader">prioritize_points</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Find a list of edge points from the outer outline of this blob. For each of these points assign a priority. Sort these points using a heap structure so that they can be visited in order. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a52f6801a630c7418855f469233b3cf38">prioritize_points</a> (<a class="el" href="struct_t_e_s_s_l_i_n_e.html">TESSLINE</a> *outline, <a class="el" href="chop_8h.html#a55d3249c77c934468c72f606ce08354f">POINT_GROUP</a> points)</td></tr>
<tr><td colspan="2"><div class="groupHeader">new_min_point</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Found a new minimum point try to decide whether to save it or not. Return the new value for the local minimum. If a point is saved then the local minimum is reset to NULL. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a597a95a38f3461c79c3f3970c4d69b69">new_min_point</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *local_min, <a class="el" href="chop_8h.html#a55d3249c77c934468c72f606ce08354f">POINT_GROUP</a> points)</td></tr>
<tr><td colspan="2"><div class="groupHeader">new_max_point</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Found a new minimum point try to decide whether to save it or not. Return the new value for the local minimum. If a point is saved then the local minimum is reset to NULL. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a3d80d69436770f158bcea457afb6c81d">new_max_point</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *local_max, <a class="el" href="chop_8h.html#a55d3249c77c934468c72f606ce08354f">POINT_GROUP</a> points)</td></tr>
<tr><td colspan="2"><div class="groupHeader">vertical_projection_point</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>For one point on the outline, find the corresponding point on the other side of the outline that is a likely projection for a split point. This is done by iterating through the edge points until the X value of the point being looked at is greater than the X value of the split point. Ensure that the point being returned is not right next to the split point. Return the edge point in *best_point as a result, and any points that were newly created are also saved on the new_points list. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ac3557f7f8e9b02f6b2fea05e2320cd1d">vertical_projection_point</a> (<a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *split_point, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *target_point, <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> **best_point, EDGEPT_CLIST *new_points)</td></tr>
<tr><td colspan="2"><div class="groupHeader">improve_one_blob</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Start with the current word of blobs and its classification. Find the worst blobs and try to divide it up to improve the ratings. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#acdc368cd46083bdc4c321dd0a42533a0">improve_one_blob</a> (<a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word_res, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *char_choices, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *blob_number, <a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> *seam_list, <a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *fixpt, bool split_next_to_fragment, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td colspan="2"><div class="groupHeader">modify_blob_choice</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Takes a blob and its chop index, converts that chop index to a unichar_id, and stores the chop index in place of the blob's original unichar_id. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a30984c34a31ca6ef5ee363fc5ebfeff4">modify_blob_choice</a> (BLOB_CHOICE_LIST *answer, int chop_index)</td></tr>
<tr><td colspan="2"><div class="groupHeader">chop_one_blob</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Start with the current one-blob word and its classification. Find the worst blobs and try to divide it up to improve the ratings. Used for testing chopper. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a3649b7ab00c4d5947904af99716c6b20">chop_one_blob</a> (<a class="el" href="struct_t_w_e_r_d.html">TWERD</a> *word, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *char_choices, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *blob_number, <a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> *seam_list, int *right_chop_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#adb4cc59f6e9cca86fbba44ad483ab0b1">chop_one_blob2</a> (const <a class="el" href="class_generic_vector.html">GenericVector</a>&lt; <a class="el" href="class_t_b_o_x.html">TBOX</a> &gt; &amp;boxes, <a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word_res, <a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> *seam_list)</td></tr>
<tr><td colspan="2"><div class="groupHeader">chop_word_main</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="el" href="classtesseract_1_1_classify.html">Classify</a> the blobs in this word and permute the results. Find the worst blob in the word and chop it up. Continue this process until a good answer has been found or all the blobs have been chopped up enough. Return the word level ratings. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ae9a055f84d35a4f9752f6c838afa11b0">chop_word_main</a> (<a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word)</td></tr>
<tr><td colspan="2"><div class="groupHeader">improve_by_chopping</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Start with the current word of blobs and its classification. Find the worst blobs and try to divide them up to improve the ratings. As long as ratings are produced by the new blob splitting. When all the splitting has been accomplished all the ratings memory is reclaimed. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad1164fd07a17960ed06585f0c8aadcdc">improve_by_chopping</a> (<a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *char_choices, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *best_state, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *best_char_choices, <a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *fixpt, bool *updated_best_choice)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a3581245a7778654f6fd22c4b3721cf06">word_associator</a> (bool only_create_ratings_matrtix, <a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *state, <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *best_char_choices, <a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *fixpt, <a class="el" href="struct_s_t_a_t_e.html">STATE</a> *best_state)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a8fd3e86b711ba9d54c7eb500eb99c1c4">select_blob_to_split</a> (const <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> &amp;char_choices, float rating_ceiling, bool split_next_to_fragment)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a457f1ea04bad00c6e40883869700defb">select_blob_to_split_from_fixpt</a> (<a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *fixpt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a2ed3fab8407177af31d446a794617149">set_chopper_blame</a> (<a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *word)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a0dcc862e7e80e66c451e8e98b534ca46">merge_fragments_in_matrix</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a1d72dac6cc8ddbff1ba7c911d7d2d0bb">wordrec_no_block</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aba19336c1e635f22b3c27024afd07fed">wordrec_enable_assoc</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a447f3fa5c50ca545e0a49887ee669ff8">force_word_assoc</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a57c3675d967208936be65a14e5b64c7d">wordrec_num_seg_states</a> = 30</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#abbb36fc5e6f3b89797c155cfce0b0841">wordrec_worst_state</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a62f9bd7c796160d6fad61ba616e67ead">fragments_guide_chopper</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a34abe5c1b41feff68500d1b83a1f891d">repair_unchopped_blobs</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a57ae3e0529a624fd3677f96d5b43fcc8">tessedit_certainty_threshold</a> = -2.25</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#adcf4728e9f36b1c55a024165a31ca2e4">chop_enable</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a8914016a85c92a468b1d1da3eda53695">chop_vertical_creep</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a14ec030cc0189e71e05ea6630a1abbf5">chop_split_length</a> = 10000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a542ce310766b22a01d277a0751c6986e">chop_same_distance</a> = 2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad9e49481be94c7fd0fb0a1a3f38ea605">chop_min_outline_points</a> = 6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ab6afc69fe3401fb2ffd2ab64a19c8824">chop_inside_angle</a> = -50</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aa87cc41f196b1779bec5e1040c4f857e">chop_min_outline_area</a> = 2000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aefabcf9d889b0465eb484fff5a09e93a">chop_split_dist_knob</a> = 0.5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad362b437458be7cc17aa39e01d36c17e">chop_overlap_knob</a> = 0.9</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a7b115ea8fffc0f54152d294c71da964d">chop_center_knob</a> = 0.15</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a1e5af8d3ffa2cc52de487e7556a8fdf0">chop_sharpness_knob</a> = 0.06</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#aa63e4f7808cf2b9a60a11012cb7aee01">chop_width_change_knob</a> = 5.0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a> = 100.0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ad18f0e1c62f90e2be42190a720158862">chop_good_split</a> = 50.0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a0db358c94208627661f5f1cf44ff9d28">chop_x_y_weight</a> = 3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a613a7dc22729f2cb084bc7093a0a4088">assume_fixed_pitch_char_segment</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ab5afccbd096fe5f2ce5e3a7ada77a698">use_new_state_cost</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a48537af11d756181ab3c13d14154ec3f">heuristic_segcost_rating_base</a> = 1.25</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a6db610e3739b7660036de4498efd0cc4">heuristic_weight_rating</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ae123123f79f4caa864aa437e93872551">heuristic_weight_width</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a5305fb44c26a61863bb5f7b646fc5bd9">heuristic_weight_seamcut</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a3083609f8ad7c4895647674956163c04">heuristic_max_char_wh_ratio</a> = 2.0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a5f360cd76704a08b03a4738a97e8457b">wordrec_run_blamer</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ae9c39326c0ed2eaf67c30939714616ba">enable_new_segsearch</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a0a0cfc9fb11d9ecf6961d0cc655f9070">segsearch_max_pain_points</a> = 2000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a7d7641f6361f78664fb541f5ce33fe1b">segsearch_max_futile_classifications</a> = 10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a8fa843163c3e8785a957e422b9256d35">segsearch_max_char_wh_ratio</a> = 2.0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#acb3f291e547f6019e53c8eb0f3b48e70">segsearch_max_fixed_pitch_char_wh_ratio</a> = 2.0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#acb91792cc7855324b0a6f495defe3218">save_alt_choices</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtesseract_1_1_language_model.html">LanguageModel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a671c4b102b976c600adc3bf60ee44323">pass2_ok_split</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ade3cecfe9b377045db0abe2d06762c1e">pass2_seg_states</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#af285813a72895f9b09f4e0f3021e721c">num_pushed</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#abc8f5ea0bc5278f6a3ba1f91b3e797e3">num_popped</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtesseract_1_1_blob_match_table.html">BlobMatchTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a7518e041a8ddab1d1a2b7e609553b8e3">blob_match_table</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="associate_8h.html#ab48ca2435a6b02cde81b7554ce0160e3">EVALUATION_ARRAY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#af7a36436e7e7fd0691bc093814fc2b62">last_segmentation</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a143608f482c6c0c4f312740e6a5f5fd9">prev_word_best_choice_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_generic_vector.html">GenericVector</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#acd86faf2d9076330828b3738d39c6ecd">blame_reasons_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(Wordrec::*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a7a4f5e2cb7957a5decbc91eb2d31f87c">fill_lattice_</a> )(const <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> &amp;ratings, const <a class="el" href="baseapi_8h.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> &amp;best_choices, const <a class="el" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> &amp;<a class="el" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a904762fe91430c5094ccecb7e690e0e5">SegSearchDone</a> (int num_futile_classifications)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a6bac0a6462577e2e1057057f03901a33">UpdateSegSearchNodes</a> (int starting_col, SEG_SEARCH_PENDING_LIST *pending[], <a class="el" href="structtesseract_1_1_best_path_by_column.html">BestPathByColumn</a> *best_path_by_column[], <a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="struct_h_e_a_p.html">HEAP</a> *pain_points, <a class="el" href="structtesseract_1_1_best_choice_bundle.html">BestChoiceBundle</a> *best_choice_bundle, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#ab9f95be1d701222b62b7f8920f5cb9e5">ProcessSegSearchPainPoint</a> (float pain_point_priority, const <a class="el" href="struct_m_a_t_r_i_x___c_o_o_r_d.html">MATRIX_COORD</a> &amp;pain_point, const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *best_choice, SEG_SEARCH_PENDING_LIST *pending[], <a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="struct_h_e_a_p.html">HEAP</a> *pain_points, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#a8580282cf87b0e054ac1410cf4ffa0e2">InitBlamerForSegSearch</a> (const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *best_choice, <a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *chunks_record, <a class="el" href="struct_h_e_a_p.html">HEAP</a> *pain_points, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle, <a class="el" href="class_s_t_r_i_n_g.html">STRING</a> *blamer_debug)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_wordrec.html#abbb02091c23e7be9370055704526102f">FinishBlamerForSegSearch</a> (const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *best_choice, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle, <a class="el" href="class_s_t_r_i_n_g.html">STRING</a> *blamer_debug)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00091">91</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a05c88ec72e6bc64cc79471145906ab12"></a><!-- doxytag: member="tesseract::Wordrec::Wordrec" ref="a05c88ec72e6bc64cc79471145906ab12" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tesseract::Wordrec::Wordrec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8cpp_source.html#l00026">26</a> of file <a class="el" href="wordrec_8cpp_source.html">wordrec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                 :
  <span class="comment">// control parameters</span>
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a0dcc862e7e80e66c451e8e98b534ca46">merge_fragments_in_matrix</a>, <a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,
              <span class="stringliteral">&quot;Merge the fragments in the ratings matrix and delete them&quot;</span>
              <span class="stringliteral">&quot; after merging&quot;</span>, <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a1d72dac6cc8ddbff1ba7c911d7d2d0bb">wordrec_no_block</a>, <a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <span class="stringliteral">&quot;Don&#39;t output block information&quot;</span>,
              <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#aba19336c1e635f22b3c27024afd07fed">wordrec_enable_assoc</a>, <a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <span class="stringliteral">&quot;Associator Enable&quot;</span>,
              <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a447f3fa5c50ca545e0a49887ee669ff8">force_word_assoc</a>, <a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,
              <span class="stringliteral">&quot;force associator to run regardless of what enable_assoc is.&quot;</span>
              <span class="stringliteral">&quot;This is used for CJK where component grouping is necessary.&quot;</span>,
              <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">CCUtil::params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a57c3675d967208936be65a14e5b64c7d">wordrec_num_seg_states</a>, 30, <span class="stringliteral">&quot;Segmentation states&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">CCUtil::params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#abbb36fc5e6f3b89797c155cfce0b0841">wordrec_worst_state</a>, 1.0, <span class="stringliteral">&quot;Worst segmentation state&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a62f9bd7c796160d6fad61ba616e67ead">fragments_guide_chopper</a>, <a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,
              <span class="stringliteral">&quot;Use information from fragments to guide chopping process&quot;</span>,
              <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a34abe5c1b41feff68500d1b83a1f891d">repair_unchopped_blobs</a>, 1, <span class="stringliteral">&quot;Fix blobs that aren&#39;t chopped&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a57ae3e0529a624fd3677f96d5b43fcc8">tessedit_certainty_threshold</a>, -2.25, <span class="stringliteral">&quot;Good blob limit&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>, 0, <span class="stringliteral">&quot;Chop debug&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#adcf4728e9f36b1c55a024165a31ca2e4">chop_enable</a>, 1, <span class="stringliteral">&quot;Chop enable&quot;</span>,
              <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a8914016a85c92a468b1d1da3eda53695">chop_vertical_creep</a>, 0, <span class="stringliteral">&quot;Vertical creep&quot;</span>,
            <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a14ec030cc0189e71e05ea6630a1abbf5">chop_split_length</a>, 10000, <span class="stringliteral">&quot;Split Length&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a542ce310766b22a01d277a0751c6986e">chop_same_distance</a>, 2, <span class="stringliteral">&quot;Same distance&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#ad9e49481be94c7fd0fb0a1a3f38ea605">chop_min_outline_points</a>, 6, <span class="stringliteral">&quot;Min Number of Points on Outline&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#ab6afc69fe3401fb2ffd2ab64a19c8824">chop_inside_angle</a>, -50, <span class="stringliteral">&quot;Min Inside Angle Bend&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#aa87cc41f196b1779bec5e1040c4f857e">chop_min_outline_area</a>, 2000, <span class="stringliteral">&quot;Min Outline Area&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#aefabcf9d889b0465eb484fff5a09e93a">chop_split_dist_knob</a>, 0.5, <span class="stringliteral">&quot;Split length adjustment&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#ad362b437458be7cc17aa39e01d36c17e">chop_overlap_knob</a>, 0.9, <span class="stringliteral">&quot;Split overlap adjustment&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a7b115ea8fffc0f54152d294c71da964d">chop_center_knob</a>, 0.15, <span class="stringliteral">&quot;Split center adjustment&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a1e5af8d3ffa2cc52de487e7556a8fdf0">chop_sharpness_knob</a>, 0.06, <span class="stringliteral">&quot;Split sharpness adjustment&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#aa63e4f7808cf2b9a60a11012cb7aee01">chop_width_change_knob</a>, 5.0, <span class="stringliteral">&quot;Width change adjustment&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a>, 100.0, <span class="stringliteral">&quot;OK split limit&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#ad18f0e1c62f90e2be42190a720158862">chop_good_split</a>, 50.0, <span class="stringliteral">&quot;Good split limit&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a0db358c94208627661f5f1cf44ff9d28">chop_x_y_weight</a>, 3, <span class="stringliteral">&quot;X / Y  length weight&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a>, 0, <span class="stringliteral">&quot;Segmentation adjustment debug&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a613a7dc22729f2cb084bc7093a0a4088">assume_fixed_pitch_char_segment</a>, <a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,
              <span class="stringliteral">&quot;include fixed-pitch heuristics in char segmentation&quot;</span>,
              <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#ab5afccbd096fe5f2ce5e3a7ada77a698">use_new_state_cost</a>, <a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,
              <span class="stringliteral">&quot;use new state cost heuristics for segmentation state evaluation&quot;</span>,
              <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a48537af11d756181ab3c13d14154ec3f">heuristic_segcost_rating_base</a>, 1.25,
                <span class="stringliteral">&quot;base factor for adding segmentation cost into word rating.&quot;</span>
                <span class="stringliteral">&quot;It&#39;s a multiplying factor, the larger the value above 1, &quot;</span>
                <span class="stringliteral">&quot;the bigger the effect of segmentation cost.&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a6db610e3739b7660036de4498efd0cc4">heuristic_weight_rating</a>, 1.0,
                <span class="stringliteral">&quot;weight associated with char rating in combined cost of state&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#ae123123f79f4caa864aa437e93872551">heuristic_weight_width</a>, 1000.0,
                <span class="stringliteral">&quot;weight associated with width evidence in combined cost of&quot;</span>
                <span class="stringliteral">&quot; state&quot;</span>, <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a5305fb44c26a61863bb5f7b646fc5bd9">heuristic_weight_seamcut</a>, 0.0,
                <span class="stringliteral">&quot;weight associated with seam cut in combined cost of state&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a3083609f8ad7c4895647674956163c04">heuristic_max_char_wh_ratio</a>, 2.0,
                <span class="stringliteral">&quot;max char width-to-height ratio allowed in segmentation&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a>, 0,
             <span class="stringliteral">&quot;Debug level for wordrec&quot;</span>, <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>, <span class="keyword">false</span>,
              <span class="stringliteral">&quot;Print blamer debug messages&quot;</span>, <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a5f360cd76704a08b03a4738a97e8457b">wordrec_run_blamer</a>, <span class="keyword">false</span>,
              <span class="stringliteral">&quot;Try to set the blame for errors&quot;</span>, <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#ae9c39326c0ed2eaf67c30939714616ba">enable_new_segsearch</a>, <span class="keyword">true</span>,
                   <span class="stringliteral">&quot;Enable new segmentation search path.&quot;</span>, <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a>, 0,
             <span class="stringliteral">&quot;SegSearch debug level&quot;</span>, <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a0a0cfc9fb11d9ecf6961d0cc655f9070">segsearch_max_pain_points</a>, 2000,
             <span class="stringliteral">&quot;Maximum number of pain points stored in the queue&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a7d7641f6361f78664fb541f5ce33fe1b">segsearch_max_futile_classifications</a>, 10,
             <span class="stringliteral">&quot;Maximum number of pain point classifications per word that&quot;</span>
             <span class="stringliteral">&quot;did not result in finding a better word choice.&quot;</span>,
             <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a8fa843163c3e8785a957e422b9256d35">segsearch_max_char_wh_ratio</a>, 2.0,
                <span class="stringliteral">&quot;Maximum character width-to-height ratio&quot;</span>, <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#acb3f291e547f6019e53c8eb0f3b48e70">segsearch_max_fixed_pitch_char_wh_ratio</a>, 2.0,
                <span class="stringliteral">&quot;Maximum character width-to-height ratio for&quot;</span>
                <span class="stringliteral">&quot; fixed-pitch fonts&quot;</span>,
                <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()),
  <a class="code" href="params_8h.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="classtesseract_1_1_wordrec.html#acb91792cc7855324b0a6f495defe3218">save_alt_choices</a>, <span class="keyword">false</span>,
              <span class="stringliteral">&quot;Save alternative paths found during chopping&quot;</span>
              <span class="stringliteral">&quot; and segmentation search&quot;</span>,
              <a class="code" href="classtesseract_1_1_c_c_util.html#ac993425386ae1f73762107299ee8a114">params</a>()) {
  <a class="code" href="classtesseract_1_1_wordrec.html#a143608f482c6c0c4f312740e6a5f5fd9">prev_word_best_choice_</a> = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a> = <span class="keyword">new</span> LanguageModel(&amp;<a class="code" href="classtesseract_1_1_classify.html#a62597f182a5e23c3b8a030c06e699e99">get_fontinfo_table</a>(),
                                      &amp;(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>()));
  <a class="code" href="classtesseract_1_1_wordrec.html#ade3cecfe9b377045db0abe2d06762c1e">pass2_seg_states</a> = 0;
  <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> = 0;
  <a class="code" href="classtesseract_1_1_wordrec.html#af285813a72895f9b09f4e0f3021e721c">num_pushed</a> = 0;
  <a class="code" href="classtesseract_1_1_wordrec.html#abc8f5ea0bc5278f6a3ba1f91b3e797e3">num_popped</a> = 0;
  <a class="code" href="classtesseract_1_1_wordrec.html#a7a4f5e2cb7957a5decbc91eb2d31f87c">fill_lattice_</a> = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acaace271520291eb5c8d5cd02fbe2ed4"></a><!-- doxytag: member="tesseract::Wordrec::~Wordrec" ref="acaace271520291eb5c8d5cd02fbe2ed4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tesseract::Wordrec::~Wordrec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8cpp_source.html#l00144">144</a> of file <a class="el" href="wordrec_8cpp_source.html">wordrec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                  {
  <span class="keyword">delete</span> <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6b73b33a1a883abc117c676b64816c6f"></a><!-- doxytag: member="tesseract::Wordrec::add_point_to_list" ref="a6b73b33a1a883abc117c676b64816c6f" args="(POINT_GROUP point_list, EDGEPT *point)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::add_point_to_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="chop_8h.html#a55d3249c77c934468c72f606ce08354f">POINT_GROUP</a>&#160;</td>
          <td class="paramname"><em>point_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00065">65</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     {
  <a class="code" href="struct_h_e_a_p_e_n_t_r_y.html">HEAPENTRY</a> data;

  <span class="keywordflow">if</span> (<a class="code" href="oldheap_8h.html#adef5e73cd09ccb5b785927a8b7499873">SizeOfHeap</a> (point_list) &lt; <a class="code" href="chop_8h.html#acddb2ccb7be3d768d16abfd230d468eb">MAX_NUM_POINTS</a> - 2) {
    data.<a class="code" href="struct_h_e_a_p_e_n_t_r_y.html#ab04a38c2cfaa44594782f052cbe7414d">Data</a> = (<span class="keywordtype">char</span> *) point;
    data.<a class="code" href="struct_h_e_a_p_e_n_t_r_y.html#aa80cabd8128f5fa5a64e00b2e41e9c54">Key</a> = <a class="code" href="classtesseract_1_1_wordrec.html#adfe6b5aa74fe948a11bf631af18e7494">point_priority</a> (point);
    <a class="code" href="oldheap_8cpp.html#a21a037334c93e1d0e7ae2059203a9cf3">HeapStore</a>(point_list, &amp;data);
  }

<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a> &gt; 2)
    <a class="code" href="plotedges_8cpp.html#a58186147d8297e9600d4176629dc4765">mark_outline</a>(point);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a6cad89fa254226bb11cc6eacfd7f0ffa"></a><!-- doxytag: member="tesseract::Wordrec::angle_change" ref="a6cad89fa254226bb11cc6eacfd7f0ffa" args="(EDGEPT *point1, EDGEPT *point2, EDGEPT *point3)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Wordrec::angle_change </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00087">87</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                        {
  <a class="code" href="struct_t_p_o_i_n_t.html">VECTOR</a> vector1;
  <a class="code" href="struct_t_p_o_i_n_t.html">VECTOR</a> vector2;

  <span class="keywordtype">int</span> angle;
  <span class="keywordtype">float</span> length;

  <span class="comment">/* Compute angle */</span>
  vector1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = point2-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - point1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  vector1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = point2-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - point1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  vector2.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = point3-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - point2-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  vector2.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = point3-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - point2-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  <span class="comment">/* Use cross product */</span>
  length = (float)sqrt((<span class="keywordtype">float</span>)<a class="code" href="vecfuncs_8h.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(vector1) * <a class="code" href="vecfuncs_8h.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(vector2));
  <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>) length == 0)
    <span class="keywordflow">return</span> (0);
  angle = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(floor(asin(<a class="code" href="vecfuncs_8h.html#aec4dedcf89534ed10f6107bf9c6418f3">CROSS</a> (vector1, vector2) /
                                      length) / <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a> * 180.0 + 0.5));

  <span class="comment">/* Use dot product */</span>
  <span class="keywordflow">if</span> (<a class="code" href="vecfuncs_8h.html#aa9c4c0cbfeda43da7c0c28c7a8e836ed">SCALAR</a> (vector1, vector2) &lt; 0)
    angle = 180 - angle;
  <span class="comment">/* Adjust angle */</span>
  <span class="keywordflow">if</span> (angle &gt; 180)
    angle -= 360;
  <span class="keywordflow">if</span> (angle &lt;= -180)
    angle += 360;
  <span class="keywordflow">return</span> (angle);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a488dbf71180ee93aec63ad825be08444"></a><!-- doxytag: member="tesseract::Wordrec::attempt_blob_chop" ref="a488dbf71180ee93aec63ad825be08444" args="(TWERD *word, TBLOB *blob, inT32 blob_number, bool italic_blob, SEAMS seam_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> * tesseract::Wordrec::attempt_blob_chop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_w_e_r_d.html">TWERD</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>blob_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>italic_blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a>&#160;</td>
          <td class="paramname"><em>seam_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00146">146</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                    {
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *next_blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *other_blob;
  <a class="code" href="structseam__record.html">SEAM</a> *seam;

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a34abe5c1b41feff68500d1b83a1f891d">repair_unchopped_blobs</a>)
    <a class="code" href="chopper_8cpp.html#af2a51913c75408354ffd6e5344c30389">preserve_outline_tree</a> (blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a3c9282cad4102157d214bcc6311cda07">outlines</a>);
  other_blob = <span class="keyword">new</span> <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a>;       <span class="comment">/* Make new blob */</span>
  other_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a> = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
  other_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a3c9282cad4102157d214bcc6311cda07">outlines</a> = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a> = other_blob;

  seam = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_classify.html#a22717c4d299d3a52683ad90114b20200">prioritize_division</a>) {
    <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> location;
    <span class="keywordflow">if</span> (<a class="code" href="blobs_8cpp.html#aa87284f5696fb5dd745dafa85539d760">divisible_blob</a>(blob, italic_blob, &amp;location)) {
      seam = <a class="code" href="seam_8cpp.html#ad7bc7a3af5617ff4762369a6aa879ed3">new_seam</a>(0.0<a class="code" href="imgscale_8cpp.html#a469169df397b589e709dc744f1346831">f</a>, location, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    }
  }
  <span class="keywordflow">if</span> (seam == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    seam = <a class="code" href="classtesseract_1_1_wordrec.html#adeb84d8b94a6c87354fc452461de3b39">pick_good_seam</a>(blob);
  <span class="keywordflow">if</span> (seam == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; word-&gt;<a class="code" href="struct_t_w_e_r_d.html#a408678da3281eb77874487aceb44b95c">latin_script</a>) {
    <span class="comment">// If the blob can simply be divided into outlines, then do that.</span>
    <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> location;
    <span class="keywordflow">if</span> (<a class="code" href="blobs_8cpp.html#aa87284f5696fb5dd745dafa85539d760">divisible_blob</a>(blob, italic_blob, &amp;location)) {
      seam = <a class="code" href="seam_8cpp.html#ad7bc7a3af5617ff4762369a6aa879ed3">new_seam</a>(0.0<a class="code" href="imgscale_8cpp.html#a469169df397b589e709dc744f1346831">f</a>, location, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    }
  }
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>) {
    <span class="keywordflow">if</span> (seam != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <a class="code" href="seam_8cpp.html#a2168b2b29d8981405d068256c2b61e3b">print_seam</a> (<span class="stringliteral">&quot;Good seam picked=&quot;</span>, seam);
    }
    <span class="keywordflow">else</span>
      <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;\n** no seam picked *** \n&quot;</span>);
  }
  <span class="keywordflow">if</span> (seam) {
    <a class="code" href="makechop_8cpp.html#a0ead1c1a4df9b2c0861e9da84f4c3079">apply_seam</a>(blob, other_blob, italic_blob, seam);
  }

  <span class="keywordflow">if</span> ((seam == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||
    (blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a3c9282cad4102157d214bcc6311cda07">outlines</a> == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||
    (other_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a3c9282cad4102157d214bcc6311cda07">outlines</a> == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||
    <a class="code" href="chopper_8cpp.html#a8e8e9f6cb587b621054e6ff626a46a23">total_containment</a> (blob, other_blob) ||
    <a class="code" href="chopper_8cpp.html#adde6889c67dfb8661a9911b56bc05c96">check_blob</a> (other_blob) ||
    !(<a class="code" href="chopper_8cpp.html#a5b0b5e54a6dabe1f874383318ad2b172">check_seam_order</a> (blob, seam) &amp;&amp;
    <a class="code" href="chopper_8cpp.html#a5b0b5e54a6dabe1f874383318ad2b172">check_seam_order</a> (other_blob, seam)) ||
    <a class="code" href="chopper_8cpp.html#a0f48320009f85ee2503203c12f7f18f3">any_shared_split_points</a> (seam_list, seam) ||
    !<a class="code" href="seam_8cpp.html#ad5c40a87abe7dd3af10a13614f321be4">test_insert_seam</a>(seam_list, blob_number, blob, word-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>)) {

    blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a> = next_blob;
    <span class="keywordflow">if</span> (seam) {
      <a class="code" href="makechop_8cpp.html#aa6a78540c9d1b2be89f28016c2aa408f">undo_seam</a>(blob, other_blob, seam);
      <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a>(seam);
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>) {
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a> &gt;2)
          <a class="code" href="render_8cpp.html#a2b56bf58c648ddd5efa02b1be0438659">display_blob</a>(blob, <a class="code" href="callcpp_8h.html#a17bc059e437838f094a5a25c2d5ab88fad3163c1fcda01965b692ec2c3122b743">Red</a>);
        <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;\n** seam being removed ** \n&quot;</span>);
      }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    } <span class="keywordflow">else</span> {
      <span class="keyword">delete</span> other_blob;
    }

    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a34abe5c1b41feff68500d1b83a1f891d">repair_unchopped_blobs</a>)
      <a class="code" href="chopper_8cpp.html#a426bc9c96107b36d173f86d8a74f9e8c">restore_outline_tree</a> (blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a3c9282cad4102157d214bcc6311cda07">outlines</a>);
    <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  }
  <span class="keywordflow">return</span> (seam);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad717bb181d1b89496be0b042347d9753"></a><!-- doxytag: member="tesseract::Wordrec::best_first_search" ref="ad717bb181d1b89496be0b042347d9753" args="(CHUNKS_RECORD *chunks_record, BLOB_CHOICE_LIST_VECTOR *best_char_choices, WERD_RES *word, STATE *state, DANGERR *fixpt, STATE *best_state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::best_first_search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>best_char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *&#160;</td>
          <td class="paramname"><em>fixpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>best_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00088">88</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                   {
  <a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *the_search;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> keep_going;
  <a class="code" href="struct_s_t_a_t_e.html">STATE</a> guided_state;   <span class="comment">// not used</span>

  <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> = chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>() - 1;
  the_search = <a class="code" href="classtesseract_1_1_wordrec.html#a6532056b5f7dcdff1a64898d1c3b6bfc">new_search</a>(chunks_record, num_joints, best_char_choices,
                          word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ab4d02a7548dab0a4522f02ed90e48100">raw_choice</a>, state);

  <span class="comment">// The default state is initialized as the best choice.  In order to apply</span>
  <span class="comment">// segmentation adjustment, or any other contextual processing in permute,</span>
  <span class="comment">// we give the best choice a poor rating to force the processed raw choice</span>
  <span class="comment">// to be promoted to best choice.</span>
  the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a468657e9c9b8df182c4890544c530f87">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a8536420fe62adffbfda94a08796db533">set_rating</a>(<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#aa831918b1d217afd4dc547033f642990">WERD_CHOICE::kBadRating</a>);
  <a class="code" href="classtesseract_1_1_wordrec.html#ad9eb2175e0e99588f283809bea8cdf2b">evaluate_state</a>(chunks_record, the_search, fixpt, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>);
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\n\n\n =========== BestFirstSearch ==============\n&quot;</span>);
    word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#aa27589343655d5843a6482dbb3731d5a">print</a>(<span class="stringliteral">&quot;**Initial BestChoice**&quot;</span>);
  }

  <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> worst_priority = 2.0f * <a class="code" href="classtesseract_1_1_wordrec.html#a5ad58d7dcf5cbe7852aefb3b35a9ce33">prioritize_state</a>(chunks_record, the_search);
  <span class="keywordflow">if</span> (worst_priority &lt; <a class="code" href="classtesseract_1_1_wordrec.html#abbb36fc5e6f3b89797c155cfce0b0841">wordrec_worst_state</a>)
    worst_priority = <a class="code" href="classtesseract_1_1_wordrec.html#abbb36fc5e6f3b89797c155cfce0b0841">wordrec_worst_state</a>;
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1) {
    log_state(<span class="stringliteral">&quot;BestFirstSearch&quot;</span>, num_joints, best_state);
  }

  guided_state = *state;
  <span class="keywordflow">do</span> {
                                 <span class="comment">/* Look for answer */</span>
    <a class="code" href="struct_s_t_a_t_e.html">STATE</a> orig_state = *the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>;
    <span class="keywordflow">if</span> (!<a class="code" href="closed_8cpp.html#af42fdf0836fd4f40c478a4c46f4148c5">hash_lookup</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#add2a2c40e476a2a080bf10bd18d393bb">closed_states</a>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>)) {
      guided_state = *(the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>);
      keep_going = <a class="code" href="classtesseract_1_1_wordrec.html#ad9eb2175e0e99588f283809bea8cdf2b">evaluate_state</a>(chunks_record, the_search, fixpt,
                                  word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>);
      <a class="code" href="closed_8cpp.html#ab1be117d24d6b3f8e426fd172588c274">hash_add</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#add2a2c40e476a2a080bf10bd18d393bb">closed_states</a>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>);

      <span class="keywordflow">if</span> (!keep_going ||
          (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a0a90b0a8729b436739b6019c7355301c">num_states</a> &gt; <a class="code" href="classtesseract_1_1_wordrec.html#a57c3675d967208936be65a14e5b64c7d">wordrec_num_seg_states</a>)) {
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1)
          <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Breaking best_first_search on keep_going %s numstates %d\n&quot;</span>,
                  ((keep_going) ? <span class="stringliteral">&quot;T&quot;</span> :<span class="stringliteral">&quot;F&quot;</span>), the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a0a90b0a8729b436739b6019c7355301c">num_states</a>);
        <a class="code" href="states_8h.html#a4f83f140c72e5495f16b40be3dae3b42">free_state</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>);
        <span class="keywordflow">break</span>;
      }

      <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> new_worst_priority = 2.0f * <a class="code" href="classtesseract_1_1_wordrec.html#a5ad58d7dcf5cbe7852aefb3b35a9ce33">prioritize_state</a>(chunks_record,
                                                           the_search);
      <span class="keywordflow">if</span> (new_worst_priority &lt; worst_priority) {
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1)
          <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Lowering WorstPriority %f --&gt; %f\n&quot;</span>,
                  worst_priority, new_worst_priority);
        <span class="comment">// Tighten the threshold for admitting new paths as better search</span>
        <span class="comment">// candidates are found.  After lowering this threshold, we can safely</span>
        <span class="comment">// popout everything that is worse than this score also.</span>
        worst_priority = new_worst_priority;
      }
      <a class="code" href="classtesseract_1_1_wordrec.html#a03931abc6310dd587fdaff3ccf272887">expand_node</a>(worst_priority, chunks_record, the_search);
    }

    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1) {
      log_state(<span class="stringliteral">&quot;Done with&quot;</span>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>, &amp;orig_state);
    }
    <a class="code" href="states_8h.html#a4f83f140c72e5495f16b40be3dae3b42">free_state</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>);
    <a class="code" href="classtesseract_1_1_wordrec.html#abc8f5ea0bc5278f6a3ba1f91b3e797e3">num_popped</a>++;
    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a> = <a class="code" href="classtesseract_1_1_wordrec.html#a24a13455e56ef38b4270f672fa639d62">pop_queue</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#adee178f3348481683069a38f4185c27a">open_states</a>);
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1 &amp;&amp; !the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>)
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;No more states to evalaute after %d evals&quot;</span>, <a class="code" href="classtesseract_1_1_wordrec.html#abc8f5ea0bc5278f6a3ba1f91b3e797e3">num_popped</a>);
  } <span class="keywordflow">while</span> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>);

  state-&gt;<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a> = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a466df91ecf19a56dac83d4654c454e19">best_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a>;
  state-&gt;<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a> = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a466df91ecf19a56dac83d4654c454e19">best_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a>;
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\n\n\n =========== BestFirstSearch ==============\n&quot;</span>);
            <span class="comment">// best_choice-&gt;debug_string().string());</span>
    word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#aa27589343655d5843a6482dbb3731d5a">print</a>(<span class="stringliteral">&quot;**Final BestChoice**&quot;</span>);
  }
  <span class="comment">// save the best_state stats</span>
  <a class="code" href="classtesseract_1_1_wordrec.html#a138fe5d0ffacb19535094f221a9e6511">delete_search</a>(the_search);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2399813e1c656f6638ce7d09ac3a101b"></a><!-- doxytag: member="tesseract::Wordrec::call_matcher" ref="a2399813e1c656f6638ce7d09ac3a101b" args="(const DENORM *denorm, TBLOB *blob)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BLOB_CHOICE_LIST * tesseract::Wordrec::call_matcher </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_d_e_n_o_r_m.html">DENORM</a> *&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tface_8cpp_source.html#l00143">143</a> of file <a class="el" href="tface_8cpp_source.html">tface.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                             {
  <span class="comment">// Rotate the blob for classification if necessary.</span>
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a>* rotated_blob = tessblob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a01a7a878b92170eaa04d65435b0ef4cc">ClassifyNormalizeIfNeeded</a>(&amp;denorm);
  <span class="keywordflow">if</span> (rotated_blob == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    rotated_blob = tessblob;
  }
  BLOB_CHOICE_LIST *ratings = <span class="keyword">new</span> BLOB_CHOICE_LIST();  <span class="comment">// matcher result</span>
  <a class="code" href="classtesseract_1_1_classify.html#a1f058451e32538b4dc2c853b82bc6600">AdaptiveClassifier</a>(rotated_blob, *denorm, ratings, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  <span class="keywordflow">if</span> (rotated_blob != tessblob) {
    <span class="keyword">delete</span> rotated_blob;
    <span class="keyword">delete</span> denorm;
  }
  <span class="keywordflow">return</span> ratings;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a57cb744b40e142b6cb03de0e8998dafc"></a><!-- doxytag: member="tesseract::Wordrec::CallFillLattice" ref="a57cb744b40e142b6cb03de0e8998dafc" args="(const MATRIX &amp;ratings, const LIST &amp;best_choices, const UNICHARSET &amp;unicharset, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::CallFillLattice </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> &amp;&#160;</td>
          <td class="paramname"><em>ratings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="baseapi_8h.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> &amp;&#160;</td>
          <td class="paramname"><em>best_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> &amp;&#160;</td>
          <td class="paramname"><em>unicharset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00187">187</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                  {
    (this-&gt;*<a class="code" href="classtesseract_1_1_wordrec.html#a7a4f5e2cb7957a5decbc91eb2d31f87c">fill_lattice_</a>)(ratings, best_choices, unicharset, blamer_bundle);
  }
</pre></div>
</div>
</div>
<a class="anchor" id="ad5643a29cad973e306bb84fb843397af"></a><!-- doxytag: member="tesseract::Wordrec::cc_recog" ref="ad5643a29cad973e306bb84fb843397af" args="(WERD_RES *word)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> * tesseract::Wordrec::cc_recog </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tface_8cpp_source.html#l00117">117</a> of file <a class="el" href="tface_8cpp_source.html">tface.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().InitChoiceAccum();
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().reset_hyphen_vars(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#afc15fa7c1b5ad55d6772dea0d6865df1">word</a>-&gt;<a class="code" href="class_w_e_r_d.html#a81edde8597a3d9fd8a664d703d332c41">flag</a>(<a class="code" href="werd_8h.html#ad6968adbf8f2cc44adf333ec96efb0bea62efb985a62d85e014ee5ab039dd50ce">W_EOL</a>));
  <a class="code" href="classtesseract_1_1_wordrec.html#a7518e041a8ddab1d1a2b7e609553b8e3">blob_match_table</a>.init_match_table();
  <a class="code" href="class_generic_vector.html">BLOB_CHOICE_LIST_VECTOR</a> *results = <a class="code" href="classtesseract_1_1_wordrec.html#ae9a055f84d35a4f9752f6c838afa11b0">chop_word_main</a>(word);
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().DebugWordChoices();
  <span class="keywordflow">return</span> results;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac05db9a605bcb460b6b1abdaf03ee6c4"></a><!-- doxytag: member="tesseract::Wordrec::ChoiceIsCorrect" ref="ac05db9a605bcb460b6b1abdaf03ee6c4" args="(const UNICHARSET &amp;uni_set, const WERD_CHOICE *choice, const GenericVector&lt; STRING &gt; &amp;truth_text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Wordrec::ChoiceIsCorrect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> &amp;&#160;</td>
          <td class="paramname"><em>uni_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td>
          <td class="paramname"><em>choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_generic_vector.html">GenericVector</a>&lt; <a class="el" href="class_s_t_r_i_n_g.html">STRING</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>truth_text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8cpp_source.html#l00159">159</a> of file <a class="el" href="wordrec_8cpp_source.html">wordrec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                       {
  <span class="keywordflow">if</span> (choice == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
  <span class="keywordtype">int</span> i;
  <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> truth_str;
  <span class="keywordflow">for</span> (i = 0; i &lt; truth_text.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>(); ++i) truth_str += truth_text[i];
  <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> normed_choice_str;
  <span class="keywordflow">for</span> (i = 0; i &lt; choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a7be59abe97b052dd3aaa324aea8c4a6c">length</a>(); ++i) {
    normed_choice_str += uni_set.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a1c9099b44ba61ade75d2a5c6d782f146">get_normed_unichar</a>(choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a6b917b2e6157f7956ff53ca230425ed3">unichar_id</a>(i));
  }
  <span class="keywordflow">return</span> (truth_str == normed_choice_str);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa230ef31fc03aff58ebd4d2de2df68b"></a><!-- doxytag: member="tesseract::Wordrec::choose_best_seam" ref="afa230ef31fc03aff58ebd4d2de2df68b" args="(SEAM_QUEUE seam_queue, SEAM_PILE *seam_pile, SPLIT *split, PRIORITY priority, SEAM **seam_result, TBLOB *blob)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::choose_best_seam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a>&#160;</td>
          <td class="paramname"><em>seam_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a> *&#160;</td>
          <td class="paramname"><em>seam_pile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> **&#160;</td>
          <td class="paramname"><em>seam_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00178">178</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
  <a class="code" href="structseam__record.html">SEAM</a> *seam;
  <span class="keywordtype">char</span> str[80];
  <span class="keywordtype">float</span> my_priority;
  <span class="comment">/* Add seam of split */</span>
  my_priority = priority;
  <span class="keywordflow">if</span> (split != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> split_point = split-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>;
    split_point += split-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>;
    split_point /= 2;
    seam = <a class="code" href="seam_8cpp.html#ad7bc7a3af5617ff4762369a6aa879ed3">new_seam</a>(my_priority, split_point, split, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a> &gt; 1)
      <a class="code" href="seam_8cpp.html#a2168b2b29d8981405d068256c2b61e3b">print_seam</a> (<span class="stringliteral">&quot;Partial priority    &quot;</span>, seam);
    <a class="code" href="findseam_8cpp.html#abed03e7c5b2ef922010b6f56a968ba4d">add_seam_to_queue</a> (seam_queue, seam, (<span class="keywordtype">float</span>) my_priority);

    <span class="keywordflow">if</span> (my_priority &gt; <a class="code" href="classtesseract_1_1_wordrec.html#ad18f0e1c62f90e2be42190a720158862">chop_good_split</a>)
      <span class="keywordflow">return</span>;
  }

  <a class="code" href="class_t_b_o_x.html">TBOX</a> bbox = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>();
  <span class="comment">/* Queue loop */</span>
  <span class="keywordflow">while</span> (<a class="code" href="findseam_8cpp.html#aa7dcabd6f7d0085a7f1674e0257dfdbd">pop_next_seam</a> (seam_queue, seam, my_priority)) {
    <span class="comment">/* Set full priority */</span>
    my_priority = <a class="code" href="classtesseract_1_1_wordrec.html#a239d08f59bdd41a53ab489ca138fa989">seam_priority</a> (seam, bbox.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), bbox.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>());
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>) {
      sprintf (str, <span class="stringliteral">&quot;Full my_priority %0.0f,  &quot;</span>, my_priority);
      <a class="code" href="seam_8cpp.html#a2168b2b29d8981405d068256c2b61e3b">print_seam</a>(str, seam);
    }

    <span class="keywordflow">if</span> ((*seam_result == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <span class="comment">/* Replace answer */</span>
    (*seam_result)-&gt;priority &gt; my_priority) &amp;&amp; my_priority &lt; <a class="code" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a>) {
      <span class="comment">/* No crossing */</span>
      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#ab304a891354f890ed124488273b57b19">constrained_split</a> (seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>, blob)) {
        <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a>(*seam_result);
        <a class="code" href="seam_8h.html#a8c9377a3d389d1f95639e33ef74ff0f2">clone_seam</a>(*seam_result, seam);
        (*seam_result)-&gt;priority = my_priority;
      }
      <span class="keywordflow">else</span> {
        <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a>(seam);
        seam = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        my_priority = <a class="code" href="findseam_8cpp.html#a3fd320d93290a64ff24687ec596f1f61">BAD_PRIORITY</a>;
      }
    }

    <span class="keywordflow">if</span> (my_priority &lt; <a class="code" href="classtesseract_1_1_wordrec.html#ad18f0e1c62f90e2be42190a720158862">chop_good_split</a>) {
      <span class="keywordflow">if</span> (seam)
        <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a>(seam);
      <span class="keywordflow">return</span>;                    <span class="comment">/* Made good answer */</span>
    }

    <span class="keywordflow">if</span> (seam) {
                                 <span class="comment">/* Combine with others */</span>
      <span class="keywordflow">if</span> (<a class="code" href="tessarray_8h.html#a89ee8010120771c8612dc7058b327f84">array_count</a> (*seam_pile) &lt; <a class="code" href="findseam_8cpp.html#aec46796fda71456341a9591d1b42b5f8">MAX_NUM_SEAMS</a>
      <span class="comment">/*|| tessedit_truncate_chopper==0 */</span> ) {
        <a class="code" href="classtesseract_1_1_wordrec.html#a11c3678047ab91731c5628c49e0b9858">combine_seam</a>(seam_queue, *seam_pile, seam);
        *seam_pile = <a class="code" href="tessarray_8cpp.html#ab13e09dec91158c58e0f2427f1d18e07">array_push</a> (*seam_pile, seam);
      }
      <span class="keywordflow">else</span>
        <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a>(seam);
    }

    my_priority = <a class="code" href="findseam_8cpp.html#ab77f2a62fbd55a0b602d878f7937a1eb">best_seam_priority</a> (seam_queue);
    <span class="keywordflow">if</span> ((my_priority &gt; <a class="code" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a>) ||
      (my_priority &gt; <a class="code" href="classtesseract_1_1_wordrec.html#ad18f0e1c62f90e2be42190a720158862">chop_good_split</a> &amp;&amp; split))
      <span class="keywordflow">return</span>;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab39c4eff1c3255a37a38f5f32956e6c2"></a><!-- doxytag: member="tesseract::Wordrec::chop_numbered_blob" ref="ab39c4eff1c3255a37a38f5f32956e6c2" args="(TWERD *word, inT32 blob_number, bool italic_blob, SEAMS seam_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> * tesseract::Wordrec::chop_numbered_blob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_w_e_r_d.html">TWERD</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>blob_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>italic_blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a>&#160;</td>
          <td class="paramname"><em>seam_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00219">219</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     {
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *blob;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x;

  blob = word-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;
  <span class="keywordflow">for</span> (x = 0; x &lt; blob_number; x++)
    blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;

  <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_wordrec.html#a488dbf71180ee93aec63ad825be08444">attempt_blob_chop</a>(word, blob, blob_number,
                           italic_blob, seam_list);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3649b7ab00c4d5947904af99716c6b20"></a><!-- doxytag: member="tesseract::Wordrec::chop_one_blob" ref="a3649b7ab00c4d5947904af99716c6b20" args="(TWERD *word, BLOB_CHOICE_LIST_VECTOR *char_choices, inT32 *blob_number, SEAMS *seam_list, int *right_chop_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Wordrec::chop_one_blob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_w_e_r_d.html">TWERD</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *&#160;</td>
          <td class="paramname"><em>blob_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> *&#160;</td>
          <td class="paramname"><em>seam_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>right_chop_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00441">441</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                   {
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *blob;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x = 0;
  <span class="keywordtype">float</span> rating_ceiling = <a class="code" href="host_8h.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a>;
  BLOB_CHOICE_LIST *answer;
  BLOB_CHOICE_IT answer_it;
  <a class="code" href="structseam__record.html">SEAM</a> *seam;
  <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id = 0;
  <span class="keywordtype">int</span> left_chop_index = 0;

  <span class="keywordflow">do</span> {
    *blob_number = <a class="code" href="classtesseract_1_1_wordrec.html#a8fd3e86b711ba9d54c7eb500eb99c1c4">select_blob_to_split</a>(*char_choices, rating_ceiling, <span class="keyword">false</span>);
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>)
      <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;blob_number = %d\n&quot;</span>, *blob_number);
    <span class="keywordflow">if</span> (*blob_number == -1)
      <span class="keywordflow">return</span> <span class="keyword">false</span>;
    seam = <a class="code" href="classtesseract_1_1_wordrec.html#ab39c4eff1c3255a37a38f5f32956e6c2">chop_numbered_blob</a>(word, *blob_number, <span class="keyword">true</span>, *seam_list);
    <span class="keywordflow">if</span> (seam != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <span class="keywordflow">break</span>;
    <span class="comment">/* Must split null blobs */</span>
    answer = char_choices-&gt;<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(*blob_number);
    <span class="keywordflow">if</span> (answer == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <span class="keywordflow">return</span> <span class="keyword">false</span>;
    answer_it.set_to_list(answer);
    rating_ceiling = answer_it.data()-&gt;rating();  <span class="comment">// try a different blob</span>
  } <span class="keywordflow">while</span> (<span class="keyword">true</span>);
  <span class="comment">/* Split OK */</span>
  <span class="keywordflow">for</span> (blob = word-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>; x &lt; *blob_number; x++) {
    blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
  }
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Chop made blob1:&quot;</span>);
    blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a2e753aa9943276301d68e9f9cad99620">print</a>();
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;and blob2:&quot;</span>);
    blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a2e753aa9943276301d68e9f9cad99620">print</a>();
  }
  *seam_list = <a class="code" href="seam_8cpp.html#abb7a3f834120eb2357b71b09405a2ec6">insert_seam</a>(*seam_list, *blob_number, seam, blob, word-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>);

  answer = char_choices-&gt;<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(*blob_number);
  answer_it.set_to_list(answer);
  unichar_id = answer_it.data()-&gt;unichar_id();
  <span class="keywordtype">float</span> rating = answer_it.data()-&gt;rating() / exp(1.0);
  left_chop_index = atoi(<a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(unichar_id));

  <span class="keyword">delete</span> char_choices-&gt;<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(*blob_number);
  <span class="comment">// combine confidence w/ serial #</span>
  answer = <a class="code" href="classtesseract_1_1_wordrec.html#ae15505acaad8195b1b96de4a393bfc3e">fake_classify_blob</a>(0, rating, -rating);
  <a class="code" href="classtesseract_1_1_wordrec.html#a30984c34a31ca6ef5ee363fc5ebfeff4">modify_blob_choice</a>(answer, left_chop_index);
  char_choices-&gt;<a class="code" href="class_generic_vector.html#a57ca5259541548a97bcfd4d0925a27ff">insert</a>(answer, *blob_number);

  answer = <a class="code" href="classtesseract_1_1_wordrec.html#ae15505acaad8195b1b96de4a393bfc3e">fake_classify_blob</a>(0, rating - 0.125<a class="code" href="imgscale_8cpp.html#a469169df397b589e709dc744f1346831">f</a>, -rating);
  <a class="code" href="classtesseract_1_1_wordrec.html#a30984c34a31ca6ef5ee363fc5ebfeff4">modify_blob_choice</a>(answer, ++*right_chop_index);
  char_choices-&gt;<a class="code" href="class_generic_vector.html#a067b7833ee66238b7b5e230404525fcb">set</a>(answer, *blob_number + 1);
  <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adb4cc59f6e9cca86fbba44ad483ab0b1"></a><!-- doxytag: member="tesseract::Wordrec::chop_one_blob2" ref="adb4cc59f6e9cca86fbba44ad483ab0b1" args="(const GenericVector&lt; TBOX &gt; &amp;boxes, WERD_RES *word_res, SEAMS *seam_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Wordrec::chop_one_blob2 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_generic_vector.html">GenericVector</a>&lt; <a class="el" href="class_t_b_o_x.html">TBOX</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word_res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> *&#160;</td>
          <td class="paramname"><em>seam_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00502">502</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                               {
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> blob_number;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x = 0;
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *blob;
  <a class="code" href="structseam__record.html">SEAM</a> *seam;

  seam = <a class="code" href="classtesseract_1_1_wordrec.html#a60f3ee36bfbef64013dd7b199248cf0e">chop_overlapping_blob</a>(boxes, word_res, &amp;blob_number,
                               <span class="keyword">true</span>, *seam_list);
  <span class="keywordflow">if</span> (seam == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <span class="keyword">false</span>;

  <span class="comment">/* Split OK */</span>
  <span class="keywordflow">for</span> (blob = word_res-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>; x &lt; blob_number; x++) {
    blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
  }
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Chop made blob1:&quot;</span>);
    blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a2e753aa9943276301d68e9f9cad99620">print</a>();
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;and blob2:&quot;</span>);
    blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a2e753aa9943276301d68e9f9cad99620">print</a>();
  }
  *seam_list = <a class="code" href="seam_8cpp.html#abb7a3f834120eb2357b71b09405a2ec6">insert_seam</a>(*seam_list, blob_number, seam, blob,
                           word_res-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>);
  <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a60f3ee36bfbef64013dd7b199248cf0e"></a><!-- doxytag: member="tesseract::Wordrec::chop_overlapping_blob" ref="a60f3ee36bfbef64013dd7b199248cf0e" args="(const GenericVector&lt; TBOX &gt; &amp;boxes, WERD_RES *word_res, inT32 *blob_number, bool italic_blob, SEAMS seam_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> * tesseract::Wordrec::chop_overlapping_blob </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_generic_vector.html">GenericVector</a>&lt; <a class="el" href="class_t_b_o_x.html">TBOX</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word_res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *&#160;</td>
          <td class="paramname"><em>blob_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>italic_blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a>&#160;</td>
          <td class="paramname"><em>seam_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00233">233</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                        {
  <a class="code" href="struct_t_w_e_r_d.html">TWERD</a> *word = word_res-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>;
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *blob;

  *blob_number = 0;
  blob = word-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;
  <span class="keywordflow">while</span> (blob != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> topleft, botright;
    topleft.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>();
    topleft.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();
    botright.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
    botright.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();

    <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> original_topleft, original_botright;
    word_res-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>.<a class="code" href="class_d_e_n_o_r_m.html#a7f208ca46e4fc576432c16bf16a504f0">DenormTransform</a>(topleft, &amp;original_topleft);
    word_res-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>.<a class="code" href="class_d_e_n_o_r_m.html#a7f208ca46e4fc576432c16bf16a504f0">DenormTransform</a>(botright, &amp;original_botright);

    <a class="code" href="class_t_b_o_x.html">TBOX</a> original_box = <a class="code" href="class_t_b_o_x.html">TBOX</a>(original_topleft.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>, original_botright.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>,
                             original_botright.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>, original_topleft.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>);

    <span class="keywordtype">bool</span> almost_equal_box = <span class="keyword">false</span>;
    <span class="keywordtype">int</span> num_overlap = 0;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; boxes.<a class="code" href="class_generic_vector.html#a111b51dd0bf1324cfb69ef70703d8e70">size</a>(); i++) {
      <span class="keywordflow">if</span> (original_box.<a class="code" href="class_t_b_o_x.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(boxes[i]) &gt; 0.125)
        num_overlap++;
      <span class="keywordflow">if</span> (original_box.<a class="code" href="class_t_b_o_x.html#a0f7a028a3ad0355f38e17db45c737384">almost_equal</a>(boxes[i], 3))
        almost_equal_box = <span class="keyword">true</span>;
    }

    <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> location;
    <span class="keywordflow">if</span> (<a class="code" href="blobs_8cpp.html#aa87284f5696fb5dd745dafa85539d760">divisible_blob</a>(blob, italic_blob, &amp;location) ||
        (!almost_equal_box &amp;&amp; num_overlap &gt; 1)) {
      <a class="code" href="structseam__record.html">SEAM</a> *seam = <a class="code" href="classtesseract_1_1_wordrec.html#a488dbf71180ee93aec63ad825be08444">attempt_blob_chop</a>(word, blob, *blob_number,
                                     italic_blob, seam_list);
      <span class="keywordflow">if</span> (seam != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        <span class="keywordflow">return</span> seam;
    }

    *blob_number = *blob_number + 1;
    blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
  }

  *blob_number = -1;
  <span class="keywordflow">return</span> <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae9a055f84d35a4f9752f6c838afa11b0"></a><!-- doxytag: member="tesseract::Wordrec::chop_word_main" ref="ae9a055f84d35a4f9752f6c838afa11b0" args="(WERD_RES *word)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> * tesseract::Wordrec::chop_word_main </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00583">583</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                               {
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *blob;
  <span class="keywordtype">int</span> index;
  <span class="keywordtype">int</span> did_chopping;
  <a class="code" href="struct_s_t_a_t_e.html">STATE</a> state;
  BLOB_CHOICE_LIST *match_result;
  <a class="code" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="class_generic_vector.html">DANGERR</a> fixpt;                 <span class="comment">/*dangerous ambig */</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> bit_count;               <span class="comment">//no of bits</span>

  <a class="code" href="class_generic_vector.html">BLOB_CHOICE_LIST_VECTOR</a> *char_choices = <span class="keyword">new</span> <a class="code" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a>();
  <a class="code" href="class_generic_vector.html">BLOB_CHOICE_LIST_VECTOR</a> *best_char_choices = <span class="keyword">new</span> <a class="code" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a>();

  did_chopping = 0;
  <span class="keywordflow">for</span> (blob = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>, index = 0;
       blob != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>, index++) {
    match_result = <a class="code" href="classtesseract_1_1_wordrec.html#a7127d481d5ea12e3253fb3719fd2170c">classify_blob</a>(blob, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>, <span class="stringliteral">&quot;chop_word:&quot;</span>, <a class="code" href="callcpp_8h.html#a17bc059e437838f094a5a25c2d5ab88fad0784a3f969fe736e8b271a5a161d106">Green</a>,
                                 word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>);
    <span class="keywordflow">if</span> (match_result == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Null classifier output!\n&quot;</span>);
    *char_choices += match_result;
  }
  bit_count = index - 1;
  <a class="code" href="states_8cpp.html#a4d7464b9adab39859eca306e1a41ba7e">set_n_ones</a>(&amp;state, char_choices-&gt;<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() - 1);
  <span class="keywordtype">bool</span> acceptable = <span class="keyword">false</span>;
  <span class="keywordtype">bool</span> replaced = <span class="keyword">false</span>;
  <span class="keywordtype">bool</span> best_choice_updated =
    <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().permute_characters(*char_choices, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>,
                                 word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ab4d02a7548dab0a4522f02ed90e48100">raw_choice</a>);
  <span class="keywordflow">if</span> (best_choice_updated &amp;&amp;
      <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().AcceptableChoice(char_choices, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>, &amp;fixpt,
                                 <a class="code" href="stopper_8h.html#a1902ef46a46c64df98f9a99f6368e4f6a84325e771bcf9b3b1187d3e91455ca26">CHOPPER_CALLER</a>, &amp;replaced)) {
    acceptable = <span class="keyword">true</span>;
  }
  <span class="keywordflow">if</span> (replaced)
    <a class="code" href="classtesseract_1_1_wordrec.html#a63db9b85fa1350dfccfd4d6e548290d4">update_blob_classifications</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>, *char_choices);
  <a class="code" href="classtesseract_1_1_wordrec.html#a6e9f488de12a12cd99ae4c2c55c87bc6">CopyCharChoices</a>(*char_choices, best_char_choices);
  <span class="keywordflow">if</span> (!acceptable) {  <span class="comment">// do more work to find a better choice</span>
    did_chopping = 1;

    <span class="keywordtype">bool</span> best_choice_acceptable = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#adcf4728e9f36b1c55a024165a31ca2e4">chop_enable</a>)
      <a class="code" href="classtesseract_1_1_wordrec.html#ad1164fd07a17960ed06585f0c8aadcdc">improve_by_chopping</a>(word,
                          char_choices,
                          &amp;state,
                          best_char_choices,
                          &amp;fixpt,
                          &amp;best_choice_acceptable);
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>)
      <a class="code" href="seam_8cpp.html#abb1ad769b4318ae71f1a36294d29f5af">print_seams</a> (<span class="stringliteral">&quot;Final seam list:&quot;</span>, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>);

    <span class="keywordflow">if</span> (word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a> != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;
        !<a class="code" href="classtesseract_1_1_wordrec.html#ac05db9a605bcb460b6b1abdaf03ee6c4">ChoiceIsCorrect</a>(*word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a053a2aeeddc26a93a41a04fa08dd688a">uch_set</a>, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>,
                         word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>-&gt;<a class="code" href="struct_blamer_bundle.html#acdff6c1914bf9d06c9461cba0cee1c34">truth_text</a>)) {
      <a class="code" href="classtesseract_1_1_wordrec.html#a2ed3fab8407177af31d446a794617149">set_chopper_blame</a>(word);
    }

    <span class="comment">// The force_word_assoc is almost redundant to enable_assoc.  However,</span>
    <span class="comment">// it is not conditioned on the dict behavior.  For CJK, we need to force</span>
    <span class="comment">// the associator to be invoked.  When we figure out the exact behavior</span>
    <span class="comment">// of dict on CJK, we can remove the flag if it turns out to be redundant.</span>
    <span class="keywordflow">if</span> ((<a class="code" href="classtesseract_1_1_wordrec.html#aba19336c1e635f22b3c27024afd07fed">wordrec_enable_assoc</a> &amp;&amp; !best_choice_acceptable) || <a class="code" href="classtesseract_1_1_wordrec.html#a447f3fa5c50ca545e0a49887ee669ff8">force_word_assoc</a>) {
      ratings = <a class="code" href="classtesseract_1_1_wordrec.html#a3581245a7778654f6fd22c4b3721cf06">word_associator</a>(<span class="keyword">false</span>, word, &amp;state, best_char_choices,
                                &amp;fixpt, &amp;state);
    }
  }
  best_char_choices = <a class="code" href="classtesseract_1_1_wordrec.html#a540decbb88b2e701402b80fd7395d03e">rebuild_current_state</a>(word, &amp;state, best_char_choices,
                                            ratings);

  <span class="comment">// If after running only the chopper best_choice is incorrect and no blame</span>
  <span class="comment">// has been yet set, blame the classifier if best_choice is classifier&#39;s</span>
  <span class="comment">// top choice and is a dictionary word (i.e. language model could not have</span>
  <span class="comment">// helped). Otherwise blame the tradeoff between the classifier and</span>
  <span class="comment">// the old language model (permuters).</span>
  <span class="keywordflow">if</span> (word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a> != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;
      word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>-&gt;<a class="code" href="struct_blamer_bundle.html#a2c84b31d55ab290a9247201cdb46752c">incorrect_result_reason</a> == <a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a4f5ff200b61e6226eb6d74aec188e769">IRR_CORRECT</a> &amp;&amp;
      ratings == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;  <span class="comment">// only the chopper was run</span>
      !<a class="code" href="classtesseract_1_1_wordrec.html#ac05db9a605bcb460b6b1abdaf03ee6c4">ChoiceIsCorrect</a>(*word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a053a2aeeddc26a93a41a04fa08dd688a">uch_set</a>, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>,
                       word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>-&gt;<a class="code" href="struct_blamer_bundle.html#acdff6c1914bf9d06c9461cba0cee1c34">truth_text</a>)) {
    <span class="keywordflow">if</span> (word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a> != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;
        <a class="code" href="classtesseract_1_1_dict.html#af873650961191c2a844eed47c0829421" title="Check all the DAWGs to see if this word is in any of them.">Dict::valid_word_permuter</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a161ac137df2d063a6421728e6aa08fcb">permuter</a>(), <span class="keyword">false</span>)) {
      <span class="comment">// Find out whether best choice is a top choice.</span>
      word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>-&gt;<a class="code" href="struct_blamer_bundle.html#a16968ea622a20067f95506256929ed4b">best_choice_is_dict_and_top_choice</a> = <span class="keyword">true</span>;
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a7be59abe97b052dd3aaa324aea8c4a6c">length</a>(); ++i) {
        BLOB_CHOICE_IT blob_choice_it(best_char_choices-&gt;<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(i));
        <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(!blob_choice_it.empty());
        <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a> *first_choice = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        <span class="keywordflow">for</span> (blob_choice_it.mark_cycle_pt(); !blob_choice_it.cycled_list();
             blob_choice_it.forward()) {  <span class="comment">// find first non-fragment choice</span>
          <span class="keywordflow">if</span> (!(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().get_fragment(
                blob_choice_it.data()-&gt;unichar_id()))) {
            first_choice = blob_choice_it.data();
            <span class="keywordflow">break</span>;
          }
        }
        <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(first_choice != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
        <span class="keywordflow">if</span> (first_choice-&gt;unichar_id() != word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a6b917b2e6157f7956ff53ca230425ed3">unichar_id</a>(i)) {
          word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>-&gt;<a class="code" href="struct_blamer_bundle.html#a16968ea622a20067f95506256929ed4b">best_choice_is_dict_and_top_choice</a> = <span class="keyword">false</span>;
          <span class="keywordflow">break</span>;
        }
      }
    }
    <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> debug;
    <span class="keywordflow">if</span> (word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>-&gt;<a class="code" href="struct_blamer_bundle.html#a16968ea622a20067f95506256929ed4b">best_choice_is_dict_and_top_choice</a>) {
      debug = <span class="stringliteral">&quot;Best choice is: incorrect, top choice, dictionary word&quot;</span>;
      debug += <span class="stringliteral">&quot; with permuter &quot;</span>;
      debug += word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a4a50ea8f60def206dca0053556e2df5f">permuter_name</a>();
    } <span class="keywordflow">else</span> {
      debug = <span class="stringliteral">&quot;Classifier/Old LM tradeoff is to blame&quot;</span>;
    }
    word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>-&gt;<a class="code" href="struct_blamer_bundle.html#a51b9a55eb8acc439f5ade8e97c92da8f">SetBlame</a>(
        word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>-&gt;<a class="code" href="struct_blamer_bundle.html#a16968ea622a20067f95506256929ed4b">best_choice_is_dict_and_top_choice</a> ?
            <a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a9b70b64836694fc6dc4a7a6035b2dad8">IRR_CLASSIFIER</a> : <a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1aec8f086813191f1f038ad3a6e6aa1d04">IRR_CLASS_OLD_LM_TRADEOFF</a>,
        debug, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>, <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);
  }

  <span class="keywordflow">if</span> (word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a> != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; this-&gt;fill_lattice_ != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (ratings == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      ratings = <a class="code" href="classtesseract_1_1_wordrec.html#a3581245a7778654f6fd22c4b3721cf06">word_associator</a>(<span class="keyword">true</span>, word, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    }
    <a class="code" href="classtesseract_1_1_wordrec.html#a57cb744b40e142b6cb03de0e8998dafc">CallFillLattice</a>(*ratings, <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getBestChoices(),
                    *word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a053a2aeeddc26a93a41a04fa08dd688a">uch_set</a>, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>);
  }
  <span class="keywordflow">if</span> (ratings != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 0) {
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Final Ratings Matrix:\n&quot;</span>);
      ratings-&gt;<a class="code" href="class_m_a_t_r_i_x.html#ae0f2489acb8b15666cb306f82ad2c6de">print</a>(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset());
    }
    ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#a165f54b8c3cbafeaecac991f315be843">delete_matrix_pointers</a>();
    <span class="keyword">delete</span> ratings;
  }
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().FilterWordChoices();
  <span class="comment">// TODO(antonova, eger): check that FilterWordChoices() does not filter</span>
  <span class="comment">// out anything useful for word bigram or phrase search.</span>
  <span class="comment">// TODO(antonova, eger): when implementing word bigram and phrase search</span>
  <span class="comment">// we will need to think carefully about how to replace a word with its</span>
  <span class="comment">// alternative choice.</span>
  <span class="comment">// In particular it might be required to save the segmentation state</span>
  <span class="comment">// associated with the word, so that best_char_choices could be updated</span>
  <span class="comment">// by rebuild_current_state() correctly.</span>
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#acb91792cc7855324b0a6f495defe3218">save_alt_choices</a>) <a class="code" href="classtesseract_1_1_wordrec.html#a3e07fc3051cf28bed0511983b8f8b69d">SaveAltChoices</a>(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getBestChoices(), word);
  char_choices-&gt;<a class="code" href="class_generic_vector.html#a98f62dccd75224a60437c2761bd215cd">delete_data_pointers</a>();
  <span class="keyword">delete</span> char_choices;

  <span class="keywordflow">return</span> best_char_choices;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7127d481d5ea12e3253fb3719fd2170c"></a><!-- doxytag: member="tesseract::Wordrec::classify_blob" ref="a7127d481d5ea12e3253fb3719fd2170c" args="(TBLOB *blob, const DENORM &amp;denorm, const char *string, C_COL color, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BLOB_CHOICE_LIST * tesseract::Wordrec::classify_blob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_d_e_n_o_r_m.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="callcpp_8h.html#a17bc059e437838f094a5a25c2d5ab88f">C_COL</a>&#160;</td>
          <td class="paramname"><em>color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordclass_8cpp_source.html#l00062">62</a> of file <a class="el" href="wordclass_8cpp_source.html">wordclass.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                      {
  fflush(stdout);
  BLOB_CHOICE_LIST *choices = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="render_8cpp.html#a12a5464318b34c3d019270c0954f85e0">wordrec_display_all_blobs</a>)
    <a class="code" href="render_8cpp.html#a2b56bf58c648ddd5efa02b1be0438659">display_blob</a>(blob, color);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  choices = <a class="code" href="classtesseract_1_1_wordrec.html#a7518e041a8ddab1d1a2b7e609553b8e3">blob_match_table</a>.get_match(blob);
  <span class="keywordflow">if</span> (choices == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    choices = <a class="code" href="classtesseract_1_1_wordrec.html#a2399813e1c656f6638ce7d09ac3a101b">call_matcher</a>(&amp;denorm, blob);
    <a class="code" href="classtesseract_1_1_wordrec.html#a7518e041a8ddab1d1a2b7e609553b8e3">blob_match_table</a>.put_match(blob, choices);
    <span class="comment">// If a blob with the same bounding box as one of the truth character</span>
    <span class="comment">// bounding boxes is not classified as the corresponding truth character</span>
    <span class="comment">// blame character classifier for incorrect answer.</span>
    <span class="keywordflow">if</span> (blamer_bundle != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ad7dc9029fe6de5f5554046773cb15854">truth_has_char_boxes</a> &amp;&amp;
        blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a2c84b31d55ab290a9247201cdb46752c">incorrect_result_reason</a> == <a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a4f5ff200b61e6226eb6d74aec188e769">IRR_CORRECT</a>) {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = 0; b &lt; blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a0fac62f7f13e3e684c5ef433bfcf3158">norm_truth_word</a>.<a class="code" href="classtesseract_1_1_box_word.html#afe001fe8fb7f2d3725b2ac2f542e9878">length</a>(); ++b) {
        <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a> &amp;truth_box = blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a0fac62f7f13e3e684c5ef433bfcf3158">norm_truth_word</a>.<a class="code" href="classtesseract_1_1_box_word.html#a022cfe52a644e9e800595f014b1fbcf5">BlobBox</a>(b);
        <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a> &amp;blob_box = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>();
        <span class="comment">// Note that we are more strict on the bounding box boundaries here</span>
        <span class="comment">// than in other places (chopper, segmentation search), since we do</span>
        <span class="comment">// not have the ability to check the previous and next bounding box.</span>
        <span class="keywordflow">if</span> (blob_box.<a class="code" href="class_t_b_o_x.html#ae75357efb10b9c990eaa4a5cf954722c">x_almost_equal</a>(truth_box,
                                    blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a4df5a4ea5a4ba6f973b3c987c95a8a39">norm_box_tolerance</a>/2)) {
          BLOB_CHOICE_IT choices_it(choices);
          <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;
          <span class="keywordtype">bool</span> incorrect_adapted = <span class="keyword">false</span>;
          <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> incorrect_adapted_id = INVALID_UNICHAR_ID;
          <span class="keyword">const</span> <span class="keywordtype">char</span> *truth_str = blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#acdff6c1914bf9d06c9461cba0cee1c34">truth_text</a>[b].string();
          <span class="keywordflow">for</span> (choices_it.mark_cycle_pt(); !choices_it.cycled_list();
              choices_it.forward()) {
            <span class="keywordflow">if</span> (strcmp(truth_str, <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().get_normed_unichar(
                choices_it.data()-&gt;unichar_id())) == 0) {
              found = <span class="keyword">true</span>;
              <span class="keywordflow">break</span>;
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (choices_it.data()-&gt;adapted()) {
              incorrect_adapted = <span class="keyword">true</span>;
              incorrect_adapted_id = choices_it.data()-&gt;unichar_id();
            }
          }  <span class="comment">// end choices_it for loop</span>
          <span class="keywordflow">if</span> (!found) {
            <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> debug = <span class="stringliteral">&quot;unichar &quot;</span>;
            debug += truth_str;
            debug += <span class="stringliteral">&quot; not found in classification list&quot;</span>;
            blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a51b9a55eb8acc439f5ade8e97c92da8f">SetBlame</a>(<a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a9b70b64836694fc6dc4a7a6035b2dad8">IRR_CLASSIFIER</a>, debug,
                                    <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);
          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (incorrect_adapted) {
            <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> debug = <span class="stringliteral">&quot;better rating for adapted &quot;</span>;
            debug += <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().id_to_unichar(
                incorrect_adapted_id);
            debug += <span class="stringliteral">&quot; than for correct &quot;</span>;
            debug += truth_str;
            blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a51b9a55eb8acc439f5ade8e97c92da8f">SetBlame</a>(<a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a4779671dba2b7a68bfc0a4ca7e16a56b">IRR_ADAPTION</a>, debug,
                                    <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);
          }
          <span class="keywordflow">break</span>;
        }
      }  <span class="comment">// end iterating over blamer_bundle-&gt;norm_truth_word</span>
    }
  }
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_classify.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a> &amp;&amp; <span class="keywordtype">string</span>)
    <a class="code" href="ratngs_8cpp.html#a2de5b7d5a020bb9823091dbece4ea36e">print_ratings_list</a>(<span class="keywordtype">string</span>, choices, <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset());

  <span class="keywordflow">if</span> (<a class="code" href="render_8cpp.html#a4abb79c2e47e2c18898d51c784b733de">wordrec_blob_pause</a>)
    <a class="code" href="callcpp_8cpp.html#a51dc37eb580fe7f758275685e5ce0d59">window_wait</a>(<a class="code" href="render_8cpp.html#a062919012f2898b36333bae0c19fa89d">blob_window</a>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  <span class="keywordflow">return</span> (choices);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad59946532b08a90f940ecfa994b06653"></a><!-- doxytag: member="tesseract::Wordrec::classify_piece" ref="ad59946532b08a90f940ecfa994b06653" args="(TBLOB *pieces, const DENORM &amp;denorm, SEAMS seams, inT16 start, inT16 end, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BLOB_CHOICE_LIST * tesseract::Wordrec::classify_piece </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>pieces</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_d_e_n_o_r_m.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a>&#160;</td>
          <td class="paramname"><em>seams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pieces_8cpp_source.html#l00075">75</a> of file <a class="el" href="pieces_8cpp_source.html">pieces.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                       {
  BLOB_CHOICE_LIST *choices;
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *blob;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x;

  <a class="code" href="seam_8cpp.html#a919dc51833c934e6738e5e18d2dd43f6">join_pieces</a>(pieces, seams, start, end);
  <span class="keywordflow">for</span> (blob = pieces, x = 0; x &lt; start; x++) {
    blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
  }
  choices = <a class="code" href="classtesseract_1_1_wordrec.html#a7127d481d5ea12e3253fb3719fd2170c">classify_blob</a>(blob, denorm, <span class="stringliteral">&quot;pieces:&quot;</span>, <a class="code" href="callcpp_8h.html#a17bc059e437838f094a5a25c2d5ab88fab548046646b36c12aa6ba841de500094">White</a>, blamer_bundle);

  <a class="code" href="seam_8cpp.html#ac76b2d230d4c44cb0346f516b8a7134a">break_pieces</a>(blob, seams, start, end);
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="plotseg_8cpp.html#a2aed15ed158681a35b22e37ce65cbc3f">wordrec_display_segmentations</a> &gt; 2) {
    <a class="code" href="struct_s_t_a_t_e.html">STATE</a> current_state;
    <a class="code" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a> chunk_groups;
    <a class="code" href="states_8cpp.html#a4d7464b9adab39859eca306e1a41ba7e">set_n_ones</a> (&amp;current_state, <a class="code" href="tessarray_8h.html#a89ee8010120771c8612dc7058b327f84">array_count</a>(seams));
    chunk_groups = <a class="code" href="states_8cpp.html#a65830cfe21c29feec92f03627b51ff65">bin_to_chunks</a>(&amp;current_state, <a class="code" href="tessarray_8h.html#a89ee8010120771c8612dc7058b327f84">array_count</a>(seams));
    <a class="code" href="plotseg_8cpp.html#ae426d5dd68f3489fbf214e6becc91815">display_segmentation</a>(pieces, chunk_groups);
    <a class="code" href="callcpp_8cpp.html#a51dc37eb580fe7f758275685e5ce0d59">window_wait</a>(<a class="code" href="plotseg_8cpp.html#a8ad48aa579fd5ee6e929da14bbb9350f">segm_window</a>);
    <a class="code" href="freelist_8cpp.html#ab462a857e5edf360ae4881bcc92a0bcf">memfree</a>(chunk_groups);
  }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  <span class="keywordflow">return</span> (choices);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a11c3678047ab91731c5628c49e0b9858"></a><!-- doxytag: member="tesseract::Wordrec::combine_seam" ref="a11c3678047ab91731c5628c49e0b9858" args="(SEAM_QUEUE seam_queue, SEAM_PILE seam_pile, SEAM *seam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::combine_seam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a>&#160;</td>
          <td class="paramname"><em>seam_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a>&#160;</td>
          <td class="paramname"><em>seam_pile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *&#160;</td>
          <td class="paramname"><em>seam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>tessedit_fix_sideways_chops || </p>

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00259">259</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                       {
  <span class="keyword">register</span> <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x;
  <span class="keyword">register</span> <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> dist;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> bottom1, top1;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> bottom2, top2;

  <a class="code" href="structseam__record.html">SEAM</a> *new_one;
  <a class="code" href="structseam__record.html">SEAM</a> *this_one;

  bottom1 = seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> &gt;= bottom1)
    top1 = seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  <span class="keywordflow">else</span> {
    top1 = bottom1;
    bottom1 = seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  }
  <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a> != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    bottom2 = seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
    <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> &gt;= bottom2)
      top2 = seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
    <span class="keywordflow">else</span> {
      top2 = bottom2;
      bottom2 = seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
    }
  }
  <span class="keywordflow">else</span> {
    bottom2 = bottom1;
    top2 = top1;
  }
  <a class="code" href="tessarray_8h.html#a6cb2253ca40c87d6ee706418575fb3e5">array_loop</a>(seam_pile, x) {
    this_one = (<a class="code" href="structseam__record.html">SEAM</a> *) <a class="code" href="tessarray_8h.html#a290cd2ea119e279ad48b57fbe5ca1aad">array_value</a> (seam_pile, x);
    dist = seam-&gt;<a class="code" href="structseam__record.html#a62ddded2ea46187c395f40823d036ed3">location</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - this_one-&gt;<a class="code" href="structseam__record.html#a62ddded2ea46187c395f40823d036ed3">location</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
    <span class="keywordflow">if</span> (-<a class="code" href="findseam_8cpp.html#a137ecd53cc1a098b2943e48aff99c6b6">SPLIT_CLOSENESS</a> &lt; dist &amp;&amp;
      dist &lt; <a class="code" href="findseam_8cpp.html#a137ecd53cc1a098b2943e48aff99c6b6">SPLIT_CLOSENESS</a> &amp;&amp;
    seam-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a> + this_one-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a> &lt; <a class="code" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a>) {
      <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> split1_point1_y = this_one-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
      <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> split1_point2_y = this_one-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
      <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> split2_point1_y = 0;
      <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> split2_point2_y = 0;
      <span class="keywordflow">if</span> (this_one-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>) {
        split2_point1_y = this_one-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
        split2_point2_y = this_one-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
      }
      <span class="keywordflow">if</span> (
        (
          <span class="comment">/* this_one-&gt;split1 always exists */</span>
          (
            ((split1_point1_y &gt;= top1 &amp;&amp; split1_point2_y &gt;= top1) ||
             (split1_point1_y &lt;= bottom1 &amp;&amp; split1_point2_y &lt;= bottom1))
            &amp;&amp;
            ((split1_point1_y &gt;= top2 &amp;&amp; split1_point2_y &gt;= top2) ||
             (split1_point1_y &lt;= bottom2 &amp;&amp; split1_point2_y &lt;= bottom2))
          )
        )
        &amp;&amp;
        (
          this_one-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a> == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||
          (
            ((split2_point1_y &gt;= top1 &amp;&amp; split2_point2_y &gt;= top1) ||
             (split2_point1_y &lt;= bottom1 &amp;&amp; split2_point2_y &lt;= bottom1))
            &amp;&amp;
            ((split2_point1_y &gt;= top2 &amp;&amp; split2_point2_y &gt;= top2) ||
             (split2_point1_y &lt;= bottom2 &amp;&amp; split2_point2_y &lt;= bottom2))
          )
        )
      ) {
        new_one = <a class="code" href="seam_8cpp.html#ab0747cde950e63b99888b8dcbc654177">join_two_seams</a> (seam, this_one);
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a> &gt; 1)
          <a class="code" href="seam_8cpp.html#a2168b2b29d8981405d068256c2b61e3b">print_seam</a> (<span class="stringliteral">&quot;Combo priority       &quot;</span>, new_one);
        <a class="code" href="findseam_8cpp.html#abed03e7c5b2ef922010b6f56a968ba4d">add_seam_to_queue</a> (seam_queue, new_one, new_one-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a>);
      }
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab304a891354f890ed124488273b57b19"></a><!-- doxytag: member="tesseract::Wordrec::constrained_split" ref="ab304a891354f890ed124488273b57b19" args="(SPLIT *split, TBLOB *blob)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> tesseract::Wordrec::constrained_split </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00343">343</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                          {
  <a class="code" href="struct_t_e_s_s_l_i_n_e.html">TESSLINE</a> *outline;

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#ada66e05fa0ae8dc79b9de78f5f6efadf">is_little_chunk</a> (split-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, split-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>))
    <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);

  <span class="keywordflow">for</span> (outline = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a3c9282cad4102157d214bcc6311cda07">outlines</a>; outline; outline = outline-&gt;<a class="code" href="struct_t_e_s_s_l_i_n_e.html#a0fb224d43ea53a791f0957fa92793bef">next</a>) {
    <span class="keywordflow">if</span> (<a class="code" href="gradechop_8h.html#a73777293ec1aaad3fb42a28dbebf6201">split_bounds_overlap</a> (split, outline) &amp;&amp;
    <a class="code" href="classtesseract_1_1_wordrec.html#a6ad6a99cdee8d3a3ceaec40afade8714">crosses_outline</a> (split-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, split-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>, outline-&gt;<a class="code" href="struct_t_e_s_s_l_i_n_e.html#a0ab1e26b1dae548f0bd3c096c6183b18">loop</a>)) {
      <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
    }
  }
  <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e9f488de12a12cd99ae4c2c55c87bc6"></a><!-- doxytag: member="tesseract::Wordrec::CopyCharChoices" ref="a6e9f488de12a12cd99ae4c2c55c87bc6" args="(const BLOB_CHOICE_LIST_VECTOR &amp;from, BLOB_CHOICE_LIST_VECTOR *to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::CopyCharChoices </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> &amp;&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8cpp_source.html#l00148">148</a> of file <a class="el" href="wordrec_8cpp_source.html">wordrec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                           {
  to-&gt;<a class="code" href="class_generic_vector.html#a98f62dccd75224a60437c2761bd215cd">delete_data_pointers</a>();
  to-&gt;<a class="code" href="class_generic_vector.html#a9cdbff49b186574b83e43afba606fdd9">clear</a>();
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; from.<a class="code" href="class_generic_vector.html#a111b51dd0bf1324cfb69ef70703d8e70">size</a>(); ++i) {
    BLOB_CHOICE_LIST *cc_list = <span class="keyword">new</span> BLOB_CHOICE_LIST();
    cc_list-&gt;deep_copy(from[i], &amp;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#af3f12ffe754a76bf2abbb82a001336f9">BLOB_CHOICE::deep_copy</a>);
    to-&gt;<a class="code" href="class_generic_vector.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(cc_list);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6ad6a99cdee8d3a3ceaec40afade8714"></a><!-- doxytag: member="tesseract::Wordrec::crosses_outline" ref="a6ad6a99cdee8d3a3ceaec40afade8714" args="(EDGEPT *p0, EDGEPT *p1, EDGEPT *outline)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Wordrec::crosses_outline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>p0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>outline</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="outlines_8cpp_source.html#l00048">48</a> of file <a class="el" href="outlines_8cpp_source.html">outlines.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                              {  <span class="comment">/* Outline to check */</span>
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *pt = outline;
  <span class="keywordflow">do</span> {
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#af5466c6b57ff40780c0be86b1330f1cf">is_crossed</a> (p0-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, p1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, pt-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, pt-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>))
      <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
    pt = pt-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
  }
  <span class="keywordflow">while</span> (pt != outline);
  <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a15fb0ba7f97dd0ad49f30fb7861717c4"></a><!-- doxytag: member="tesseract::Wordrec::delete_seam_pile" ref="a15fb0ba7f97dd0ad49f30fb7861717c4" args="(SEAM_PILE seam_pile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::delete_seam_pile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a>&#160;</td>
          <td class="paramname"><em>seam_pile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00365">365</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                  {
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x;

  <a class="code" href="tessarray_8h.html#a6cb2253ca40c87d6ee706418575fb3e5">array_loop</a>(seam_pile, x) {
    <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a> ((<a class="code" href="structseam__record.html">SEAM</a> *) <a class="code" href="tessarray_8h.html#a290cd2ea119e279ad48b57fbe5ca1aad">array_value</a> (seam_pile, x));
  }
  <a class="code" href="tessarray_8h.html#aa10b4761a8b4ccd6d4a6c7e792671f78">array_free</a>(seam_pile);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a138fe5d0ffacb19535094f221a9e6511"></a><!-- doxytag: member="tesseract::Wordrec::delete_search" ref="a138fe5d0ffacb19535094f221a9e6511" args="(SEARCH_RECORD *the_search)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::delete_search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *&#160;</td>
          <td class="paramname"><em>the_search</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>delete_search</p>
<p>Terminate the current search and free all the memory involved. </p>

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00179">179</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                     {
  <span class="keywordtype">float</span> closeness;

  closeness = (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a> ?
    (<a class="code" href="bitvec_8cpp.html#a5e8aad36a4fa1ed6100fc1504a2100b5">hamming_distance</a>(reinterpret_cast&lt;uinT32*&gt;(the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#aca35760bea50d16acf102376bb0b2716">first_state</a>),
                      reinterpret_cast&lt;uinT32*&gt;(the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a466df91ecf19a56dac83d4654c454e19">best_state</a>), 2) /
      (float) the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>) : 0.0f);

  <a class="code" href="states_8h.html#a4f83f140c72e5495f16b40be3dae3b42">free_state</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#aca35760bea50d16acf102376bb0b2716">first_state</a>);
  <a class="code" href="states_8h.html#a4f83f140c72e5495f16b40be3dae3b42">free_state</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a466df91ecf19a56dac83d4654c454e19">best_state</a>);

  <a class="code" href="closed_8h.html#a4075db38ca70b8f395dc47e7b6565979">free_hash_table</a>(the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#add2a2c40e476a2a080bf10bd18d393bb">closed_states</a>);
  <a class="code" href="oldheap_8cpp.html#a66bcae55ce37fec5afd5fdeb5a879d37">FreeHeapData</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#adee178f3348481683069a38f4185c27a">open_states</a>, (<a class="code" href="cutil_8h.html#a840df4080fe3d271893f7db1ff27cc90">void_dest</a>) <a class="code" href="states_8h.html#a4f83f140c72e5495f16b40be3dae3b42">free_state</a>);

  <a class="code" href="freelist_8cpp.html#ab462a857e5edf360ae4881bcc92a0bcf">memfree</a>(the_search);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a13f2efa710b3a68e30e8bc2f69bee578"></a><!-- doxytag: member="tesseract::Wordrec::dict_word" ref="a13f2efa710b3a68e30e8bc2f69bee578" args="(const WERD_CHOICE &amp;word)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Wordrec::dict_word </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> &amp;&#160;</td>
          <td class="paramname"><em>word</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tface_8cpp_source.html#l00133">133</a> of file <a class="el" href="tface_8cpp_source.html">tface.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
  <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().valid_word(word);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae0e2f8d5761f19008b20943a6e8ba130"></a><!-- doxytag: member="tesseract::Wordrec::end_recog" ref="ae0e2f8d5761f19008b20943a6e8ba130" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Wordrec::end_recog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tface_8cpp_source.html#l00067">67</a> of file <a class="el" href="tface_8cpp_source.html">tface.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                       {
  <a class="code" href="classtesseract_1_1_wordrec.html#a5b44d020ea7f9d19d2e8f71b4e83113c">program_editdown</a> (0);

  <span class="keywordflow">return</span> (0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a17730ff30d62f74a4a14904664bd8656"></a><!-- doxytag: member="tesseract::Wordrec::evaluate_chunks" ref="a17730ff30d62f74a4a14904664bd8656" args="(CHUNKS_RECORD *chunks_record, SEARCH_STATE search_state, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> * tesseract::Wordrec::evaluate_chunks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a>&#160;</td>
          <td class="paramname"><em>search_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>evaluate_chunks</p>
<p>A particular word level segmentation has been chosen. Evaluation this to find the word list that corresponds to it. </p>

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00203">203</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                               {
  <a class="code" href="class_generic_vector.html">BLOB_CHOICE_LIST_VECTOR</a> *char_choices = <span class="keyword">new</span> <a class="code" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a>();
  BLOB_CHOICE_LIST *blob_choices;
  BLOB_CHOICE_IT blob_choice_it;
  <span class="keywordtype">int</span> i;
  <span class="keywordtype">int</span> x = 0;
  <span class="keywordtype">int</span> y;

  <span class="comment">// Iterate sub-paths.</span>
  <span class="keywordflow">for</span> (i = 1; i &lt;= search_state[0] + 1; i++) {
    <span class="keywordflow">if</span> (i &gt; search_state[0])
      y = <a class="code" href="blobs_8cpp.html#aa8048f4c65af2775452ad5d4dfbca053">count_blobs</a> (chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a953645d7dbb5789cf5feb918df3e914e">chunks</a>) - 1;
    <span class="keywordflow">else</span>
      y = x + search_state[i];

    <span class="comment">// Process one square.</span>

    <span class="comment">// Classify if needed.</span>
    blob_choices = <a class="code" href="classtesseract_1_1_wordrec.html#aab16c53ccf9c888874c2e7ae65b6ed04">get_piece_rating</a>(chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>,
                                    chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a953645d7dbb5789cf5feb918df3e914e">chunks</a>,
                                    chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aa3826aaf2a5a7a76b000859ace1f8602">word_res</a>-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>,
                                    chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aca32a87e5f9e4d04777ca3551b65b27c">splits</a>,
                                    x, y, blamer_bundle);

    <span class="keywordflow">if</span> (blob_choices == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="keyword">delete</span> char_choices;
      <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    }

    <span class="comment">// Add permuted ratings.</span>
    blob_choice_it.set_to_list(blob_choices);
    <a class="code" href="classtesseract_1_1_wordrec.html#af7a36436e7e7fd0691bc093814fc2b62">last_segmentation</a>[i - 1].certainty = blob_choice_it.data()-&gt;certainty();
    <a class="code" href="classtesseract_1_1_wordrec.html#af7a36436e7e7fd0691bc093814fc2b62">last_segmentation</a>[i - 1].match = blob_choice_it.data()-&gt;rating();

    <a class="code" href="classtesseract_1_1_wordrec.html#af7a36436e7e7fd0691bc093814fc2b62">last_segmentation</a>[i - 1].width =
      <a class="code" href="classtesseract_1_1_associate_utils.html#a3837f65de5a035f815172585412e6023">AssociateUtils::GetChunksWidth</a>(chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a3ac3e771d771818dff8eed190d11d50f">chunk_widths</a>, x, y);
    <a class="code" href="classtesseract_1_1_wordrec.html#af7a36436e7e7fd0691bc093814fc2b62">last_segmentation</a>[i - 1].gap =
      <a class="code" href="classtesseract_1_1_associate_utils.html#a0afb66af80c912a79c20385eba26927d">AssociateUtils::GetChunksGap</a>(chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a3ac3e771d771818dff8eed190d11d50f">chunk_widths</a>, y);

    *char_choices += blob_choices;
    x = y + 1;
  }
  <span class="keywordflow">return</span> (char_choices);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad9eb2175e0e99588f283809bea8cdf2b"></a><!-- doxytag: member="tesseract::Wordrec::evaluate_state" ref="ad9eb2175e0e99588f283809bea8cdf2b" args="(CHUNKS_RECORD *chunks_record, SEARCH_RECORD *the_search, DANGERR *fixpt, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> tesseract::Wordrec::evaluate_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *&#160;</td>
          <td class="paramname"><em>the_search</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *&#160;</td>
          <td class="paramname"><em>fixpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00256">256</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                           {
  <a class="code" href="class_generic_vector.html">BLOB_CHOICE_LIST_VECTOR</a> *char_choices;
  <a class="code" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a> chunk_groups;
  <span class="keywordtype">float</span> rating_limit = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a468657e9c9b8df182c4890544c530f87">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a52ea24dcb5ff15ad8aee3fd774622216">rating</a>();
  <span class="keywordtype">bool</span> keep_going = <span class="keyword">true</span>;
  <a class="code" href="states_8h.html#a5fa79db9c64231406ef3807adfad627d">PIECES_STATE</a> widths;

  the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a0a90b0a8729b436739b6019c7355301c">num_states</a>++;
  chunk_groups = <a class="code" href="states_8cpp.html#a65830cfe21c29feec92f03627b51ff65">bin_to_chunks</a>(the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>,
                               the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>);
  <a class="code" href="states_8cpp.html#acd6fd8bb4f29a8f5674ec05b47e63466">bin_to_pieces</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>, widths);
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1) {
    log_state(<span class="stringliteral">&quot;Evaluating state&quot;</span>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>,
              the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>);
  }
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().LogNewSegmentation(widths);

  char_choices = <a class="code" href="classtesseract_1_1_wordrec.html#a17730ff30d62f74a4a14904664bd8656">evaluate_chunks</a>(chunks_record, chunk_groups, blamer_bundle);
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().SetWordsegRatingAdjustFactor(-1.0<a class="code" href="imgscale_8cpp.html#a469169df397b589e709dc744f1346831">f</a>);
  <span class="keywordtype">bool</span> updated_best_choice = <span class="keyword">false</span>;
  <span class="keywordflow">if</span> (char_choices != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; char_choices-&gt;<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() &gt; 0) {
    <span class="comment">// Compute the segmentation cost and include the cost in word rating.</span>
    <span class="comment">// TODO(dsl): We should change the SEARCH_RECORD to store this cost</span>
    <span class="comment">// from state evaluation and avoid recomputing it here.</span>
    <a class="code" href="classtesseract_1_1_wordrec.html#a5ad58d7dcf5cbe7852aefb3b35a9ce33">prioritize_state</a>(chunks_record, the_search);
    <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().SetWordsegRatingAdjustFactor(the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#afc64aa6140730c7cc307c734548d2d0f">segcost_bias</a>);
    updated_best_choice =
      <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().permute_characters(*char_choices,
                                   the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a468657e9c9b8df182c4890544c530f87">best_choice</a>,
                                   the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ad25cff29f63f480a293196c094a66020">raw_choice</a>);
    <span class="keywordtype">bool</span> replaced = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (updated_best_choice) {
      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().AcceptableChoice(char_choices, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a468657e9c9b8df182c4890544c530f87">best_choice</a>,
                                     <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="stopper_8h.html#a1902ef46a46c64df98f9a99f6368e4f6ab3ee8ad8499dfa102c04e8cb8cb41cdc">ASSOCIATOR_CALLER</a>, &amp;replaced)) {
        keep_going = <span class="keyword">false</span>;
      }
      <a class="code" href="classtesseract_1_1_wordrec.html#a6e9f488de12a12cd99ae4c2c55c87bc6">CopyCharChoices</a>(*char_choices, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a39e4f8b8e4e11c6b2ca2053ff51fa798">best_char_choices</a>);
    }
  }
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().SetWordsegRatingAdjustFactor(-1.0<a class="code" href="imgscale_8cpp.html#a469169df397b589e709dc744f1346831">f</a>);

<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="plotseg_8cpp.html#a2aed15ed158681a35b22e37ce65cbc3f">wordrec_display_segmentations</a>) {
    <a class="code" href="plotseg_8cpp.html#ae426d5dd68f3489fbf214e6becc91815">display_segmentation</a> (chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a953645d7dbb5789cf5feb918df3e914e">chunks</a>, chunk_groups);
    <span class="keywordflow">if</span> (<a class="code" href="plotseg_8cpp.html#a2aed15ed158681a35b22e37ce65cbc3f">wordrec_display_segmentations</a> &gt; 1)
      <a class="code" href="callcpp_8cpp.html#a51dc37eb580fe7f758275685e5ce0d59">window_wait</a>(<a class="code" href="plotseg_8cpp.html#a8ad48aa579fd5ee6e929da14bbb9350f">segm_window</a>);
  }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  <span class="keywordflow">if</span> (rating_limit != the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a468657e9c9b8df182c4890544c530f87">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a52ea24dcb5ff15ad8aee3fd774622216">rating</a>()) {
    <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(updated_best_choice);
    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ab881f72bd7d5c4d14093681af511a596">before_best</a> = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a0a90b0a8729b436739b6019c7355301c">num_states</a>;
    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a466df91ecf19a56dac83d4654c454e19">best_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a> = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a>;
    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a466df91ecf19a56dac83d4654c454e19">best_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a> = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a>;
    <a class="code" href="classtesseract_1_1_wordrec.html#a35746f8e970b19443f459c060a8775c9">replace_char_widths</a>(chunks_record, chunk_groups);
  } <span class="keywordflow">else</span> {
    <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(!updated_best_choice);
    <span class="keywordflow">if</span> (char_choices != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) fixpt-&gt;<a class="code" href="class_generic_vector.html#a9cdbff49b186574b83e43afba606fdd9">clear</a>();
  }

  <span class="keywordflow">if</span> (char_choices != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keyword">delete</span> char_choices;
  <a class="code" href="freelist_8cpp.html#ab462a857e5edf360ae4881bcc92a0bcf">memfree</a>(chunk_groups);

  <span class="keywordflow">return</span> (keep_going);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a03931abc6310dd587fdaff3ccf272887"></a><!-- doxytag: member="tesseract::Wordrec::expand_node" ref="a03931abc6310dd587fdaff3ccf272887" args="(FLOAT32 worst_priority, CHUNKS_RECORD *chunks_record, SEARCH_RECORD *the_search)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::expand_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>worst_priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *&#160;</td>
          <td class="paramname"><em>the_search</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00499">499</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                     {
  <a class="code" href="struct_s_t_a_t_e.html">STATE</a> old_state;
  <span class="keywordtype">int</span> x;
  <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> mask = 1 &lt;&lt; (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a> - 1 - 32);

  old_state.<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a> = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a>;
  old_state.<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a> = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a>;

  <span class="comment">// We need to expand the search more intelligently, or we get stuck</span>
  <span class="comment">// with a bad starting segmentation in a long word sequence as in CJK.</span>
  <span class="comment">// Expand a child node only if it is within the global bound, and no</span>
  <span class="comment">// worse than 2x of its parent.</span>
  <span class="comment">// TODO(dsl): There is some redudency here in recomputing the priority,</span>
  <span class="comment">// and in filtering of old_merit and worst_priority.</span>
  the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a> = old_state.<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a>;
  <span class="keywordflow">for</span> (x = the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>; x &gt; 32; x--) {
    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a> = mask ^ old_state.<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a>;
    <span class="keywordflow">if</span> (!<a class="code" href="closed_8cpp.html#af42fdf0836fd4f40c478a4c46f4148c5">hash_lookup</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#add2a2c40e476a2a080bf10bd18d393bb">closed_states</a>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>)) {
      <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> new_merit = <a class="code" href="classtesseract_1_1_wordrec.html#a5ad58d7dcf5cbe7852aefb3b35a9ce33">prioritize_state</a>(chunks_record, the_search);
      <span class="keywordflow">if</span> (new_merit &lt; worst_priority) {
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1)
          log_state(<span class="stringliteral">&quot;Pushing segstate&quot;</span>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>,
                    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>, new_merit);
        <a class="code" href="classtesseract_1_1_wordrec.html#aeec11442b97898cd44ddfe568dd9ee0f">push_queue</a>(the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#adee178f3348481683069a38f4185c27a">open_states</a>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>,
                   worst_priority, new_merit, <a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1);
      } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1)
          log_state(<span class="stringliteral">&quot;Ignore weak segstate&quot;</span>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>,
                    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>, new_merit);
      }
    }
    mask &gt;&gt;= 1;
  }

  <span class="keywordflow">if</span> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a> &gt; 32) {
    mask = 1 &lt;&lt; 31;
  }
  <span class="keywordflow">else</span> {
    mask = 1 &lt;&lt; (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a> - 1);
  }

  the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a> = old_state.<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a>;
  <span class="keywordflow">while</span> (x--) {
    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>-&gt;<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a> = mask ^ old_state.<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a>;
    <span class="keywordflow">if</span> (!<a class="code" href="closed_8cpp.html#af42fdf0836fd4f40c478a4c46f4148c5">hash_lookup</a> (the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#add2a2c40e476a2a080bf10bd18d393bb">closed_states</a>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>)) {
      <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> new_merit = <a class="code" href="classtesseract_1_1_wordrec.html#a5ad58d7dcf5cbe7852aefb3b35a9ce33">prioritize_state</a>(chunks_record, the_search);
      <span class="keywordflow">if</span> (new_merit &lt; worst_priority) {
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1)
          log_state(<span class="stringliteral">&quot;Pushing segstate&quot;</span>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>,
                    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>, new_merit);
        <a class="code" href="classtesseract_1_1_wordrec.html#aeec11442b97898cd44ddfe568dd9ee0f">push_queue</a>(the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#adee178f3348481683069a38f4185c27a">open_states</a>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>,
                   worst_priority, new_merit, <a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1);
      } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1)
          log_state(<span class="stringliteral">&quot;Ignoring weak segstate&quot;</span>, the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>,
                    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>, new_merit);
      }
    }
    mask &gt;&gt;= 1;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae15505acaad8195b1b96de4a393bfc3e"></a><!-- doxytag: member="tesseract::Wordrec::fake_classify_blob" ref="ae15505acaad8195b1b96de4a393bfc3e" args="(UNICHAR_ID class_id, float rating, float certainty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BLOB_CHOICE_LIST * tesseract::Wordrec::fake_classify_blob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a>&#160;</td>
          <td class="paramname"><em>class_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>rating</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>certainty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordclass_8cpp_source.html#l00136">136</a> of file <a class="el" href="wordclass_8cpp_source.html">wordclass.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                             {
  BLOB_CHOICE_LIST *ratings = <span class="keyword">new</span> BLOB_CHOICE_LIST();  <span class="comment">// matcher result</span>
  <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a> *choice =
      <span class="keyword">new</span> <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a>(class_id, rating, certainty, -1, -1, 0, 0, 0, <span class="keyword">false</span>);
  BLOB_CHOICE_IT temp_it(ratings);
  temp_it.add_after_stay_put(choice);
  <span class="keywordflow">return</span> ratings;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a82e3d17abe8744c66fe3aa67fe2ea0f3"></a><!-- doxytag: member="tesseract::Wordrec::fill_filtered_fragment_list" ref="a82e3d17abe8744c66fe3aa67fe2ea0f3" args="(BLOB_CHOICE_LIST *choices, int fragment_pos, int num_frag_parts, BLOB_CHOICE_LIST *filtered_choices)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::fill_filtered_fragment_list </td>
          <td>(</td>
          <td class="paramtype">BLOB_CHOICE_LIST *&#160;</td>
          <td class="paramname"><em>choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fragment_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_frag_parts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BLOB_CHOICE_LIST *&#160;</td>
          <td class="paramname"><em>filtered_choices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pieces_8cpp_source.html#l00136">136</a> of file <a class="el" href="pieces_8cpp_source.html">pieces.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                              {
  BLOB_CHOICE_IT filtered_choices_it(filtered_choices);
  BLOB_CHOICE_IT choices_it(choices);

  <span class="keywordflow">for</span> (choices_it.mark_cycle_pt(); !choices_it.cycled_list();
       choices_it.forward()) {
    <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> choice_unichar_id = choices_it.data()-&gt;unichar_id();
    <span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *frag = <a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af08440927e3b87f99bd3a3fbd8e126dc">get_fragment</a>(choice_unichar_id);

    <span class="keywordflow">if</span> (frag != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; frag-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a543f738bd883d0417da44a211c6a822b">get_pos</a>() == fragment_pos &amp;&amp;
        frag-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aac1d5e077505363c264144a9348b3f0e">get_total</a>() == num_frag_parts) {
      <span class="comment">// Recover the unichar_id of the unichar that this fragment is</span>
      <span class="comment">// a part of</span>
      <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a> *b = <span class="keyword">new</span> <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a>(*choices_it.data());
      <span class="keywordtype">int</span> original_unichar = <a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(frag-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aabfbe5c558b411ecb3c9a34d0615c2de">get_unichar</a>());
      b-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#af740a2c4156630dcf9cadf54aecaa2e7">set_unichar_id</a>(original_unichar);
      filtered_choices_it.add_to_end(b);
    }
  }

  filtered_choices-&gt;sort(SortByUnicharID&lt;BLOB_CHOICE&gt;);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7b5bc2e6f3a8666f5bcb4a539c29c823"></a><!-- doxytag: member="tesseract::Wordrec::FillLattice" ref="a7b5bc2e6f3a8666f5bcb4a539c29c823" args="(const MATRIX &amp;ratings, const LIST &amp;best_choices, const UNICHARSET &amp;unicharset, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::FillLattice </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> &amp;&#160;</td>
          <td class="paramname"><em>ratings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="baseapi_8h.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> &amp;&#160;</td>
          <td class="paramname"><em>best_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> &amp;&#160;</td>
          <td class="paramname"><em>unicharset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abbb02091c23e7be9370055704526102f"></a><!-- doxytag: member="tesseract::Wordrec::FinishBlamerForSegSearch" ref="abbb02091c23e7be9370055704526102f" args="(const WERD_CHOICE *best_choice, BlamerBundle *blamer_bundle, STRING *blamer_debug)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::FinishBlamerForSegSearch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td>
          <td class="paramname"><em>best_choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_t_r_i_n_g.html">STRING</a> *&#160;</td>
          <td class="paramname"><em>blamer_debug</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="segsearch_8cpp_source.html#l00376">376</a> of file <a class="el" href="segsearch_8cpp_source.html">segsearch.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
  <span class="comment">// If we are still looking for blame (i.e. best_choice is incorrect, but a</span>
  <span class="comment">// path representing the correct segmentation could be constructed), we can</span>
  <span class="comment">// blame segmentation search pain point prioritization if the rating of the</span>
  <span class="comment">// path corresponding to the correct segmentation is better than that of</span>
  <span class="comment">// best_choice (i.e. language model would have done the correct thing, but</span>
  <span class="comment">// because of poor pain point prioritization the correct segmentation was</span>
  <span class="comment">// never explored). Otherwise we blame the tradeoff between the language model</span>
  <span class="comment">// and the classifier, since even after exploring the path corresponding to</span>
  <span class="comment">// the correct segmentation incorrect best_choice would have been chosen.</span>
  <span class="comment">// One special case when we blame the classifier instead is when best choice</span>
  <span class="comment">// is incorrect, but it is a dictionary word and it classifier&#39;s top choice.</span>
  <span class="keywordflow">if</span> (blamer_bundle != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ab02f7b4dc4711eef44a5891efb707b3b">segsearch_is_looking_for_blame</a>) {
    blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ab02f7b4dc4711eef44a5891efb707b3b">segsearch_is_looking_for_blame</a> = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> (blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a16968ea622a20067f95506256929ed4b">best_choice_is_dict_and_top_choice</a>) {
      *blamer_debug = <span class="stringliteral">&quot;Best choice is: incorrect, top choice, dictionary word&quot;</span>;
      *blamer_debug += <span class="stringliteral">&quot; with permuter &quot;</span>;
      *blamer_debug += best_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a4a50ea8f60def206dca0053556e2df5f">permuter_name</a>();
      blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a51b9a55eb8acc439f5ade8e97c92da8f">SetBlame</a>(<a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a9b70b64836694fc6dc4a7a6035b2dad8">IRR_CLASSIFIER</a>, *blamer_debug, best_choice,
                              <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ab0e0f1f12423cd918ff0b9ff87f9f79c">best_correctly_segmented_rating</a> &lt;
        best_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a52ea24dcb5ff15ad8aee3fd774622216">rating</a>()) {
      *blamer_debug += <span class="stringliteral">&quot;Correct segmentation state was not explored&quot;</span>;
      blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a51b9a55eb8acc439f5ade8e97c92da8f">SetBlame</a>(<a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a7c78c60fb2b9b0c1f2d5737883b07cf2">IRR_SEGSEARCH_PP</a>, *blamer_debug, best_choice,
                              <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);
    } <span class="keywordflow">else</span> {
      <span class="keywordflow">if</span> (blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ab0e0f1f12423cd918ff0b9ff87f9f79c">best_correctly_segmented_rating</a> &gt;=
          <a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#aa831918b1d217afd4dc547033f642990">WERD_CHOICE::kBadRating</a>) {
        *blamer_debug += <span class="stringliteral">&quot;Correct segmentation paths were pruned by LM\n&quot;</span>;
      } <span class="keywordflow">else</span> {
        <span class="keywordtype">char</span> debug_buffer[256];
        *blamer_debug += <span class="stringliteral">&quot;Best correct segmentation rating &quot;</span>;
        sprintf(debug_buffer, <span class="stringliteral">&quot;%g&quot;</span>,
                blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ab0e0f1f12423cd918ff0b9ff87f9f79c">best_correctly_segmented_rating</a>);
        *blamer_debug += debug_buffer;
        *blamer_debug += <span class="stringliteral">&quot; vs. best choice rating &quot;</span>;
        sprintf(debug_buffer, <span class="stringliteral">&quot;%g&quot;</span>, best_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a52ea24dcb5ff15ad8aee3fd774622216">rating</a>());
        *blamer_debug += debug_buffer;
      }
      blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a51b9a55eb8acc439f5ade8e97c92da8f">SetBlame</a>(<a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a77542e0fa096277d7e600582d9b295d9">IRR_CLASS_LM_TRADEOFF</a>, *blamer_debug, best_choice,
                              <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a409c4fc630ecbc283e3a6aa1b08debf7"></a><!-- doxytag: member="tesseract::Wordrec::full_split_priority" ref="a409c4fc630ecbc283e3a6aa1b08debf7" args="(SPLIT *split, inT16 xmin, inT16 xmax)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> tesseract::Wordrec::full_split_priority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>xmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>xmax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gradechop_8cpp_source.html#l00074">74</a> of file <a class="el" href="gradechop_8cpp_source.html">gradechop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                          {
  <a class="code" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a> rect;

  <a class="code" href="classtesseract_1_1_wordrec.html#a764fd79db0c80638187f4751626bb12e">set_outline_bounds</a> (split-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, split-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>, rect);

  <span class="keywordflow">if</span> (xmin &lt; <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a> (rect[0], rect[2]) &amp;&amp; xmax &gt; <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (rect[1], rect[3]))
    <span class="keywordflow">return</span> (999.0);

  <span class="keywordflow">return</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a483f88dc4b24f7055448259c42e1867d">grade_overlap</a> (rect) +
    <a class="code" href="classtesseract_1_1_wordrec.html#abbeec661b51bf52c5dd3ccbb64567690">grade_center_of_blob</a> (rect) + <a class="code" href="classtesseract_1_1_wordrec.html#a03ae9b642499f15b4fe4348d9d0ee3c2">grade_width_change</a> (rect));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53e7fd43e3657ffc3bc76a18f4e52291"></a><!-- doxytag: member="tesseract::Wordrec::get_fragment_lists" ref="a53e7fd43e3657ffc3bc76a18f4e52291" args="(inT16 current_frag, inT16 current_row, inT16 start, inT16 num_frag_parts, inT16 num_blobs, MATRIX *ratings, BLOB_CHOICE_LIST *choice_lists)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::get_fragment_lists </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>current_frag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>current_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>num_frag_parts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>num_blobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *&#160;</td>
          <td class="paramname"><em>ratings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BLOB_CHOICE_LIST *&#160;</td>
          <td class="paramname"><em>choice_lists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pieces_8cpp_source.html#l00292">292</a> of file <a class="el" href="pieces_8cpp_source.html">pieces.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {
  <span class="keywordflow">if</span> (current_frag == num_frag_parts) {
    <a class="code" href="classtesseract_1_1_wordrec.html#af657001729e7bc45e381614497adcc19">merge_and_put_fragment_lists</a>(start, current_row - 1, num_frag_parts,
                                 choice_lists, ratings);
    <span class="keywordflow">return</span>;
  }

  <span class="keywordflow">for</span> (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x = current_row; x &lt; num_blobs; x++) {
    BLOB_CHOICE_LIST *choices = ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(current_row, x);
    <span class="keywordflow">if</span> (choices == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <span class="keywordflow">continue</span>;

    <a class="code" href="classtesseract_1_1_wordrec.html#a82e3d17abe8744c66fe3aa67fe2ea0f3">fill_filtered_fragment_list</a>(choices, current_frag, num_frag_parts,
                                &amp;choice_lists[current_frag]);
    <span class="keywordflow">if</span> (!choice_lists[current_frag].empty()) {
      <a class="code" href="classtesseract_1_1_wordrec.html#a53e7fd43e3657ffc3bc76a18f4e52291">get_fragment_lists</a>(current_frag + 1, x + 1, start, num_frag_parts,
                         num_blobs, ratings, choice_lists);
      choice_lists[current_frag].clear();
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad77b8ca8f655ae0bfe16f352f3d01830"></a><!-- doxytag: member="tesseract::Wordrec::get_gap_variance" ref="ad77b8ca8f655ae0bfe16f352f3d01830" args="(WIDTH_RECORD *wrec, float norm_height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> tesseract::Wordrec::get_gap_variance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *&#160;</td>
          <td class="paramname"><em>wrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>norm_height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heuristic_8cpp_source.html#l00111">111</a> of file <a class="el" href="heuristic_8cpp_source.html">heuristic.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                       {
  <a class="code" href="struct_m_e_a_s_u_r_e_m_e_n_t.html">MEASUREMENT</a> ws;
  <a class="code" href="measure_8h.html#af841ea538d8134f398f1c69553fd9c9a">new_measurement</a>(ws);
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; wrec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a> - 1; x++) {
    <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> gap_ratio = (wrec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2 * x] + wrec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[ 2*x + 1])
                        * 1.0 / norm_height;
    <a class="code" href="measure_8h.html#acc2a20480b12cd0baa7b972014621c43">ADD_SAMPLE</a>(ws, gap_ratio);
  }
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a> &gt; 2)
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Gap Mean=%g Var=%g\n&quot;</span>, <a class="code" href="measure_8h.html#a4dc0d2c69c4196c34103fb377cf89a55">MEAN</a>(ws), <a class="code" href="measure_8h.html#ae3c1a512eadd10f473675cfc6450e6dc">VARIANCE</a>(ws));
  <span class="keywordflow">return</span> <a class="code" href="measure_8h.html#ae3c1a512eadd10f473675cfc6450e6dc">VARIANCE</a>(ws);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aab16c53ccf9c888874c2e7ae65b6ed04"></a><!-- doxytag: member="tesseract::Wordrec::get_piece_rating" ref="aab16c53ccf9c888874c2e7ae65b6ed04" args="(MATRIX *ratings, TBLOB *blobs, const DENORM &amp;denorm, SEAMS seams, inT16 start, inT16 end, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BLOB_CHOICE_LIST * tesseract::Wordrec::get_piece_rating </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *&#160;</td>
          <td class="paramname"><em>ratings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blobs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_d_e_n_o_r_m.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a>&#160;</td>
          <td class="paramname"><em>seams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pieces_8cpp_source.html#l00362">362</a> of file <a class="el" href="pieces_8cpp_source.html">pieces.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                         {
  BLOB_CHOICE_LIST *choices = ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(start, end);
  <span class="keywordflow">if</span> (choices == <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a>) {
    choices = <a class="code" href="classtesseract_1_1_wordrec.html#ad59946532b08a90f940ecfa994b06653">classify_piece</a>(blobs,
                             denorm,
                             seams,
                             start,
                             end,
                             blamer_bundle);
    ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#a610f90d717d1a774cefa8736714f1cc2">put</a>(start, end, choices);
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 1) {
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;get_piece_rating(): updated ratings matrix\n&quot;</span>);
      ratings-&gt;<a class="code" href="class_m_a_t_r_i_x.html#ae0f2489acb8b15666cb306f82ad2c6de">print</a>(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset());
    }
  }
  <span class="keywordflow">return</span> (choices);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac0868afc87448dc583dad4d67dd8b1a8"></a><!-- doxytag: member="tesseract::Wordrec::get_width_variance" ref="ac0868afc87448dc583dad4d67dd8b1a8" args="(WIDTH_RECORD *wrec, float norm_height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> tesseract::Wordrec::get_width_variance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *&#160;</td>
          <td class="paramname"><em>wrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>norm_height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heuristic_8cpp_source.html#l00096">96</a> of file <a class="el" href="heuristic_8cpp_source.html">heuristic.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                         {
  <a class="code" href="struct_m_e_a_s_u_r_e_m_e_n_t.html">MEASUREMENT</a> ws;
  <a class="code" href="measure_8h.html#af841ea538d8134f398f1c69553fd9c9a">new_measurement</a>(ws);
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; wrec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a>; x++) {
    <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> wh_ratio = wrec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2 * x] * 1.0f / norm_height;
    <span class="keywordflow">if</span> (x == wrec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a> - 1 &amp;&amp; wh_ratio &gt; 0.3)
      <span class="keywordflow">continue</span>;   <span class="comment">// exclude trailing punctuation from stats</span>
    <a class="code" href="measure_8h.html#acc2a20480b12cd0baa7b972014621c43">ADD_SAMPLE</a>(ws, wh_ratio);
  }
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a> &gt; 2)
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Width Mean=%g Var=%g\n&quot;</span>, <a class="code" href="measure_8h.html#a4dc0d2c69c4196c34103fb377cf89a55">MEAN</a>(ws), <a class="code" href="measure_8h.html#ae3c1a512eadd10f473675cfc6450e6dc">VARIANCE</a>(ws));
  <span class="keywordflow">return</span> <a class="code" href="measure_8h.html#ae3c1a512eadd10f473675cfc6450e6dc">VARIANCE</a>(ws);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abbeec661b51bf52c5dd3ccbb64567690"></a><!-- doxytag: member="tesseract::Wordrec::grade_center_of_blob" ref="abbeec661b51bf52c5dd3ccbb64567690" args="(register BOUNDS_RECT rect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> tesseract::Wordrec::grade_center_of_blob </td>
          <td>(</td>
          <td class="paramtype">register <a class="el" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a>&#160;</td>
          <td class="paramname"><em>rect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gradechop_8cpp_source.html#l00095">95</a> of file <a class="el" href="gradechop_8cpp_source.html">gradechop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {
  <span class="keyword">register</span> <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> grade;

  grade = (rect[1] - rect[0]) - (rect[3] - rect[2]);
  <span class="keywordflow">if</span> (grade &lt; 0)
    grade = -grade;

  grade *= <a class="code" href="classtesseract_1_1_wordrec.html#a7b115ea8fffc0f54152d294c71da964d">chop_center_knob</a>;
  grade = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a> (<a class="code" href="gradechop_8cpp.html#a42b2c51067554226bd46fd52e7978459">CENTER_GRADE_CAP</a>, grade);
  <span class="keywordflow">return</span> (<a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (0.0, grade));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a483f88dc4b24f7055448259c42e1867d"></a><!-- doxytag: member="tesseract::Wordrec::grade_overlap" ref="a483f88dc4b24f7055448259c42e1867d" args="(register BOUNDS_RECT rect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> tesseract::Wordrec::grade_overlap </td>
          <td>(</td>
          <td class="paramtype">register <a class="el" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a>&#160;</td>
          <td class="paramname"><em>rect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gradechop_8cpp_source.html#l00115">115</a> of file <a class="el" href="gradechop_8cpp_source.html">gradechop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
  <span class="keyword">register</span> <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> grade;
  <span class="keyword">register</span> <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> width1;
  <span class="keyword">register</span> <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> width2;
  <span class="keyword">register</span> <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> overlap;

  width1 = rect[3] - rect[2];
  width2 = rect[1] - rect[0];

  overlap = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a> (rect[1], rect[3]) - <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (rect[0], rect[2]);
  width1 = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a> (width1, width2);
  <span class="keywordflow">if</span> (overlap == width1)
    <span class="keywordflow">return</span> (100.0);              <span class="comment">/* Total overlap */</span>

  width1 = 2 * overlap - width1; <span class="comment">/* Extra penalty for too */</span>
  overlap += <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (0, width1);    <span class="comment">/* much overlap */</span>

  grade = overlap * <a class="code" href="classtesseract_1_1_wordrec.html#ad362b437458be7cc17aa39e01d36c17e">chop_overlap_knob</a>;

  <span class="keywordflow">return</span> (<a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (0.0, grade));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab3df13db044c39b2d9aa4e6bf105d309"></a><!-- doxytag: member="tesseract::Wordrec::grade_sharpness" ref="ab3df13db044c39b2d9aa4e6bf105d309" args="(register SPLIT *split)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> tesseract::Wordrec::grade_sharpness </td>
          <td>(</td>
          <td class="paramtype">register <a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gradechop_8cpp_source.html#l00168">168</a> of file <a class="el" href="gradechop_8cpp_source.html">gradechop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                       {
  <span class="keyword">register</span> <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> grade;

  grade = <a class="code" href="classtesseract_1_1_wordrec.html#adfe6b5aa74fe948a11bf631af18e7494">point_priority</a> (split-&gt;point1) + <a class="code" href="classtesseract_1_1_wordrec.html#adfe6b5aa74fe948a11bf631af18e7494">point_priority</a> (split-&gt;point2);

  <span class="keywordflow">if</span> (grade &lt; -360.0)
    grade = 0;
  <span class="keywordflow">else</span>
    grade += 360.0;

  grade *= <a class="code" href="classtesseract_1_1_wordrec.html#a1e5af8d3ffa2cc52de487e7556a8fdf0">chop_sharpness_knob</a>;       <span class="comment">/* Values 0 to -360 */</span>

  <span class="keywordflow">return</span> (grade);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a26ed8c156b2be0e7e38bd5437b71c10f"></a><!-- doxytag: member="tesseract::Wordrec::grade_split_length" ref="a26ed8c156b2be0e7e38bd5437b71c10f" args="(register SPLIT *split)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> tesseract::Wordrec::grade_split_length </td>
          <td>(</td>
          <td class="paramtype">register <a class="el" href="split_8h.html#a8caa4994d858ff69cd340ac6f89731cb">SPLIT</a> *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gradechop_8cpp_source.html#l00145">145</a> of file <a class="el" href="gradechop_8cpp_source.html">gradechop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                          {
  <span class="keyword">register</span> <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> grade;
  <span class="keyword">register</span> <span class="keywordtype">float</span> split_length;

  split_length = <a class="code" href="olutil_8h.html#a4df928397c7bcfee5373a86d6f2f46da">weighted_edgept_dist</a> (split-&gt;point1, split-&gt;point2,
    <a class="code" href="classtesseract_1_1_wordrec.html#a0db358c94208627661f5f1cf44ff9d28">chop_x_y_weight</a>);

  <span class="keywordflow">if</span> (split_length &lt;= 0)
    grade = 0;
  <span class="keywordflow">else</span>
    grade = sqrt (split_length) * <a class="code" href="classtesseract_1_1_wordrec.html#aefabcf9d889b0465eb484fff5a09e93a">chop_split_dist_knob</a>;

  <span class="keywordflow">return</span> (<a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (0.0, grade));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a03ae9b642499f15b4fe4348d9d0ee3c2"></a><!-- doxytag: member="tesseract::Wordrec::grade_width_change" ref="a03ae9b642499f15b4fe4348d9d0ee3c2" args="(register BOUNDS_RECT rect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> tesseract::Wordrec::grade_width_change </td>
          <td>(</td>
          <td class="paramtype">register <a class="el" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a>&#160;</td>
          <td class="paramname"><em>rect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gradechop_8cpp_source.html#l00191">191</a> of file <a class="el" href="gradechop_8cpp_source.html">gradechop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                              {
  <span class="keyword">register</span> <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> grade;
  <span class="keyword">register</span> <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width1;
  <span class="keyword">register</span> <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width2;

  width1 = rect[3] - rect[2];
  width2 = rect[1] - rect[0];

  grade = 20 - (<a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (rect[1], rect[3])
    - <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a> (rect[0], rect[2]) - <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (width1, width2));

  grade *= <a class="code" href="classtesseract_1_1_wordrec.html#aa63e4f7808cf2b9a60a11012cb7aee01">chop_width_change_knob</a>;

  <span class="keywordflow">return</span> (<a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (0.0, grade));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad1164fd07a17960ed06585f0c8aadcdc"></a><!-- doxytag: member="tesseract::Wordrec::improve_by_chopping" ref="ad1164fd07a17960ed06585f0c8aadcdc" args="(WERD_RES *word, BLOB_CHOICE_LIST_VECTOR *char_choices, STATE *best_state, BLOB_CHOICE_LIST_VECTOR *best_char_choices, DANGERR *fixpt, bool *updated_best_choice)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::improve_by_chopping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>best_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>best_char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *&#160;</td>
          <td class="paramname"><em>fixpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>updated_best_choice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00741">741</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> blob_number;
  <span class="keywordtype">float</span> old_best;
  <span class="keywordtype">bool</span> updated_best_choice = <span class="keyword">false</span>;

  <span class="keywordflow">while</span> (1) {  <span class="comment">// improvement loop</span>
    old_best = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a52ea24dcb5ff15ad8aee3fd774622216">rating</a>();
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#acdc368cd46083bdc4c321dd0a42533a0">improve_one_blob</a>(word, char_choices,
                         &amp;blob_number, &amp;word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>,
                         fixpt, (<a class="code" href="classtesseract_1_1_wordrec.html#a62f9bd7c796160d6fad61ba616e67ead">fragments_guide_chopper</a> &amp;&amp;
                                 word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a8947564d0c2d01763958e633999e3c50">fragment_mark</a>()),
                                 word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>)) {
      <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().LogNewSplit(blob_number);
      updated_best_choice =
        <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().permute_characters(*char_choices, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>,
                                     word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ab4d02a7548dab0a4522f02ed90e48100">raw_choice</a>);

      <span class="keywordflow">if</span> (old_best &gt; word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a52ea24dcb5ff15ad8aee3fd774622216">rating</a>()) {
        <a class="code" href="states_8cpp.html#a4d7464b9adab39859eca306e1a41ba7e">set_n_ones</a>(best_state, char_choices-&gt;<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() - 1);
      } <span class="keywordflow">else</span> {
        <a class="code" href="states_8cpp.html#a5104caef86ae4abd56bbb88b463492f6">insert_new_chunk</a>(best_state, blob_number, char_choices-&gt;<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() - 2);
        fixpt-&gt;<a class="code" href="class_generic_vector.html#a9cdbff49b186574b83e43afba606fdd9">clear</a>();
      }

      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>)
        <a class="code" href="states_8cpp.html#acb25e4d3e4da45c03f24fa3fcada7a98">print_state</a>(<span class="stringliteral">&quot;best state = &quot;</span>,
          best_state, <a class="code" href="blobs_8cpp.html#aa8048f4c65af2775452ad5d4dfbca053">count_blobs</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>) - 1);
    } <span class="keywordflow">else</span> {
      <span class="keywordflow">break</span>;
    }

    <span class="comment">// Check if we should break from the loop.</span>
    <span class="keywordtype">bool</span> done = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> replaced = <span class="keyword">false</span>;
    <span class="keywordflow">if</span> ((updated_best_choice &amp;&amp;
         (*best_choice_acceptable =
          <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().AcceptableChoice(char_choices, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>,
                                     fixpt, <a class="code" href="stopper_8h.html#a1902ef46a46c64df98f9a99f6368e4f6a84325e771bcf9b3b1187d3e91455ca26">CHOPPER_CALLER</a>, &amp;replaced))) ||
        char_choices-&gt;<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() &gt;= <a class="code" href="states_8h.html#a2f47d18aa9ea116103da072b110cf09d">MAX_NUM_CHUNKS</a>) {
      done = <span class="keyword">true</span>;
    }
    <span class="keywordflow">if</span> (replaced) <a class="code" href="classtesseract_1_1_wordrec.html#a63db9b85fa1350dfccfd4d6e548290d4">update_blob_classifications</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>,
                                              *char_choices);
    <span class="keywordflow">if</span> (updated_best_choice) <a class="code" href="classtesseract_1_1_wordrec.html#a6e9f488de12a12cd99ae4c2c55c87bc6">CopyCharChoices</a>(*char_choices, best_char_choices);
    <span class="keywordflow">if</span> (done) <span class="keywordflow">break</span>;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acdc368cd46083bdc4c321dd0a42533a0"></a><!-- doxytag: member="tesseract::Wordrec::improve_one_blob" ref="acdc368cd46083bdc4c321dd0a42533a0" args="(WERD_RES *word_res, BLOB_CHOICE_LIST_VECTOR *char_choices, inT32 *blob_number, SEAMS *seam_list, DANGERR *fixpt, bool split_next_to_fragment, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Wordrec::improve_one_blob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word_res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *&#160;</td>
          <td class="paramname"><em>blob_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a> *&#160;</td>
          <td class="paramname"><em>seam_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *&#160;</td>
          <td class="paramname"><em>fixpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>split_next_to_fragment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00332">332</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {
  <a class="code" href="struct_t_w_e_r_d.html">TWERD</a>* word = word_res-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>;
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *blob;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x = 0;
  <span class="keywordtype">float</span> rating_ceiling = <a class="code" href="host_8h.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a>;
  BLOB_CHOICE_LIST *answer;
  BLOB_CHOICE_IT answer_it;
  <a class="code" href="structseam__record.html">SEAM</a> *seam;

  <span class="keywordflow">do</span> {
    *blob_number = <a class="code" href="classtesseract_1_1_wordrec.html#a457f1ea04bad00c6e40883869700defb">select_blob_to_split_from_fixpt</a>(fixpt);
    <span class="keywordtype">bool</span> split_point_from_dict = (*blob_number != -1);
    <span class="keywordflow">if</span> (split_point_from_dict) {
      fixpt-&gt;<a class="code" href="class_generic_vector.html#a9cdbff49b186574b83e43afba606fdd9">clear</a>();
    } <span class="keywordflow">else</span> {
      *blob_number = <a class="code" href="classtesseract_1_1_wordrec.html#a8fd3e86b711ba9d54c7eb500eb99c1c4">select_blob_to_split</a>(*char_choices, rating_ceiling,
                                          split_next_to_fragment);
    }
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>)
      <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;blob_number = %d\n&quot;</span>, *blob_number);
    <span class="keywordflow">if</span> (*blob_number == -1)
      <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// TODO(rays) it may eventually help to allow italic_blob to be true,</span>
    seam = <a class="code" href="classtesseract_1_1_wordrec.html#ab39c4eff1c3255a37a38f5f32956e6c2">chop_numbered_blob</a>(word, *blob_number, <span class="keyword">false</span>, *seam_list);
    <span class="keywordflow">if</span> (seam != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <span class="keywordflow">break</span>;
    <span class="comment">/* Must split null blobs */</span>
    answer = char_choices-&gt;<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(*blob_number);
    <span class="keywordflow">if</span> (answer == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <span class="keywordflow">return</span> <span class="keyword">false</span>;
    answer_it.set_to_list(answer);
    <span class="keywordflow">if</span> (!split_point_from_dict) {
      <span class="comment">// We chopped the worst rated blob, try something else next time.</span>
      rating_ceiling = answer_it.data()-&gt;rating();
    }
  } <span class="keywordflow">while</span> (<span class="keyword">true</span>);
  <span class="comment">/* Split OK */</span>
  <span class="keywordflow">for</span> (blob = word-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>; x &lt; *blob_number; x++) {
    blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
  }

  *seam_list =
    <a class="code" href="seam_8cpp.html#abb7a3f834120eb2357b71b09405a2ec6">insert_seam</a> (*seam_list, *blob_number, seam, blob, word-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>);

  <span class="keyword">delete</span> char_choices-&gt;<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(*blob_number);

  answer = <a class="code" href="classtesseract_1_1_wordrec.html#a7127d481d5ea12e3253fb3719fd2170c">classify_blob</a>(blob, word_res-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>, <span class="stringliteral">&quot;improve 1:&quot;</span>, <a class="code" href="callcpp_8h.html#a17bc059e437838f094a5a25c2d5ab88fad3163c1fcda01965b692ec2c3122b743">Red</a>,
                         blamer_bundle);
  char_choices-&gt;<a class="code" href="class_generic_vector.html#a57ca5259541548a97bcfd4d0925a27ff">insert</a>(answer, *blob_number);

  answer = <a class="code" href="classtesseract_1_1_wordrec.html#a7127d481d5ea12e3253fb3719fd2170c">classify_blob</a>(blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>, word_res-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>, <span class="stringliteral">&quot;improve 2:&quot;</span>, <a class="code" href="callcpp_8h.html#a17bc059e437838f094a5a25c2d5ab88fabf28513245738599d13e3ce36bd16c82">Yellow</a>,
                         blamer_bundle);
  char_choices-&gt;<a class="code" href="class_generic_vector.html#a067b7833ee66238b7b5e230404525fcb">set</a>(answer, *blob_number + 1);

  <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8580282cf87b0e054ac1410cf4ffa0e2"></a><!-- doxytag: member="tesseract::Wordrec::InitBlamerForSegSearch" ref="a8580282cf87b0e054ac1410cf4ffa0e2" args="(const WERD_CHOICE *best_choice, CHUNKS_RECORD *chunks_record, HEAP *pain_points, BlamerBundle *blamer_bundle, STRING *blamer_debug)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::InitBlamerForSegSearch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td>
          <td class="paramname"><em>best_choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_h_e_a_p.html">HEAP</a> *&#160;</td>
          <td class="paramname"><em>pain_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_t_r_i_n_g.html">STRING</a> *&#160;</td>
          <td class="paramname"><em>blamer_debug</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="segsearch_8cpp_source.html#l00331">331</a> of file <a class="el" href="segsearch_8cpp_source.html">segsearch.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                           {
  blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ab02f7b4dc4711eef44a5891efb707b3b">segsearch_is_looking_for_blame</a> = <span class="keyword">true</span>;
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;segsearch starting to look for blame\n&quot;</span>);
  }
  <span class="comment">// Clear pain points heap.</span>
  <span class="keywordtype">int</span> <a class="code" href="oldlist_8cpp.html#a4a16ea0d766f4b3bc697142d5303a62c">pop</a>;
  <span class="keywordtype">float</span> pain_point_priority;
  <a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html">MATRIX_COORD</a> *pain_point;
  <span class="keywordflow">while</span> ((pop = <a class="code" href="oldheap_8cpp.html#a133a020354d84309c10dfea471f213f4">HeapPop</a>(pain_points, &amp;pain_point_priority,
                         &amp;pain_point)) != <a class="code" href="oldheap_8h.html#a2b7cf2a3641be7b89138615764d60ba3">EMPTY</a>) {
    <span class="keyword">delete</span> pain_point;
  }
  <span class="comment">// Fill pain points for any unclassifed blob corresponding to the</span>
  <span class="comment">// correct segmentation state.</span>
  *blamer_debug += <span class="stringliteral">&quot;Correct segmentation:\n&quot;</span>;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0;
        idx &lt; blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#abd75250b96b712d4849cf860f4351166">correct_segmentation_cols</a>.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>(); ++idx) {
    blamer_debug-&gt;<a class="code" href="class_s_t_r_i_n_g.html#a779cd637dd42d58d5500a3a657077e84">add_str_int</a>(
        <span class="stringliteral">&quot;col=&quot;</span>, blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#abd75250b96b712d4849cf860f4351166">correct_segmentation_cols</a>[idx]);
    blamer_debug-&gt;<a class="code" href="class_s_t_r_i_n_g.html#a779cd637dd42d58d5500a3a657077e84">add_str_int</a>(
        <span class="stringliteral">&quot; row=&quot;</span>, blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a7c72b769992bbd6fd8ae5bac480f62b3">correct_segmentation_rows</a>[idx]);
    *blamer_debug += <span class="stringliteral">&quot;\n&quot;</span>;
    <span class="keywordflow">if</span> (chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(
        blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#abd75250b96b712d4849cf860f4351166">correct_segmentation_cols</a>[idx],
        blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a7c72b769992bbd6fd8ae5bac480f62b3">correct_segmentation_rows</a>[idx]) == <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a>) {
      <span class="keywordflow">if</span> (!<a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;GeneratePainPoint(
          blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#abd75250b96b712d4849cf860f4351166">correct_segmentation_cols</a>[idx],
          blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a7c72b769992bbd6fd8ae5bac480f62b3">correct_segmentation_rows</a>[idx],
          <span class="keyword">false</span>, -1.0, -1.0, <span class="keyword">false</span>, -1.0, <a class="code" href="classtesseract_1_1_wordrec.html#a8fa843163c3e8785a957e422b9256d35">segsearch_max_char_wh_ratio</a>,
          <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chunks_record, pain_points)) {
        blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ab02f7b4dc4711eef44a5891efb707b3b">segsearch_is_looking_for_blame</a> = <span class="keyword">false</span>;
        *blamer_debug += <span class="stringliteral">&quot;\nFailed to insert pain point\n&quot;</span>;
        blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a51b9a55eb8acc439f5ade8e97c92da8f">SetBlame</a>(<a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1ae6c5b07f9dc57fa9513f706cba5df27e">IRR_SEGSEARCH_HEUR</a>, *blamer_debug, best_choice,
                                <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);
        <span class="keywordflow">break</span>;
      }
    }
  }  <span class="comment">// end for blamer_bundle-&gt;correct_segmentation_cols/rows</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af5466c6b57ff40780c0be86b1330f1cf"></a><!-- doxytag: member="tesseract::Wordrec::is_crossed" ref="af5466c6b57ff40780c0be86b1330f1cf" args="(TPOINT a0, TPOINT a1, TPOINT b0, TPOINT b1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Wordrec::is_crossed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_p_o_i_n_t.html">TPOINT</a>&#160;</td>
          <td class="paramname"><em>a0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_p_o_i_n_t.html">TPOINT</a>&#160;</td>
          <td class="paramname"><em>a1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_p_o_i_n_t.html">TPOINT</a>&#160;</td>
          <td class="paramname"><em>b0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_p_o_i_n_t.html">TPOINT</a>&#160;</td>
          <td class="paramname"><em>b1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="outlines_8cpp_source.html#l00070">70</a> of file <a class="el" href="outlines_8cpp_source.html">outlines.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
  <span class="keywordtype">int</span> b0a1xb0b1, b0b1xb0a0;
  <span class="keywordtype">int</span> a1b1xa1a0, a1a0xa1b0;

  <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> b0a1, b0a0, a1b1, b0b1, a1a0;

  b0a1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = a1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - b0.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  b0a0.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = a0.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - b0.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  a1b1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = b1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - a1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  b0b1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = b1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - b0.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  a1a0.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = a0.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - a1.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  b0a1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = a1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - b0.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  b0a0.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = a0.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - b0.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  a1b1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = b1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - a1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  b0b1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = b1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - b0.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  a1a0.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = a0.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - a1.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;

  b0a1xb0b1 = <a class="code" href="vecfuncs_8h.html#aec4dedcf89534ed10f6107bf9c6418f3">CROSS</a> (b0a1, b0b1);
  b0b1xb0a0 = <a class="code" href="vecfuncs_8h.html#aec4dedcf89534ed10f6107bf9c6418f3">CROSS</a> (b0b1, b0a0);
  a1b1xa1a0 = <a class="code" href="vecfuncs_8h.html#aec4dedcf89534ed10f6107bf9c6418f3">CROSS</a> (a1b1, a1a0);
                                 <span class="comment">/*a1a0xa1b0=CROSS(a1a0,a1b0); */</span>
  a1a0xa1b0 = -<a class="code" href="vecfuncs_8h.html#aec4dedcf89534ed10f6107bf9c6418f3">CROSS</a> (a1a0, b0a1);

  <span class="keywordflow">return</span> ((b0a1xb0b1 &gt; 0 &amp;&amp; b0b1xb0a0 &gt; 0)
    || (b0a1xb0b1 &lt; 0 &amp;&amp; b0b1xb0a0 &lt; 0))
    &amp;&amp; ((a1b1xa1a0 &gt; 0 &amp;&amp; a1a0xa1b0 &gt; 0) || (a1b1xa1a0 &lt; 0 &amp;&amp; a1a0xa1b0 &lt; 0));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ada66e05fa0ae8dc79b9de78f5f6efadf"></a><!-- doxytag: member="tesseract::Wordrec::is_little_chunk" ref="ada66e05fa0ae8dc79b9de78f5f6efadf" args="(EDGEPT *point1, EDGEPT *point2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Wordrec::is_little_chunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00123">123</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                           {
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *p = point1;            <span class="comment">/* Iterator */</span>
  <span class="keywordtype">int</span> counter = 0;

  <span class="keywordflow">do</span> {
                                 <span class="comment">/* Go from P1 to P2 */</span>
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a67574237703ce6757f28d9cdcef7d301">is_same_edgept</a> (point2, p)) {
      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a71c9cce736fd886763722cf34ddd0ab7">is_small_area</a> (point1, point2))
        <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
      <span class="keywordflow">else</span>
        <span class="keywordflow">break</span>;
    }
    p = p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
  }
  <span class="keywordflow">while</span> ((p != point1) &amp;&amp; (counter++ &lt; <a class="code" href="classtesseract_1_1_wordrec.html#ad9e49481be94c7fd0fb0a1a3f38ea605">chop_min_outline_points</a>));
  <span class="comment">/* Go from P2 to P1 */</span>
  p = point2;
  counter = 0;
  <span class="keywordflow">do</span> {
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a67574237703ce6757f28d9cdcef7d301">is_same_edgept</a> (point1, p)) {
      <span class="keywordflow">return</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a71c9cce736fd886763722cf34ddd0ab7">is_small_area</a> (point2, point1));
    }
    p = p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
  }
  <span class="keywordflow">while</span> ((p != point2) &amp;&amp; (counter++ &lt; <a class="code" href="classtesseract_1_1_wordrec.html#ad9e49481be94c7fd0fb0a1a3f38ea605">chop_min_outline_points</a>));

  <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a67574237703ce6757f28d9cdcef7d301"></a><!-- doxytag: member="tesseract::Wordrec::is_same_edgept" ref="a67574237703ce6757f28d9cdcef7d301" args="(EDGEPT *p1, EDGEPT *p2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Wordrec::is_same_edgept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>p2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="outlines_8cpp_source.html#l00104">104</a> of file <a class="el" href="outlines_8cpp_source.html">outlines.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                  {
  <span class="keywordflow">return</span> (p1 == p2);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a71c9cce736fd886763722cf34ddd0ab7"></a><!-- doxytag: member="tesseract::Wordrec::is_small_area" ref="a71c9cce736fd886763722cf34ddd0ab7" args="(EDGEPT *point1, EDGEPT *point2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Wordrec::is_small_area </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00158">158</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *p = point1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;      <span class="comment">/* Iterator */</span>
  <span class="keywordtype">int</span> area = 0;
  <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> origin;

  <span class="keywordflow">do</span> {
                                 <span class="comment">/* Go from P1 to P2 */</span>
    origin.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - point1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
    origin.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - point1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
    area += <a class="code" href="vecfuncs_8h.html#aec4dedcf89534ed10f6107bf9c6418f3">CROSS</a> (origin, p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a6da204ff253a65e00daae7753b82c9f7">vec</a>);
    p = p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
  }
  <span class="keywordflow">while</span> (!<a class="code" href="classtesseract_1_1_wordrec.html#a67574237703ce6757f28d9cdcef7d301">is_same_edgept</a> (point2, p));

  <span class="keywordflow">return</span> (area &lt; <a class="code" href="classtesseract_1_1_wordrec.html#aa87cc41f196b1779bec5e1040c4f857e">chop_min_outline_area</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aad7c820e5bb342d7ea7743269e160a20"></a><!-- doxytag: member="tesseract::Wordrec::join_blobs_and_classify" ref="aad7c820e5bb342d7ea7743269e160a20" args="(WERD_RES *word, int x, int y, int choice_index, MATRIX *ratings, BLOB_CHOICE_LIST_VECTOR *old_choices)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BLOB_CHOICE_LIST * tesseract::Wordrec::join_blobs_and_classify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>choice_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *&#160;</td>
          <td class="paramname"><em>ratings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>old_choices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00730">730</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
  <span class="comment">// Join parts to make the blob if needed.</span>
  <span class="keywordflow">if</span> (x != y)
    <a class="code" href="seam_8cpp.html#a919dc51833c934e6738e5e18d2dd43f6">join_pieces</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>, x, y);
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *blob = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; x; i++) {
    blob = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
  }
  <span class="comment">// Deep copy this blob into the output word.</span>
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a>* copy_blob = <span class="keyword">new</span> <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a>(*blob);
  copy_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a> = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a211ab5c5a13123ee7bdc7459d3363f9d">rebuild_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;
  word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a211ab5c5a13123ee7bdc7459d3363f9d">rebuild_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a> = copy_blob;

  BLOB_CHOICE_LIST *choices = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="comment">// First check to see if we can look up the classificaiton</span>
  <span class="comment">// in old_choices (if there is no need to merge blobs).</span>
  <span class="keywordflow">if</span> (choice_index &gt;= 0 &amp;&amp; old_choices != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    choices = old_choices-&gt;<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(choice_index);
    old_choices-&gt;<a class="code" href="class_generic_vector.html#a067b7833ee66238b7b5e230404525fcb">set</a>(<a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, choice_index);
  }
  <span class="comment">// The ratings matrix filled in by the associator will contain the next most</span>
  <span class="comment">// up-to-date classification info. Thus we look up the classification there</span>
  <span class="comment">// next, and only call classify_blob() if the classification is not found.</span>
  <span class="keywordflow">if</span> (choices == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; ratings != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    choices = ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(x, y);
    <span class="keywordflow">if</span> (choices != <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a>) {
      ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#a610f90d717d1a774cefa8736714f1cc2">put</a>(x, y, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
    }
  }
  <span class="comment">// Get the choices for the blob by classification if necessary.</span>
  <span class="keywordflow">if</span> (choices == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    choices = <a class="code" href="classtesseract_1_1_wordrec.html#a7127d481d5ea12e3253fb3719fd2170c">classify_blob</a>(blob, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>, <span class="stringliteral">&quot;rebuild&quot;</span>, <a class="code" href="callcpp_8h.html#a17bc059e437838f094a5a25c2d5ab88fa96c2b9b8ecc4d6cb96f43dcd27947bb4">Orange</a>,
                            word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>);
  }
  <span class="comment">// Undo join_pieces to restore the chopped word to its fully chopped state.</span>
  <span class="keywordflow">if</span> (x != y)
    <a class="code" href="seam_8cpp.html#ac76b2d230d4c44cb0346f516b8a7134a">break_pieces</a>(blob, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>, x, y);
  <span class="keywordflow">return</span> choices;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5b02ea635cd52437ade4200ed2734941"></a><!-- doxytag: member="tesseract::Wordrec::junk_worst_seam" ref="a5b02ea635cd52437ade4200ed2734941" args="(SEAM_QUEUE seams, SEAM *new_seam, float new_priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::junk_worst_seam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a>&#160;</td>
          <td class="paramname"><em>seams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *&#160;</td>
          <td class="paramname"><em>new_seam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>new_priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00148">148</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                  {
  <a class="code" href="structseam__record.html">SEAM</a> *seam;
  <span class="keywordtype">float</span> priority;

  <a class="code" href="oldheap_8cpp.html#a3ce0caf83478a579d919e1a510a23d92">HeapPopWorst</a>(seams, &amp;priority, &amp;seam);
  <span class="keywordflow">if</span> (priority &gt; new_priority) {
    <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a>(seam);  <span class="comment">/*get rid of it */</span>
    <a class="code" href="oldheap_8cpp.html#ad66e9a2d1419e6b12501a783fda5d7c3">HeapPush</a> (seams, new_priority, (<span class="keywordtype">char</span> *) new_seam);
  }
  <span class="keywordflow">else</span> {
    <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a>(new_seam);
    <a class="code" href="oldheap_8cpp.html#ad66e9a2d1419e6b12501a783fda5d7c3">HeapPush</a> (seams, priority, (<span class="keywordtype">char</span> *) seam);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af657001729e7bc45e381614497adcc19"></a><!-- doxytag: member="tesseract::Wordrec::merge_and_put_fragment_lists" ref="af657001729e7bc45e381614497adcc19" args="(inT16 row, inT16 column, inT16 num_frag_parts, BLOB_CHOICE_LIST *choice_lists, MATRIX *ratings)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::merge_and_put_fragment_lists </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>num_frag_parts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BLOB_CHOICE_LIST *&#160;</td>
          <td class="paramname"><em>choice_lists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *&#160;</td>
          <td class="paramname"><em>ratings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pieces_8cpp_source.html#l00169">169</a> of file <a class="el" href="pieces_8cpp_source.html">pieces.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {
  BLOB_CHOICE_IT *choice_lists_it = <span class="keyword">new</span> BLOB_CHOICE_IT[num_frag_parts];

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_frag_parts; i++) {
    choice_lists_it[i].set_to_list(&amp;choice_lists[i]);
    choice_lists_it[i].mark_cycle_pt();
  }

  BLOB_CHOICE_LIST *merged_choice = ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(row, column);
  <span class="keywordflow">if</span> (merged_choice == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    merged_choice = <span class="keyword">new</span> BLOB_CHOICE_LIST;

  <span class="keywordtype">bool</span> end_of_list = <span class="keyword">false</span>;
  BLOB_CHOICE_IT merged_choice_it(merged_choice);
  <span class="keywordflow">while</span> (!end_of_list) {
    <span class="comment">// Find the maximum unichar_id of the current entry the iterators</span>
    <span class="comment">// are pointing at</span>
    <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> max_unichar_id = choice_lists_it[0].data()-&gt;unichar_id();
    <span class="keywordtype">int</span> max_list = 0;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_frag_parts; i++) {
      <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id = choice_lists_it[i].data()-&gt;unichar_id();
      <span class="keywordflow">if</span> (max_unichar_id &lt; unichar_id) {
        max_unichar_id = unichar_id;
        max_list = i;
      }
    }

    <span class="comment">// Move the each iterators until it gets to an entry that has a</span>
    <span class="comment">// value greater than or equal to max_unichar_id</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_frag_parts; i++) {
      <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id = choice_lists_it[i].data()-&gt;unichar_id();
      <span class="keywordflow">while</span> (!choice_lists_it[i].cycled_list() &amp;&amp;
             unichar_id &lt; max_unichar_id) {
        choice_lists_it[i].forward();
        unichar_id = choice_lists_it[i].data()-&gt;unichar_id();
      }
      <span class="keywordflow">if</span> (choice_lists_it[i].cycled_list()) {
        end_of_list = <span class="keyword">true</span>;
        <span class="keywordflow">break</span>;
      }
    }

    <span class="keywordflow">if</span> (end_of_list)
      <span class="keywordflow">break</span>;

    <span class="comment">// Checks if the fragments are parts of the same character</span>
    <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> first_unichar_id = choice_lists_it[0].data()-&gt;unichar_id();
    <span class="keywordtype">bool</span> same_unichar = <span class="keyword">true</span>;
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; num_frag_parts; i++) {
      <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id = choice_lists_it[i].data()-&gt;unichar_id();
      <span class="keywordflow">if</span> (unichar_id != first_unichar_id) {
        same_unichar = <span class="keyword">false</span>;
        <span class="keywordflow">break</span>;
      }
    }

    <span class="keywordflow">if</span> (same_unichar) {
      <span class="comment">// Add the merged character to the result</span>
      <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> merged_unichar_id = first_unichar_id;
      <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> merged_fontinfo_id = choice_lists_it[0].data()-&gt;fontinfo_id();
      <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> merged_fontinfo_id2 = choice_lists_it[0].data()-&gt;fontinfo_id2();
      <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> merged_min_xheight = choice_lists_it[0].data()-&gt;min_xheight();
      <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> merged_max_xheight = choice_lists_it[0].data()-&gt;max_xheight();
      <span class="keywordtype">int</span> merged_script_id = choice_lists_it[0].data()-&gt;script_id();
      <span class="keywordtype">bool</span> merged_adapted = choice_lists_it[0].data()-&gt;adapted();

      <span class="keywordtype">float</span> merged_rating = 0, merged_certainty = 0;
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_frag_parts; i++) {
        <span class="keywordtype">float</span> rating = choice_lists_it[i].data()-&gt;rating();
        <span class="keywordtype">float</span> certainty = choice_lists_it[i].data()-&gt;certainty();

        <span class="keywordflow">if</span> (i == 0 || certainty &lt; merged_certainty)
          merged_certainty = certainty;
        merged_rating += rating;

        choice_lists_it[i].forward();
        <span class="keywordflow">if</span> (choice_lists_it[i].cycled_list())
          end_of_list = <span class="keyword">true</span>;
        <a class="code" href="helpers_8h.html#a6a6e013c7a0b4afa87f5e37697f7f99f">IntersectRange</a>(choice_lists_it[i].data()-&gt;min_xheight(),
                       choice_lists_it[i].data()-&gt;max_xheight(),
                       &amp;merged_min_xheight, &amp;merged_max_xheight);
      }

      merged_choice_it.add_to_end(<span class="keyword">new</span> <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a>(merged_unichar_id,
                                                  merged_rating,
                                                  merged_certainty,
                                                  merged_fontinfo_id,
                                                  merged_fontinfo_id2,
                                                  merged_script_id,
                                                  merged_min_xheight,
                                                  merged_max_xheight,
                                                  merged_adapted));
    }
  }

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_classify.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a>)
    <a class="code" href="ratngs_8cpp.html#a2de5b7d5a020bb9823091dbece4ea36e">print_ratings_list</a>(<span class="stringliteral">&quot;Merged Fragments&quot;</span>, merged_choice,
                       <a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>);

  <span class="keywordflow">if</span> (merged_choice-&gt;empty())
    <span class="keyword">delete</span> merged_choice;
  <span class="keywordflow">else</span>
    ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#a610f90d717d1a774cefa8736714f1cc2">put</a>(row, column, merged_choice);

  <span class="keyword">delete</span> [] choice_lists_it;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a60e821ddb0f98741bb729c5163e1189c"></a><!-- doxytag: member="tesseract::Wordrec::merge_fragments" ref="a60e821ddb0f98741bb729c5163e1189c" args="(MATRIX *ratings, inT16 num_blobs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::merge_fragments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *&#160;</td>
          <td class="paramname"><em>ratings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>num_blobs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pieces_8cpp_source.html#l00324">324</a> of file <a class="el" href="pieces_8cpp_source.html">pieces.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                              {
  BLOB_CHOICE_LIST choice_lists[<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a44acef42afbd5e03039786e3a3950dcf">CHAR_FRAGMENT::kMaxChunks</a>];
  <span class="keywordflow">for</span> (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> start = 0; start &lt; num_blobs; start++) {
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frag_parts = 2; frag_parts &lt;= <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a44acef42afbd5e03039786e3a3950dcf">CHAR_FRAGMENT::kMaxChunks</a>;
         frag_parts++) {
      <a class="code" href="classtesseract_1_1_wordrec.html#a53e7fd43e3657ffc3bc76a18f4e52291">get_fragment_lists</a>(0, start, start, frag_parts, num_blobs,
                         ratings, choice_lists);
    }
  }

  <span class="comment">// Delete fragments from the rating matrix</span>
  <span class="keywordflow">for</span> (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x = 0; x &lt; num_blobs; x++) {
    <span class="keywordflow">for</span> (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> y = x; y &lt; num_blobs; y++) {
      BLOB_CHOICE_LIST *choices = ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(x, y);
      <span class="keywordflow">if</span> (choices != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
        BLOB_CHOICE_IT choices_it(choices);
        <span class="keywordflow">for</span> (choices_it.mark_cycle_pt(); !choices_it.cycled_list();
             choices_it.forward()) {
          <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> choice_unichar_id = choices_it.data()-&gt;unichar_id();
          <span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *frag =
              <a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af08440927e3b87f99bd3a3fbd8e126dc">get_fragment</a>(choice_unichar_id);
          <span class="keywordflow">if</span> (frag != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            <span class="keyword">delete</span> choices_it.extract();
        }
      }
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a30984c34a31ca6ef5ee363fc5ebfeff4"></a><!-- doxytag: member="tesseract::Wordrec::modify_blob_choice" ref="a30984c34a31ca6ef5ee363fc5ebfeff4" args="(BLOB_CHOICE_LIST *answer, int chop_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::modify_blob_choice </td>
          <td>(</td>
          <td class="paramtype">BLOB_CHOICE_LIST *&#160;</td>
          <td class="paramname"><em>answer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chop_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00403">403</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
  <span class="keywordtype">char</span> chop_index_string[2];
  <span class="keywordflow">if</span> (chop_index &lt;= 9) {
    snprintf(chop_index_string, <span class="keyword">sizeof</span>(chop_index_string), <span class="stringliteral">&quot;%d&quot;</span>, chop_index);
  } <span class="keywordflow">else</span> {
    chop_index_string[0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;A&#39;</span> - 10 + chop_index);
    chop_index_string[1] = <span class="charliteral">&#39;\0&#39;</span>;
  }
  <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id = <a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(chop_index_string);
  <span class="keywordflow">if</span> (unichar_id == INVALID_UNICHAR_ID) {
    <span class="comment">// If the word is very long, we might exhaust the possibilities.</span>
    unichar_id = 1;
  }
  BLOB_CHOICE_IT answer_it(answer);
  <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a> *modified_blob =
      <span class="keyword">new</span> <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a>(unichar_id,
                      answer_it.data()-&gt;rating(),
                      answer_it.data()-&gt;certainty(),
                      answer_it.data()-&gt;fontinfo_id(),
                      answer_it.data()-&gt;fontinfo_id2(),
                      answer_it.data()-&gt;script_id(),
                      answer_it.data()-&gt;min_xheight(),
                      answer_it.data()-&gt;max_xheight(),
                      answer_it.data()-&gt;adapted());
  answer-&gt;clear();
  answer_it.set_to_list(answer);
  answer_it.add_after_then_move(modified_blob);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a746f8a2ed6b50a3669a2fe6dcd053eec"></a><!-- doxytag: member="tesseract::Wordrec::near_point" ref="a746f8a2ed6b50a3669a2fe6dcd053eec" args="(EDGEPT *point, EDGEPT *line_pt_0, EDGEPT *line_pt_1, EDGEPT **near_pt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Wordrec::near_point </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>line_pt_0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>line_pt_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> **&#160;</td>
          <td class="paramname"><em>near_pt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="outlines_8cpp_source.html#l00116">116</a> of file <a class="el" href="outlines_8cpp_source.html">outlines.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                           {
  <a class="code" href="struct_t_p_o_i_n_t.html">TPOINT</a> p;

  <span class="keywordtype">float</span> slope;
  <span class="keywordtype">float</span> intercept;

  <span class="keywordtype">float</span> x0 = line_pt_0-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  <span class="keywordtype">float</span> x1 = line_pt_1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
  <span class="keywordtype">float</span> y0 = line_pt_0-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  <span class="keywordtype">float</span> y1 = line_pt_1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;

  <span class="keywordflow">if</span> (x0 == x1) {
                                 <span class="comment">/* Handle vertical line */</span>
    p.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) x0;
    p.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;
  }
  <span class="keywordflow">else</span> {
    <span class="comment">/* Slope and intercept */</span>
    slope = (y0 - y1) / (x0 - x1);
    intercept = y1 - x1 * slope;

    <span class="comment">/* Find perpendicular */</span>
    p.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) ((point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> + (point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - intercept) * slope) /
      (slope * slope + 1));
    p.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) (slope * p.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> + intercept);
  }

  <span class="keywordflow">if</span> (<a class="code" href="outlines_8h.html#aa52be5d84e6f42cece8e16dcfffc1dfb">is_on_line</a> (p, line_pt_0-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, line_pt_1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>) &amp;&amp;
    (!<a class="code" href="outlines_8h.html#a904fe4010d6b74e15b566c5a9b04b9e4">same_point</a> (p, line_pt_0-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>)) &amp;&amp; (!<a class="code" href="outlines_8h.html#a904fe4010d6b74e15b566c5a9b04b9e4">same_point</a> (p, line_pt_1-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>))) {
    <span class="comment">/* Intersection on line */</span>
    *near_pt = <a class="code" href="split_8cpp.html#abe45460790758fd43e35acbad4eed1c5">make_edgept</a>(p.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>, p.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>, line_pt_1, line_pt_0);
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
  } <span class="keywordflow">else</span> {                           <span class="comment">/* Intersection not on line */</span>
    *near_pt = <a class="code" href="outlines_8h.html#ac048bea03b1621c3a756b3a4c71caf82">closest</a>(point, line_pt_0, line_pt_1);
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3d80d69436770f158bcea457afb6c81d"></a><!-- doxytag: member="tesseract::Wordrec::new_max_point" ref="a3d80d69436770f158bcea457afb6c81d" args="(EDGEPT *local_max, POINT_GROUP points)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::new_max_point </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>local_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="chop_8h.html#a55d3249c77c934468c72f606ce08354f">POINT_GROUP</a>&#160;</td>
          <td class="paramname"><em>points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00303">303</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> dir;

  dir = <a class="code" href="vecfuncs_8cpp.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a> (local_max);

  <span class="keywordflow">if</span> (dir &gt; 0) {
    <a class="code" href="classtesseract_1_1_wordrec.html#a6b73b33a1a883abc117c676b64816c6f">add_point_to_list</a>(points, local_max);
    <span class="keywordflow">return</span>;
  }

  <span class="keywordflow">if</span> (dir == 0 &amp;&amp; <a class="code" href="classtesseract_1_1_wordrec.html#adfe6b5aa74fe948a11bf631af18e7494">point_priority</a> (local_max) &lt; 0) {
    <a class="code" href="classtesseract_1_1_wordrec.html#a6b73b33a1a883abc117c676b64816c6f">add_point_to_list</a>(points, local_max);
    <span class="keywordflow">return</span>;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a597a95a38f3461c79c3f3970c4d69b69"></a><!-- doxytag: member="tesseract::Wordrec::new_min_point" ref="a597a95a38f3461c79c3f3970c4d69b69" args="(EDGEPT *local_min, POINT_GROUP points)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::new_min_point </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>local_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="chop_8h.html#a55d3249c77c934468c72f606ce08354f">POINT_GROUP</a>&#160;</td>
          <td class="paramname"><em>points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00279">279</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> dir;

  dir = <a class="code" href="vecfuncs_8cpp.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a> (local_min);

  <span class="keywordflow">if</span> (dir &lt; 0) {
    <a class="code" href="classtesseract_1_1_wordrec.html#a6b73b33a1a883abc117c676b64816c6f">add_point_to_list</a>(points, local_min);
    <span class="keywordflow">return</span>;
  }

  <span class="keywordflow">if</span> (dir == 0 &amp;&amp; <a class="code" href="classtesseract_1_1_wordrec.html#adfe6b5aa74fe948a11bf631af18e7494">point_priority</a> (local_min) &lt; 0) {
    <a class="code" href="classtesseract_1_1_wordrec.html#a6b73b33a1a883abc117c676b64816c6f">add_point_to_list</a>(points, local_min);
    <span class="keywordflow">return</span>;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6532056b5f7dcdff1a64898d1c3b6bfc"></a><!-- doxytag: member="tesseract::Wordrec::new_search" ref="a6532056b5f7dcdff1a64898d1c3b6bfc" args="(CHUNKS_RECORD *chunks_record, int num_joints, BLOB_CHOICE_LIST_VECTOR *best_char_choices, WERD_CHOICE *best_choice, WERD_CHOICE *raw_choice, STATE *state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> * tesseract::Wordrec::new_search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_joints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>best_char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td>
          <td class="paramname"><em>best_choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td>
          <td class="paramname"><em>raw_choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00568">568</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                 {
  <a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *this_search;

  this_search = (<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *) <a class="code" href="freelist_8cpp.html#a5898fbe61f6ffe4c1be71a107193cdfd">memalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a>));

  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#adee178f3348481683069a38f4185c27a">open_states</a> = <a class="code" href="oldheap_8cpp.html#a101bee15b825fee78f29c8679cc00595">MakeHeap</a> (<a class="code" href="classtesseract_1_1_wordrec.html#a57c3675d967208936be65a14e5b64c7d">wordrec_num_seg_states</a> * 20);
  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#add2a2c40e476a2a080bf10bd18d393bb">closed_states</a> = <a class="code" href="closed_8cpp.html#aa74a9d96d39b412ec05403353ba7d5a4">new_hash_table</a>();

  <span class="keywordflow">if</span> (state)
    this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a> = <a class="code" href="states_8cpp.html#ac2e9f7b195c3ee2878144de8cae6ec67">new_state</a> (state);
  <span class="keywordflow">else</span>
    <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;error: bad initial state in new_search\n&quot;</span>);

  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#aca35760bea50d16acf102376bb0b2716">first_state</a> = <a class="code" href="states_8cpp.html#ac2e9f7b195c3ee2878144de8cae6ec67">new_state</a> (this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>);
  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a466df91ecf19a56dac83d4654c454e19">best_state</a> = <a class="code" href="states_8cpp.html#ac2e9f7b195c3ee2878144de8cae6ec67">new_state</a> (this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>);

  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a468657e9c9b8df182c4890544c530f87">best_choice</a> = best_choice;
  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ad25cff29f63f480a293196c094a66020">raw_choice</a> = raw_choice;
  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a39e4f8b8e4e11c6b2ca2053ff51fa798">best_char_choices</a> = best_char_choices;

  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a> = <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>;
  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a0a90b0a8729b436739b6019c7355301c">num_states</a> = 0;
  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ab881f72bd7d5c4d14093681af511a596">before_best</a> = 0;
  this_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#afc64aa6140730c7cc307c734548d2d0f">segcost_bias</a> = 0;

  <span class="keywordflow">return</span> (this_search);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a79aec1d9a1c9c001a24838117585091a"></a><!-- doxytag: member="tesseract::Wordrec::pick_close_point" ref="a79aec1d9a1c9c001a24838117585091a" args="(EDGEPT *critical_point, EDGEPT *vertical_point, int *best_dist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> * tesseract::Wordrec::pick_close_point </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>critical_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>vertical_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>best_dist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00182">182</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                  {
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *best_point = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordtype">int</span> this_distance;
  <span class="keywordtype">int</span> found_better;

  <span class="keywordflow">do</span> {
    found_better = <a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;

    this_distance = <a class="code" href="outlines_8h.html#a61f9385343feb503e1ed9806925fcbee">edgept_dist</a> (critical_point, vertical_point);
    <span class="keywordflow">if</span> (this_distance &lt;= *best_dist) {

      <span class="keywordflow">if</span> (!(<a class="code" href="outlines_8h.html#a904fe4010d6b74e15b566c5a9b04b9e4">same_point</a> (critical_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, vertical_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>) ||
        <a class="code" href="outlines_8h.html#a904fe4010d6b74e15b566c5a9b04b9e4">same_point</a> (critical_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, vertical_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>) ||
        (best_point &amp;&amp; <a class="code" href="outlines_8h.html#a904fe4010d6b74e15b566c5a9b04b9e4">same_point</a> (best_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, vertical_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>)) ||
      <a class="code" href="outlines_8h.html#a6c0c70cebe2f185d69900780b4695f8c">is_exterior_point</a> (critical_point, vertical_point))) {
        *best_dist = this_distance;
        best_point = vertical_point;
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a8914016a85c92a468b1d1da3eda53695">chop_vertical_creep</a>)
          found_better = <a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
      }
    }
    vertical_point = vertical_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
  }
  <span class="keywordflow">while</span> (found_better == <a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);

  <span class="keywordflow">return</span> (best_point);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adeb84d8b94a6c87354fc452461de3b39"></a><!-- doxytag: member="tesseract::Wordrec::pick_good_seam" ref="adeb84d8b94a6c87354fc452461de3b39" args="(TBLOB *blob)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> * tesseract::Wordrec::pick_good_seam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00380">380</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
  <a class="code" href="struct_h_e_a_p.html">SEAM_QUEUE</a> seam_queue;
  <a class="code" href="structarray__record.html">SEAM_PILE</a> seam_pile;
  <a class="code" href="struct_h_e_a_p.html">POINT_GROUP</a> point_heap;
  <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> priority;
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *edge;
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *points[<a class="code" href="chop_8h.html#acddb2ccb7be3d768d16abfd230d468eb">MAX_NUM_POINTS</a>];
  EDGEPT_CLIST new_points;
  <a class="code" href="structseam__record.html">SEAM</a> *seam = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="struct_t_e_s_s_l_i_n_e.html">TESSLINE</a> *outline;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_points = 0;

<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a> &gt; 2)
    <a class="code" href="split_8cpp.html#ac251ee3f4ff4145a52a8ba54a1b26743">wordrec_display_splits</a>.set_value(<span class="keyword">true</span>);

  <a class="code" href="plotedges_8cpp.html#ae2440305a17a8a14c0e1c74e035934a3">draw_blob_edges</a>(blob);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  point_heap = <a class="code" href="oldheap_8cpp.html#a101bee15b825fee78f29c8679cc00595">MakeHeap</a> (<a class="code" href="chop_8h.html#acddb2ccb7be3d768d16abfd230d468eb">MAX_NUM_POINTS</a>);
  <span class="keywordflow">for</span> (outline = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a3c9282cad4102157d214bcc6311cda07">outlines</a>; outline; outline = outline-&gt;<a class="code" href="struct_t_e_s_s_l_i_n_e.html#a0fb224d43ea53a791f0957fa92793bef">next</a>)
    <a class="code" href="classtesseract_1_1_wordrec.html#a52f6801a630c7418855f469233b3cf38">prioritize_points</a>(outline, point_heap);

  <span class="keywordflow">while</span> (<a class="code" href="oldheap_8cpp.html#a133a020354d84309c10dfea471f213f4">HeapPop</a> (point_heap, &amp;priority, &amp;edge) == <a class="code" href="oldheap_8h.html#ae14e7ed9f6b99e7bcf6f27a73f741870">TESS_HEAP_OK</a>) {
    <span class="keywordflow">if</span> (num_points &lt; <a class="code" href="chop_8h.html#acddb2ccb7be3d768d16abfd230d468eb">MAX_NUM_POINTS</a>)
      points[num_points++] = (<a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *) edge;
  }
  <a class="code" href="oldheap_8h.html#a8631cc3f443c4ea3e99195df1ca1dd8d">FreeHeap</a>(point_heap);

  <span class="comment">/* Initialize queue &amp; pile */</span>
  <a class="code" href="findseam_8cpp.html#ac795e021bc4e7c68ce6909ed7916fd03">create_seam_pile</a>(seam_pile);
  <a class="code" href="findseam_8cpp.html#a5de76d2606b449371cb1e12ade27dac0">create_seam_queue</a>(seam_queue);

  <a class="code" href="classtesseract_1_1_wordrec.html#afaf3a51721ceaa661e9e1919d4ea48e7">try_point_pairs</a>(points, num_points, seam_queue, &amp;seam_pile, &amp;seam, blob);
  <a class="code" href="classtesseract_1_1_wordrec.html#a2f5dad2d83fa6f5b28819f13eabf41ba">try_vertical_splits</a>(points, num_points, &amp;new_points,
                      seam_queue, &amp;seam_pile, &amp;seam, blob);

  <span class="keywordflow">if</span> (seam == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="classtesseract_1_1_wordrec.html#afa230ef31fc03aff58ebd4d2de2df68b">choose_best_seam</a>(seam_queue, &amp;seam_pile, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="findseam_8cpp.html#a3fd320d93290a64ff24687ec596f1f61">BAD_PRIORITY</a>, &amp;seam, blob);
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a> &gt; <a class="code" href="classtesseract_1_1_wordrec.html#ad18f0e1c62f90e2be42190a720158862">chop_good_split</a>) {
    <a class="code" href="classtesseract_1_1_wordrec.html#afa230ef31fc03aff58ebd4d2de2df68b">choose_best_seam</a> (seam_queue, &amp;seam_pile, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, seam-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a>,
      &amp;seam, blob);
  }

  EDGEPT_C_IT it(&amp;new_points);
  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {
    <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *inserted_point = it.data();
    <span class="keywordflow">if</span> (!<a class="code" href="seam_8cpp.html#aa90d43705c8b8286bf9751240ea6ffe0">point_used_by_seam</a>(seam, inserted_point)) {
      <a class="code" href="split_8cpp.html#ada6ba0f2954768ab4b7d9d2cf165dee0">remove_edgept</a>(inserted_point);
    }
  }

  <a class="code" href="findseam_8cpp.html#a45ca0c73e62dd03c7dc4d1620a63202f">delete_seam_queue</a>(seam_queue);
  <a class="code" href="classtesseract_1_1_wordrec.html#a15fb0ba7f97dd0ad49f30fb7861717c4">delete_seam_pile</a>(seam_pile);

  <span class="keywordflow">if</span> (seam) {
    <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a> &gt; <a class="code" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a>) {
      <a class="code" href="seam_8cpp.html#abe1c472bf676a613f555cee9d29f7c3d">delete_seam</a>(seam);
      seam = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="split_8cpp.html#ac251ee3f4ff4145a52a8ba54a1b26743">wordrec_display_splits</a>) {
      <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>)
        <a class="code" href="plotedges_8cpp.html#a528d6afbe6545a629d69f9c07084c92e">mark_split</a> (seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>);
      <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>)
        <a class="code" href="plotedges_8cpp.html#a528d6afbe6545a629d69f9c07084c92e">mark_split</a> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>);
      <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#ad3878ea3c362e24fcdd063ed81f9ac5a">split3</a>)
        <a class="code" href="plotedges_8cpp.html#a528d6afbe6545a629d69f9c07084c92e">mark_split</a> (seam-&gt;<a class="code" href="structseam__record.html#ad3878ea3c362e24fcdd063ed81f9ac5a">split3</a>);
      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a> &gt; 2) {
        <a class="code" href="plotedges_8h.html#a3a90c5459659abe9227ab93d20042630">update_edge_window</a>();
        <a class="code" href="plotedges_8h.html#a09f227f1c8c806d8cc6c758f167b965d">edge_window_wait</a>();
      }
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  }

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>)
    <a class="code" href="split_8cpp.html#ac251ee3f4ff4145a52a8ba54a1b26743">wordrec_display_splits</a>.set_value(<span class="keyword">false</span>);

  <span class="keywordflow">return</span> (seam);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adfe6b5aa74fe948a11bf631af18e7494"></a><!-- doxytag: member="tesseract::Wordrec::point_priority" ref="adfe6b5aa74fe948a11bf631af18e7494" args="(EDGEPT *point)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> tesseract::Wordrec::point_priority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00055">55</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
  <span class="keywordflow">return</span> (<a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a>)<a class="code" href="classtesseract_1_1_wordrec.html#a6cad89fa254226bb11cc6eacfd7f0ffa">angle_change</a>(point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a8326da8daf597bcdc5a05064a37cbbb1">prev</a>, point, point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a24a13455e56ef38b4270f672fa639d62"></a><!-- doxytag: member="tesseract::Wordrec::pop_queue" ref="a24a13455e56ef38b4270f672fa639d62" args="(HEAP *queue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> * tesseract::Wordrec::pop_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_h_e_a_p.html">HEAP</a> *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00607">607</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                     {
  <a class="code" href="struct_h_e_a_p_e_n_t_r_y.html">HEAPENTRY</a> entry;

  <span class="keywordflow">if</span> (<a class="code" href="oldheap_8cpp.html#aad11f18baf53c82e65a054ff7552d0d1">GetTopOfHeap</a> (queue, &amp;entry) == <a class="code" href="oldheap_8h.html#ae14e7ed9f6b99e7bcf6f27a73f741870">TESS_HEAP_OK</a>) {
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="plotseg_8cpp.html#a2aed15ed158681a35b22e37ce65cbc3f">wordrec_display_segmentations</a>) {
      <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;eval state: %8.3f &quot;</span>, entry.<a class="code" href="struct_h_e_a_p_e_n_t_r_y.html#aa80cabd8128f5fa5a64e00b2e41e9c54">Key</a>);
      <a class="code" href="states_8cpp.html#acb25e4d3e4da45c03f24fa3fcada7a98">print_state</a> (<span class="stringliteral">&quot;&quot;</span>, (<a class="code" href="struct_s_t_a_t_e.html">STATE</a> *) entry.<a class="code" href="struct_h_e_a_p_e_n_t_r_y.html#ab04a38c2cfaa44594782f052cbe7414d">Data</a>, <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>);
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> ((<a class="code" href="struct_s_t_a_t_e.html">STATE</a> *) entry.<a class="code" href="struct_h_e_a_p_e_n_t_r_y.html#ab04a38c2cfaa44594782f052cbe7414d">Data</a>);
  }
  <span class="keywordflow">else</span> {
    <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52f6801a630c7418855f469233b3cf38"></a><!-- doxytag: member="tesseract::Wordrec::prioritize_points" ref="a52f6801a630c7418855f469233b3cf38" args="(TESSLINE *outline, POINT_GROUP points)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::prioritize_points </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_e_s_s_l_i_n_e.html">TESSLINE</a> *&#160;</td>
          <td class="paramname"><em>outline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="chop_8h.html#a55d3249c77c934468c72f606ce08354f">POINT_GROUP</a>&#160;</td>
          <td class="paramname"><em>points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00220">220</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     {
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *this_point;
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *local_min = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *local_max = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  this_point = outline-&gt;<a class="code" href="struct_t_e_s_s_l_i_n_e.html#a0ab1e26b1dae548f0bd3c096c6183b18">loop</a>;
  local_min = this_point;
  local_max = this_point;
  <span class="keywordflow">do</span> {
    <span class="keywordflow">if</span> (this_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a6da204ff253a65e00daae7753b82c9f7">vec</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> &lt; 0) {
                                 <span class="comment">/* Look for minima */</span>
      <span class="keywordflow">if</span> (local_max != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        <a class="code" href="classtesseract_1_1_wordrec.html#a3d80d69436770f158bcea457afb6c81d">new_max_point</a>(local_max, points);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="olutil_8h.html#a2ed4acccf540054febe7403a827ebbac">is_inside_angle</a> (this_point))
        <a class="code" href="classtesseract_1_1_wordrec.html#a6b73b33a1a883abc117c676b64816c6f">add_point_to_list</a>(points, this_point);
      local_max = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      local_min = this_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a6da204ff253a65e00daae7753b82c9f7">vec</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> &gt; 0) {
                                 <span class="comment">/* Look for maxima */</span>
      <span class="keywordflow">if</span> (local_min != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        <a class="code" href="classtesseract_1_1_wordrec.html#a597a95a38f3461c79c3f3970c4d69b69">new_min_point</a>(local_min, points);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="olutil_8h.html#a2ed4acccf540054febe7403a827ebbac">is_inside_angle</a> (this_point))
        <a class="code" href="classtesseract_1_1_wordrec.html#a6b73b33a1a883abc117c676b64816c6f">add_point_to_list</a>(points, this_point);
      local_min = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      local_max = this_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
    }
    <span class="keywordflow">else</span> {
      <span class="comment">/* Flat area */</span>
      <span class="keywordflow">if</span> (local_max != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
        <span class="keywordflow">if</span> (local_max-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a8326da8daf597bcdc5a05064a37cbbb1">prev</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a6da204ff253a65e00daae7753b82c9f7">vec</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> != 0) {
          <a class="code" href="classtesseract_1_1_wordrec.html#a3d80d69436770f158bcea457afb6c81d">new_max_point</a>(local_max, points);
        }
        local_max = this_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
        local_min = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      }
      <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (local_min-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a8326da8daf597bcdc5a05064a37cbbb1">prev</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a6da204ff253a65e00daae7753b82c9f7">vec</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> != 0) {
          <a class="code" href="classtesseract_1_1_wordrec.html#a597a95a38f3461c79c3f3970c4d69b69">new_min_point</a>(local_min, points);
        }
        local_min = this_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
        local_max = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      }
    }

                                 <span class="comment">/* Next point */</span>
    this_point = this_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
  }
  <span class="keywordflow">while</span> (this_point != outline-&gt;<a class="code" href="struct_t_e_s_s_l_i_n_e.html#a0ab1e26b1dae548f0bd3c096c6183b18">loop</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5ad58d7dcf5cbe7852aefb3b35a9ce33"></a><!-- doxytag: member="tesseract::Wordrec::prioritize_state" ref="a5ad58d7dcf5cbe7852aefb3b35a9ce33" args="(CHUNKS_RECORD *chunks_record, SEARCH_RECORD *the_search)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> tesseract::Wordrec::prioritize_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html">SEARCH_RECORD</a> *&#160;</td>
          <td class="paramname"><em>the_search</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heuristic_8cpp_source.html#l00289">289</a> of file <a class="el" href="heuristic_8cpp_source.html">heuristic.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
  <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> shape_cost;
  <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> width_cost;
  <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> seam_cost;

  shape_cost = <a class="code" href="classtesseract_1_1_wordrec.html#a1dd426293ba3d6d90f8740285190336f">rating_priority</a>(chunks_record,
                               the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>,
                               the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>);

  width_cost = <a class="code" href="classtesseract_1_1_wordrec.html#a6e963a2c089d890de52254b85b2c0cac">width_priority</a>(chunks_record,
                              the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>,
                              the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>);

  <span class="comment">// The rating_priority is the same as the original, and the width_priority</span>
  <span class="comment">// is the same as before if assume_fixed_pitch_char_segment == FALSE.</span>
  <span class="comment">// So this would return the original state priority.</span>
  <span class="keywordflow">if</span> (!<a class="code" href="classtesseract_1_1_wordrec.html#ab5afccbd096fe5f2ce5e3a7ada77a698">use_new_state_cost</a>)
    <span class="keywordflow">return</span> width_cost * 1000 + shape_cost;

  seam_cost = <a class="code" href="classtesseract_1_1_wordrec.html#aa5fd4729ef162689b68d20f9bdeb0c3e">seamcut_priority</a>(chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aca32a87e5f9e4d04777ca3551b65b27c">splits</a>,
                               the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#a4808dd4445d528329aa0e26d7f0343ee">this_state</a>,
                               the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#ac8ccf6b4a41ad6f50c779cef2796d89e">num_joints</a>);

  <span class="comment">// TODO(dsl): how do we normalize the scores for these separate evidence?</span>
  <span class="comment">// FLOAT32 total_cost = shape_cost + width_cost * 0.01 + seam_cost * 0.001;</span>
  <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> total_cost = shape_cost * <a class="code" href="classtesseract_1_1_wordrec.html#a6db610e3739b7660036de4498efd0cc4">heuristic_weight_rating</a> +
                       width_cost * <a class="code" href="classtesseract_1_1_wordrec.html#ae123123f79f4caa864aa437e93872551">heuristic_weight_width</a> +
                       seam_cost * <a class="code" href="classtesseract_1_1_wordrec.html#a5305fb44c26a61863bb5f7b646fc5bd9">heuristic_weight_seamcut</a>;

  <span class="comment">// We don&#39;t have an adjustment model for variable pitch segmentation cost</span>
  <span class="comment">// into word rating</span>
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a613a7dc22729f2cb084bc7093a0a4088">assume_fixed_pitch_char_segment</a>) {
    <span class="keywordtype">float</span> seg_bias = 1.0;
    <span class="keywordflow">if</span> (width_cost &lt; 1) seg_bias *= 0.85;
    <span class="keywordflow">if</span> (width_cost &gt; 3)
      seg_bias *= pow(<a class="code" href="classtesseract_1_1_wordrec.html#a48537af11d756181ab3c13d14154ec3f">heuristic_segcost_rating_base</a>, width_cost/3.0);
    <span class="keywordflow">if</span> (seam_cost &gt; 10)
      seg_bias *= pow(<a class="code" href="classtesseract_1_1_wordrec.html#a48537af11d756181ab3c13d14154ec3f">heuristic_segcost_rating_base</a>, log(seam_cost)/log(10.0));
    <span class="keywordflow">if</span> (shape_cost &gt; 5)
      seg_bias *= pow(<a class="code" href="classtesseract_1_1_wordrec.html#a48537af11d756181ab3c13d14154ec3f">heuristic_segcost_rating_base</a>, shape_cost/5.0);
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a>) {
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;SegCost: %g Weight: %g rating: %g  width: %g  seam: %g\n&quot;</span>,
               total_cost, seg_bias, shape_cost, width_cost, seam_cost);
    }
    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#afc64aa6140730c7cc307c734548d2d0f">segcost_bias</a> = seg_bias;
  } <span class="keywordflow">else</span> {
    the_search-&gt;<a class="code" href="struct_s_e_a_r_c_h___r_e_c_o_r_d.html#afc64aa6140730c7cc307c734548d2d0f">segcost_bias</a> = 0;
  }

  <span class="keywordflow">return</span> total_cost;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab9f95be1d701222b62b7f8920f5cb9e5"></a><!-- doxytag: member="tesseract::Wordrec::ProcessSegSearchPainPoint" ref="ab9f95be1d701222b62b7f8920f5cb9e5" args="(float pain_point_priority, const MATRIX_COORD &amp;pain_point, const WERD_CHOICE *best_choice, SEG_SEARCH_PENDING_LIST *pending[], CHUNKS_RECORD *chunks_record, HEAP *pain_points, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::ProcessSegSearchPainPoint </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pain_point_priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_m_a_t_r_i_x___c_o_o_r_d.html">MATRIX_COORD</a> &amp;&#160;</td>
          <td class="paramname"><em>pain_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td>
          <td class="paramname"><em>best_choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SEG_SEARCH_PENDING_LIST *&#160;</td>
          <td class="paramname"><em>pending</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_h_e_a_p.html">HEAP</a> *&#160;</td>
          <td class="paramname"><em>pain_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="segsearch_8cpp_source.html#l00257">257</a> of file <a class="el" href="segsearch_8cpp_source.html">segsearch.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     {
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> &gt; 0) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Classifying pain point priority=%.4f, col=%d, row=%d\n&quot;</span>,
            pain_point_priority, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>);
  }
  <a class="code" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings = chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>;
  BLOB_CHOICE_LIST *classified = <a class="code" href="classtesseract_1_1_wordrec.html#ad59946532b08a90f940ecfa994b06653">classify_piece</a>(
      chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a953645d7dbb5789cf5feb918df3e914e">chunks</a>, chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aa3826aaf2a5a7a76b000859ace1f8602">word_res</a>-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>,
      chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aca32a87e5f9e4d04777ca3551b65b27c">splits</a>,
      pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>, blamer_bundle);
  ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#a610f90d717d1a774cefa8736714f1cc2">put</a>(pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>, classified);

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> &gt; 0) {
    <a class="code" href="ratngs_8cpp.html#a2de5b7d5a020bb9823091dbece4ea36e">print_ratings_list</a>(<span class="stringliteral">&quot;Updated ratings matrix with a new entry:&quot;</span>,
                       ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>),
                       <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset());
    ratings-&gt;<a class="code" href="class_m_a_t_r_i_x.html#ae0f2489acb8b15666cb306f82ad2c6de">print</a>(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset());
  }

  <span class="comment">// Insert initial &quot;pain points&quot; to join the newly classified blob</span>
  <span class="comment">// with its left and right neighbors.</span>
  <span class="keywordflow">if</span> (!classified-&gt;empty()) {
    <span class="keywordtype">float</span> worst_piece_cert;
    <span class="keywordtype">bool</span> fragmented;
    <span class="keywordflow">if</span> (pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a> &gt; 0) {
      <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;GetWorstPieceCertainty(
          pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>-1, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>, chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>,
          &amp;worst_piece_cert, &amp;fragmented);
      <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;GeneratePainPoint(
          pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>-1, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>, <span class="keyword">false</span>,
          <a class="code" href="classtesseract_1_1_language_model.html#a21861bc8d1d02cf8ea67f2b64136459e">LanguageModel::kInitialPainPointPriorityAdjustment</a>,
          worst_piece_cert, fragmented, best_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a1b25ef2b44d21a7204483a7ca804f293">certainty</a>(),
          <a class="code" href="classtesseract_1_1_wordrec.html#a8fa843163c3e8785a957e422b9256d35">segsearch_max_char_wh_ratio</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
          chunks_record, pain_points);
    }
    <span class="keywordflow">if</span> (pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>+1 &lt; ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>()) {
      <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;GetWorstPieceCertainty(
          pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>+1, chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>,
          &amp;worst_piece_cert, &amp;fragmented);
      <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;GeneratePainPoint(
          pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>, pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>+1, <span class="keyword">true</span>,
          <a class="code" href="classtesseract_1_1_language_model.html#a21861bc8d1d02cf8ea67f2b64136459e">LanguageModel::kInitialPainPointPriorityAdjustment</a>,
          worst_piece_cert, fragmented, best_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a1b25ef2b44d21a7204483a7ca804f293">certainty</a>(),
          <a class="code" href="classtesseract_1_1_wordrec.html#a8fa843163c3e8785a957e422b9256d35">segsearch_max_char_wh_ratio</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
          chunks_record, pain_points);
    }
  }

  <span class="comment">// Record a pending entry with the pain_point and each of its parents.</span>
  <span class="keywordtype">int</span> parent_row = pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a> - 1;
  <span class="keywordflow">if</span> (parent_row &lt; 0) {  <span class="comment">// this node has no parents</span>
    (*pending)[pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>].add_sorted(
        <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a5b59162836f4c12d641f19298d96daba">SEG_SEARCH_PENDING::compare</a>, <span class="keyword">true</span>,
        <span class="keyword">new</span> <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html">SEG_SEARCH_PENDING</a>(pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
                               <a class="code" href="classtesseract_1_1_language_model.html#aa6d25aa709ba6ef4751d481f810e64f7">LanguageModel::kAllChangedFlag</a>));
  } <span class="keywordflow">else</span> {
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> parent_col = 0; parent_col &lt; pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>; ++parent_col) {
      <span class="keywordflow">if</span> (ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(parent_col, parent_row) != <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a>) {
        (*pending)[pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>].add_sorted(
            <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a5b59162836f4c12d641f19298d96daba">SEG_SEARCH_PENDING::compare</a>, <span class="keyword">true</span>,
            <span class="keyword">new</span> <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html">SEG_SEARCH_PENDING</a>(pain_point.<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>,
                                   ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(parent_col, parent_row),
                                   <a class="code" href="classtesseract_1_1_language_model.html#aa6d25aa709ba6ef4751d481f810e64f7">LanguageModel::kAllChangedFlag</a>));
      }
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5b44d020ea7f9d19d2e8f71b4e83113c"></a><!-- doxytag: member="tesseract::Wordrec::program_editdown" ref="a5b44d020ea7f9d19d2e8f71b4e83113c" args="(inT32 elasped_time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::program_editdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>elasped_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tface_8cpp_source.html#l00080">80</a> of file <a class="el" href="tface_8cpp_source.html">tface.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                 {
  <a class="code" href="classtesseract_1_1_classify.html#ae5e4880c5acc91b77308fbd6ab706b13">EndAdaptiveClassifier</a>();
  <a class="code" href="classtesseract_1_1_wordrec.html#a7518e041a8ddab1d1a2b7e609553b8e3">blob_match_table</a>.end_match_table();
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().InitChoiceAccum();
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().End();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a318cffefddd77027079285472c9c54a2"></a><!-- doxytag: member="tesseract::Wordrec::program_editup" ref="a318cffefddd77027079285472c9c54a2" args="(const char *textbase, bool init_classifier, bool init_permute)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::program_editup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>textbase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>init_classifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>init_permute</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tface_8cpp_source.html#l00050">50</a> of file <a class="el" href="tface_8cpp_source.html">tface.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                             {
  <span class="keywordflow">if</span> (textbase != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <a class="code" href="classtesseract_1_1_c_c_util.html#a5eea0d996032e28207d801a1ee92d388">imagefile</a> = textbase;
  <a class="code" href="featdefs_8cpp.html#a6e4c84ab01e39577e4a74d9ab1eff68b">InitFeatureDefs</a>(&amp;<a class="code" href="classtesseract_1_1_classify.html#a6ebcfd2968c704f99efd40075ecdb138">feature_defs_</a>);
  <a class="code" href="fxdefs_8cpp.html#a76570fce55d7fb60d03f897278284cda">SetupExtractors</a>(&amp;<a class="code" href="classtesseract_1_1_classify.html#a6ebcfd2968c704f99efd40075ecdb138">feature_defs_</a>);
  <a class="code" href="classtesseract_1_1_classify.html#a2f9389a2d855d2a59e7892d3ba884887">InitAdaptiveClassifier</a>(init_classifier);
  <span class="keywordflow">if</span> (init_dict) <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().Load();
  <a class="code" href="classtesseract_1_1_wordrec.html#a671c4b102b976c600adc3bf60ee44323">pass2_ok_split</a> = <a class="code" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a>;
  <a class="code" href="classtesseract_1_1_wordrec.html#ade3cecfe9b377045db0abe2d06762c1e">pass2_seg_states</a> = <a class="code" href="classtesseract_1_1_wordrec.html#a57c3675d967208936be65a14e5b64c7d">wordrec_num_seg_states</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeec11442b97898cd44ddfe568dd9ee0f"></a><!-- doxytag: member="tesseract::Wordrec::push_queue" ref="aeec11442b97898cd44ddfe568dd9ee0f" args="(HEAP *queue, STATE *state, FLOAT32 worst_priority, FLOAT32 priority, bool debug)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::push_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_h_e_a_p.html">HEAP</a> *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>worst_priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>debug</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00629">629</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                       {
  <a class="code" href="struct_h_e_a_p_e_n_t_r_y.html">HEAPENTRY</a> entry;

  <span class="keywordflow">if</span> (priority &lt; worst_priority) {
    <span class="keywordflow">if</span> (<a class="code" href="oldheap_8h.html#adef5e73cd09ccb5b785927a8b7499873">SizeOfHeap</a> (queue) &gt;= <a class="code" href="oldheap_8h.html#af7057d20ec3cbd5fc55f9367ba365a7e">MaxSizeOfHeap</a>(queue)) {
      <span class="keywordflow">if</span> (debug) <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Heap is Full\n&quot;</span>);
      <span class="keywordflow">return</span>;
    }
    entry.<a class="code" href="struct_h_e_a_p_e_n_t_r_y.html#ab04a38c2cfaa44594782f052cbe7414d">Data</a> = (<span class="keywordtype">char</span> *) <a class="code" href="states_8cpp.html#ac2e9f7b195c3ee2878144de8cae6ec67">new_state</a> (state);
    <a class="code" href="classtesseract_1_1_wordrec.html#af285813a72895f9b09f4e0f3021e721c">num_pushed</a>++;
    entry.<a class="code" href="struct_h_e_a_p_e_n_t_r_y.html#aa80cabd8128f5fa5a64e00b2e41e9c54">Key</a> = priority;
    <a class="code" href="oldheap_8cpp.html#a21a037334c93e1d0e7ae2059203a9cf3">HeapStore</a>(queue, &amp;entry);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1dd426293ba3d6d90f8740285190336f"></a><!-- doxytag: member="tesseract::Wordrec::rating_priority" ref="a1dd426293ba3d6d90f8740285190336f" args="(CHUNKS_RECORD *chunks_record, STATE *state, int num_joints)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> tesseract::Wordrec::rating_priority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_joints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heuristic_8cpp_source.html#l00175">175</a> of file <a class="el" href="heuristic_8cpp_source.html">heuristic.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                 {
  BLOB_CHOICE_LIST *blob_choices;
  BLOB_CHOICE_IT blob_choice_it;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> first_chunk = 0;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> last_chunk;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> ratings = 0;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> weights = 0;

  <a class="code" href="states_8h.html#a5fa79db9c64231406ef3807adfad627d">PIECES_STATE</a> blob_chunks;
  <a class="code" href="states_8cpp.html#acd6fd8bb4f29a8f5674ec05b47e63466">bin_to_pieces</a>(state, <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>, blob_chunks);

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; blob_chunks[x]; x++) {
    last_chunk = first_chunk + blob_chunks[x];

    blob_choices = chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(first_chunk, last_chunk - 1);
    <span class="keywordflow">if</span> (blob_choices != <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a> &amp;&amp; blob_choices-&gt;length() &gt; 0) {
      blob_choice_it.set_to_list(blob_choices);
      ratings += (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) blob_choice_it.data()-&gt;rating();
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = first_chunk; y &lt; last_chunk; y++) {
        weights += (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) (chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#afa46370f180659bdd3be60d7d4ed21ed">weights</a>[y]);
      }
    }
    first_chunk = last_chunk;
  }
  <span class="keywordflow">if</span> (weights &lt;= 0)
    weights = 1;
  <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> rating_cost = <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a><span class="keyword">&gt;</span>(ratings) /
                        static_cast&lt;FLOAT32&gt;(weights);
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a> &gt; 2)
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;rating_cost: r%f / w%f = %f\n&quot;</span>, ratings, weights, rating_cost);
  <span class="keywordflow">return</span> rating_cost;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a540decbb88b2e701402b80fd7395d03e"></a><!-- doxytag: member="tesseract::Wordrec::rebuild_current_state" ref="a540decbb88b2e701402b80fd7395d03e" args="(WERD_RES *word, STATE *state, BLOB_CHOICE_LIST_VECTOR *char_choices, MATRIX *ratings)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> * tesseract::Wordrec::rebuild_current_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>old_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> *&#160;</td>
          <td class="paramname"><em>ratings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>rebuild_current_state</p>
<p>Transfers the given state to the word's output fields: rebuild_word, best_state, box_word, and returns the corresponding blob choices. </p>

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00332">332</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                     {
  <span class="comment">// Initialize search_state, num_joints, x, y.</span>
  <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> = <a class="code" href="tessarray_8h.html#a89ee8010120771c8612dc7058b327f84">array_count</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>);
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="plotseg_8cpp.html#a2aed15ed158681a35b22e37ce65cbc3f">wordrec_display_segmentations</a>) {
      <a class="code" href="states_8cpp.html#acb25e4d3e4da45c03f24fa3fcada7a98">print_state</a>(<span class="stringliteral">&quot;Rebuilding state&quot;</span>, state, num_joints);
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  <span class="comment">// Setup the rebuild_word ready for the output blobs.</span>
  <span class="keywordflow">if</span> (word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a211ab5c5a13123ee7bdc7459d3363f9d">rebuild_word</a> != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keyword">delete</span> word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a211ab5c5a13123ee7bdc7459d3363f9d">rebuild_word</a>;
  word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a211ab5c5a13123ee7bdc7459d3363f9d">rebuild_word</a> = <span class="keyword">new</span> <a class="code" href="struct_t_w_e_r_d.html">TWERD</a>;
  <span class="comment">// Setup the best_state.</span>
  word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>.<a class="code" href="class_generic_vector.html#a9cdbff49b186574b83e43afba606fdd9">clear</a>();
  <a class="code" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a> search_state = <a class="code" href="states_8cpp.html#a65830cfe21c29feec92f03627b51ff65">bin_to_chunks</a>(state, num_joints);
  <span class="comment">// See which index is which below for information on x and y.</span>
  <span class="keywordtype">int</span> x = 0;
  <span class="keywordtype">int</span> y;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= search_state[0]; i++) {
    y = x + search_state[i];
    x = y + 1;
  }
  y = <a class="code" href="blobs_8cpp.html#aa8048f4c65af2775452ad5d4dfbca053">count_blobs</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>) - 1;

  <span class="comment">// Initialize char_choices, expanded_fragment_lengths:</span>
  <span class="comment">// e.g. if fragment_lengths = {1 1 2 3 1},</span>
  <span class="comment">// expanded_fragment_lengths_str = {1 1 2 2 3 3 3 1}.</span>
  <a class="code" href="class_generic_vector.html">BLOB_CHOICE_LIST_VECTOR</a> *char_choices = <span class="keyword">new</span> <a class="code" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a>();
  <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> expanded_fragment_lengths_str = <span class="stringliteral">&quot;&quot;</span>;
  <span class="keywordtype">bool</span> state_has_fragments = <span class="keyword">false</span>;
  <span class="keyword">const</span> <span class="keywordtype">char</span> *fragment_lengths = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a7be59abe97b052dd3aaa324aea8c4a6c">length</a>() &gt; 0) {
    fragment_lengths = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#ad62ae184e9df1f3ed26c9af382b5e3f2">fragment_lengths</a>();
  }
  <span class="keywordflow">if</span> (fragment_lengths) {
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a7be59abe97b052dd3aaa324aea8c4a6c">length</a>(); ++i) {
      *char_choices += <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>.<a class="code" href="class_generic_vector.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(0);
      <span class="keywordflow">if</span> (fragment_lengths[i] &gt; 1) {
        state_has_fragments = <span class="keyword">true</span>;
      }
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; fragment_lengths[i]; ++j) {
        expanded_fragment_lengths_str += fragment_lengths[i];
      }
    }
  } <span class="keywordflow">else</span> {
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= search_state[0]; ++i) {
      expanded_fragment_lengths_str += (char)1;
      *char_choices += <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>.<a class="code" href="class_generic_vector.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(0);
    }
  }

  <span class="comment">// Set up variables for concatenating fragments.</span>
  <span class="keyword">const</span> <span class="keywordtype">char</span> *word_lengths_ptr = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">const</span> <span class="keywordtype">char</span> *word_ptr = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">if</span> (state_has_fragments) {
    <span class="comment">// Make word_lengths_ptr point to the last element in</span>
    <span class="comment">// best_choice-&gt;unichar_lengths().</span>
    word_lengths_ptr = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a93ab94b6fa6d5c0469fb52d66c62968c">unichar_lengths</a>().<a class="code" href="class_s_t_r_i_n_g.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>();
    word_lengths_ptr += (strlen(word_lengths_ptr)-1);
    <span class="comment">// Make word_str point to the beginning of the last</span>
    <span class="comment">// unichar in best_choice-&gt;unichar_string().</span>
    word_ptr = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a41d740f0accccdfb245d34d554122116">unichar_string</a>().<a class="code" href="class_s_t_r_i_n_g.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>();
    word_ptr += (strlen(word_ptr)-*word_lengths_ptr);
  }
  <span class="keyword">const</span> <span class="keywordtype">char</span> *expanded_fragment_lengths =
    expanded_fragment_lengths_str.<a class="code" href="class_s_t_r_i_n_g.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>();
  <span class="keywordtype">char</span> unichar[<a class="code" href="unichar_8h.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a> + 1];

  <span class="comment">// Populate char_choices list such that it corresponds to search_state.</span>
  <span class="comment">//</span>
  <span class="comment">// If we are rebuilding a state that contains character fragments:</span>
  <span class="comment">// -- combine blobs that belong to character fragments</span>
  <span class="comment">// -- re-classify the blobs to obtain choices list for the merged blob</span>
  <span class="comment">// -- ensure that correct classification appears in the new choices list</span>
  <span class="comment">//    NOTE: a choice composed form original fragment choices will be always</span>
  <span class="comment">//    added to the new choices list for each character composed from</span>
  <span class="comment">//    fragments (even if the choice for the corresponding character appears</span>
  <span class="comment">//    in the re-classified choices list of for the newly merged blob).</span>
  <span class="keywordtype">int</span> ss_index = search_state[0];
  <span class="comment">// Which index is which?</span>
  <span class="comment">// char_choices_index refers to the finished product: there is one for each</span>
  <span class="comment">// blob/unicharset entry in the final word.</span>
  <span class="comment">// ss_index refers to the search_state, and indexes a group (chunk) of blobs</span>
  <span class="comment">// that were classified together for the best state.</span>
  <span class="comment">// old_choice_index is a copy of ss_index, and accesses the old_choices,</span>
  <span class="comment">// which correspond to chunks in the best state. old_choice_index gets</span>
  <span class="comment">// set to -1 on a fragment set, as there is no corresponding chunk in</span>
  <span class="comment">// the best state.</span>
  <span class="comment">// x and y refer to the underlying blobs and are the first and last blob</span>
  <span class="comment">// indices in a chunk.</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> char_choices_index = char_choices-&gt;<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() - 1;
       char_choices_index &gt;= 0;
       --char_choices_index) {
    <span class="comment">// The start and end of the blob to rebuild.</span>
    <span class="keywordtype">int</span> true_x = x;
    <span class="keywordtype">int</span> true_y = y;
    <span class="comment">// The fake merged fragment choice.</span>
    <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a>* merged_choice = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="comment">// Test for and combine fragments first.</span>
    <span class="keywordtype">int</span> fragment_pieces = expanded_fragment_lengths[ss_index];
    <span class="keywordtype">int</span> old_choice_index = ss_index;

    <span class="keywordflow">if</span> (fragment_pieces &gt; 1) {
      strncpy(unichar, word_ptr, *word_lengths_ptr);
      unichar[*word_lengths_ptr] = <span class="charliteral">&#39;\0&#39;</span>;
      merged_choice = <a class="code" href="classtesseract_1_1_wordrec.html#afba032e7e9cea932a806e56424966237">rebuild_fragments</a>(unichar, expanded_fragment_lengths,
                                        old_choice_index, old_choices);
      old_choice_index = -1;
    }
    <span class="keywordflow">while</span> (fragment_pieces &gt; 0) {
      true_x = x;
      <span class="comment">// Move left to the previous blob.</span>
      y = x - 1;
      x = y - search_state[ss_index--];
      --fragment_pieces;
    }
    word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>[char_choices_index] = true_y + 1 - true_x;
    BLOB_CHOICE_LIST *current_choices = <a class="code" href="classtesseract_1_1_wordrec.html#aad7c820e5bb342d7ea7743269e160a20">join_blobs_and_classify</a>(
        word, true_x, true_y, old_choice_index, ratings, old_choices);
    <span class="keywordflow">if</span> (merged_choice != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="comment">// Insert merged_blob into current_choices, such that current_choices</span>
      <span class="comment">// are still sorted in non-descending order by rating.</span>
      <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(!current_choices-&gt;empty());
      BLOB_CHOICE_IT choice_it(current_choices);
      <span class="keywordflow">for</span> (choice_it.mark_cycle_pt(); !choice_it.cycled_list() &amp;&amp;
           merged_choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#a7fbd2d505bf5b55beee424096fb1e9bc">rating</a>() &gt; choice_it.data()-&gt;rating();
           choice_it.forward());
        choice_it.add_before_stay_put(merged_choice);
    }
    <span class="comment">// Get rid of fragments in current_choices.</span>
    BLOB_CHOICE_IT choice_it(current_choices);
    <span class="keywordflow">for</span> (choice_it.mark_cycle_pt(); !choice_it.cycled_list();
        choice_it.forward()) {
      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().get_fragment(
          choice_it.data()-&gt;unichar_id())) {
        <span class="keyword">delete</span> choice_it.extract();
      }
    }
    char_choices-&gt;<a class="code" href="class_generic_vector.html#a067b7833ee66238b7b5e230404525fcb">set</a>(current_choices, char_choices_index);

    <span class="comment">// Update word_ptr and word_lengths_ptr.</span>
    <span class="keywordflow">if</span> (word_lengths_ptr != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; word_ptr != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      word_lengths_ptr--;
      word_ptr -= (*word_lengths_ptr);
    }
  }
  old_choices-&gt;<a class="code" href="class_generic_vector.html#a98f62dccd75224a60437c2761bd215cd">delete_data_pointers</a>();
  <span class="keyword">delete</span> old_choices;
  <a class="code" href="freelist_8cpp.html#ab462a857e5edf360ae4881bcc92a0bcf">memfree</a>(search_state);

  <span class="keywordflow">return</span> char_choices;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afba032e7e9cea932a806e56424966237"></a><!-- doxytag: member="tesseract::Wordrec::rebuild_fragments" ref="afba032e7e9cea932a806e56424966237" args="(const char *unichar, const char *expanded_fragment_lengths, int choice_index, BLOB_CHOICE_LIST_VECTOR *old_choices)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a> * tesseract::Wordrec::rebuild_fragments </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>unichar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expanded_fragment_lengths</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>choice_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>old_choices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00680">680</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
  <span class="keywordtype">float</span> rating = 0.0f;
  <span class="keywordtype">float</span> certainty = 0.0f;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> min_xheight = -<a class="code" href="host_8h.html#a3905e54374e49708219791e7d59c60fb">MAX_INT16</a>;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> max_xheight = <a class="code" href="host_8h.html#a3905e54374e49708219791e7d59c60fb">MAX_INT16</a>;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> fragment_pieces = expanded_fragment_lengths[choice_index] - 1;
       fragment_pieces &gt;= 0; --fragment_pieces, --choice_index) {
    <span class="comment">// Get a pointer to the classifier results from the old_choices.</span>
    BLOB_CHOICE_LIST *current_choices = old_choices-&gt;<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(choice_index);
    <span class="comment">// Populate fragment with updated values and look for the</span>
    <span class="comment">// fragment with the same values in current_choices.</span>
    <span class="comment">// Update rating and certainty of the character being composed.</span>
    <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> fragment;
    fragment.<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#acb20b5f377469c19f37d197ffb9559f8">set_all</a>(unichar, fragment_pieces,
                     expanded_fragment_lengths[choice_index], <span class="keyword">false</span>);
    BLOB_CHOICE_IT choice_it(current_choices);
    <span class="keywordflow">for</span> (choice_it.mark_cycle_pt(); !choice_it.cycled_list();
        choice_it.forward()) {
      <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a>* choice = choice_it.data();
      <span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *current_fragment =
          <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().get_fragment(choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#aaba6190b77c5f3dc21905fc4118afa94">unichar_id</a>());
      <span class="keywordflow">if</span> (current_fragment &amp;&amp; fragment.<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a5416dda467e92c5e88a454466c60b980">equals</a>(current_fragment)) {
        rating += choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#a7fbd2d505bf5b55beee424096fb1e9bc">rating</a>();
        <span class="keywordflow">if</span> (choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#af53d45b718c562ea7209b583c77ac14e">certainty</a>() &lt; certainty) {
          certainty = choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#af53d45b718c562ea7209b583c77ac14e">certainty</a>();
        }
        <a class="code" href="helpers_8h.html#a6a6e013c7a0b4afa87f5e37697f7f99f">IntersectRange</a>(choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#a1d566c10d8bc8882aeb1d57187cebe18">min_xheight</a>(), choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#ae435b82552a508cafce764144f7f0871">max_xheight</a>(),
                       &amp;min_xheight, &amp;max_xheight);
        <span class="keywordflow">break</span>;
      }
    }
    <span class="keywordflow">if</span> (choice_it.cycled_list()) {
      <a class="code" href="ratngs_8cpp.html#a2de5b7d5a020bb9823091dbece4ea36e">print_ratings_list</a>(<span class="stringliteral">&quot;Failure&quot;</span>, current_choices, <a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>);
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Failed to find fragment %s at index=%d\n&quot;</span>,
              fragment.<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ab845f2c4b4a4bac23392806c445f1fe4">to_string</a>().<a class="code" href="class_s_t_r_i_n_g.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>(), choice_index);
    }
    <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(!choice_it.cycled_list());  <span class="comment">// Be sure we found the fragment.</span>
  }
  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a>(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().unichar_to_id(unichar),
                         rating, certainty, -1, -1, 0,
                         min_xheight, max_xheight, <span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa635d222f122122d4abad1b883d92fb5"></a><!-- doxytag: member="tesseract::Wordrec::record_blob_bounds" ref="aa635d222f122122d4abad1b883d92fb5" args="(TBLOB *blobs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_b_o_x.html">TBOX</a> * tesseract::Wordrec::record_blob_bounds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blobs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pieces_8cpp_source.html#l00393">393</a> of file <a class="el" href="pieces_8cpp_source.html">pieces.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
  <span class="keywordtype">int</span> nblobs = <a class="code" href="blobs_8cpp.html#aa8048f4c65af2775452ad5d4dfbca053">count_blobs</a>(blobs);
  <a class="code" href="class_t_b_o_x.html">TBOX</a> *bboxes = <span class="keyword">new</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>[nblobs];

  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x = 0;
  <span class="keywordflow">for</span> (<a class="code" href="struct_t_b_l_o_b.html">TBLOB</a>* blob = blobs; blob != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; blob = blob-&gt;next) {
    bboxes[x] = blob-&gt;bounding_box();
    x++;
  }
  <span class="keywordflow">return</span> bboxes;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9f070b021f06de480fda80a61a772d47"></a><!-- doxytag: member="tesseract::Wordrec::record_piece_ratings" ref="a9f070b021f06de480fda80a61a772d47" args="(TBLOB *blobs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> * tesseract::Wordrec::record_piece_ratings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blobs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="pieces_8cpp_source.html#l00414">414</a> of file <a class="el" href="pieces_8cpp_source.html">pieces.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                  {
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_blobs = <a class="code" href="blobs_8cpp.html#aa8048f4c65af2775452ad5d4dfbca053">count_blobs</a>(blobs);
  <a class="code" href="class_t_b_o_x.html">TBOX</a> *bounds = <a class="code" href="classtesseract_1_1_wordrec.html#aa635d222f122122d4abad1b883d92fb5">record_blob_bounds</a>(blobs);
  <a class="code" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings = <span class="keyword">new</span> <a class="code" href="class_m_a_t_r_i_x.html">MATRIX</a>(num_blobs);

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; num_blobs; x++) {
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = x; y &lt; num_blobs; y++) {
      <a class="code" href="class_t_b_o_x.html">TBOX</a> piecebox = <a class="code" href="pieces_8cpp.html#a50178bc6fca28775bd05503bd7343d81">bounds_of_piece</a>(bounds, x, y);
      BLOB_CHOICE_LIST *choices = <a class="code" href="classtesseract_1_1_wordrec.html#a7518e041a8ddab1d1a2b7e609553b8e3">blob_match_table</a>.get_match_by_box(piecebox);
      <span class="keywordflow">if</span> (choices != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
        ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#a610f90d717d1a774cefa8736714f1cc2">put</a>(x, y, choices);
      }
    }
  }

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a0dcc862e7e80e66c451e8e98b534ca46">merge_fragments_in_matrix</a>)
    <a class="code" href="classtesseract_1_1_wordrec.html#a60e821ddb0f98741bb729c5163e1189c">merge_fragments</a>(ratings, num_blobs);

  <span class="keyword">delete</span> []bounds;
  <span class="keywordflow">return</span> ratings;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a35746f8e970b19443f459c060a8775c9"></a><!-- doxytag: member="tesseract::Wordrec::replace_char_widths" ref="a35746f8e970b19443f459c060a8775c9" args="(CHUNKS_RECORD *chunks_record, SEARCH_STATE state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::replace_char_widths </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bestfirst_8cpp_source.html#l00651">651</a> of file <a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                      {
  <a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *width_record;
  <span class="keywordtype">int</span> num_blobs;
  <span class="keywordtype">int</span> i;

  <a class="code" href="blobs_8h.html#a08481bc89b6e24355aaa1a3785eb5840">free_widths</a> (chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a1e5c641f46ccb7f464def3678de715d3">char_widths</a>);

  num_blobs = state[0] + 1;
  width_record = (<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *) <a class="code" href="freelist_8cpp.html#a5898fbe61f6ffe4c1be71a107193cdfd">memalloc</a> (<span class="keyword">sizeof</span> (<span class="keywordtype">int</span>) * num_blobs * 2);
  width_record-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a> = num_blobs;

  <span class="keywordflow">for</span> (i = 0; i &lt; num_blobs; i++) {

    width_record-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2 * i] = <a class="code" href="classtesseract_1_1_wordrec.html#af7a36436e7e7fd0691bc093814fc2b62">last_segmentation</a>[i].width;

    <span class="keywordflow">if</span> (i + 1 &lt; num_blobs)
      width_record-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2 * i + 1] = <a class="code" href="classtesseract_1_1_wordrec.html#af7a36436e7e7fd0691bc093814fc2b62">last_segmentation</a>[i].gap;
  }
  chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a1e5c641f46ccb7f464def3678de715d3">char_widths</a> = width_record;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad88a55a41c46135e8173fd81cbeb1751"></a><!-- doxytag: member="tesseract::Wordrec::reverse_outline" ref="ad88a55a41c46135e8173fd81cbeb1751" args="(EDGEPT *outline)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::reverse_outline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>outline</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="outlines_8cpp_source.html#l00164">164</a> of file <a class="el" href="outlines_8cpp_source.html">outlines.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                             {
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *edgept = outline;
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *temp;

  <span class="keywordflow">do</span> {
                                 <span class="comment">/* Swap next and prev */</span>
    temp = edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a8326da8daf597bcdc5a05064a37cbbb1">prev</a>;
    edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a8326da8daf597bcdc5a05064a37cbbb1">prev</a> = edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
    edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a> = temp;
    <span class="comment">/* Set up vec field */</span>
    edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a6da204ff253a65e00daae7753b82c9f7">vec</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> = edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> - edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;
    edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a6da204ff253a65e00daae7753b82c9f7">vec</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> = edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a> - edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#a6d62f015b74612e43975e439a096039c">y</a>;

    edgept = edgept-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a8326da8daf597bcdc5a05064a37cbbb1">prev</a>;       <span class="comment">/* Go to next point */</span>
  }
  <span class="keywordflow">while</span> (edgept != outline);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e07fc3051cf28bed0511983b8f8b69d"></a><!-- doxytag: member="tesseract::Wordrec::SaveAltChoices" ref="a3e07fc3051cf28bed0511983b8f8b69d" args="(const LIST &amp;best_choices, WERD_RES *word)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::SaveAltChoices </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="baseapi_8h.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> &amp;&#160;</td>
          <td class="paramname"><em>best_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8cpp_source.html#l00173">173</a> of file <a class="el" href="wordrec_8cpp_source.html">wordrec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     {
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a7c4b69c62b42a87e75814abeab2b119a">alt_choices</a>.<a class="code" href="class_generic_vector.html#afb0d8c52a603b6aa965d63bbf06a27dd">empty</a>());
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a2a518e1c690490fe520c26d9acb8b45a">alt_states</a>.<a class="code" href="class_generic_vector.html#afb0d8c52a603b6aa965d63bbf06a27dd">empty</a>());
  <a class="code" href="structlist__rec.html">LIST</a> list_it;
  <a class="code" href="oldlist_8h.html#ae72ce4a628b0a33a34c2a74c18cd44a5">iterate_list</a>(list_it, best_choices) {
    <a class="code" href="class_v_i_a_b_l_e___c_h_o_i_c_e___s_t_r_u_c_t.html">VIABLE_CHOICE</a> choice =
        <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="class_v_i_a_b_l_e___c_h_o_i_c_e___s_t_r_u_c_t.html">VIABLE_CHOICE</a><span class="keyword">&gt;</span>(<a class="code" href="oldlist_8h.html#a69547be764424f18b0be535400747978">first_node</a>(list_it));
    <a class="code" href="struct_c_h_a_r___c_h_o_i_c_e.html">CHAR_CHOICE</a> *char_choice = &amp;(choice-&gt;<a class="code" href="class_v_i_a_b_l_e___c_h_o_i_c_e___s_t_r_u_c_t.html#ac8d4e0d1f5355092b5cb33f541aa54c2">Blob</a>[0]);
    <a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *alt_choice = <span class="keyword">new</span> <a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a053a2aeeddc26a93a41a04fa08dd688a">uch_set</a>, choice-&gt;<a class="code" href="class_v_i_a_b_l_e___c_h_o_i_c_e___s_t_r_u_c_t.html#a094ecf960979babf7ff7d1ca74b99c61">Length</a>);
    word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a2a518e1c690490fe520c26d9acb8b45a">alt_states</a>.<a class="code" href="class_generic_vector.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(<a class="code" href="class_generic_vector.html">GenericVector&lt;int&gt;</a>(choice-&gt;<a class="code" href="class_v_i_a_b_l_e___c_h_o_i_c_e___s_t_r_u_c_t.html#a094ecf960979babf7ff7d1ca74b99c61">Length</a>));
    <a class="code" href="class_generic_vector.html">GenericVector&lt;int&gt;</a> &amp;alt_state = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a2a518e1c690490fe520c26d9acb8b45a">alt_states</a>.<a class="code" href="class_generic_vector.html#a6e6d6497a6f7dd999b6d591c15354167">back</a>();
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; choice-&gt;<a class="code" href="class_v_i_a_b_l_e___c_h_o_i_c_e___s_t_r_u_c_t.html#a094ecf960979babf7ff7d1ca74b99c61">Length</a>; char_choice++, i++) {
      alt_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a222ced86be88a66a119b6c5d10af23fb">append_unichar_id_space_allocated</a>(
          char_choice-&gt;<a class="code" href="struct_c_h_a_r___c_h_o_i_c_e.html#afae513ffd1d6fd0167baa1dce1b86c60">Class</a>, 1, 0, 0);
      alt_state.<a class="code" href="class_generic_vector.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(char_choice-&gt;<a class="code" href="struct_c_h_a_r___c_h_o_i_c_e.html#ac928eaafcdc57fcd44d82ab9a56e9da3">NumChunks</a>);
    }
    alt_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a8536420fe62adffbfda94a08796db533">set_rating</a>(choice-&gt;<a class="code" href="class_v_i_a_b_l_e___c_h_o_i_c_e___s_t_r_u_c_t.html#a651bc1b5ad4d2a7ce33c0f564c13ecb7">Rating</a>);
    alt_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a0d8b3f73cb02eb5f6e492ffd1304fe85">set_certainty</a>(choice-&gt;<a class="code" href="class_v_i_a_b_l_e___c_h_o_i_c_e___s_t_r_u_c_t.html#a88c4c888e5f46a1c56b3fc934726514f">Certainty</a>);
    word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a7c4b69c62b42a87e75814abeab2b119a">alt_choices</a>.<a class="code" href="class_generic_vector.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(alt_choice);
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">wordrec_debug_level</a> &gt; 0) {
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;SaveAltChoices: %s %g\n&quot;</span>,
              alt_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a41d740f0accccdfb245d34d554122116">unichar_string</a>().<a class="code" href="class_s_t_r_i_n_g.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>(), alt_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a52ea24dcb5ff15ad8aee3fd774622216">rating</a>());
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a239d08f59bdd41a53ab489ca138fa989"></a><!-- doxytag: member="tesseract::Wordrec::seam_priority" ref="a239d08f59bdd41a53ab489ca138fa989" args="(SEAM *seam, inT16 xmin, inT16 xmax)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> tesseract::Wordrec::seam_priority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> *&#160;</td>
          <td class="paramname"><em>seam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>xmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>xmax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00469">469</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
  <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> priority;

  <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a> == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    priority = 0;

  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a> == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    priority = (seam-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a> +
      <a class="code" href="classtesseract_1_1_wordrec.html#a409c4fc630ecbc283e3a6aa1b08debf7">full_split_priority</a> (seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>, xmin, xmax));
  }

  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seam-&gt;<a class="code" href="structseam__record.html#ad3878ea3c362e24fcdd063ed81f9ac5a">split3</a> == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="split_8cpp.html#ac76a475de30b432aa78727bd6b93a729">split_outline</a> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>);
    priority = (seam-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a> +
      <a class="code" href="classtesseract_1_1_wordrec.html#a409c4fc630ecbc283e3a6aa1b08debf7">full_split_priority</a> (seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>, xmin, xmax));
    <a class="code" href="split_8cpp.html#a3c66a2f04c0878b8982e04d5a3d29e04">unsplit_outlines</a> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>);
  }

  <span class="keywordflow">else</span> {
    <a class="code" href="split_8cpp.html#ac76a475de30b432aa78727bd6b93a729">split_outline</a> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>);
    <a class="code" href="split_8cpp.html#ac76a475de30b432aa78727bd6b93a729">split_outline</a> (seam-&gt;<a class="code" href="structseam__record.html#ad3878ea3c362e24fcdd063ed81f9ac5a">split3</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, seam-&gt;<a class="code" href="structseam__record.html#ad3878ea3c362e24fcdd063ed81f9ac5a">split3</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>);
    priority = (seam-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a> +
      <a class="code" href="classtesseract_1_1_wordrec.html#a409c4fc630ecbc283e3a6aa1b08debf7">full_split_priority</a> (seam-&gt;<a class="code" href="structseam__record.html#a4161a1874921a7854bdd3d7a9f930729">split1</a>, xmin, xmax));
    <a class="code" href="split_8cpp.html#a3c66a2f04c0878b8982e04d5a3d29e04">unsplit_outlines</a> (seam-&gt;<a class="code" href="structseam__record.html#ad3878ea3c362e24fcdd063ed81f9ac5a">split3</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, seam-&gt;<a class="code" href="structseam__record.html#ad3878ea3c362e24fcdd063ed81f9ac5a">split3</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>);
    <a class="code" href="split_8cpp.html#a3c66a2f04c0878b8982e04d5a3d29e04">unsplit_outlines</a> (seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#a2451170e7785bb495c0dd3d96fc71167">point1</a>, seam-&gt;<a class="code" href="structseam__record.html#a75d831b3365583331780636979fbb321">split2</a>-&gt;<a class="code" href="structsplit__record.html#adb5ec4152eddde15c1996133177a9a58">point2</a>);
  }

  <span class="keywordflow">return</span> (priority);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5fd4729ef162689b68d20f9bdeb0c3e"></a><!-- doxytag: member="tesseract::Wordrec::seamcut_priority" ref="aa5fd4729ef162689b68d20f9bdeb0c3e" args="(SEAMS seams, STATE *state, int num_joints)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> tesseract::Wordrec::seamcut_priority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="seam_8h.html#adee8715ab68f92e7f3cfa8de202d5a30">SEAMS</a>&#160;</td>
          <td class="paramname"><em>seams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_joints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heuristic_8cpp_source.html#l00142">142</a> of file <a class="el" href="heuristic_8cpp_source.html">heuristic.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                  {
  <span class="keywordtype">int</span> x;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask = (<a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> &gt; 32) ? (1 &lt;&lt; (<a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> - 1 - 32))
                                        : (1 &lt;&lt; (<a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> - 1));
  <span class="keywordtype">float</span> seam_cost = 0.0f;
  <span class="keywordflow">for</span> (x = <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> - 1; x &gt;= 0; x--) {
    <span class="keywordtype">int</span> i = <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> - 1 - x;
    <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> value = (x &lt; 32) ? state-&gt;<a class="code" href="struct_s_t_a_t_e.html#aa75ceb95132aecb5a8ae1e594a19733a">part2</a> : state-&gt;<a class="code" href="struct_s_t_a_t_e.html#a2099a72d99d2ba5f828ad8538d328f4b">part1</a>;
    <span class="keywordtype">bool</span> state_on = value &amp; mask;
    if (state_on) {
      <a class="code" href="structseam__record.html">SEAM</a>* seam = (<a class="code" href="structseam__record.html">SEAM</a> *) <a class="code" href="tessarray_8h.html#a290cd2ea119e279ad48b57fbe5ca1aad">array_value</a>(seams, i);
      seam_cost += seam-&gt;<a class="code" href="structseam__record.html#a73a33b08d22988d595cd18da31235dc4">priority</a>;
    }
    <span class="keywordflow">if</span> (mask == 1)
      mask = 1 &lt;&lt; 31;
    <span class="keywordflow">else</span>
      mask &gt;&gt;= 1;
  }
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a> &gt; 2)
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;seam_cost: %f\n&quot;</span>, seam_cost);
  <span class="keywordflow">return</span> seam_cost;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aea3997058b7c1683957d275d17bc20d6"></a><!-- doxytag: member="tesseract::Wordrec::SegSearch" ref="aea3997058b7c1683957d275d17bc20d6" args="(CHUNKS_RECORD *chunks_record, WERD_CHOICE *best_choice, BLOB_CHOICE_LIST_VECTOR *best_char_choices, WERD_CHOICE *raw_choice, STATE *output_best_state, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::SegSearch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td>
          <td class="paramname"><em>best_choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>best_char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a> *&#160;</td>
          <td class="paramname"><em>raw_choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>output_best_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="segsearch_8cpp_source.html#l00035">35</a> of file <a class="el" href="segsearch_8cpp_source.html">segsearch.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                     {
  <span class="keywordtype">int</span> row, col = 0;
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> &gt; 0) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Starting SegSearch on ratings matrix:\n&quot;</span>);
    chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>-&gt;<a class="code" href="class_m_a_t_r_i_x.html#ae0f2489acb8b15666cb306f82ad2c6de">print</a>(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset());
  }
  <span class="comment">// Start with a fresh best_choice since rating adjustments</span>
  <span class="comment">// used by the chopper and the new segmentation search are not compatible.</span>
  best_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a8536420fe62adffbfda94a08796db533">set_rating</a>(<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#aa831918b1d217afd4dc547033f642990">WERD_CHOICE::kBadRating</a>);
  <span class="comment">// TODO(antonova): Due to the fact that we currently do not re-start the</span>
  <span class="comment">// segmentation search from the best choice the chopper found, sometimes</span>
  <span class="comment">// the the segmentation search does not find the best path (that chopper</span>
  <span class="comment">// did discover) and does not have a chance to adapt to it. As soon as we</span>
  <span class="comment">// transition to using new-style language model penalties in the chopper</span>
  <span class="comment">// this issue will be resolved. But for how we are forced clear the</span>
  <span class="comment">// accumulator choices.</span>
  <span class="comment">//</span>
  <span class="comment">// Clear best choice accumulator (that is used for adaption), so that</span>
  <span class="comment">// choices adjusted by chopper do not interfere with the results from the</span>
  <span class="comment">// segmentation search.</span>
  <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().ClearBestChoiceAccum();

  <a class="code" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings = chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>;
  <span class="comment">// Priority queue containing pain points generated by the language model</span>
  <span class="comment">// The priority is set by the language model components, adjustments like</span>
  <span class="comment">// seam cost and width priority are factored into the priority.</span>
  <a class="code" href="struct_h_e_a_p.html">HEAP</a> *pain_points = <a class="code" href="oldheap_8cpp.html#a101bee15b825fee78f29c8679cc00595">MakeHeap</a>(<a class="code" href="classtesseract_1_1_wordrec.html#a0a0cfc9fb11d9ecf6961d0cc655f9070">segsearch_max_pain_points</a>);

  <span class="comment">// best_path_by_column records the lowest cost path found so far for each</span>
  <span class="comment">// column of the chunks_record-&gt;ratings matrix over all the rows.</span>
  BestPathByColumn *best_path_by_column =
    <span class="keyword">new</span> BestPathByColumn[ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>()];
  <span class="keywordflow">for</span> (col = 0; col &lt; ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>(); ++col) {
    best_path_by_column[col].avg_cost = <a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#aa831918b1d217afd4dc547033f642990">WERD_CHOICE::kBadRating</a>;
    best_path_by_column[col].best_vse = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  }

  <span class="comment">// Compute scaling factor that will help us recover blob outline length</span>
  <span class="comment">// from classifier rating and certainty for the blob.</span>
  <span class="keywordtype">float</span> rating_cert_scale = -1.0 * <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().certainty_scale / <a class="code" href="classtesseract_1_1_classify.html#ab2ed08d2587e66a131f7fcd229102566">rating_scale</a>;

  <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;InitForWord(<a class="code" href="classtesseract_1_1_wordrec.html#a143608f482c6c0c4f312740e6a5f5fd9">prev_word_best_choice_</a>,
                               <a class="code" href="classtesseract_1_1_wordrec.html#a613a7dc22729f2cb084bc7093a0a4088">assume_fixed_pitch_char_segment</a>,
                               best_choice-&gt;<a class="code" href="class_w_e_r_d___c_h_o_i_c_e.html#a1b25ef2b44d21a7204483a7ca804f293">certainty</a>(),
                               <a class="code" href="classtesseract_1_1_wordrec.html#a8fa843163c3e8785a957e422b9256d35">segsearch_max_char_wh_ratio</a>, rating_cert_scale,
                               pain_points, chunks_record, blamer_bundle,
                               <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);

  <a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html">MATRIX_COORD</a> *pain_point;
  <span class="keywordtype">float</span> pain_point_priority;
  BestChoiceBundle best_choice_bundle(
      output_best_state, best_choice, raw_choice, best_char_choices);

  <span class="comment">// pending[i] stores a list of the parent/child pair of BLOB_CHOICE_LISTs,</span>
  <span class="comment">// where i is the column of the child. Initially all the classified entries</span>
  <span class="comment">// in the ratings matrix from column 0 (with parent NULL) are inserted into</span>
  <span class="comment">// pending[0]. As the language model state is updated, new child/parent</span>
  <span class="comment">// pairs are inserted into the lists. Next, the entries in pending[1] are</span>
  <span class="comment">// considered, and so on. It is important that during the update the</span>
  <span class="comment">// children are considered in the non-decreasing order of their column, since</span>
  <span class="comment">// this guarantees that all the parents would be up to date before an update</span>
  <span class="comment">// of a child is done.</span>
  SEG_SEARCH_PENDING_LIST *pending =
    <span class="keyword">new</span> SEG_SEARCH_PENDING_LIST[ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>()];

  <span class="comment">// Search for the ratings matrix for the initial best path.</span>
  <span class="keywordflow">for</span> (row = 0; row &lt; ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>(); ++row) {
    <span class="keywordflow">if</span> (ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(0, row) != <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a>) {
      pending[0].add_sorted(
          <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a5b59162836f4c12d641f19298d96daba">SEG_SEARCH_PENDING::compare</a>, <span class="keyword">true</span>,
          <span class="keyword">new</span> <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html">SEG_SEARCH_PENDING</a>(row, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="classtesseract_1_1_language_model.html#aa6d25aa709ba6ef4751d481f810e64f7">LanguageModel::kAllChangedFlag</a>));
    }
  }
  <a class="code" href="classtesseract_1_1_wordrec.html#a6bac0a6462577e2e1057057f03901a33">UpdateSegSearchNodes</a>(0, &amp;pending, &amp;best_path_by_column, chunks_record,
                       pain_points, &amp;best_choice_bundle, blamer_bundle);

  <span class="comment">// Keep trying to find a better path by fixing the &quot;pain points&quot;.</span>
  <span class="keywordtype">int</span> num_futile_classifications = 0;
  <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> blamer_debug;
  <span class="keywordflow">while</span> (!<a class="code" href="classtesseract_1_1_wordrec.html#a904762fe91430c5094ccecb7e690e0e5">SegSearchDone</a>(num_futile_classifications) ||
         (blamer_bundle != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;
          blamer_bundle-&gt;segsearch_is_looking_for_blame)) {
    <span class="comment">// Get the next valid &quot;pain point&quot;.</span>
    <span class="keywordtype">int</span> <a class="code" href="oldlist_8cpp.html#a4a16ea0d766f4b3bc697142d5303a62c">pop</a>;
    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
      pop = <a class="code" href="oldheap_8cpp.html#a133a020354d84309c10dfea471f213f4">HeapPop</a>(pain_points, &amp;pain_point_priority, &amp;pain_point);
      <span class="keywordflow">if</span> (pop == <a class="code" href="oldheap_8h.html#a2b7cf2a3641be7b89138615764d60ba3">EMPTY</a>) <span class="keywordflow">break</span>;
      <span class="keywordflow">if</span> (pain_point-&gt;<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a45cc297774da83d0ad83ffcf4f82ccd5">Valid</a>(*ratings) &amp;&amp;
        ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(pain_point-&gt;<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>, pain_point-&gt;<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#abde52ca4976ce8acc4e70215df074ff5">row</a>) == <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a>) {
        <span class="keywordflow">break</span>;
      } <span class="keywordflow">else</span> {
        <span class="keyword">delete</span> pain_point;
      }
    }
    <span class="keywordflow">if</span> (pop == <a class="code" href="oldheap_8h.html#a2b7cf2a3641be7b89138615764d60ba3">EMPTY</a>) {
      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> &gt; 0) <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Pain points queue is empty\n&quot;</span>);
      <span class="keywordflow">break</span>;
    }
    <a class="code" href="classtesseract_1_1_wordrec.html#ab9f95be1d701222b62b7f8920f5cb9e5">ProcessSegSearchPainPoint</a>(pain_point_priority, *pain_point,
                              best_choice_bundle.best_choice, &amp;pending,
                              chunks_record, pain_points, blamer_bundle);

    <a class="code" href="classtesseract_1_1_wordrec.html#a6bac0a6462577e2e1057057f03901a33">UpdateSegSearchNodes</a>(pain_point-&gt;<a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a22a122ba151628fafb64b2957c4690fd">col</a>, &amp;pending, &amp;best_path_by_column,
                         chunks_record, pain_points, &amp;best_choice_bundle,
                         blamer_bundle);
    <span class="keywordflow">if</span> (!best_choice_bundle.updated) ++num_futile_classifications;

    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> &gt; 0) {
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;num_futile_classifications %d\n&quot;</span>, num_futile_classifications);
    }

    best_choice_bundle.updated = <span class="keyword">false</span>;  <span class="comment">// reset updated</span>
    <span class="keyword">delete</span> pain_point;  <span class="comment">// done using this pain point</span>

    <span class="comment">// See if it&#39;s time to terminate SegSearch or time for starting a guided</span>
    <span class="comment">// search for the true path to find the blame for the incorrect best_choice.</span>
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a904762fe91430c5094ccecb7e690e0e5">SegSearchDone</a>(num_futile_classifications) &amp;&amp; blamer_bundle != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;
        blamer_bundle-&gt;incorrect_result_reason == <a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a4f5ff200b61e6226eb6d74aec188e769">IRR_CORRECT</a> &amp;&amp;
        !blamer_bundle-&gt;segsearch_is_looking_for_blame &amp;&amp;
        blamer_bundle-&gt;truth_has_char_boxes &amp;&amp;
        !<a class="code" href="classtesseract_1_1_wordrec.html#ac05db9a605bcb460b6b1abdaf03ee6c4">ChoiceIsCorrect</a>(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset(),
                         best_choice, blamer_bundle-&gt;truth_text)) {
      <a class="code" href="classtesseract_1_1_wordrec.html#a8580282cf87b0e054ac1410cf4ffa0e2">InitBlamerForSegSearch</a>(best_choice_bundle.best_choice, chunks_record,
                             pain_points, blamer_bundle, &amp;blamer_debug);
    }
  }  <span class="comment">// end while loop exploring alternative paths</span>
  <a class="code" href="classtesseract_1_1_wordrec.html#abbb02091c23e7be9370055704526102f">FinishBlamerForSegSearch</a>(best_choice_bundle.best_choice,
                           blamer_bundle, &amp;blamer_debug);

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> &gt; 0) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Done with SegSearch (AcceptableChoiceFound: %d)\n&quot;</span>,
            <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;AcceptableChoiceFound());
  }

  <span class="comment">// Clean up.</span>
  <a class="code" href="oldheap_8cpp.html#a66bcae55ce37fec5afd5fdeb5a879d37">FreeHeapData</a>(pain_points, <a class="code" href="struct_m_a_t_r_i_x___c_o_o_r_d.html#a6c5cccabb9fc00b03be1fc46151090df">MATRIX_COORD::Delete</a>);
  <span class="keyword">delete</span>[] best_path_by_column;
  <span class="keyword">delete</span>[] pending;
  <span class="keywordflow">for</span> (row = 0; row &lt; ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>(); ++row) {
    <span class="keywordflow">for</span> (col = 0; col &lt;= row; ++col) {
      BLOB_CHOICE_LIST *rating = ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(col, row);
      <span class="keywordflow">if</span> (rating != <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a>) <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;DeleteState(rating);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a904762fe91430c5094ccecb7e690e0e5"></a><!-- doxytag: member="tesseract::Wordrec::SegSearchDone" ref="a904762fe91430c5094ccecb7e690e0e5" args="(int num_futile_classifications)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Wordrec::SegSearchDone </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_futile_classifications</em></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00520">520</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {
    <span class="keywordflow">return</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;AcceptableChoiceFound() ||
            num_futile_classifications &gt;=
            <a class="code" href="classtesseract_1_1_wordrec.html#a7d7641f6361f78664fb541f5ce33fe1b">segsearch_max_futile_classifications</a>);
  }
</pre></div>
</div>
</div>
<a class="anchor" id="a8fd3e86b711ba9d54c7eb500eb99c1c4"></a><!-- doxytag: member="tesseract::Wordrec::select_blob_to_split" ref="a8fd3e86b711ba9d54c7eb500eb99c1c4" args="(const BLOB_CHOICE_LIST_VECTOR &amp;char_choices, float rating_ceiling, bool split_next_to_fragment)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> tesseract::Wordrec::select_blob_to_split </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> &amp;&#160;</td>
          <td class="paramname"><em>char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>rating_ceiling</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>split_next_to_fragment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00801">801</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {
  BLOB_CHOICE_IT blob_choice_it;
  <a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html">BLOB_CHOICE</a> *blob_choice;
  BLOB_CHOICE_IT temp_it;
  <span class="keywordtype">int</span> x;
  <span class="keywordtype">float</span> worst = -<a class="code" href="host_8h.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a>;
  <span class="keywordtype">int</span> worst_index = -1;
  <span class="keywordtype">float</span> worst_near_fragment = -<a class="code" href="host_8h.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a>;
  <span class="keywordtype">int</span> worst_index_near_fragment = -1;
  <span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> **fragments = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>) {
    <span class="keywordflow">if</span> (rating_ceiling &lt; <a class="code" href="host_8h.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a>)
      <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;rating_ceiling = %8.4f\n&quot;</span>, rating_ceiling);
    <span class="keywordflow">else</span>
      <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;rating_ceiling = No Limit\n&quot;</span>);
  }

  <span class="keywordflow">if</span> (split_next_to_fragment &amp;&amp; char_choices.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() &gt; 0) {
    fragments = <span class="keyword">new</span> <span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *[char_choices.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>()];
    <span class="keywordflow">if</span> (char_choices.<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(0) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      temp_it.set_to_list(char_choices.<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(0));
      fragments[0] = <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().get_fragment(
          temp_it.data()-&gt;unichar_id());
    } <span class="keywordflow">else</span> {
      fragments[0] = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
  }

  <span class="keywordflow">for</span> (x = 0; x &lt; char_choices.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>(); ++x) {
    <span class="keywordflow">if</span> (char_choices.<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(x) == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="keywordflow">if</span> (fragments != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
        <span class="keyword">delete</span>[] fragments;
      }
      <span class="keywordflow">return</span> x;
    } <span class="keywordflow">else</span> {
      blob_choice_it.set_to_list(char_choices.<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(x));
      blob_choice = blob_choice_it.data();
      <span class="comment">// Populate fragments for the following position.</span>
      <span class="keywordflow">if</span> (split_next_to_fragment &amp;&amp; x+1 &lt; char_choices.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>()) {
        <span class="keywordflow">if</span> (char_choices.<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(x+1) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
          temp_it.set_to_list(char_choices.<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(x+1));
          fragments[x+1] = <a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().get_fragment(
              temp_it.data()-&gt;unichar_id());
        } <span class="keywordflow">else</span> {
          fragments[x+1] = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        }
      }
      <span class="keywordflow">if</span> (blob_choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#a7fbd2d505bf5b55beee424096fb1e9bc">rating</a>() &lt; rating_ceiling &amp;&amp;
          blob_choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#af53d45b718c562ea7209b583c77ac14e">certainty</a>() &lt; <a class="code" href="classtesseract_1_1_wordrec.html#a57ae3e0529a624fd3677f96d5b43fcc8">tessedit_certainty_threshold</a>) {
        <span class="comment">// Update worst and worst_index.</span>
        <span class="keywordflow">if</span> (blob_choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#a7fbd2d505bf5b55beee424096fb1e9bc">rating</a>() &gt; worst) {
          worst_index = x;
          worst = blob_choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#a7fbd2d505bf5b55beee424096fb1e9bc">rating</a>();
        }
        <span class="keywordflow">if</span> (split_next_to_fragment) {
          <span class="comment">// Update worst_near_fragment and worst_index_near_fragment.</span>
          <span class="keywordtype">bool</span> expand_following_fragment =
            (x + 1 &lt; char_choices.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() &amp;&amp;
             fragments[x+1] != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; !fragments[x+1]-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a42707cfcbf1e9a38ec0333d3202f8d80">is_beginning</a>());
          <span class="keywordtype">bool</span> expand_preceding_fragment =
            (x &gt; 0 &amp;&amp; fragments[x-1] != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; !fragments[x-1]-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#af222b3b2c71de6199f75e3a7a64aa660">is_ending</a>());
          <span class="keywordflow">if</span> ((expand_following_fragment || expand_preceding_fragment) &amp;&amp;
              blob_choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#a7fbd2d505bf5b55beee424096fb1e9bc">rating</a>() &gt; worst_near_fragment) {
            worst_index_near_fragment = x;
            worst_near_fragment = blob_choice-&gt;<a class="code" href="class_b_l_o_b___c_h_o_i_c_e.html#a7fbd2d505bf5b55beee424096fb1e9bc">rating</a>();
            <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>) {
              <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;worst_index_near_fragment=%d&quot;</span>
                      <span class="stringliteral">&quot; expand_following_fragment=%d&quot;</span>
                      <span class="stringliteral">&quot; expand_preceding_fragment=%d\n&quot;</span>,
                      worst_index_near_fragment,
                      expand_following_fragment,
                      expand_preceding_fragment);
            }
          }
        }
      }
    }
  }
  <span class="keywordflow">if</span> (fragments != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keyword">delete</span>[] fragments;
  }
  <span class="comment">// TODO(daria): maybe a threshold of badness for</span>
  <span class="comment">// worst_near_fragment would be useful.</span>
  <span class="keywordflow">return</span> worst_index_near_fragment != -1 ?
    worst_index_near_fragment : worst_index;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a457f1ea04bad00c6e40883869700defb"></a><!-- doxytag: member="tesseract::Wordrec::select_blob_to_split_from_fixpt" ref="a457f1ea04bad00c6e40883869700defb" args="(DANGERR *fixpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> tesseract::Wordrec::select_blob_to_split_from_fixpt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *&#160;</td>
          <td class="paramname"><em>fixpt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00898">898</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
  <span class="keywordflow">if</span> (!fixpt)
    <span class="keywordflow">return</span> -1;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; fixpt-&gt;<a class="code" href="class_generic_vector.html#a111b51dd0bf1324cfb69ef70703d8e70">size</a>(); i++) {
    <span class="keywordflow">if</span> ((*fixpt)[i].begin == (*fixpt)[i].end &amp;&amp;
        (*fixpt)[i].dangerous &amp;&amp;
        (*fixpt)[i].correct_is_ngram) {
      <span class="keywordflow">return</span> (*fixpt)[i].begin;
    }
  }
  <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2ed3fab8407177af31d446a794617149"></a><!-- doxytag: member="tesseract::Wordrec::set_chopper_blame" ref="a2ed3fab8407177af31d446a794617149" args="(WERD_RES *word)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::set_chopper_blame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00917">917</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
  <a class="code" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>;
  assert(blamer_bundle != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  <span class="keywordflow">if</span> (blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a4399018ec9ce9b68051566d2be9aaaba">NoTruth</a>() || !(blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#ad7dc9029fe6de5f5554046773cb15854">truth_has_char_boxes</a>) ||
      word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a> == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">return</span>;
  }
  <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> debug;
  <span class="keywordtype">bool</span> missing_chop = <span class="keyword">false</span>;
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> * curr_blob = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;
  <span class="keywordtype">int</span> b = 0;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> truth_x;
  <span class="keywordflow">while</span> (b &lt; blamer_bundle-&gt;truth_word.length() &amp;&amp; curr_blob != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    truth_x = blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a0fac62f7f13e3e684c5ef433bfcf3158">norm_truth_word</a>.<a class="code" href="classtesseract_1_1_box_word.html#a022cfe52a644e9e800595f014b1fbcf5">BlobBox</a>(b).<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
    <span class="keywordflow">if</span> (curr_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() &lt;
        (truth_x - blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a4df5a4ea5a4ba6f973b3c987c95a8a39">norm_box_tolerance</a>)) {
      curr_blob = curr_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
      <span class="keywordflow">continue</span>;  <span class="comment">// encountered an extra chop, keep looking</span>
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (curr_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() &gt;
                (truth_x + blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a4df5a4ea5a4ba6f973b3c987c95a8a39">norm_box_tolerance</a>)) {
      missing_chop = <span class="keyword">true</span>;
      <span class="keywordflow">break</span>;
    } <span class="keywordflow">else</span> {
      curr_blob = curr_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;
      ++b;
    }
  }
  <span class="keywordflow">if</span> (missing_chop || b &lt; blamer_bundle-&gt;norm_truth_word.length()) {
    <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> debug;
    <span class="keywordtype">char</span> debug_buffer[256];
    <span class="keywordflow">if</span> (missing_chop) {
      sprintf(debug_buffer, <span class="stringliteral">&quot;Detected missing chop (tolerance=%d) at &quot;</span>,
              blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a4df5a4ea5a4ba6f973b3c987c95a8a39">norm_box_tolerance</a>);
      debug += debug_buffer;
      curr_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a0344effa1c2a22bddf8005fe579cf601">append_debug</a>(&amp;debug);
      debug.<a class="code" href="class_s_t_r_i_n_g.html#a779cd637dd42d58d5500a3a657077e84">add_str_int</a>(<span class="stringliteral">&quot;\nNo chop for truth at x=&quot;</span>, truth_x);
    } <span class="keywordflow">else</span> {
      debug.<a class="code" href="class_s_t_r_i_n_g.html#a779cd637dd42d58d5500a3a657077e84">add_str_int</a>(<span class="stringliteral">&quot;Missing chops for last &quot;</span>,
                        blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a0fac62f7f13e3e684c5ef433bfcf3158">norm_truth_word</a>.<a class="code" href="classtesseract_1_1_box_word.html#afe001fe8fb7f2d3725b2ac2f542e9878">length</a>()-b);
      debug += <span class="stringliteral">&quot; truth box(es)&quot;</span>;
    }
    debug += <span class="stringliteral">&quot;\nMaximally chopped word boxes:\n&quot;</span>;
    <span class="keywordflow">for</span> (curr_blob = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>; curr_blob != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        curr_blob = curr_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>) {
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a> &amp;tbox = curr_blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>();
      sprintf(debug_buffer, <span class="stringliteral">&quot;(%d,%d)-&gt;(%d,%d)\n&quot;</span>,
              tbox.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), tbox.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(), tbox.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), tbox.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());
      debug += debug_buffer;
    }
    debug += <span class="stringliteral">&quot;Truth  bounding  boxes:\n&quot;</span>;
    <span class="keywordflow">for</span> (b = 0; b &lt; blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a0fac62f7f13e3e684c5ef433bfcf3158">norm_truth_word</a>.<a class="code" href="classtesseract_1_1_box_word.html#afe001fe8fb7f2d3725b2ac2f542e9878">length</a>(); ++b) {
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a> &amp;tbox = blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a0fac62f7f13e3e684c5ef433bfcf3158">norm_truth_word</a>.<a class="code" href="classtesseract_1_1_box_word.html#a022cfe52a644e9e800595f014b1fbcf5">BlobBox</a>(b);
      sprintf(debug_buffer, <span class="stringliteral">&quot;(%d,%d)-&gt;(%d,%d)\n&quot;</span>,
              tbox.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), tbox.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(), tbox.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), tbox.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());
      debug += debug_buffer;
    }
    blamer_bundle-&gt;<a class="code" href="struct_blamer_bundle.html#a51b9a55eb8acc439f5ade8e97c92da8f">SetBlame</a>(<a class="code" href="pageres_8h.html#a8faf52e106c04bfdc9898ffa90b821e1a4c27b1a4f36ac4410ec500e4c7a1561c">IRR_CHOPPER</a>, debug, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>,
                            <a class="code" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">wordrec_debug_blamer</a>);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a764fd79db0c80638187f4751626bb12e"></a><!-- doxytag: member="tesseract::Wordrec::set_outline_bounds" ref="a764fd79db0c80638187f4751626bb12e" args="(register EDGEPT *point1, register EDGEPT *point2, BOUNDS_RECT rect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::set_outline_bounds </td>
          <td>(</td>
          <td class="paramtype">register <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">register <a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>point2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gradechop_8h.html#a45f650fd29e2e9bb1c3480d126a955e9">BOUNDS_RECT</a>&#160;</td>
          <td class="paramname"><em>rect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gradechop_8cpp_source.html#l00213">213</a> of file <a class="el" href="gradechop_8cpp_source.html">gradechop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                   {
  <span class="keyword">register</span> <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *this_point;
  <span class="keyword">register</span> <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x_min;
  <span class="keyword">register</span> <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x_max;

  <a class="code" href="gradechop_8cpp.html#ac5cb532629b1cbd1fd23f2ea9a286280">find_bounds_loop</a>(point1, point2, x_min, x_max);

  rect[0] = x_min;
  rect[1] = x_max;

  <a class="code" href="gradechop_8cpp.html#ac5cb532629b1cbd1fd23f2ea9a286280">find_bounds_loop</a>(point2, point1, x_min, x_max);

  rect[2] = x_min;
  rect[3] = x_max;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a15740f1d66aa061522c69b948e901e70"></a><!-- doxytag: member="tesseract::Wordrec::set_pass1" ref="a15740f1d66aa061522c69b948e901e70" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::set_pass1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tface_8cpp_source.html#l00093">93</a> of file <a class="el" href="tface_8cpp_source.html">tface.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                        {
  <a class="code" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a>.set_value(70.0);
  <a class="code" href="classtesseract_1_1_wordrec.html#a57c3675d967208936be65a14e5b64c7d">wordrec_num_seg_states</a>.set_value(15);
  <a class="code" href="classtesseract_1_1_classify.html#ae66827073cdeea6a59dd16fd7cf5d297">SettupPass1</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a883211e914cb31146b8dd9ace419c843"></a><!-- doxytag: member="tesseract::Wordrec::set_pass2" ref="a883211e914cb31146b8dd9ace419c843" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::set_pass2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tface_8cpp_source.html#l00105">105</a> of file <a class="el" href="tface_8cpp_source.html">tface.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                        {
  <a class="code" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">chop_ok_split</a>.set_value(<a class="code" href="classtesseract_1_1_wordrec.html#a671c4b102b976c600adc3bf60ee44323">pass2_ok_split</a>);
  <a class="code" href="classtesseract_1_1_wordrec.html#a57c3675d967208936be65a14e5b64c7d">wordrec_num_seg_states</a>.set_value(<a class="code" href="classtesseract_1_1_wordrec.html#ade3cecfe9b377045db0abe2d06762c1e">pass2_seg_states</a>);
  <a class="code" href="classtesseract_1_1_classify.html#a5ad207ab75e8a69c35c225313268788b">SettupPass2</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a20332a4dd1d38ef7c6bf04d8dd4a98b7"></a><!-- doxytag: member="tesseract::Wordrec::state_char_widths" ref="a20332a4dd1d38ef7c6bf04d8dd4a98b7" args="(WIDTH_RECORD *chunk_widths, STATE *state, int num_joints)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> * tesseract::Wordrec::state_char_widths </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunk_widths</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_joints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heuristic_8cpp_source.html#l00058">58</a> of file <a class="el" href="heuristic_8cpp_source.html">heuristic.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
  <a class="code" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a> chunks = <a class="code" href="states_8cpp.html#a65830cfe21c29feec92f03627b51ff65">bin_to_chunks</a>(state, <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>);
  <span class="keywordtype">int</span> num_chars = chunks[0] + 1;

  <span class="comment">// allocate and store (n+1,w0,g0,w1,g1...,wn) in int[2*(n+1)] as a</span>
  <span class="comment">// struct { num_chars, widths[2*n+1]; }</span>
  <a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *char_widths = (<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a>*) <a class="code" href="freelist_8cpp.html#a5898fbe61f6ffe4c1be71a107193cdfd">memalloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)*num_chars*2);
  char_widths-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a> = num_chars;

  <span class="keywordtype">int</span> first_blob = 0;
  <span class="keywordtype">int</span> last_blob;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= num_chars; i++) {
    last_blob = (i &gt; chunks[0]) ? <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a> : first_blob + chunks[i];

    char_widths-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2*i-2] =
      <a class="code" href="classtesseract_1_1_associate_utils.html#a3837f65de5a035f815172585412e6023">AssociateUtils::GetChunksWidth</a>(chunk_widths, first_blob, last_blob);
    <span class="keywordflow">if</span> (i &lt;= chunks[0]) {
      char_widths-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2*i-1] =
        <a class="code" href="classtesseract_1_1_associate_utils.html#a0afb66af80c912a79c20385eba26927d">AssociateUtils::GetChunksGap</a>(chunk_widths, last_blob);
    }

    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a> &gt; 3)
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;width_record[%d]s%d--s%d(%d) %d %d:%d\n&quot;</span>,
              i-1, first_blob, last_blob, chunks[i],
              char_widths-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2*i-2], char_widths-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2*i-1],
              chunk_widths-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2*last_blob+1]);
    first_blob = last_blob + 1;
  }

  <a class="code" href="freelist_8cpp.html#ab462a857e5edf360ae4881bcc92a0bcf">memfree</a>(chunks);
  <span class="keywordflow">return</span> char_widths;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afaf3a51721ceaa661e9e1919d4ea48e7"></a><!-- doxytag: member="tesseract::Wordrec::try_point_pairs" ref="afaf3a51721ceaa661e9e1919d4ea48e7" args="(EDGEPT *points[MAX_NUM_POINTS], inT16 num_points, SEAM_QUEUE seam_queue, SEAM_PILE *seam_pile, SEAM **seam, TBLOB *blob)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::try_point_pairs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>points</em>[MAX_NUM_POINTS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>num_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a>&#160;</td>
          <td class="paramname"><em>seam_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a> *&#160;</td>
          <td class="paramname"><em>seam_pile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> **&#160;</td>
          <td class="paramname"><em>seam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00507">507</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                             {
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> y;
  <a class="code" href="structsplit__record.html">SPLIT</a> *split;
  <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> priority;

  <span class="keywordflow">for</span> (x = 0; x &lt; num_points; x++) {
    <span class="keywordflow">for</span> (y = x + 1; y &lt; num_points; y++) {

      <span class="keywordflow">if</span> (points[y] &amp;&amp;
          <a class="code" href="olutil_8h.html#a4df928397c7bcfee5373a86d6f2f46da">weighted_edgept_dist</a>(points[x], points[y],
                               <a class="code" href="classtesseract_1_1_wordrec.html#a0db358c94208627661f5f1cf44ff9d28">chop_x_y_weight</a>) &lt; <a class="code" href="classtesseract_1_1_wordrec.html#a14ec030cc0189e71e05ea6630a1abbf5">chop_split_length</a> &amp;&amp;
          points[x] != points[y]-&gt;next &amp;&amp;
          points[y] != points[x]-&gt;next &amp;&amp;
          !<a class="code" href="outlines_8h.html#a6c0c70cebe2f185d69900780b4695f8c">is_exterior_point</a>(points[x], points[y]) &amp;&amp;
          !<a class="code" href="outlines_8h.html#a6c0c70cebe2f185d69900780b4695f8c">is_exterior_point</a>(points[y], points[x])) {
        split = <a class="code" href="split_8cpp.html#a1a2a3ae46393d911b723c12107dc0183">new_split</a> (points[x], points[y]);
        priority = <a class="code" href="gradechop_8h.html#a89f8eb5089f8bf157471ccab31e5c54b">partial_split_priority</a> (split);

        <a class="code" href="classtesseract_1_1_wordrec.html#afa230ef31fc03aff58ebd4d2de2df68b">choose_best_seam</a>(seam_queue, seam_pile, split, priority, seam, blob);
      }
    }
  }

}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f5dad2d83fa6f5b28819f13eabf41ba"></a><!-- doxytag: member="tesseract::Wordrec::try_vertical_splits" ref="a2f5dad2d83fa6f5b28819f13eabf41ba" args="(EDGEPT *points[MAX_NUM_POINTS], inT16 num_points, EDGEPT_CLIST *new_points, SEAM_QUEUE seam_queue, SEAM_PILE *seam_pile, SEAM **seam, TBLOB *blob)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::try_vertical_splits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>points</em>[MAX_NUM_POINTS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>num_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EDGEPT_CLIST *&#160;</td>
          <td class="paramname"><em>new_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#a0d8a3b6851b93dea4e0b7e7713ccf100">SEAM_QUEUE</a>&#160;</td>
          <td class="paramname"><em>seam_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="findseam_8h.html#aead75573de3ab18b80b22a97ca124d99">SEAM_PILE</a> *&#160;</td>
          <td class="paramname"><em>seam_pile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="seam_8h.html#a7f3de671d0bee84bd93f4814ca3b7e88">SEAM</a> **&#160;</td>
          <td class="paramname"><em>seam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_b_l_o_b.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="findseam_8cpp_source.html#l00549">549</a> of file <a class="el" href="findseam_8cpp_source.html">findseam.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *vertical_point = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="structsplit__record.html">SPLIT</a> *split;
  <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> x;
  <a class="code" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> priority;
  <a class="code" href="struct_t_e_s_s_l_i_n_e.html">TESSLINE</a> *outline;

  <span class="keywordflow">for</span> (x = 0; x &lt; num_points; x++) {
    vertical_point = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">for</span> (outline = blob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a3c9282cad4102157d214bcc6311cda07">outlines</a>; outline; outline = outline-&gt;<a class="code" href="struct_t_e_s_s_l_i_n_e.html#a0fb224d43ea53a791f0957fa92793bef">next</a>) {
      <a class="code" href="classtesseract_1_1_wordrec.html#ac3557f7f8e9b02f6b2fea05e2320cd1d">vertical_projection_point</a>(points[x], outline-&gt;<a class="code" href="struct_t_e_s_s_l_i_n_e.html#a0ab1e26b1dae548f0bd3c096c6183b18">loop</a>,
                                &amp;vertical_point, new_points);
    }

    <span class="keywordflow">if</span> (vertical_point &amp;&amp;
      points[x] != vertical_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a> &amp;&amp;
      vertical_point != points[x]-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a> &amp;&amp;
      <a class="code" href="olutil_8h.html#a4df928397c7bcfee5373a86d6f2f46da">weighted_edgept_dist</a>(points[x], vertical_point,
                           <a class="code" href="classtesseract_1_1_wordrec.html#a0db358c94208627661f5f1cf44ff9d28">chop_x_y_weight</a>) &lt; <a class="code" href="classtesseract_1_1_wordrec.html#a14ec030cc0189e71e05ea6630a1abbf5">chop_split_length</a>) {

      split = <a class="code" href="split_8cpp.html#a1a2a3ae46393d911b723c12107dc0183">new_split</a> (points[x], vertical_point);
      priority = <a class="code" href="gradechop_8h.html#a89f8eb5089f8bf157471ccab31e5c54b">partial_split_priority</a> (split);

      <a class="code" href="classtesseract_1_1_wordrec.html#afa230ef31fc03aff58ebd4d2de2df68b">choose_best_seam</a>(seam_queue, seam_pile, split, priority, seam, blob);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a63db9b85fa1350dfccfd4d6e548290d4"></a><!-- doxytag: member="tesseract::Wordrec::update_blob_classifications" ref="a63db9b85fa1350dfccfd4d6e548290d4" args="(TWERD *word, const BLOB_CHOICE_LIST_VECTOR &amp;choices)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::update_blob_classifications </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_t_w_e_r_d.html">TWERD</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> &amp;&#160;</td>
          <td class="paramname"><em>choices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordclass_8cpp_source.html#l00152">152</a> of file <a class="el" href="wordclass_8cpp_source.html">wordclass.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a> *tblob = word-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;
  <span class="keywordtype">int</span> index = 0;
  <span class="keywordflow">for</span> (; tblob != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; index &lt; choices.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>();
       tblob = tblob-&gt;<a class="code" href="struct_t_b_l_o_b.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>, index++) {
    <a class="code" href="classtesseract_1_1_wordrec.html#a7518e041a8ddab1d1a2b7e609553b8e3">blob_match_table</a>.add_to_match(tblob, choices.<a class="code" href="class_generic_vector.html#a33070cfea2a16a20c6b30bbcfecd8ecc">get</a>(index));
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1a00e14baaad0a404bb90ac8fe4663f6"></a><!-- doxytag: member="tesseract::Wordrec::update_ratings" ref="a1a00e14baaad0a404bb90ac8fe4663f6" args="(const BLOB_CHOICE_LIST_VECTOR &amp;new_choices, const CHUNKS_RECORD *chunks_record, const SEARCH_STATE search_state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::update_ratings </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> &amp;&#160;</td>
          <td class="paramname"><em>new_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="states_8h.html#afeb312869cc56f5a20c6f3dcb65644cc">SEARCH_STATE</a>&#160;</td>
          <td class="paramname"><em>search_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6bac0a6462577e2e1057057f03901a33"></a><!-- doxytag: member="tesseract::Wordrec::UpdateSegSearchNodes" ref="a6bac0a6462577e2e1057057f03901a33" args="(int starting_col, SEG_SEARCH_PENDING_LIST *pending[], BestPathByColumn *best_path_by_column[], CHUNKS_RECORD *chunks_record, HEAP *pain_points, BestChoiceBundle *best_choice_bundle, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::UpdateSegSearchNodes </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>starting_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SEG_SEARCH_PENDING_LIST *&#160;</td>
          <td class="paramname"><em>pending</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtesseract_1_1_best_path_by_column.html">BestPathByColumn</a> *&#160;</td>
          <td class="paramname"><em>best_path_by_column</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_h_e_a_p.html">HEAP</a> *&#160;</td>
          <td class="paramname"><em>pain_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtesseract_1_1_best_choice_bundle.html">BestChoiceBundle</a> *&#160;</td>
          <td class="paramname"><em>best_choice_bundle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *&#160;</td>
          <td class="paramname"><em>blamer_bundle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="segsearch_8cpp_source.html#l00186">186</a> of file <a class="el" href="segsearch_8cpp_source.html">segsearch.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                 {
  <a class="code" href="class_m_a_t_r_i_x.html">MATRIX</a> *ratings = chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> col = starting_col; col &lt; ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>(); ++col) {
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> &gt; 0) {
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\n\nUpdateSegSearchNodes: evaluate children in col=%d\n&quot;</span>, col);
    }
    <span class="comment">// Iterate over the pending list for this column.</span>
    SEG_SEARCH_PENDING_LIST *pending_list = &amp;((*pending)[col]);
    SEG_SEARCH_PENDING_IT pending_it(pending_list);
    <a class="code" href="class_generic_vector.html">GenericVector&lt;int&gt;</a> non_empty_rows;
    <span class="keywordflow">while</span> (!pending_it.empty()) {
      <span class="comment">// Update language model state of this child+parent pair.</span>
      <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html">SEG_SEARCH_PENDING</a> *p = pending_it.extract();
      <span class="keywordflow">if</span> (non_empty_rows.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() == 0 ||
          non_empty_rows[non_empty_rows.<a class="code" href="class_generic_vector.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>()-1] != p-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a23c23673b30de59bbea85026226c0574">child_row</a>) {
        non_empty_rows.<a class="code" href="class_generic_vector.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(p-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a23c23673b30de59bbea85026226c0574">child_row</a>);
      }
      BLOB_CHOICE_LIST *current_node = ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(col, p-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a23c23673b30de59bbea85026226c0574">child_row</a>);
      <a class="code" href="namespacetesseract.html#a87cc64ed462a40c9c210a8bab7cb9b87">LanguageModelFlagsType</a> new_changed =
        <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;UpdateState(p-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a24b162a87d559d04dbe998ab1da571f9">changed</a>, col, p-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a23c23673b30de59bbea85026226c0574">child_row</a>,
                                     current_node, p-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#aa392a894841d0ca0e37d1ef324778364">parent</a>, pain_points,
                                     best_path_by_column, chunks_record,
                                     best_choice_bundle, blamer_bundle);
      <span class="keywordflow">if</span> (new_changed) {
        <span class="comment">// Since the language model state of this entry changed, add all the</span>
        <span class="comment">// pairs with it as a parent and each of its children to pending, so</span>
        <span class="comment">// that the children are updated as well.</span>
        <span class="keywordtype">int</span> child_col = p-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a23c23673b30de59bbea85026226c0574">child_row</a> + 1;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> child_row = child_col;
             child_row &lt; ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c___m_a_t_r_i_x.html#acaa00626e03fae7b31f5f08f7f48005b">dimension</a>(); ++child_row) {
          <span class="keywordflow">if</span> (ratings-&gt;<a class="code" href="class_g_e_n_e_r_i_c__2_d___a_r_r_a_y.html#ac2361d09d80314d64330578d8e162566">get</a>(child_col, child_row) != <a class="code" href="matrix_8h.html#a5c21a86b19e78482e6c7384c47c2457d">NOT_CLASSIFIED</a>) {
            <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html">SEG_SEARCH_PENDING</a> *new_pending =
              <span class="keyword">new</span> <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html">SEG_SEARCH_PENDING</a>(child_row, current_node, 0);
            <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html">SEG_SEARCH_PENDING</a> *actual_new_pending =
              <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html">SEG_SEARCH_PENDING</a> *<span class="keyword">&gt;</span>(
                  (*pending)[child_col].add_sorted_and_find(
                  <a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a5b59162836f4c12d641f19298d96daba">SEG_SEARCH_PENDING::compare</a>, <span class="keyword">true</span>, new_pending));
            <span class="keywordflow">if</span> (new_pending != actual_new_pending) <span class="keyword">delete</span> new_pending;
            actual_new_pending-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a24b162a87d559d04dbe998ab1da571f9">changed</a> |= new_changed;
            <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">segsearch_debug_level</a> &gt; 0) {
                  <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Added child(col=%d row=%d) parent(col=%d row=%d)&quot;</span>
                          <span class="stringliteral">&quot; changed=0x%x to pending\n&quot;</span>, child_col,
                          actual_new_pending-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a23c23673b30de59bbea85026226c0574">child_row</a>,
                          col, p-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a23c23673b30de59bbea85026226c0574">child_row</a>, actual_new_pending-&gt;<a class="code" href="struct_s_e_g___s_e_a_r_c_h___p_e_n_d_i_n_g.html#a24b162a87d559d04dbe998ab1da571f9">changed</a>);
            }
          }
        }
      }  <span class="comment">// end if new_changed</span>
      <span class="keyword">delete</span> p;  <span class="comment">// clean up</span>
      pending_it.forward();
    } <span class="comment">// end while !pending_it.empty()</span>
    <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;GeneratePainPointsFromColumn(
      col, non_empty_rows, best_choice_bundle-&gt;best_choice-&gt;certainty(),
      pain_points, best_path_by_column, chunks_record);
  }  <span class="comment">// end for col</span>

  <span class="keywordflow">if</span> (best_choice_bundle-&gt;updated) {
    <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;GeneratePainPointsFromBestChoice(
        pain_points, chunks_record, best_choice_bundle);
  }

  <a class="code" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">language_model_</a>-&gt;CleanUp();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac3557f7f8e9b02f6b2fea05e2320cd1d"></a><!-- doxytag: member="tesseract::Wordrec::vertical_projection_point" ref="ac3557f7f8e9b02f6b2fea05e2320cd1d" args="(EDGEPT *split_point, EDGEPT *target_point, EDGEPT **best_point, EDGEPT_CLIST *new_points)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Wordrec::vertical_projection_point </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>split_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *&#160;</td>
          <td class="paramname"><em>target_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_d_g_e_p_t.html">EDGEPT</a> **&#160;</td>
          <td class="paramname"><em>best_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EDGEPT_CLIST *&#160;</td>
          <td class="paramname"><em>new_points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chop_8cpp_source.html#l00332">332</a> of file <a class="el" href="chop_8cpp_source.html">chop.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *p;                     <span class="comment">/* Iterator */</span>
  <a class="code" href="struct_e_d_g_e_p_t.html">EDGEPT</a> *this_edgept;           <span class="comment">/* Iterator */</span>
  EDGEPT_C_IT new_point_it(new_points);
  <span class="keywordtype">int</span> x = split_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a>;    <span class="comment">/* X value of vertical */</span>
  <span class="keywordtype">int</span> best_dist = <a class="code" href="outlines_8h.html#ac87c2b737a7dd17133a4936ee1427296">LARGE_DISTANCE</a>;<span class="comment">/* Best point found */</span>

  <span class="keywordflow">if</span> (*best_point != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    best_dist = <a class="code" href="outlines_8h.html#a61f9385343feb503e1ed9806925fcbee">edgept_dist</a>(split_point, *best_point);

  p = target_point;
  <span class="comment">/* Look at each edge point */</span>
  <span class="keywordflow">do</span> {
    <span class="keywordflow">if</span> ((((p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> &lt;= x) &amp;&amp; (x &lt;= p-&gt;next-&gt;pos.x)) ||
      ((p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>.<a class="code" href="struct_t_p_o_i_n_t.html#aa9c98655c3a2a0437821e5a3d3418b0f">x</a> &lt;= x) &amp;&amp; (x &lt;= p-&gt;pos.x))) &amp;&amp;
      !<a class="code" href="outlines_8h.html#a904fe4010d6b74e15b566c5a9b04b9e4">same_point</a> (split_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>) &amp;&amp;
      !<a class="code" href="outlines_8h.html#a904fe4010d6b74e15b566c5a9b04b9e4">same_point</a> (split_point-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>, p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>)
    &amp;&amp; (*best_point == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !<a class="code" href="outlines_8h.html#a904fe4010d6b74e15b566c5a9b04b9e4">same_point</a> ((*best_point)-&gt;pos, p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#adee462d390e637a8393ba373c8d2a1bb">pos</a>))) {

      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a746f8a2ed6b50a3669a2fe6dcd053eec">near_point</a>(split_point, p, p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>, &amp;this_edgept)) {
        new_point_it.add_before_then_move(this_edgept);
      }

      <span class="keywordflow">if</span> (*best_point == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        best_dist = <a class="code" href="outlines_8h.html#a61f9385343feb503e1ed9806925fcbee">edgept_dist</a> (split_point, this_edgept);

      this_edgept =
        <a class="code" href="classtesseract_1_1_wordrec.html#a79aec1d9a1c9c001a24838117585091a">pick_close_point</a>(split_point, this_edgept, &amp;best_dist);
      <span class="keywordflow">if</span> (this_edgept)
        *best_point = this_edgept;
    }

    p = p-&gt;<a class="code" href="struct_e_d_g_e_p_t.html#a196f7786194752f89e364a586d24884d">next</a>;
  }
  <span class="keywordflow">while</span> (p != target_point);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e963a2c089d890de52254b85b2c0cac"></a><!-- doxytag: member="tesseract::Wordrec::width_priority" ref="a6e963a2c089d890de52254b85b2c0cac" args="(CHUNKS_RECORD *chunks_record, STATE *state, int num_joints)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> tesseract::Wordrec::width_priority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> *&#160;</td>
          <td class="paramname"><em>chunks_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_joints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="heuristic_8cpp_source.html#l00222">222</a> of file <a class="el" href="heuristic_8cpp_source.html">heuristic.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
  <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> penalty = 0.0;
  <a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html">WIDTH_RECORD</a> *width_rec = <a class="code" href="classtesseract_1_1_wordrec.html#a20332a4dd1d38ef7c6bf04d8dd4a98b7">state_char_widths</a>(chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a3ac3e771d771818dff8eed190d11d50f">chunk_widths</a>,
                                              state, <a class="code" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">num_joints</a>);
  <span class="comment">// When baseline_enable==True, which is the current default for Tesseract,</span>
  <span class="comment">// a fixed value of 128 (BASELINE_SCALE) is always used.</span>
  <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> normalizing_height = <a class="code" href="baseline_8h.html#abe1dbc548d1afb0cf12686a897142bd3">BASELINE_SCALE</a>;
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a613a7dc22729f2cb084bc7093a0a4088">assume_fixed_pitch_char_segment</a>) {
    <span class="comment">// For fixed pitch language like CJK, we use the full text height as the</span>
    <span class="comment">// normalizing factor so we are not dependent on xheight calculation.</span>
    <span class="comment">// In the normalized coord. xheight * scale == BASELINE_SCALE(128),</span>
    <span class="comment">// so add proportionally scaled ascender zone to get full text height.</span>
    <span class="keyword">const</span> <a class="code" href="class_d_e_n_o_r_m.html">DENORM</a>&amp; denorm = chunks_record-&gt;<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aa3826aaf2a5a7a76b000859ace1f8602">word_res</a>-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>;
    normalizing_height = denorm.<a class="code" href="class_d_e_n_o_r_m.html#a712ca9b7a1041d92e53ee7023b870fc6">y_scale</a>() *
        (denorm.<a class="code" href="class_d_e_n_o_r_m.html#a116df350550742ddb7a905825e94d411">row</a>()-&gt;<a class="code" href="class_r_o_w.html#a2954f94ec4eefe1e3729912e5b8ea779">x_height</a>() + denorm.<a class="code" href="class_d_e_n_o_r_m.html#a116df350550742ddb7a905825e94d411">row</a>()-&gt;<a class="code" href="class_r_o_w.html#a594cf3a3fd6dd203c8d0e58aa0c5227f">ascenders</a>());
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">segment_adjust_debug</a> &gt; 1)
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;WidthPriority: %f %f normalizing height = %f\n&quot;</span>,
              denorm.<a class="code" href="class_d_e_n_o_r_m.html#a116df350550742ddb7a905825e94d411">row</a>()-&gt;<a class="code" href="class_r_o_w.html#a2954f94ec4eefe1e3729912e5b8ea779">x_height</a>(), denorm.<a class="code" href="class_d_e_n_o_r_m.html#a116df350550742ddb7a905825e94d411">row</a>()-&gt;<a class="code" href="class_r_o_w.html#a594cf3a3fd6dd203c8d0e58aa0c5227f">ascenders</a>(),
              normalizing_height);
    <span class="comment">// Impose additional segmentation penalties if blob widths or gaps</span>
    <span class="comment">// distribution don&#39;t fit a fixed-pitch model.</span>
    <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> width_var = <a class="code" href="classtesseract_1_1_wordrec.html#ac0868afc87448dc583dad4d67dd8b1a8">get_width_variance</a>(width_rec, normalizing_height);
    <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> gap_var = <a class="code" href="classtesseract_1_1_wordrec.html#ad77b8ca8f655ae0bfe16f352f3d01830">get_gap_variance</a>(width_rec, normalizing_height);
    penalty += width_var;
    penalty += gap_var;
  }

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width_rec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a>; x++) {
    <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> squat = width_rec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2*x];
    <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> gap = (x &lt; width_rec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a>-1) ? width_rec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#a3d7464eb423f5e10dbb3bb2d7b4b26f1">widths</a>[2*x+1] : 0;
    squat /= normalizing_height;
    gap /= normalizing_height;
    if (<a class="code" href="classtesseract_1_1_wordrec.html#a613a7dc22729f2cb084bc7093a0a4088">assume_fixed_pitch_char_segment</a>) {
      penalty += <a class="code" href="classtesseract_1_1_associate_utils.html#ad70d4139f63f9d5048faa8407058523f">AssociateUtils::FixedPitchWidthCost</a>(
          squat, 0.0<a class="code" href="imgscale_8cpp.html#a469169df397b589e709dc744f1346831">f</a>, x == 0 || x == width_rec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a> -1,
          <a class="code" href="classtesseract_1_1_wordrec.html#a3083609f8ad7c4895647674956163c04">heuristic_max_char_wh_ratio</a>);
      penalty += <a class="code" href="classtesseract_1_1_associate_utils.html#a541c5e136929e994469c7c51ac40b2b7">AssociateUtils::FixedPitchGapCost</a>(
          gap, x == width_rec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a> - 1);
      <span class="keywordflow">if</span> (width_rec-&gt;<a class="code" href="struct_w_i_d_t_h___r_e_c_o_r_d.html#ab6a41176580d08b8e2389aa9ce6e26ad">num_chars</a> == 1 &amp;&amp;
          squat &gt; <a class="code" href="classtesseract_1_1_associate_utils.html#a3bbebfa62ab6a7838649af61e9ef965f">AssociateUtils::kMaxFixedPitchCharAspectRatio</a>) {
        penalty += 10;
      }
    } <span class="keywordflow">else</span> {
      <span class="comment">// Original equation when</span>
      <span class="comment">// heuristic_max_char_ratio == AssociateUtils::kMaxSquat</span>
      <span class="keywordflow">if</span> (squat &gt; <a class="code" href="classtesseract_1_1_wordrec.html#a3083609f8ad7c4895647674956163c04">heuristic_max_char_wh_ratio</a>)
        penalty += squat - <a class="code" href="classtesseract_1_1_wordrec.html#a3083609f8ad7c4895647674956163c04">heuristic_max_char_wh_ratio</a>;
    }
  }

  <a class="code" href="blobs_8h.html#a08481bc89b6e24355aaa1a3785eb5840">free_widths</a>(width_rec);
  <span class="keywordflow">return</span> (penalty);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3581245a7778654f6fd22c4b3721cf06"></a><!-- doxytag: member="tesseract::Wordrec::word_associator" ref="a3581245a7778654f6fd22c4b3721cf06" args="(bool only_create_ratings_matrtix, WERD_RES *word, STATE *state, BLOB_CHOICE_LIST_VECTOR *best_char_choices, DANGERR *fixpt, STATE *best_state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> * tesseract::Wordrec::word_associator </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>only_create_ratings_matrtix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_w_e_r_d___r_e_s.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ratngs_8h.html#a78a6d74d56415802d31e350314b23e65">BLOB_CHOICE_LIST_VECTOR</a> *&#160;</td>
          <td class="paramname"><em>best_char_choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stopper_8h.html#ab342921d3994b07a86ad1c5e4e8dd7c5">DANGERR</a> *&#160;</td>
          <td class="paramname"><em>fixpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_s_t_a_t_e.html">STATE</a> *&#160;</td>
          <td class="paramname"><em>best_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="chopper_8cpp_source.html#l00984">984</a> of file <a class="el" href="chopper_8cpp_source.html">chopper.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {
  <a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html">CHUNKS_RECORD</a> chunks_record;
  <a class="code" href="associate_8h.html#a72105980380289d1263c5a5058472a7e">BLOB_WEIGHTS</a> blob_weights;
  <span class="keywordtype">int</span> x;
  <span class="keywordtype">int</span> num_chunks;
  BLOB_CHOICE_IT blob_choice_it;

  num_chunks = <a class="code" href="tessarray_8h.html#a89ee8010120771c8612dc7058b327f84">array_count</a>(word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>) + 1;

  <a class="code" href="struct_t_b_l_o_b.html">TBLOB</a>* blobs = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="struct_t_w_e_r_d.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;
  chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a> = <a class="code" href="classtesseract_1_1_wordrec.html#a9f070b021f06de480fda80a61a772d47">record_piece_ratings</a>(blobs);
  chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a953645d7dbb5789cf5feb918df3e914e">chunks</a> = blobs;
  chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aa3826aaf2a5a7a76b000859ace1f8602">word_res</a> = word;
  chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aca32a87e5f9e4d04777ca3551b65b27c">splits</a> = word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>;
  chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a3ac3e771d771818dff8eed190d11d50f">chunk_widths</a> = <a class="code" href="blobs_8cpp.html#ac62acb187b8e5401eb56032b3eebef09">blobs_widths</a>(blobs);
  chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a1e5c641f46ccb7f464def3678de715d3">char_widths</a> = <a class="code" href="blobs_8cpp.html#ac62acb187b8e5401eb56032b3eebef09">blobs_widths</a>(blobs);
  <span class="comment">/* Save chunk weights */</span>
  <span class="keywordflow">for</span> (x = 0; x &lt; num_chunks; x++) {
    BLOB_CHOICE_LIST* choices = <a class="code" href="classtesseract_1_1_wordrec.html#aab16c53ccf9c888874c2e7ae65b6ed04">get_piece_rating</a>(chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>, blobs,
                                                 chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#aa3826aaf2a5a7a76b000859ace1f8602">word_res</a>-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a202d9d5d2a462d84012011c689e16605">denorm</a>,
                                                 word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>, x, x,
                                                 word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>);
    blob_choice_it.set_to_list(choices);
    <span class="comment">//This is done by Jetsoft. Divide by zero is possible.</span>
    <span class="keywordflow">if</span> (blob_choice_it.data()-&gt;certainty() == 0) {
      blob_weights[x]=0;
    } <span class="keywordflow">else</span> {
      blob_weights[x] =
        -(<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) (10 * blob_choice_it.data()-&gt;rating() /
                  blob_choice_it.data()-&gt;certainty());
    }
  }
  chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#afa46370f180659bdd3be60d7d4ed21ed">weights</a> = blob_weights;

  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">chop_debug</a>)
    chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>-&gt;<a class="code" href="class_m_a_t_r_i_x.html#ae0f2489acb8b15666cb306f82ad2c6de">print</a>(<a class="code" href="classtesseract_1_1_classify.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset());

  <span class="keywordflow">if</span> (!only_create_ratings_matrix) {
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_wordrec.html#ae9c39326c0ed2eaf67c30939714616ba">enable_new_segsearch</a>) {
      <a class="code" href="classtesseract_1_1_wordrec.html#aea3997058b7c1683957d275d17bc20d6">SegSearch</a>(&amp;chunks_record, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>,
                best_char_choices, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#ab4d02a7548dab0a4522f02ed90e48100">raw_choice</a>,
                state, word-&gt;<a class="code" href="class_w_e_r_d___r_e_s.html#a267e5d5e9fe67117e47223c5d336b8ba">blamer_bundle</a>);
    } <span class="keywordflow">else</span> {
      <a class="code" href="classtesseract_1_1_wordrec.html#ad717bb181d1b89496be0b042347d9753">best_first_search</a>(&amp;chunks_record, best_char_choices, word,
                        state, fixpt, best_state);
    }
  }

  <a class="code" href="blobs_8h.html#a08481bc89b6e24355aaa1a3785eb5840">free_widths</a>(chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a3ac3e771d771818dff8eed190d11d50f">chunk_widths</a>);
  <a class="code" href="blobs_8h.html#a08481bc89b6e24355aaa1a3785eb5840">free_widths</a>(chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a1e5c641f46ccb7f464def3678de715d3">char_widths</a>);
  <span class="keywordflow">return</span> chunks_record.<a class="code" href="struct_c_h_u_n_k_s___r_e_c_o_r_d.html#a0b28a4ba4a1c931ed994847db83e0ef5">ratings</a>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a613a7dc22729f2cb084bc7093a0a4088"></a><!-- doxytag: member="tesseract::Wordrec::assume_fixed_pitch_char_segment" ref="a613a7dc22729f2cb084bc7093a0a4088" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#a613a7dc22729f2cb084bc7093a0a4088">tesseract::Wordrec::assume_fixed_pitch_char_segment</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"include fixed-pitch heuristics in char segmentation" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00126">126</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="acd86faf2d9076330828b3738d39c6ecd"></a><!-- doxytag: member="tesseract::Wordrec::blame_reasons_" ref="acd86faf2d9076330828b3738d39c6ecd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_generic_vector.html">GenericVector</a>&lt;int&gt; <a class="el" href="classtesseract_1_1_wordrec.html#acd86faf2d9076330828b3738d39c6ecd">tesseract::Wordrec::blame_reasons_</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00512">512</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7518e041a8ddab1d1a2b7e609553b8e3"></a><!-- doxytag: member="tesseract::Wordrec::blob_match_table" ref="a7518e041a8ddab1d1a2b7e609553b8e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtesseract_1_1_blob_match_table.html">BlobMatchTable</a> <a class="el" href="classtesseract_1_1_wordrec.html#a7518e041a8ddab1d1a2b7e609553b8e3">tesseract::Wordrec::blob_match_table</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00505">505</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7b115ea8fffc0f54152d294c71da964d"></a><!-- doxytag: member="tesseract::Wordrec::chop_center_knob" ref="a7b115ea8fffc0f54152d294c71da964d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#a7b115ea8fffc0f54152d294c71da964d">tesseract::Wordrec::chop_center_knob</a> = 0.15</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Split center adjustment" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00118">118</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3f1c04cfbc1650eae6fc981984717248"></a><!-- doxytag: member="tesseract::Wordrec::chop_debug" ref="a3f1c04cfbc1650eae6fc981984717248" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a3f1c04cfbc1650eae6fc981984717248">tesseract::Wordrec::chop_debug</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Chop debug" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00108">108</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="adcf4728e9f36b1c55a024165a31ca2e4"></a><!-- doxytag: member="tesseract::Wordrec::chop_enable" ref="adcf4728e9f36b1c55a024165a31ca2e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#adcf4728e9f36b1c55a024165a31ca2e4">tesseract::Wordrec::chop_enable</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Chop enable" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00109">109</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad18f0e1c62f90e2be42190a720158862"></a><!-- doxytag: member="tesseract::Wordrec::chop_good_split" ref="ad18f0e1c62f90e2be42190a720158862" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#ad18f0e1c62f90e2be42190a720158862">tesseract::Wordrec::chop_good_split</a> = 50.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Good split limit" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00122">122</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab6afc69fe3401fb2ffd2ab64a19c8824"></a><!-- doxytag: member="tesseract::Wordrec::chop_inside_angle" ref="ab6afc69fe3401fb2ffd2ab64a19c8824" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#ab6afc69fe3401fb2ffd2ab64a19c8824">tesseract::Wordrec::chop_inside_angle</a> = -50</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Min Inside Angle Bend" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00114">114</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa87cc41f196b1779bec5e1040c4f857e"></a><!-- doxytag: member="tesseract::Wordrec::chop_min_outline_area" ref="aa87cc41f196b1779bec5e1040c4f857e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#aa87cc41f196b1779bec5e1040c4f857e">tesseract::Wordrec::chop_min_outline_area</a> = 2000</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Min Outline Area" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00115">115</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad9e49481be94c7fd0fb0a1a3f38ea605"></a><!-- doxytag: member="tesseract::Wordrec::chop_min_outline_points" ref="ad9e49481be94c7fd0fb0a1a3f38ea605" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#ad9e49481be94c7fd0fb0a1a3f38ea605">tesseract::Wordrec::chop_min_outline_points</a> = 6</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Min Number of Points on Outline" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00113">113</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac696a875283d1ce3e888e1b63fd52d9f"></a><!-- doxytag: member="tesseract::Wordrec::chop_ok_split" ref="ac696a875283d1ce3e888e1b63fd52d9f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#ac696a875283d1ce3e888e1b63fd52d9f">tesseract::Wordrec::chop_ok_split</a> = 100.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"OK split limit" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00121">121</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad362b437458be7cc17aa39e01d36c17e"></a><!-- doxytag: member="tesseract::Wordrec::chop_overlap_knob" ref="ad362b437458be7cc17aa39e01d36c17e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#ad362b437458be7cc17aa39e01d36c17e">tesseract::Wordrec::chop_overlap_knob</a> = 0.9</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Split overlap adjustment" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00117">117</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a542ce310766b22a01d277a0751c6986e"></a><!-- doxytag: member="tesseract::Wordrec::chop_same_distance" ref="a542ce310766b22a01d277a0751c6986e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a542ce310766b22a01d277a0751c6986e">tesseract::Wordrec::chop_same_distance</a> = 2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Same distance" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00112">112</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1e5af8d3ffa2cc52de487e7556a8fdf0"></a><!-- doxytag: member="tesseract::Wordrec::chop_sharpness_knob" ref="a1e5af8d3ffa2cc52de487e7556a8fdf0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#a1e5af8d3ffa2cc52de487e7556a8fdf0">tesseract::Wordrec::chop_sharpness_knob</a> = 0.06</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Split sharpness adjustment" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00119">119</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="aefabcf9d889b0465eb484fff5a09e93a"></a><!-- doxytag: member="tesseract::Wordrec::chop_split_dist_knob" ref="aefabcf9d889b0465eb484fff5a09e93a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#aefabcf9d889b0465eb484fff5a09e93a">tesseract::Wordrec::chop_split_dist_knob</a> = 0.5</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Split length adjustment" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00116">116</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a14ec030cc0189e71e05ea6630a1abbf5"></a><!-- doxytag: member="tesseract::Wordrec::chop_split_length" ref="a14ec030cc0189e71e05ea6630a1abbf5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a14ec030cc0189e71e05ea6630a1abbf5">tesseract::Wordrec::chop_split_length</a> = 10000</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Split Length" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00111">111</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8914016a85c92a468b1d1da3eda53695"></a><!-- doxytag: member="tesseract::Wordrec::chop_vertical_creep" ref="a8914016a85c92a468b1d1da3eda53695" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#a8914016a85c92a468b1d1da3eda53695">tesseract::Wordrec::chop_vertical_creep</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Vertical creep" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00110">110</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa63e4f7808cf2b9a60a11012cb7aee01"></a><!-- doxytag: member="tesseract::Wordrec::chop_width_change_knob" ref="aa63e4f7808cf2b9a60a11012cb7aee01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#aa63e4f7808cf2b9a60a11012cb7aee01">tesseract::Wordrec::chop_width_change_knob</a> = 5.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Width change adjustment" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00120">120</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0db358c94208627661f5f1cf44ff9d28"></a><!-- doxytag: member="tesseract::Wordrec::chop_x_y_weight" ref="a0db358c94208627661f5f1cf44ff9d28" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a0db358c94208627661f5f1cf44ff9d28">tesseract::Wordrec::chop_x_y_weight</a> = 3</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"X / Y  length weight" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00123">123</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae9c39326c0ed2eaf67c30939714616ba"></a><!-- doxytag: member="tesseract::Wordrec::enable_new_segsearch" ref="ae9c39326c0ed2eaf67c30939714616ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#ae9c39326c0ed2eaf67c30939714616ba">tesseract::Wordrec::enable_new_segsearch</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Enable new segmentation search path." </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00145">145</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7a4f5e2cb7957a5decbc91eb2d31f87c"></a><!-- doxytag: member="tesseract::Wordrec::fill_lattice_" ref="a7a4f5e2cb7957a5decbc91eb2d31f87c" args=")(const MATRIX &amp;ratings, const LIST &amp;best_choices, const UNICHARSET &amp;unicharset, BlamerBundle *blamer_bundle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(Wordrec::* <a class="el" href="classtesseract_1_1_wordrec.html#a7a4f5e2cb7957a5decbc91eb2d31f87c">tesseract::Wordrec::fill_lattice_</a>)(const <a class="el" href="class_m_a_t_r_i_x.html">MATRIX</a> &amp;ratings, const <a class="el" href="baseapi_8h.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> &amp;best_choices, const <a class="el" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> &amp;<a class="el" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>, <a class="el" href="struct_blamer_bundle.html">BlamerBundle</a> *blamer_bundle)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00514">514</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a447f3fa5c50ca545e0a49887ee669ff8"></a><!-- doxytag: member="tesseract::Wordrec::force_word_assoc" ref="a447f3fa5c50ca545e0a49887ee669ff8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#a447f3fa5c50ca545e0a49887ee669ff8">tesseract::Wordrec::force_word_assoc</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"force associator to run regardless of what enable_assoc is." "This is used for CJK where component grouping is necessary." </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00101">101</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a62f9bd7c796160d6fad61ba616e67ead"></a><!-- doxytag: member="tesseract::Wordrec::fragments_guide_chopper" ref="a62f9bd7c796160d6fad61ba616e67ead" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#a62f9bd7c796160d6fad61ba616e67ead">tesseract::Wordrec::fragments_guide_chopper</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Use information from fragments to guide chopping process" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00105">105</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3083609f8ad7c4895647674956163c04"></a><!-- doxytag: member="tesseract::Wordrec::heuristic_max_char_wh_ratio" ref="a3083609f8ad7c4895647674956163c04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#a3083609f8ad7c4895647674956163c04">tesseract::Wordrec::heuristic_max_char_wh_ratio</a> = 2.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"max char width-to-height ratio allowed in segmentation" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00140">140</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a48537af11d756181ab3c13d14154ec3f"></a><!-- doxytag: member="tesseract::Wordrec::heuristic_segcost_rating_base" ref="a48537af11d756181ab3c13d14154ec3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#a48537af11d756181ab3c13d14154ec3f">tesseract::Wordrec::heuristic_segcost_rating_base</a> = 1.25</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"base factor for adding segmentation cost into word rating." "It's a multiplying factor, the larger the value above 1, " "the bigger the effect of segmentation cost." </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00132">132</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6db610e3739b7660036de4498efd0cc4"></a><!-- doxytag: member="tesseract::Wordrec::heuristic_weight_rating" ref="a6db610e3739b7660036de4498efd0cc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#a6db610e3739b7660036de4498efd0cc4">tesseract::Wordrec::heuristic_weight_rating</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"weight associated with char rating in combined cost of state" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00134">134</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5305fb44c26a61863bb5f7b646fc5bd9"></a><!-- doxytag: member="tesseract::Wordrec::heuristic_weight_seamcut" ref="a5305fb44c26a61863bb5f7b646fc5bd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#a5305fb44c26a61863bb5f7b646fc5bd9">tesseract::Wordrec::heuristic_weight_seamcut</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"weight associated with seam cut in combined cost of state" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00138">138</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae123123f79f4caa864aa437e93872551"></a><!-- doxytag: member="tesseract::Wordrec::heuristic_weight_width" ref="ae123123f79f4caa864aa437e93872551" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#ae123123f79f4caa864aa437e93872551">tesseract::Wordrec::heuristic_weight_width</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"weight associated with width evidence in combined cost of state" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00136">136</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3d9fc3b086e0f174a2cd602ea8f421c6"></a><!-- doxytag: member="tesseract::Wordrec::language_model_" ref="a3d9fc3b086e0f174a2cd602ea8f421c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtesseract_1_1_language_model.html">LanguageModel</a>* <a class="el" href="classtesseract_1_1_wordrec.html#a3d9fc3b086e0f174a2cd602ea8f421c6">tesseract::Wordrec::language_model_</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00499">499</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="af7a36436e7e7fd0691bc093814fc2b62"></a><!-- doxytag: member="tesseract::Wordrec::last_segmentation" ref="af7a36436e7e7fd0691bc093814fc2b62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="associate_8h.html#ab48ca2435a6b02cde81b7554ce0160e3">EVALUATION_ARRAY</a> <a class="el" href="classtesseract_1_1_wordrec.html#af7a36436e7e7fd0691bc093814fc2b62">tesseract::Wordrec::last_segmentation</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00506">506</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0dcc862e7e80e66c451e8e98b534ca46"></a><!-- doxytag: member="tesseract::Wordrec::merge_fragments_in_matrix" ref="a0dcc862e7e80e66c451e8e98b534ca46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#a0dcc862e7e80e66c451e8e98b534ca46">tesseract::Wordrec::merge_fragments_in_matrix</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Merge the fragments in the ratings matrix and delete them " "after merging" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00096">96</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a488e4047c19dcd34c6ce55fa08731565"></a><!-- doxytag: member="tesseract::Wordrec::num_joints" ref="a488e4047c19dcd34c6ce55fa08731565" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a488e4047c19dcd34c6ce55fa08731565">tesseract::Wordrec::num_joints</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00502">502</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="abc8f5ea0bc5278f6a3ba1f91b3e797e3"></a><!-- doxytag: member="tesseract::Wordrec::num_popped" ref="abc8f5ea0bc5278f6a3ba1f91b3e797e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#abc8f5ea0bc5278f6a3ba1f91b3e797e3">tesseract::Wordrec::num_popped</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00504">504</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="af285813a72895f9b09f4e0f3021e721c"></a><!-- doxytag: member="tesseract::Wordrec::num_pushed" ref="af285813a72895f9b09f4e0f3021e721c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#af285813a72895f9b09f4e0f3021e721c">tesseract::Wordrec::num_pushed</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00503">503</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a671c4b102b976c600adc3bf60ee44323"></a><!-- doxytag: member="tesseract::Wordrec::pass2_ok_split" ref="a671c4b102b976c600adc3bf60ee44323" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="seam_8h.html#a39b235b77c0838c8a1f197ffe83d5ce8">PRIORITY</a> <a class="el" href="classtesseract_1_1_wordrec.html#a671c4b102b976c600adc3bf60ee44323">tesseract::Wordrec::pass2_ok_split</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00500">500</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ade3cecfe9b377045db0abe2d06762c1e"></a><!-- doxytag: member="tesseract::Wordrec::pass2_seg_states" ref="ade3cecfe9b377045db0abe2d06762c1e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#ade3cecfe9b377045db0abe2d06762c1e">tesseract::Wordrec::pass2_seg_states</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00501">501</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a143608f482c6c0c4f312740e6a5f5fd9"></a><!-- doxytag: member="tesseract::Wordrec::prev_word_best_choice_" ref="a143608f482c6c0c4f312740e6a5f5fd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_w_e_r_d___c_h_o_i_c_e.html">WERD_CHOICE</a>* <a class="el" href="classtesseract_1_1_wordrec.html#a143608f482c6c0c4f312740e6a5f5fd9">tesseract::Wordrec::prev_word_best_choice_</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00510">510</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a34abe5c1b41feff68500d1b83a1f891d"></a><!-- doxytag: member="tesseract::Wordrec::repair_unchopped_blobs" ref="a34abe5c1b41feff68500d1b83a1f891d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a34abe5c1b41feff68500d1b83a1f891d">tesseract::Wordrec::repair_unchopped_blobs</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Fix blobs that aren't chopped" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00106">106</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="acb91792cc7855324b0a6f495defe3218"></a><!-- doxytag: member="tesseract::Wordrec::save_alt_choices" ref="acb91792cc7855324b0a6f495defe3218" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#acb91792cc7855324b0a6f495defe3218">tesseract::Wordrec::save_alt_choices</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Save alternative paths found during chopping " "and segmentation search" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00158">158</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2d79e213378c782ac3de5e92ae2ee41c"></a><!-- doxytag: member="tesseract::Wordrec::segment_adjust_debug" ref="a2d79e213378c782ac3de5e92ae2ee41c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a2d79e213378c782ac3de5e92ae2ee41c">tesseract::Wordrec::segment_adjust_debug</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Segmentation adjustment debug" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00124">124</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a30bd78320448ef425666157d2ff672db"></a><!-- doxytag: member="tesseract::Wordrec::segsearch_debug_level" ref="a30bd78320448ef425666157d2ff672db" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a30bd78320448ef425666157d2ff672db">tesseract::Wordrec::segsearch_debug_level</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"SegSearch debug level" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00146">146</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8fa843163c3e8785a957e422b9256d35"></a><!-- doxytag: member="tesseract::Wordrec::segsearch_max_char_wh_ratio" ref="a8fa843163c3e8785a957e422b9256d35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#a8fa843163c3e8785a957e422b9256d35">tesseract::Wordrec::segsearch_max_char_wh_ratio</a> = 2.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Maximum character width-to-height ratio" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00152">152</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="acb3f291e547f6019e53c8eb0f3b48e70"></a><!-- doxytag: member="tesseract::Wordrec::segsearch_max_fixed_pitch_char_wh_ratio" ref="acb3f291e547f6019e53c8eb0f3b48e70" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#acb3f291e547f6019e53c8eb0f3b48e70">tesseract::Wordrec::segsearch_max_fixed_pitch_char_wh_ratio</a> = 2.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Maximum character width-to-height ratio for" "fixed pitch fonts" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00155">155</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7d7641f6361f78664fb541f5ce33fe1b"></a><!-- doxytag: member="tesseract::Wordrec::segsearch_max_futile_classifications" ref="a7d7641f6361f78664fb541f5ce33fe1b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a7d7641f6361f78664fb541f5ce33fe1b">tesseract::Wordrec::segsearch_max_futile_classifications</a> = 10</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Maximum number of pain point classifications per word." </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00150">150</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0a0cfc9fb11d9ecf6961d0cc655f9070"></a><!-- doxytag: member="tesseract::Wordrec::segsearch_max_pain_points" ref="a0a0cfc9fb11d9ecf6961d0cc655f9070" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a0a0cfc9fb11d9ecf6961d0cc655f9070">tesseract::Wordrec::segsearch_max_pain_points</a> = 2000</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Maximum number of pain points stored in the queue" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00148">148</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a57ae3e0529a624fd3677f96d5b43fcc8"></a><!-- doxytag: member="tesseract::Wordrec::tessedit_certainty_threshold" ref="a57ae3e0529a624fd3677f96d5b43fcc8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#a57ae3e0529a624fd3677f96d5b43fcc8">tesseract::Wordrec::tessedit_certainty_threshold</a> = -2.25</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Good blob limit" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00107">107</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab5afccbd096fe5f2ce5e3a7ada77a698"></a><!-- doxytag: member="tesseract::Wordrec::use_new_state_cost" ref="ab5afccbd096fe5f2ce5e3a7ada77a698" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#ab5afccbd096fe5f2ce5e3a7ada77a698">tesseract::Wordrec::use_new_state_cost</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"use new state cost heuristics for segmentation state evaluation" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00128">128</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a76e95cb7cbfe636ab00ec46150b5524d"></a><!-- doxytag: member="tesseract::Wordrec::wordrec_debug_blamer" ref="a76e95cb7cbfe636ab00ec46150b5524d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#a76e95cb7cbfe636ab00ec46150b5524d">tesseract::Wordrec::wordrec_debug_blamer</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Print blamer debug messages" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00142">142</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a15e6789d11062602e044c699bbd9b3aa"></a><!-- doxytag: member="tesseract::Wordrec::wordrec_debug_level" ref="a15e6789d11062602e044c699bbd9b3aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a15e6789d11062602e044c699bbd9b3aa">tesseract::Wordrec::wordrec_debug_level</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Debug level for wordrec" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00141">141</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="aba19336c1e635f22b3c27024afd07fed"></a><!-- doxytag: member="tesseract::Wordrec::wordrec_enable_assoc" ref="aba19336c1e635f22b3c27024afd07fed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#aba19336c1e635f22b3c27024afd07fed">tesseract::Wordrec::wordrec_enable_assoc</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Associator Enable" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00098">98</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d72dac6cc8ddbff1ba7c911d7d2d0bb"></a><!-- doxytag: member="tesseract::Wordrec::wordrec_no_block" ref="a1d72dac6cc8ddbff1ba7c911d7d2d0bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#a1d72dac6cc8ddbff1ba7c911d7d2d0bb">tesseract::Wordrec::wordrec_no_block</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Don't output block information" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00097">97</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a57c3675d967208936be65a14e5b64c7d"></a><!-- doxytag: member="tesseract::Wordrec::wordrec_num_seg_states" ref="a57c3675d967208936be65a14e5b64c7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_wordrec.html#a57c3675d967208936be65a14e5b64c7d">tesseract::Wordrec::wordrec_num_seg_states</a> = 30</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Segmentation states" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00102">102</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5f360cd76704a08b03a4738a97e8457b"></a><!-- doxytag: member="tesseract::Wordrec::wordrec_run_blamer" ref="a5f360cd76704a08b03a4738a97e8457b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_wordrec.html#a5f360cd76704a08b03a4738a97e8457b">tesseract::Wordrec::wordrec_run_blamer</a> = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Try to set the blame for errors" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00143">143</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<a class="anchor" id="abbb36fc5e6f3b89797c155cfce0b0841"></a><!-- doxytag: member="tesseract::Wordrec::wordrec_worst_state" ref="abbb36fc5e6f3b89797c155cfce0b0841" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classtesseract_1_1_wordrec.html#abbb36fc5e6f3b89797c155cfce0b0841">tesseract::Wordrec::wordrec_worst_state</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>"Worst segmentation state" </p>

<p>Definition at line <a class="el" href="wordrec_8h_source.html#l00103">103</a> of file <a class="el" href="wordrec_8h_source.html">wordrec.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tesseract-ocr/wordrec/<a class="el" href="wordrec_8h_source.html">wordrec.h</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="bestfirst_8cpp_source.html">bestfirst.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="chop_8cpp_source.html">chop.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="chopper_8cpp_source.html">chopper.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="findseam_8cpp_source.html">findseam.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="gradechop_8cpp_source.html">gradechop.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="heuristic_8cpp_source.html">heuristic.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="outlines_8cpp_source.html">outlines.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="pieces_8cpp_source.html">pieces.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="segsearch_8cpp_source.html">segsearch.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="tface_8cpp_source.html">tface.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="wordclass_8cpp_source.html">wordclass.cpp</a></li>
<li>tesseract-ocr/wordrec/<a class="el" href="wordrec_8cpp_source.html">wordrec.cpp</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacetesseract.html">tesseract</a>      </li>
      <li class="navelem"><a class="el" href="classtesseract_1_1_wordrec.html">Wordrec</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Fri Mar 30 2012 17:39:34 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
