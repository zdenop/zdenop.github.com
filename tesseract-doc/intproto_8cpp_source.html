<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tesseract: tesseract-ocr/classify/intproto.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('intproto_8cpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">tesseract-ocr/classify/intproto.cpp</div>  </div>
</div>
<div class="contents">
<a href="intproto_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> ** Filename:    intproto.c</span>
<a name="l00003"></a>00003 <span class="comment"> ** Purpose:     Definition of data structures for integer protos.</span>
<a name="l00004"></a>00004 <span class="comment"> ** Author:      Dan Johnson</span>
<a name="l00005"></a>00005 <span class="comment"> ** History:     Thu Feb  7 14:38:16 1991, DSJ, Created.</span>
<a name="l00006"></a>00006 <span class="comment"> **</span>
<a name="l00007"></a>00007 <span class="comment"> ** (c) Copyright Hewlett-Packard Company, 1988.</span>
<a name="l00008"></a>00008 <span class="comment"> ** Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00009"></a>00009 <span class="comment"> ** you may not use this file except in compliance with the License.</span>
<a name="l00010"></a>00010 <span class="comment"> ** You may obtain a copy of the License at</span>
<a name="l00011"></a>00011 <span class="comment"> ** http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00012"></a>00012 <span class="comment"> ** Unless required by applicable law or agreed to in writing, software</span>
<a name="l00013"></a>00013 <span class="comment"> ** distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00014"></a>00014 <span class="comment"> ** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00015"></a>00015 <span class="comment"> ** See the License for the specific language governing permissions and</span>
<a name="l00016"></a>00016 <span class="comment"> ** limitations under the License.</span>
<a name="l00017"></a>00017 <span class="comment"> ******************************************************************************/</span>
<a name="l00018"></a>00018 <span class="comment">/*-----------------------------------------------------------------------------</span>
<a name="l00019"></a>00019 <span class="comment">          Include Files and Type Defines</span>
<a name="l00020"></a>00020 <span class="comment">-----------------------------------------------------------------------------*/</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#ifdef __UNIX__</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#endif</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="classify_8h.html">classify.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="const_8h.html">const.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="emalloc_8h.html">emalloc.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="fontinfo_8h.html">fontinfo.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="genericvector_8h.html">genericvector.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="globals_8h.html">globals.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="helpers_8h.html">helpers.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="intproto_8h.html">intproto.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="mfoutline_8h.html">mfoutline.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="ndminx_8h.html">ndminx.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="picofeat_8h.html">picofeat.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="shapetable_8h.html">shapetable.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="svmnode_8h.html">svmnode.h</a>&quot;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">// Include automatically generated configuration file if running autoconf.</span>
<a name="l00044"></a>00044 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="config__auto_8h.html">config_auto.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#endif</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 <span class="keyword">using</span> <a class="code" href="structtesseract_1_1_font_info.html">tesseract::FontInfo</a>;
<a name="l00049"></a>00049 <span class="keyword">using</span> <a class="code" href="structtesseract_1_1_font_set.html">tesseract::FontSet</a>;
<a name="l00050"></a>00050 <span class="keyword">using</span> <a class="code" href="structtesseract_1_1_font_spacing_info.html">tesseract::FontSpacingInfo</a>;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="comment">/* match debug display constants*/</span>
<a name="l00053"></a><a class="code" href="intproto_8cpp.html#ad0a217ed135414378d65558a77b9b2ba">00053</a> <span class="preprocessor">#define PROTO_PRUNER_SCALE  (4.0)</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="intproto_8cpp.html#a5c9809b9be37d6d221e2171fe42511df">00055</a> <span class="preprocessor">#define INT_DESCENDER (0.0  * INT_CHAR_NORM_RANGE)</span>
<a name="l00056"></a><a class="code" href="intproto_8cpp.html#af29db3e707420f778975c37e5d66fd10">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_BASELINE  (0.25 * INT_CHAR_NORM_RANGE)</span>
<a name="l00057"></a><a class="code" href="intproto_8cpp.html#a8c142ec5cff85d77ec4abc373999f6ec">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_XHEIGHT (0.75 * INT_CHAR_NORM_RANGE)</span>
<a name="l00058"></a><a class="code" href="intproto_8cpp.html#afa60433c26b09f744170ab10c8cfa716">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_CAPHEIGHT (1.0  * INT_CHAR_NORM_RANGE)</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a><a class="code" href="intproto_8cpp.html#a983c9783c3f2d0492f157663437cf7bd">00060</a> <span class="preprocessor">#define INT_XCENTER (0.5  * INT_CHAR_NORM_RANGE)</span>
<a name="l00061"></a><a class="code" href="intproto_8cpp.html#a7b4c65ba0ecc02ed3d969a4c07bff4dc">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_YCENTER (0.5  * INT_CHAR_NORM_RANGE)</span>
<a name="l00062"></a><a class="code" href="intproto_8cpp.html#af4a3bea04d2b29dafb4530473dd4f656">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_XRADIUS (0.2  * INT_CHAR_NORM_RANGE)</span>
<a name="l00063"></a><a class="code" href="intproto_8cpp.html#a38e42261c045df095d799e2f19aec1e6">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_YRADIUS (0.2  * INT_CHAR_NORM_RANGE)</span>
<a name="l00064"></a><a class="code" href="intproto_8cpp.html#ac1a914c5ff58a0f8f9280ef2c9a29855">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_MIN_X 0</span>
<a name="l00065"></a><a class="code" href="intproto_8cpp.html#a610ad70ab1731cabfb990c35cfd01dcf">00065</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_MIN_Y 0</span>
<a name="l00066"></a><a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_MAX_X INT_CHAR_NORM_RANGE</span>
<a name="l00067"></a><a class="code" href="intproto_8cpp.html#a4b0559f5844c194356263f55e3279d04">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_MAX_Y INT_CHAR_NORM_RANGE</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00070"></a><a class="code" href="intproto_8cpp.html#a83959744dc05db71c3e5ec880f31eb7a">00070</a> <span class="preprocessor">#define HV_TOLERANCE  (0.0025)   </span><span class="comment">/* approx 0.9 degrees */</span>
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82">00072</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00073"></a><a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a1cf2f15eb85b86e0ec9045e3619a3fa7">00073</a> { <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a1cf2f15eb85b86e0ec9045e3619a3fa7">StartSwitch</a>, <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a76e233dc90515aca43b7487c60694770">EndSwitch</a>, <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82adf8537429629d6c042ac3481208264e2">LastSwitch</a> }
<a name="l00074"></a>00074 <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82">SWITCH_TYPE</a>;
<a name="l00075"></a><a class="code" href="intproto_8cpp.html#aeb70d96939b74c871cb7f3c6e15e2b34">00075</a> <span class="preprocessor">#define MAX_NUM_SWITCHES  3</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>
<a name="l00077"></a><a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html">00077</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00078"></a>00078 {
<a name="l00079"></a><a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">00079</a>   <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82">SWITCH_TYPE</a> <a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a>;
<a name="l00080"></a><a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#afbfda1b2e13254c26369bb792b0edbaf">00080</a>   <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> X, <a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#afbfda1b2e13254c26369bb792b0edbaf">Y</a>;
<a name="l00081"></a><a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aecb5907178fad1760c3ba1911295f0e8">00081</a>   <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> <a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aecb5907178fad1760c3ba1911295f0e8">YInit</a>;
<a name="l00082"></a><a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#a6aab71c8cc5076d6299ac5153cc01ad8">00082</a>   <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> <a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#a6aab71c8cc5076d6299ac5153cc01ad8">Delta</a>;
<a name="l00083"></a>00083 }
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html">FILL_SWITCH</a>;
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">00088</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00089"></a>00089 {
<a name="l00090"></a><a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a652d9c1a4384ff077102496a96ac879e">00090</a>   <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a652d9c1a4384ff077102496a96ac879e">NextSwitch</a>;
<a name="l00091"></a><a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a202225304dab5e7f073f38a042c21aad">00091</a>   <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a202225304dab5e7f073f38a042c21aad">AngleStart</a>, AngleEnd;
<a name="l00092"></a><a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">00092</a>   <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a>;
<a name="l00093"></a><a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">00093</a>   <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">YStart</a>, YEnd;
<a name="l00094"></a><a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">00094</a>   <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a>, EndDelta;
<a name="l00095"></a><a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">00095</a>   <a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html">FILL_SWITCH</a> Switch[<a class="code" href="intproto_8cpp.html#aeb70d96939b74c871cb7f3c6e15e2b34">MAX_NUM_SWITCHES</a>];
<a name="l00096"></a>00096 }
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">TABLE_FILLER</a>;
<a name="l00100"></a>00100 
<a name="l00101"></a><a class="code" href="struct_f_i_l_l___s_p_e_c.html">00101</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00102"></a>00102 {
<a name="l00103"></a><a class="code" href="struct_f_i_l_l___s_p_e_c.html#af6f01125dbc9d3ffcdabff5ffde4cdd5">00103</a>   <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> <a class="code" href="struct_f_i_l_l___s_p_e_c.html#af6f01125dbc9d3ffcdabff5ffde4cdd5">X</a>;
<a name="l00104"></a><a class="code" href="struct_f_i_l_l___s_p_e_c.html#a8e3873d2bbb279c505af2a778f90d5d0">00104</a>   <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> <a class="code" href="struct_f_i_l_l___s_p_e_c.html#a8e3873d2bbb279c505af2a778f90d5d0">YStart</a>, YEnd;
<a name="l00105"></a><a class="code" href="struct_f_i_l_l___s_p_e_c.html#a00f7ac32738ce5dc0e5e4955a4ab2afb">00105</a>   <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="struct_f_i_l_l___s_p_e_c.html#a00f7ac32738ce5dc0e5e4955a4ab2afb">AngleStart</a>, AngleEnd;
<a name="l00106"></a>00106 }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <a class="code" href="struct_f_i_l_l___s_p_e_c.html">FILL_SPEC</a>;
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <span class="comment">/* constants for conversion from old inttemp format */</span>
<a name="l00113"></a><a class="code" href="intproto_8cpp.html#a140c8d6cda6a254c6bf42e7caa0390fc">00113</a> <span class="preprocessor">#define OLD_MAX_NUM_CONFIGS      32</span>
<a name="l00114"></a><a class="code" href="intproto_8cpp.html#aed02bb4e2adadad4fad1e2fc91e4643d">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define OLD_WERDS_PER_CONFIG_VEC ((OLD_MAX_NUM_CONFIGS + BITS_PER_WERD - 1) /\</span>
<a name="l00115"></a>00115 <span class="preprocessor">                                  BITS_PER_WERD)</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span>
<a name="l00117"></a>00117 <span class="comment">/*-----------------------------------------------------------------------------</span>
<a name="l00118"></a>00118 <span class="comment">            Macros</span>
<a name="l00119"></a>00119 <span class="comment">-----------------------------------------------------------------------------*/</span>
<a name="l00121"></a><a class="code" href="intproto_8cpp.html#a2e059f536686155b975d46cecf190d77">00121</a> <span class="preprocessor">#define CircularIncrement(i,r)  (((i) &lt; (r) - 1)?((i)++):((i) = 0))</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>
<a name="l00124"></a><a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">00124</a> <span class="preprocessor">#define MapParam(P,O,N)   (floor (((P) + (O)) * (N)))</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span>
<a name="l00126"></a>00126 <span class="comment">/*---------------------------------------------------------------------------</span>
<a name="l00127"></a>00127 <span class="comment">            Private Function Prototypes</span>
<a name="l00128"></a>00128 <span class="comment">----------------------------------------------------------------------------*/</span>
<a name="l00129"></a>00129 <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> <a class="code" href="intproto_8cpp.html#ae613a28d73bf2a76687f554e439a1c4c">BucketStart</a>(<span class="keywordtype">int</span> Bucket, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Offset, <span class="keywordtype">int</span> NumBuckets);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> <a class="code" href="intproto_8cpp.html#ac65eab1c9120551f8d4706d4dfaf0815">BucketEnd</a>(<span class="keywordtype">int</span> Bucket, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Offset, <span class="keywordtype">int</span> NumBuckets);
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#afaea93aff6c706adbe44d48f343ce2af">DoFill</a>(<a class="code" href="struct_f_i_l_l___s_p_e_c.html">FILL_SPEC</a> *FillSpec,
<a name="l00134"></a>00134             <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>* Pruner,
<a name="l00135"></a>00135             <span class="keyword">register</span> <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ClassMask,
<a name="l00136"></a>00136             <span class="keyword">register</span> <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ClassCount,
<a name="l00137"></a>00137             <span class="keyword">register</span> <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> WordIndex);
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 <a class="code" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> <a class="code" href="intproto_8cpp.html#a6e872ab9dec7a62d791536899847446b">FillerDone</a>(<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">TABLE_FILLER</a> *Filler);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a9fd79e26406505a10882c61ccec50fa5">FillPPCircularBits</a>(<a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a>
<a name="l00142"></a>00142                         ParamTable[<a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>][<a class="code" href="intproto_8h.html#a56d28cb646571fa14db5eb2ced4a5302">WERDS_PER_PP_VECTOR</a>],
<a name="l00143"></a>00143                         <span class="keywordtype">int</span> Bit, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Center, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Spread, <span class="keywordtype">bool</span> debug);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#acec82005e652edf5912abcfae1166e19">FillPPLinearBits</a>(<a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ParamTable[<a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>][<a class="code" href="intproto_8h.html#a56d28cb646571fa14db5eb2ced4a5302">WERDS_PER_PP_VECTOR</a>],
<a name="l00146"></a>00146                       <span class="keywordtype">int</span> Bit, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Center, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Spread, <span class="keywordtype">bool</span> debug);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148 <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a09e675cd233359d8763e744e402a3dfa">GetCPPadsForLevel</a>(<span class="keywordtype">int</span> Level,
<a name="l00149"></a>00149                        <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *EndPad,
<a name="l00150"></a>00150                        <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *SidePad,
<a name="l00151"></a>00151                        <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *AnglePad);
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> <a class="code" href="intproto_8cpp.html#afa296141a34309a16ea4fdc63904ecea">GetMatchColorFor</a>(<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Evidence);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a2d8b49f118901da6dbaf5d5b4c8da174">GetNextFill</a>(<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">TABLE_FILLER</a> *Filler, <a class="code" href="struct_f_i_l_l___s_p_e_c.html">FILL_SPEC</a> *Fill);
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#adb682620c9100c1985218aeb25bbdb9f">InitTableFiller</a>(<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> EndPad,
<a name="l00158"></a>00158                      <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> SidePad,
<a name="l00159"></a>00159                      <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> AnglePad,
<a name="l00160"></a>00160                      <a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html">PROTO</a> Proto,
<a name="l00161"></a>00161                      <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">TABLE_FILLER</a> *Filler);
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 <span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<a name="l00164"></a>00164 <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a83c43ef1a01f3be45cbf675da04c3930">RenderIntFeature</a>(<a class="code" href="class_scroll_view.html">ScrollView</a> *window, <span class="keyword">const</span> <a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html">INT_FEATURE_STRUCT</a>* Feature,
<a name="l00165"></a>00165                       <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a67948f52800e3964340ae96c2261c018">RenderIntProto</a>(<a class="code" href="class_scroll_view.html">ScrollView</a> *window,
<a name="l00168"></a>00168                     <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class,
<a name="l00169"></a>00169                     <a class="code" href="matchdefs_8h.html#ac80a5d84c2805bfd10ac129d949f8b80">PROTO_ID</a> ProtoId,
<a name="l00170"></a>00170                     <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color);
<a name="l00171"></a>00171 <span class="preprocessor">#endif  // GRAPHICS_DISABLED</span>
<a name="l00172"></a>00172 <span class="preprocessor"></span>
<a name="l00173"></a>00173 <span class="keywordtype">int</span> <a class="code" href="intproto_8cpp.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Param, <span class="keywordtype">int</span> Min, <span class="keywordtype">int</span> Max, <span class="keywordtype">char</span> *Id);
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 <span class="comment">/*-----------------------------------------------------------------------------</span>
<a name="l00176"></a>00176 <span class="comment">        Global Data Definitions and Declarations</span>
<a name="l00177"></a>00177 <span class="comment">-----------------------------------------------------------------------------*/</span>
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="comment">/* global display lists used to display proto and feature match information*/</span>
<a name="l00180"></a><a class="code" href="intproto_8cpp.html#a3e2601e005e31466f29ed35791e280dc">00180</a> <a class="code" href="class_scroll_view.html">ScrollView</a> *<a class="code" href="intproto_8cpp.html#a3e2601e005e31466f29ed35791e280dc">IntMatchWindow</a> = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00181"></a><a class="code" href="intproto_8cpp.html#a0ec1ed97f9b163a57ada0daebeed4a19">00181</a> <a class="code" href="class_scroll_view.html">ScrollView</a> *<a class="code" href="intproto_8cpp.html#a0ec1ed97f9b163a57ada0daebeed4a19">FeatureDisplayWindow</a> = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00182"></a><a class="code" href="intproto_8cpp.html#a23f6e9320fd27edf24ff0788bbd15d14">00182</a> <a class="code" href="class_scroll_view.html">ScrollView</a> *<a class="code" href="intproto_8cpp.html#a23f6e9320fd27edf24ff0788bbd15d14">ProtoDisplayWindow</a> = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 <span class="comment">/*-----------------------------------------------------------------------------</span>
<a name="l00185"></a>00185 <span class="comment">        Variables</span>
<a name="l00186"></a>00186 <span class="comment">-----------------------------------------------------------------------------*/</span>
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="comment">/* control knobs */</span>
<a name="l00189"></a><a class="code" href="intproto_8cpp.html#a0b67c94af39f92e61e4bb829bd251bcf">00189</a> <a class="code" href="params_8h.html#a554d43d0cf0e3f9552921941d9e147bd">INT_VAR</a>(<a class="code" href="intproto_8cpp.html#a0b67c94af39f92e61e4bb829bd251bcf">classify_num_cp_levels</a>, 3, <span class="stringliteral">&quot;Number of Class Pruner Levels&quot;</span>);
<a name="l00190"></a>00190 <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#aa4b7c0da311eb727751febb60095f984">classify_cp_angle_pad_loose</a>, 45.0,
<a name="l00191"></a><a class="code" href="intproto_8cpp.html#aa4b7c0da311eb727751febb60095f984">00191</a>            <span class="stringliteral">&quot;Class Pruner Angle Pad Loose&quot;</span>);
<a name="l00192"></a>00192 <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#a22dd906b9f7a351c3f439b2c8d1f0349">classify_cp_angle_pad_medium</a>, 20.0,
<a name="l00193"></a><a class="code" href="intproto_8cpp.html#a22dd906b9f7a351c3f439b2c8d1f0349">00193</a>            <span class="stringliteral">&quot;Class Pruner Angle Pad Medium&quot;</span>);
<a name="l00194"></a>00194 <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#a6ececa7b500f95b5b18df82d1fb75fcb">classify_cp_angle_pad_tight</a>, 10.0,
<a name="l00195"></a><a class="code" href="intproto_8cpp.html#a6ececa7b500f95b5b18df82d1fb75fcb">00195</a>            <span class="stringliteral">&quot;CLass Pruner Angle Pad Tight&quot;</span>);
<a name="l00196"></a><a class="code" href="intproto_8cpp.html#a4d8bfc6ebe35b5adb23a0bf3d15eacfd">00196</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#a4d8bfc6ebe35b5adb23a0bf3d15eacfd">classify_cp_end_pad_loose</a>, 0.5, <span class="stringliteral">&quot;Class Pruner End Pad Loose&quot;</span>);
<a name="l00197"></a><a class="code" href="intproto_8cpp.html#a493a912edd6934f6b4accd6ee19918fd">00197</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#a493a912edd6934f6b4accd6ee19918fd">classify_cp_end_pad_medium</a>, 0.5, <span class="stringliteral">&quot;Class Pruner End Pad Medium&quot;</span>);
<a name="l00198"></a><a class="code" href="intproto_8cpp.html#a03725d3b8b95e80fe1d9fc7aada2245e">00198</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#a03725d3b8b95e80fe1d9fc7aada2245e">classify_cp_end_pad_tight</a>, 0.5, <span class="stringliteral">&quot;Class Pruner End Pad Tight&quot;</span>);
<a name="l00199"></a><a class="code" href="intproto_8cpp.html#a49b7762f3af6b46990015f43ab5fecbb">00199</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#a49b7762f3af6b46990015f43ab5fecbb">classify_cp_side_pad_loose</a>, 2.5, <span class="stringliteral">&quot;Class Pruner Side Pad Loose&quot;</span>);
<a name="l00200"></a><a class="code" href="intproto_8cpp.html#a2b2b146704abdf3b01ddc9055cd80332">00200</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#a2b2b146704abdf3b01ddc9055cd80332">classify_cp_side_pad_medium</a>, 1.2, <span class="stringliteral">&quot;Class Pruner Side Pad Medium&quot;</span>);
<a name="l00201"></a><a class="code" href="intproto_8cpp.html#ad71a71bd91b469b21e1b259aa4577045">00201</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#ad71a71bd91b469b21e1b259aa4577045">classify_cp_side_pad_tight</a>, 0.6, <span class="stringliteral">&quot;Class Pruner Side Pad Tight&quot;</span>);
<a name="l00202"></a><a class="code" href="intproto_8cpp.html#af521040637a7f82468afa292de50ff3a">00202</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#af521040637a7f82468afa292de50ff3a">classify_pp_angle_pad</a>, 45.0, <span class="stringliteral">&quot;Proto Pruner Angle Pad&quot;</span>);
<a name="l00203"></a><a class="code" href="intproto_8cpp.html#a84bf15bb52621578e7f890996d77310b">00203</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#a84bf15bb52621578e7f890996d77310b">classify_pp_end_pad</a>, 0.5, <span class="stringliteral">&quot;Proto Prune End Pad&quot;</span>);
<a name="l00204"></a><a class="code" href="intproto_8cpp.html#aedd8005ae42edfe6c21aa2b034ce95ec">00204</a> <a class="code" href="params_8h.html#aa855c84dbbf962a5533a96e1f458c690">double_VAR</a>(<a class="code" href="intproto_8cpp.html#aedd8005ae42edfe6c21aa2b034ce95ec">classify_pp_side_pad</a>, 2.5, <span class="stringliteral">&quot;Proto Pruner Side Pad&quot;</span>);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="comment">/*-----------------------------------------------------------------------------</span>
<a name="l00207"></a>00207 <span class="comment">              Public Code</span>
<a name="l00208"></a>00208 <span class="comment">-----------------------------------------------------------------------------*/</span>
<a name="l00209"></a>00209 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00224"></a><a class="code" href="intproto_8h.html#a66f71b82c006e385d6e3ce7c677c6ad8">00224</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a66f71b82c006e385d6e3ce7c677c6ad8">AddIntClass</a>(<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> Templates, <a class="code" href="matchdefs_8h.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId, <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class) {
<a name="l00225"></a>00225   <span class="keywordtype">int</span> Pruner;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227   assert (<a class="code" href="intproto_8h.html#a6edc7e9d060a50cd3617bb509a061eb5">LegalClassId</a> (ClassId));
<a name="l00228"></a>00228   <span class="keywordflow">if</span> (ClassId != Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>) {
<a name="l00229"></a>00229     fprintf(stderr, <span class="stringliteral">&quot;Please make sure that classes are added to templates&quot;</span>);
<a name="l00230"></a>00230     fprintf(stderr, <span class="stringliteral">&quot; in increasing order of ClassIds\n&quot;</span>);
<a name="l00231"></a>00231     exit(1);
<a name="l00232"></a>00232   }
<a name="l00233"></a>00233   <a class="code" href="intproto_8h.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, ClassId) = Class;
<a name="l00234"></a>00234   Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>++;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   <span class="keywordflow">if</span> (Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> &gt; <a class="code" href="intproto_8h.html#a839f2d576e590222e687797c23795505">MaxNumClassesIn</a> (Templates)) {
<a name="l00237"></a>00237     Pruner = Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>++;
<a name="l00238"></a>00238     Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[Pruner] = <span class="keyword">new</span> <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>;
<a name="l00239"></a>00239     memset(Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[Pruner], 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>));
<a name="l00240"></a>00240   }
<a name="l00241"></a>00241 }                                <span class="comment">/* AddIntClass */</span>
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00257"></a><a class="code" href="intproto_8h.html#a569488473772d42004fec43399e6d5a9">00257</a> <span class="keywordtype">int</span> <a class="code" href="intproto_8cpp.html#a569488473772d42004fec43399e6d5a9">AddIntConfig</a>(<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class) {
<a name="l00258"></a>00258   <span class="keywordtype">int</span> Index;
<a name="l00259"></a>00259 
<a name="l00260"></a>00260   assert(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a> &lt; <a class="code" href="intproto_8h.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262   Index = Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>++;
<a name="l00263"></a>00263   Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[Index] = 0;
<a name="l00264"></a>00264   <span class="keywordflow">return</span> Index;
<a name="l00265"></a>00265 }                                <span class="comment">/* AddIntConfig */</span>
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00281"></a><a class="code" href="intproto_8h.html#a4c27266652a51cf8aaa866d299f57301">00281</a> <span class="keywordtype">int</span> <a class="code" href="intproto_8cpp.html#a4c27266652a51cf8aaa866d299f57301">AddIntProto</a>(<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class) {
<a name="l00282"></a>00282   <span class="keywordtype">int</span> Index;
<a name="l00283"></a>00283   <span class="keywordtype">int</span> ProtoSetId;
<a name="l00284"></a>00284   <a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET</a> ProtoSet;
<a name="l00285"></a>00285   <a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html">INT_PROTO</a> Proto;
<a name="l00286"></a>00286   <span class="keyword">register</span> <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> *Word;
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <span class="keywordflow">if</span> (Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a> &gt;= <a class="code" href="intproto_8h.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>)
<a name="l00289"></a>00289     <span class="keywordflow">return</span> (<a class="code" href="matchdefs_8h.html#a4d2ae3978d57e3b05f984a0fedc51812">NO_PROTO</a>);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291   Index = Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>++;
<a name="l00292"></a>00292 
<a name="l00293"></a>00293   <span class="keywordflow">if</span> (Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a> &gt; <a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a>(Class)) {
<a name="l00294"></a>00294     ProtoSetId = Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>++;
<a name="l00295"></a>00295 
<a name="l00296"></a>00296     ProtoSet = (<a class="code" href="intproto_8h.html#a75a17f28eba3fb341330351ef2ee9d87">PROTO_SET</a>) <a class="code" href="emalloc_8cpp.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET_STRUCT</a>));
<a name="l00297"></a>00297     Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[ProtoSetId] = ProtoSet;
<a name="l00298"></a>00298     memset(ProtoSet, 0, <span class="keyword">sizeof</span>(*ProtoSet));
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     <span class="comment">/* reallocate space for the proto lengths and install in class */</span>
<a name="l00301"></a>00301     Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a> =
<a name="l00302"></a>00302       (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *)<a class="code" href="emalloc_8cpp.html#a92c09eaf43dcfc23a738fca16eb677b9">Erealloc</a>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>,
<a name="l00303"></a>00303                         <a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a>(Class) * <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>));
<a name="l00304"></a>00304     memset(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>[Index], 0,
<a name="l00305"></a>00305            <span class="keyword">sizeof</span>(*Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>) * (<a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a>(Class) - Index));
<a name="l00306"></a>00306   }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308   <span class="comment">/* initialize proto so its length is zero and it isn&#39;t in any configs */</span>
<a name="l00309"></a>00309   Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>[Index] = 0;
<a name="l00310"></a>00310   Proto = <a class="code" href="intproto_8h.html#aff1a8cea9b56061e344b3b3f256f5253">ProtoForProtoId</a> (Class, Index);
<a name="l00311"></a>00311   <span class="keywordflow">for</span> (Word = Proto-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a897689cf42ad3255533f8d26f5fb4eb8">Configs</a>;
<a name="l00312"></a>00312        Word &lt; Proto-&gt;Configs + <a class="code" href="intproto_8h.html#a884e587328e6d76dfc5e2abe80b9120a">WERDS_PER_CONFIG_VEC</a>; *Word++ = 0);
<a name="l00313"></a>00313 
<a name="l00314"></a>00314   <span class="keywordflow">return</span> (Index);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 }                                <span class="comment">/* AddIntProto */</span>
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 
<a name="l00319"></a>00319 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00320"></a><a class="code" href="intproto_8h.html#a117c6df38172671a3f3fce9cdb4f3299">00320</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a117c6df38172671a3f3fce9cdb4f3299">AddProtoToClassPruner</a> (<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html">PROTO</a> Proto, <a class="code" href="matchdefs_8h.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId,
<a name="l00321"></a>00321                             <a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> Templates)
<a name="l00322"></a>00322 <span class="comment">/*</span>
<a name="l00323"></a>00323 <span class="comment"> ** Parameters:</span>
<a name="l00324"></a>00324 <span class="comment"> **   Proto   floating-pt proto to add to class pruner</span>
<a name="l00325"></a>00325 <span class="comment"> **   ClassId   class id corresponding to Proto</span>
<a name="l00326"></a>00326 <span class="comment"> **   Templates set of templates containing class pruner</span>
<a name="l00327"></a>00327 <span class="comment"> ** Globals:</span>
<a name="l00328"></a>00328 <span class="comment"> **   classify_num_cp_levels number of levels used in the class pruner</span>
<a name="l00329"></a>00329 <span class="comment"> ** Operation: This routine adds Proto to the class pruning tables</span>
<a name="l00330"></a>00330 <span class="comment"> **   for the specified class in Templates.</span>
<a name="l00331"></a>00331 <span class="comment"> ** Return: none</span>
<a name="l00332"></a>00332 <span class="comment"> ** Exceptions: none</span>
<a name="l00333"></a>00333 <span class="comment"> ** History: Wed Feb 13 08:49:54 1991, DSJ, Created.</span>
<a name="l00334"></a>00334 <span class="comment"> */</span>
<a name="l00335"></a>00335 <span class="preprocessor">#define MAX_LEVEL     2</span>
<a name="l00336"></a>00336 <span class="preprocessor"></span>{
<a name="l00337"></a>00337   <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>* Pruner;
<a name="l00338"></a>00338   <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ClassMask;
<a name="l00339"></a>00339   <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ClassCount;
<a name="l00340"></a>00340   <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> WordIndex;
<a name="l00341"></a>00341   <span class="keywordtype">int</span> Level;
<a name="l00342"></a>00342   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> EndPad, SidePad, AnglePad;
<a name="l00343"></a>00343   <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">TABLE_FILLER</a> TableFiller;
<a name="l00344"></a>00344   <a class="code" href="struct_f_i_l_l___s_p_e_c.html">FILL_SPEC</a> FillSpec;
<a name="l00345"></a>00345 
<a name="l00346"></a>00346   Pruner = <a class="code" href="intproto_8h.html#aec5852ff7233de6280fcc173589a9843">CPrunerFor</a> (Templates, ClassId);
<a name="l00347"></a>00347   WordIndex = <a class="code" href="intproto_8h.html#a99d69701db6f22923e8c4027000f1bd7">CPrunerWordIndexFor</a> (ClassId);
<a name="l00348"></a>00348   ClassMask = <a class="code" href="intproto_8h.html#aea1de602f2eff7c6f2edcf6a0513b95e">CPrunerMaskFor</a> (<a class="code" href="intproto_8cpp.html#a5bb4257ca9fa4bfcf9391b7895b97761">MAX_LEVEL</a>, ClassId);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350   <span class="keywordflow">for</span> (Level = <a class="code" href="intproto_8cpp.html#a0b67c94af39f92e61e4bb829bd251bcf">classify_num_cp_levels</a> - 1; Level &gt;= 0; Level--) {
<a name="l00351"></a>00351     <a class="code" href="intproto_8cpp.html#a09e675cd233359d8763e744e402a3dfa">GetCPPadsForLevel</a>(Level, &amp;EndPad, &amp;SidePad, &amp;AnglePad);
<a name="l00352"></a>00352     ClassCount = <a class="code" href="intproto_8h.html#aea1de602f2eff7c6f2edcf6a0513b95e">CPrunerMaskFor</a> (Level, ClassId);
<a name="l00353"></a>00353     <a class="code" href="intproto_8cpp.html#adb682620c9100c1985218aeb25bbdb9f">InitTableFiller</a>(EndPad, SidePad, AnglePad, Proto, &amp;TableFiller);
<a name="l00354"></a>00354 
<a name="l00355"></a>00355     <span class="keywordflow">while</span> (!<a class="code" href="intproto_8cpp.html#a6e872ab9dec7a62d791536899847446b">FillerDone</a> (&amp;TableFiller)) {
<a name="l00356"></a>00356       <a class="code" href="intproto_8cpp.html#a2d8b49f118901da6dbaf5d5b4c8da174">GetNextFill</a>(&amp;TableFiller, &amp;FillSpec);
<a name="l00357"></a>00357       <a class="code" href="intproto_8cpp.html#afaea93aff6c706adbe44d48f343ce2af">DoFill</a>(&amp;FillSpec, Pruner, ClassMask, ClassCount, WordIndex);
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359   }
<a name="l00360"></a>00360 }                                <span class="comment">/* AddProtoToClassPruner */</span>
<a name="l00361"></a>00361 
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00364"></a><a class="code" href="intproto_8h.html#aec09adc2735bb4caaf226df7124e4ed7">00364</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#aec09adc2735bb4caaf226df7124e4ed7">AddProtoToProtoPruner</a>(<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html">PROTO</a> Proto, <span class="keywordtype">int</span> ProtoId,
<a name="l00365"></a>00365                            <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class, <span class="keywordtype">bool</span> debug) {
<a name="l00366"></a>00366 <span class="comment">/*</span>
<a name="l00367"></a>00367 <span class="comment"> ** Parameters:</span>
<a name="l00368"></a>00368 <span class="comment"> **   Proto floating-pt proto to be added to proto pruner</span>
<a name="l00369"></a>00369 <span class="comment"> **   ProtoId id of proto</span>
<a name="l00370"></a>00370 <span class="comment"> **   Class integer class that contains desired proto pruner</span>
<a name="l00371"></a>00371 <span class="comment"> ** Globals: none</span>
<a name="l00372"></a>00372 <span class="comment"> ** Operation: This routine updates the proto pruner lookup tables</span>
<a name="l00373"></a>00373 <span class="comment"> **   for Class to include a new proto identified by ProtoId</span>
<a name="l00374"></a>00374 <span class="comment"> **   and described by Proto.</span>
<a name="l00375"></a>00375 <span class="comment"> ** Return: none</span>
<a name="l00376"></a>00376 <span class="comment"> ** Exceptions: none</span>
<a name="l00377"></a>00377 <span class="comment"> ** History: Fri Feb  8 13:07:19 1991, DSJ, Created.</span>
<a name="l00378"></a>00378 <span class="comment"> */</span>
<a name="l00379"></a>00379   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Angle, X, Y, Length;
<a name="l00380"></a>00380   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Pad;
<a name="l00381"></a>00381   <span class="keywordtype">int</span> Index;
<a name="l00382"></a>00382   <a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET</a> ProtoSet;
<a name="l00383"></a>00383 
<a name="l00384"></a>00384   <span class="keywordflow">if</span> (ProtoId &gt;= Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>)
<a name="l00385"></a>00385     <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;AddProtoToProtoPruner:assert failed: %d &lt; %d&quot;</span>,
<a name="l00386"></a>00386             ProtoId, Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>);
<a name="l00387"></a>00387   assert(ProtoId &lt; Class-&gt;NumProtos);
<a name="l00388"></a>00388 
<a name="l00389"></a>00389   Index = <a class="code" href="intproto_8h.html#a40fe618eeb7d652b8cf2dce9f31a2d22">IndexForProto</a> (ProtoId);
<a name="l00390"></a>00390   ProtoSet = Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[<a class="code" href="intproto_8h.html#aa370872941b0c4f6b9e771a17a536bfd">SetForProto</a> (ProtoId)];
<a name="l00391"></a>00391 
<a name="l00392"></a>00392   Angle = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a6cc7458f385f9c4673e1ce9a6dc9e80a">Angle</a>;
<a name="l00393"></a>00393 <span class="preprocessor">#ifndef _WIN32</span>
<a name="l00394"></a>00394 <span class="preprocessor"></span>  assert(!isnan(Angle));
<a name="l00395"></a>00395 <span class="preprocessor">#endif</span>
<a name="l00396"></a>00396 <span class="preprocessor"></span>
<a name="l00397"></a>00397   <a class="code" href="intproto_8cpp.html#a9fd79e26406505a10882c61ccec50fa5">FillPPCircularBits</a> (ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>[<a class="code" href="intproto_8h.html#aa1522c3f9ac9fa4ce3369ee47e73a481">PRUNER_ANGLE</a>], Index,
<a name="l00398"></a>00398                       Angle + <a class="code" href="intproto_8h.html#a0be004c4069c9a09479eef2955f1097e">ANGLE_SHIFT</a>, <a class="code" href="intproto_8cpp.html#af521040637a7f82468afa292de50ff3a">classify_pp_angle_pad</a> / 360.0,
<a name="l00399"></a>00399                       debug);
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   Angle *= 2.0 * <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>;
<a name="l00402"></a>00402   Length = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#aa29d8aaab147327320e2bc94a821aad1">Length</a>;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404   X = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a54dd1cca86a1fd5c9ead8499cba99784">X</a> + <a class="code" href="intproto_8h.html#a7c72e90cfafe9834907d05ddf55bff09">X_SHIFT</a>;
<a name="l00405"></a>00405   Pad = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (fabs (cos (Angle)) * (Length / 2.0 +
<a name="l00406"></a>00406                                    <a class="code" href="intproto_8cpp.html#a84bf15bb52621578e7f890996d77310b">classify_pp_end_pad</a> *
<a name="l00407"></a>00407                                    <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ()),
<a name="l00408"></a>00408              fabs (sin (Angle)) * (<a class="code" href="intproto_8cpp.html#aedd8005ae42edfe6c21aa2b034ce95ec">classify_pp_side_pad</a> *
<a name="l00409"></a>00409                                    <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ()));
<a name="l00410"></a>00410 
<a name="l00411"></a>00411   <a class="code" href="intproto_8cpp.html#acec82005e652edf5912abcfae1166e19">FillPPLinearBits</a>(ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>[<a class="code" href="intproto_8h.html#af01cd9af1d00fa943dd1edfd19882833">PRUNER_X</a>], Index, X, Pad, debug);
<a name="l00412"></a>00412 
<a name="l00413"></a>00413   Y = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a8dcd81037c1bc672e97ef7a54306dd93">Y</a> + <a class="code" href="intproto_8h.html#abd4c49783ccd23c297ef5650ccce9c9c">Y_SHIFT</a>;
<a name="l00414"></a>00414   Pad = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a> (fabs (sin (Angle)) * (Length / 2.0 +
<a name="l00415"></a>00415                                    <a class="code" href="intproto_8cpp.html#a84bf15bb52621578e7f890996d77310b">classify_pp_end_pad</a> *
<a name="l00416"></a>00416                                    <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ()),
<a name="l00417"></a>00417              fabs (cos (Angle)) * (<a class="code" href="intproto_8cpp.html#aedd8005ae42edfe6c21aa2b034ce95ec">classify_pp_side_pad</a> *
<a name="l00418"></a>00418                                    <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ()));
<a name="l00419"></a>00419 
<a name="l00420"></a>00420   <a class="code" href="intproto_8cpp.html#acec82005e652edf5912abcfae1166e19">FillPPLinearBits</a>(ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>[<a class="code" href="intproto_8h.html#a7c72f47e4c4a455c9ac0d3855c1aeff2">PRUNER_Y</a>], Index, Y, Pad, debug);
<a name="l00421"></a>00421 }                                <span class="comment">/* AddProtoToProtoPruner */</span>
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 
<a name="l00424"></a>00424 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00425"></a><a class="code" href="intproto_8h.html#aae1e369081aff0da8ca513a261973598">00425</a> <span class="keywordtype">int</span> <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Param, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Offset, <span class="keywordtype">int</span> NumBuckets) {
<a name="l00426"></a>00426 <span class="comment">/*</span>
<a name="l00427"></a>00427 <span class="comment"> ** Parameters:</span>
<a name="l00428"></a>00428 <span class="comment"> **   Param   parameter value to map into a bucket number</span>
<a name="l00429"></a>00429 <span class="comment"> **   Offset    amount to shift param before mapping it</span>
<a name="l00430"></a>00430 <span class="comment"> **   NumBuckets  number of buckets to map param into</span>
<a name="l00431"></a>00431 <span class="comment"> ** Globals: none</span>
<a name="l00432"></a>00432 <span class="comment"> ** Operation: This routine maps a parameter value into a bucket between</span>
<a name="l00433"></a>00433 <span class="comment"> **   0 and NumBuckets-1.  Offset is added to the parameter</span>
<a name="l00434"></a>00434 <span class="comment"> **   before mapping it.  Values which map to buckets outside</span>
<a name="l00435"></a>00435 <span class="comment"> **   the range are truncated to fit within the range.  Mapping</span>
<a name="l00436"></a>00436 <span class="comment"> **   is done by truncating rather than rounding.</span>
<a name="l00437"></a>00437 <span class="comment"> ** Return: Bucket number corresponding to Param + Offset.</span>
<a name="l00438"></a>00438 <span class="comment"> ** Exceptions: none</span>
<a name="l00439"></a>00439 <span class="comment"> ** History: Thu Feb 14 13:24:33 1991, DSJ, Created.</span>
<a name="l00440"></a>00440 <span class="comment"> */</span>
<a name="l00441"></a>00441   <span class="keywordflow">return</span> <a class="code" href="helpers_8h.html#af8739168d5b3235996eeb25dac3c4044">ClipToRange</a>(static_cast&lt;int&gt;(<a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Param, Offset, NumBuckets)),
<a name="l00442"></a>00442                      0, NumBuckets - 1);
<a name="l00443"></a>00443 }                                <span class="comment">/* BucketFor */</span>
<a name="l00444"></a>00444 
<a name="l00445"></a>00445 
<a name="l00446"></a>00446 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00447"></a><a class="code" href="intproto_8h.html#ae3184eb086a2f8eb3b7b4c42bae5ca22">00447</a> <span class="keywordtype">int</span> <a class="code" href="intproto_8cpp.html#ae3184eb086a2f8eb3b7b4c42bae5ca22">CircBucketFor</a>(<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Param, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Offset, <span class="keywordtype">int</span> NumBuckets) {
<a name="l00448"></a>00448 <span class="comment">/*</span>
<a name="l00449"></a>00449 <span class="comment"> ** Parameters:</span>
<a name="l00450"></a>00450 <span class="comment"> **   Param   parameter value to map into a circular bucket</span>
<a name="l00451"></a>00451 <span class="comment"> **   Offset    amount to shift param before mapping it</span>
<a name="l00452"></a>00452 <span class="comment"> **   NumBuckets  number of buckets to map param into</span>
<a name="l00453"></a>00453 <span class="comment"> ** Globals: none</span>
<a name="l00454"></a>00454 <span class="comment"> ** Operation: This routine maps a parameter value into a bucket between</span>
<a name="l00455"></a>00455 <span class="comment"> **   0 and NumBuckets-1.  Offset is added to the parameter</span>
<a name="l00456"></a>00456 <span class="comment"> **   before mapping it.  Values which map to buckets outside</span>
<a name="l00457"></a>00457 <span class="comment"> **   the range are wrapped to a new value in a circular fashion.</span>
<a name="l00458"></a>00458 <span class="comment"> **   Mapping is done by truncating rather than rounding.</span>
<a name="l00459"></a>00459 <span class="comment"> ** Return: Bucket number corresponding to Param + Offset.</span>
<a name="l00460"></a>00460 <span class="comment"> ** Exceptions: none</span>
<a name="l00461"></a>00461 <span class="comment"> ** History: Thu Feb 14 13:24:33 1991, DSJ, Created.</span>
<a name="l00462"></a>00462 <span class="comment"> */</span>
<a name="l00463"></a>00463   <span class="keywordtype">int</span> Bucket;
<a name="l00464"></a>00464 
<a name="l00465"></a>00465   Bucket = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Param, Offset, NumBuckets));
<a name="l00466"></a>00466   <span class="keywordflow">if</span> (Bucket &lt; 0)
<a name="l00467"></a>00467     Bucket += NumBuckets;
<a name="l00468"></a>00468   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Bucket &gt;= NumBuckets)
<a name="l00469"></a>00469     Bucket -= NumBuckets;
<a name="l00470"></a>00470   <span class="keywordflow">return</span> Bucket;
<a name="l00471"></a>00471 }                                <span class="comment">/* CircBucketFor */</span>
<a name="l00472"></a>00472 
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00475"></a>00475 <span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<a name="l00476"></a><a class="code" href="intproto_8h.html#a3827f6daeeb1efd88fa0bf418c83d984">00476</a> <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a3827f6daeeb1efd88fa0bf418c83d984">UpdateMatchDisplay</a>() {
<a name="l00477"></a>00477 <span class="comment">/*</span>
<a name="l00478"></a>00478 <span class="comment"> ** Parameters: none</span>
<a name="l00479"></a>00479 <span class="comment"> ** Globals:</span>
<a name="l00480"></a>00480 <span class="comment"> **   FeatureShapes display list for features</span>
<a name="l00481"></a>00481 <span class="comment"> **   ProtoShapes display list for protos</span>
<a name="l00482"></a>00482 <span class="comment"> ** Operation: This routine clears the global feature and proto</span>
<a name="l00483"></a>00483 <span class="comment"> **   display lists.</span>
<a name="l00484"></a>00484 <span class="comment"> ** Return: none</span>
<a name="l00485"></a>00485 <span class="comment"> ** Exceptions: none</span>
<a name="l00486"></a>00486 <span class="comment"> ** History: Thu Mar 21 15:40:19 1991, DSJ, Created.</span>
<a name="l00487"></a>00487 <span class="comment"> */</span>
<a name="l00488"></a>00488   <span class="keywordflow">if</span> (IntMatchWindow != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00489"></a>00489     IntMatchWindow-&gt;<a class="code" href="class_scroll_view.html#a0830a51981a20c8700b5ec49137e46e9">Update</a>();
<a name="l00490"></a>00490 }                                <span class="comment">/* ClearMatchDisplay */</span>
<a name="l00491"></a>00491 <span class="preprocessor">#endif</span>
<a name="l00492"></a>00492 <span class="preprocessor"></span>
<a name="l00493"></a>00493 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00494"></a><a class="code" href="intproto_8h.html#a57b07752bea2110e2503cf78747228c5">00494</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a57b07752bea2110e2503cf78747228c5">ConvertConfig</a>(<a class="code" href="bitvec_8h.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> <a class="code" href="commontraining_8cpp.html#a1630a3dc82a9a7cef07bb6153df9eb9c">Config</a>, <span class="keywordtype">int</span> ConfigId, <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class) {
<a name="l00495"></a>00495 <span class="comment">/*</span>
<a name="l00496"></a>00496 <span class="comment"> ** Parameters:</span>
<a name="l00497"></a>00497 <span class="comment"> **   Config    config to be added to class</span>
<a name="l00498"></a>00498 <span class="comment"> **   ConfigId  id to be used for new config</span>
<a name="l00499"></a>00499 <span class="comment"> **   Class   class to add new config to</span>
<a name="l00500"></a>00500 <span class="comment"> ** Globals: none</span>
<a name="l00501"></a>00501 <span class="comment"> ** Operation: This operation updates the config vectors of all protos</span>
<a name="l00502"></a>00502 <span class="comment"> **   in Class to indicate that the protos with 1&#39;s in Config</span>
<a name="l00503"></a>00503 <span class="comment"> **   belong to a new configuration identified by ConfigId.</span>
<a name="l00504"></a>00504 <span class="comment"> **   It is assumed that the length of the Config bit vector is</span>
<a name="l00505"></a>00505 <span class="comment"> **   equal to the number of protos in Class.</span>
<a name="l00506"></a>00506 <span class="comment"> ** Return: none</span>
<a name="l00507"></a>00507 <span class="comment"> ** Exceptions: none</span>
<a name="l00508"></a>00508 <span class="comment"> ** History: Mon Feb 11 14:57:31 1991, DSJ, Created.</span>
<a name="l00509"></a>00509 <span class="comment"> */</span>
<a name="l00510"></a>00510   <span class="keywordtype">int</span> ProtoId;
<a name="l00511"></a>00511   <a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html">INT_PROTO</a> Proto;
<a name="l00512"></a>00512   <span class="keywordtype">int</span> TotalLength;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514   <span class="keywordflow">for</span> (ProtoId = 0, TotalLength = 0;
<a name="l00515"></a>00515     ProtoId &lt; Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>; ProtoId++) {
<a name="l00516"></a>00516     <span class="keywordflow">if</span> (<a class="code" href="bitvec_8h.html#a76a50c5a99dea7be5315fe76246036ce">test_bit</a>(Config, ProtoId)) {
<a name="l00517"></a>00517       Proto = <a class="code" href="intproto_8h.html#aff1a8cea9b56061e344b3b3f256f5253">ProtoForProtoId</a>(Class, ProtoId);
<a name="l00518"></a>00518       <a class="code" href="bitvec_8h.html#ab02d606cf8dca49ccadb00248bdbafe9">SET_BIT</a>(Proto-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a897689cf42ad3255533f8d26f5fb4eb8">Configs</a>, ConfigId);
<a name="l00519"></a>00519       TotalLength += Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>[ProtoId];
<a name="l00520"></a>00520     }
<a name="l00521"></a>00521   }
<a name="l00522"></a>00522   Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[ConfigId] = TotalLength;
<a name="l00523"></a>00523 }                                <span class="comment">/* ConvertConfig */</span>
<a name="l00524"></a>00524 
<a name="l00525"></a>00525 
<a name="l00526"></a>00526 <span class="keyword">namespace </span>tesseract {
<a name="l00527"></a>00527 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00528"></a><a class="code" href="classtesseract_1_1_classify.html#af27d604585502bd447d52bf5daf15d0d">00528</a> <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_classify.html#af27d604585502bd447d52bf5daf15d0d">Classify::ConvertProto</a>(<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html">PROTO</a> Proto, <span class="keywordtype">int</span> ProtoId, <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class) {
<a name="l00529"></a>00529 <span class="comment">/*</span>
<a name="l00530"></a>00530 <span class="comment"> ** Parameters:</span>
<a name="l00531"></a>00531 <span class="comment"> **   Proto floating-pt proto to be converted to integer format</span>
<a name="l00532"></a>00532 <span class="comment"> **   ProtoId id of proto</span>
<a name="l00533"></a>00533 <span class="comment"> **   Class integer class to add converted proto to</span>
<a name="l00534"></a>00534 <span class="comment"> ** Globals: none</span>
<a name="l00535"></a>00535 <span class="comment"> ** Operation: This routine converts Proto to integer format and</span>
<a name="l00536"></a>00536 <span class="comment"> **   installs it as ProtoId in Class.</span>
<a name="l00537"></a>00537 <span class="comment"> ** Return: none</span>
<a name="l00538"></a>00538 <span class="comment"> ** Exceptions: none</span>
<a name="l00539"></a>00539 <span class="comment"> ** History: Fri Feb  8 11:22:43 1991, DSJ, Created.</span>
<a name="l00540"></a>00540 <span class="comment"> */</span>
<a name="l00541"></a>00541   <a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html">INT_PROTO</a> P;
<a name="l00542"></a>00542   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> <a class="code" href="classtesseract_1_1_param.html">Param</a>;
<a name="l00543"></a>00543 
<a name="l00544"></a>00544   assert(ProtoId &lt; Class-&gt;NumProtos);
<a name="l00545"></a>00545 
<a name="l00546"></a>00546   P = <a class="code" href="intproto_8h.html#aff1a8cea9b56061e344b3b3f256f5253">ProtoForProtoId</a>(Class, ProtoId);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548   Param = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#ae3211a725f109fbd40efc6cd154330f7">A</a> * 128;
<a name="l00549"></a>00549   P-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a1a04b5d1566d1ec88d99da275208f064">A</a> = <a class="code" href="intproto_8cpp.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(Param, -128, 127, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00550"></a>00550 
<a name="l00551"></a>00551   Param = -Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a884630c87acb7606ac02516d1ea4ea9e">B</a> * 256;
<a name="l00552"></a>00552   P-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#ae3a26a69bb3e3dcc7138fa036d3cb9e8">B</a> = <a class="code" href="intproto_8cpp.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(Param, 0, 255, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00553"></a>00553 
<a name="l00554"></a>00554   Param = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a09d1e20c0a8362582127fa3554bb83ae">C</a> * 128;
<a name="l00555"></a>00555   P-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#af1c3246d7de60562deed8d58d292bb01">C</a> = <a class="code" href="intproto_8cpp.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(Param, -128, 127, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00556"></a>00556 
<a name="l00557"></a>00557   Param = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a6cc7458f385f9c4673e1ce9a6dc9e80a">Angle</a> * 256;
<a name="l00558"></a>00558   <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_param.html">Param &lt; 0 || Param &gt;</a>= 256)
<a name="l00559"></a>00559     P-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a3595512379d43a12f92efef287db17d9">Angle</a> = 0;
<a name="l00560"></a>00560   <span class="keywordflow">else</span>
<a name="l00561"></a>00561     P-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a3595512379d43a12f92efef287db17d9">Angle</a> = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) Param;
<a name="l00562"></a>00562 
<a name="l00563"></a>00563   <span class="comment">/* round proto length to nearest integer number of pico-features */</span>
<a name="l00564"></a>00564   Param = (Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#aa29d8aaab147327320e2bc94a821aad1">Length</a> / <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a>()) + 0.5;
<a name="l00565"></a>00565   Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>[ProtoId] = <a class="code" href="intproto_8cpp.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(Param, 1, 255, <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00566"></a>00566   <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_classify.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 2)
<a name="l00567"></a>00567     <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Converted ffeat to (A=%d,B=%d,C=%d,L=%d)&quot;</span>,
<a name="l00568"></a>00568             P-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a1a04b5d1566d1ec88d99da275208f064">A</a>, P-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#ae3a26a69bb3e3dcc7138fa036d3cb9e8">B</a>, P-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#af1c3246d7de60562deed8d58d292bb01">C</a>, Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>[ProtoId]);
<a name="l00569"></a>00569 }                                <span class="comment">/* ConvertProto */</span>
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 
<a name="l00572"></a>00572 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00573"></a><a class="code" href="classtesseract_1_1_classify.html#af3d15c15c9f2dce72a400233d4bf366f">00573</a> <a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> <a class="code" href="classtesseract_1_1_classify.html#af3d15c15c9f2dce72a400233d4bf366f">Classify::CreateIntTemplates</a>(<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html">CLASSES</a> FloatProtos,
<a name="l00574"></a>00574                                            <span class="keyword">const</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a>&amp;
<a name="l00575"></a>00575                                            target_unicharset) {
<a name="l00576"></a>00576 <span class="comment">/*</span>
<a name="l00577"></a>00577 <span class="comment"> ** Parameters:</span>
<a name="l00578"></a>00578 <span class="comment"> **   FloatProtos prototypes in old floating pt format</span>
<a name="l00579"></a>00579 <span class="comment"> ** Globals: none</span>
<a name="l00580"></a>00580 <span class="comment"> ** Operation: This routine converts from the old floating point format</span>
<a name="l00581"></a>00581 <span class="comment"> **   to the new integer format.</span>
<a name="l00582"></a>00582 <span class="comment"> ** Return: New set of training templates in integer format.</span>
<a name="l00583"></a>00583 <span class="comment"> ** Exceptions: none</span>
<a name="l00584"></a>00584 <span class="comment"> ** History: Thu Feb  7 14:40:42 1991, DSJ, Created.</span>
<a name="l00585"></a>00585 <span class="comment"> */</span>
<a name="l00586"></a>00586   <a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> IntTemplates;
<a name="l00587"></a>00587   <a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html">CLASS_TYPE</a> FClass;
<a name="l00588"></a>00588   <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> IClass;
<a name="l00589"></a>00589   <span class="keywordtype">int</span> ClassId;
<a name="l00590"></a>00590   <span class="keywordtype">int</span> ProtoId;
<a name="l00591"></a>00591   <span class="keywordtype">int</span> ConfigId;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593   IntTemplates = <a class="code" href="intproto_8cpp.html#a020880b72d2d68c69edba44494fce647">NewIntTemplates</a>();
<a name="l00594"></a>00594 
<a name="l00595"></a>00595   <span class="keywordflow">for</span> (ClassId = 0; ClassId &lt; target_unicharset.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa3e8073ebaf3e0022654c45f27135032">size</a>(); ClassId++) {
<a name="l00596"></a>00596     FClass = &amp;(FloatProtos[ClassId]);
<a name="l00597"></a>00597     <span class="keywordflow">if</span> (FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#aed122893fec98b9ebccee234bbb00292">NumProtos</a> == 0 &amp;&amp; FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#a452c42efe7ec87439ef16f1e51d57f2c">NumConfigs</a> == 0 &amp;&amp;
<a name="l00598"></a>00598         strcmp(target_unicharset.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId), <span class="stringliteral">&quot; &quot;</span>) != 0) {
<a name="l00599"></a>00599       <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Warning: no protos/configs for %s in CreateIntTemplates()\n&quot;</span>,
<a name="l00600"></a>00600               target_unicharset.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId));
<a name="l00601"></a>00601     }
<a name="l00602"></a>00602     assert(<a class="code" href="intproto_8h.html#a3e7ae3ffbac606326937a4c701aeeaf2">UnusedClassIdIn</a>(IntTemplates, ClassId));
<a name="l00603"></a>00603     IClass = <a class="code" href="intproto_8cpp.html#af77150e8523be2b3f6449e194eb55e7b">NewIntClass</a>(FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#aed122893fec98b9ebccee234bbb00292">NumProtos</a>, FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#a452c42efe7ec87439ef16f1e51d57f2c">NumConfigs</a>);
<a name="l00604"></a>00604     <a class="code" href="structtesseract_1_1_font_set.html">FontSet</a> fs;
<a name="l00605"></a>00605     fs.<a class="code" href="structtesseract_1_1_font_set.html#a2f474cedd75889b35a8b5f401eab3c01">size</a> = FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#a42fd551c9f2ee48e5873ae7308df64b4">font_set</a>.<a class="code" href="class_unicity_table.html#a834de17f090dcfcc6625b01c5a627c2f" title="Return the size used.">size</a>();
<a name="l00606"></a>00606     fs.<a class="code" href="structtesseract_1_1_font_set.html#a466a7c0f34a22d2b112658de14f6a376">configs</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[fs.<a class="code" href="structtesseract_1_1_font_set.html#a2f474cedd75889b35a8b5f401eab3c01">size</a>];
<a name="l00607"></a>00607     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; fs.<a class="code" href="structtesseract_1_1_font_set.html#a2f474cedd75889b35a8b5f401eab3c01">size</a>; ++i) {
<a name="l00608"></a>00608       fs.<a class="code" href="structtesseract_1_1_font_set.html#a466a7c0f34a22d2b112658de14f6a376">configs</a>[i] = FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#a42fd551c9f2ee48e5873ae7308df64b4">font_set</a>.<a class="code" href="class_unicity_table.html#a3b3107bc72d9edfe501eaba7404de7eb" title="Return the object from an id.">get</a>(i);
<a name="l00609"></a>00609     }
<a name="l00610"></a>00610     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classtesseract_1_1_classify.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="class_unicity_table.html#ae2ca9cd7a9bf7837306df260c218772b" title="Return true if T is in the table.">contains</a>(fs)) {
<a name="l00611"></a>00611       IClass-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a> = this-&gt;<a class="code" href="classtesseract_1_1_classify.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="class_unicity_table.html#a4820bb7a54cf6ecda86856161c6d5a2f">get_id</a>(fs);
<a name="l00612"></a>00612       <span class="keyword">delete</span>[] fs.<a class="code" href="structtesseract_1_1_font_set.html#a466a7c0f34a22d2b112658de14f6a376">configs</a>;
<a name="l00613"></a>00613     } <span class="keywordflow">else</span> {
<a name="l00614"></a>00614       IClass-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a> = this-&gt;<a class="code" href="classtesseract_1_1_classify.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="class_unicity_table.html#a659534293ab0e46a46cab4421bebfb8f" title="Add an element in the table.">push_back</a>(fs);
<a name="l00615"></a>00615     }
<a name="l00616"></a>00616     <a class="code" href="intproto_8cpp.html#a66f71b82c006e385d6e3ce7c677c6ad8">AddIntClass</a>(IntTemplates, ClassId, IClass);
<a name="l00617"></a>00617 
<a name="l00618"></a>00618     <span class="keywordflow">for</span> (ProtoId = 0; ProtoId &lt; FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#aed122893fec98b9ebccee234bbb00292">NumProtos</a>; ProtoId++) {
<a name="l00619"></a>00619       <a class="code" href="intproto_8cpp.html#a4c27266652a51cf8aaa866d299f57301">AddIntProto</a>(IClass);
<a name="l00620"></a>00620       <a class="code" href="classtesseract_1_1_classify.html#af27d604585502bd447d52bf5daf15d0d">ConvertProto</a>(<a class="code" href="protos_8h.html#a3def7bc87c3ad9ad793128f0dc5b8fce">ProtoIn</a>(FClass, ProtoId), ProtoId, IClass);
<a name="l00621"></a>00621       <a class="code" href="intproto_8cpp.html#aec09adc2735bb4caaf226df7124e4ed7">AddProtoToProtoPruner</a>(<a class="code" href="protos_8h.html#a3def7bc87c3ad9ad793128f0dc5b8fce">ProtoIn</a>(FClass, ProtoId), ProtoId, IClass,
<a name="l00622"></a>00622                             <a class="code" href="classtesseract_1_1_classify.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 2);
<a name="l00623"></a>00623       <a class="code" href="intproto_8cpp.html#a117c6df38172671a3f3fce9cdb4f3299">AddProtoToClassPruner</a>(<a class="code" href="protos_8h.html#a3def7bc87c3ad9ad793128f0dc5b8fce">ProtoIn</a>(FClass, ProtoId), ClassId, IntTemplates);
<a name="l00624"></a>00624     }
<a name="l00625"></a>00625 
<a name="l00626"></a>00626     <span class="keywordflow">for</span> (ConfigId = 0; ConfigId &lt; FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#a452c42efe7ec87439ef16f1e51d57f2c">NumConfigs</a>; ConfigId++) {
<a name="l00627"></a>00627       <a class="code" href="intproto_8cpp.html#a569488473772d42004fec43399e6d5a9">AddIntConfig</a>(IClass);
<a name="l00628"></a>00628       <a class="code" href="intproto_8cpp.html#a57b07752bea2110e2503cf78747228c5">ConvertConfig</a>(FClass-&gt;<a class="code" href="struct_c_l_a_s_s___s_t_r_u_c_t.html#ac5524279d10e5bafe306355d72309b69">Configurations</a>[ConfigId], ConfigId, IClass);
<a name="l00629"></a>00629     }
<a name="l00630"></a>00630   }
<a name="l00631"></a>00631   <span class="keywordflow">return</span> (IntTemplates);
<a name="l00632"></a>00632 }                                <span class="comment">/* CreateIntTemplates */</span>
<a name="l00633"></a>00633 }  <span class="comment">// namespace tesseract</span>
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 
<a name="l00636"></a>00636 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00637"></a>00637 <span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<a name="l00638"></a><a class="code" href="intproto_8h.html#a7a82b76e5d96e5a5c0b714da6b8aa37a">00638</a> <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a7a82b76e5d96e5a5c0b714da6b8aa37a">DisplayIntFeature</a>(<span class="keyword">const</span> <a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html">INT_FEATURE_STRUCT</a>* Feature, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Evidence) {
<a name="l00639"></a>00639 <span class="comment">/*</span>
<a name="l00640"></a>00640 <span class="comment"> ** Parameters:</span>
<a name="l00641"></a>00641 <span class="comment"> **   Feature   pico-feature to be displayed</span>
<a name="l00642"></a>00642 <span class="comment"> **   Evidence  best evidence for this feature (0-1)</span>
<a name="l00643"></a>00643 <span class="comment"> ** Globals:</span>
<a name="l00644"></a>00644 <span class="comment"> **   FeatureShapes global display list for features</span>
<a name="l00645"></a>00645 <span class="comment"> ** Operation: This routine renders the specified feature into a</span>
<a name="l00646"></a>00646 <span class="comment"> **   global display list.</span>
<a name="l00647"></a>00647 <span class="comment"> ** Return: none</span>
<a name="l00648"></a>00648 <span class="comment"> ** Exceptions: none</span>
<a name="l00649"></a>00649 <span class="comment"> ** History: Thu Mar 21 14:45:04 1991, DSJ, Created.</span>
<a name="l00650"></a>00650 <span class="comment"> */</span>
<a name="l00651"></a>00651   <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color = <a class="code" href="intproto_8cpp.html#afa296141a34309a16ea4fdc63904ecea">GetMatchColorFor</a>(Evidence);
<a name="l00652"></a>00652   <a class="code" href="intproto_8cpp.html#a83c43ef1a01f3be45cbf675da04c3930">RenderIntFeature</a>(IntMatchWindow, Feature, color);
<a name="l00653"></a>00653   <span class="keywordflow">if</span> (FeatureDisplayWindow) {
<a name="l00654"></a>00654     <a class="code" href="intproto_8cpp.html#a83c43ef1a01f3be45cbf675da04c3930">RenderIntFeature</a>(FeatureDisplayWindow, Feature, color);
<a name="l00655"></a>00655   }
<a name="l00656"></a>00656 }                                <span class="comment">/* DisplayIntFeature */</span>
<a name="l00657"></a>00657 
<a name="l00658"></a>00658 
<a name="l00659"></a>00659 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00660"></a><a class="code" href="intproto_8h.html#a6a0b3c9d68e99b70f1a5bbd6919ac98a">00660</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a6a0b3c9d68e99b70f1a5bbd6919ac98a">DisplayIntProto</a>(<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class, <a class="code" href="matchdefs_8h.html#ac80a5d84c2805bfd10ac129d949f8b80">PROTO_ID</a> ProtoId, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Evidence) {
<a name="l00661"></a>00661 <span class="comment">/*</span>
<a name="l00662"></a>00662 <span class="comment"> ** Parameters:</span>
<a name="l00663"></a>00663 <span class="comment"> **   Class   class to take proto from</span>
<a name="l00664"></a>00664 <span class="comment"> **   ProtoId   id of proto in Class to be displayed</span>
<a name="l00665"></a>00665 <span class="comment"> **   Evidence  total evidence for proto (0-1)</span>
<a name="l00666"></a>00666 <span class="comment"> ** Globals:</span>
<a name="l00667"></a>00667 <span class="comment"> **   ProtoShapes global display list for protos</span>
<a name="l00668"></a>00668 <span class="comment"> ** Operation: This routine renders the specified proto into a</span>
<a name="l00669"></a>00669 <span class="comment"> **   global display list.</span>
<a name="l00670"></a>00670 <span class="comment"> ** Return: none</span>
<a name="l00671"></a>00671 <span class="comment"> ** Exceptions: none</span>
<a name="l00672"></a>00672 <span class="comment"> ** History: Thu Mar 21 14:45:04 1991, DSJ, Created.</span>
<a name="l00673"></a>00673 <span class="comment"> */</span>
<a name="l00674"></a>00674   <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color = <a class="code" href="intproto_8cpp.html#afa296141a34309a16ea4fdc63904ecea">GetMatchColorFor</a>(Evidence);
<a name="l00675"></a>00675   <a class="code" href="intproto_8cpp.html#a67948f52800e3964340ae96c2261c018">RenderIntProto</a>(IntMatchWindow, Class, ProtoId, color);
<a name="l00676"></a>00676   <span class="keywordflow">if</span> (ProtoDisplayWindow) {
<a name="l00677"></a>00677     <a class="code" href="intproto_8cpp.html#a67948f52800e3964340ae96c2261c018">RenderIntProto</a>(ProtoDisplayWindow, Class, ProtoId, color);
<a name="l00678"></a>00678   }
<a name="l00679"></a>00679 }                                <span class="comment">/* DisplayIntProto */</span>
<a name="l00680"></a>00680 <span class="preprocessor">#endif</span>
<a name="l00681"></a>00681 <span class="preprocessor"></span>
<a name="l00682"></a>00682 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00683"></a><a class="code" href="intproto_8h.html#af77150e8523be2b3f6449e194eb55e7b">00683</a> <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> <a class="code" href="intproto_8cpp.html#af77150e8523be2b3f6449e194eb55e7b">NewIntClass</a>(<span class="keywordtype">int</span> MaxNumProtos, <span class="keywordtype">int</span> MaxNumConfigs) {
<a name="l00684"></a>00684 <span class="comment">/*</span>
<a name="l00685"></a>00685 <span class="comment"> ** Parameters:</span>
<a name="l00686"></a>00686 <span class="comment"> **   MaxNumProtos  number of protos to allocate space for</span>
<a name="l00687"></a>00687 <span class="comment"> **   MaxNumConfigs number of configs to allocate space for</span>
<a name="l00688"></a>00688 <span class="comment"> ** Globals: none</span>
<a name="l00689"></a>00689 <span class="comment"> ** Operation: This routine creates a new integer class data structure</span>
<a name="l00690"></a>00690 <span class="comment"> **   and returns it.  Sufficient space is allocated</span>
<a name="l00691"></a>00691 <span class="comment"> **   to handle the specified number of protos and configs.</span>
<a name="l00692"></a>00692 <span class="comment"> ** Return: New class created.</span>
<a name="l00693"></a>00693 <span class="comment"> ** Exceptions: none</span>
<a name="l00694"></a>00694 <span class="comment"> ** History: Fri Feb  8 10:51:23 1991, DSJ, Created.</span>
<a name="l00695"></a>00695 <span class="comment"> */</span>
<a name="l00696"></a>00696   <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class;
<a name="l00697"></a>00697   <a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET</a> ProtoSet;
<a name="l00698"></a>00698   <span class="keywordtype">int</span> i;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700   assert(MaxNumConfigs &lt;= <a class="code" href="intproto_8h.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>);
<a name="l00701"></a>00701 
<a name="l00702"></a>00702   Class = (<a class="code" href="intproto_8h.html#a8c3e30dcc19d515ce47bc6db3b02cf84">INT_CLASS</a>) <a class="code" href="emalloc_8cpp.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS_STRUCT</a>));
<a name="l00703"></a>00703   Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a> = ((MaxNumProtos + <a class="code" href="intproto_8h.html#ac6c8bf8f6110ef3cfc4bcd13d52c475c">PROTOS_PER_PROTO_SET</a> - 1) /
<a name="l00704"></a>00704                             <a class="code" href="intproto_8h.html#ac6c8bf8f6110ef3cfc4bcd13d52c475c">PROTOS_PER_PROTO_SET</a>);
<a name="l00705"></a>00705 
<a name="l00706"></a>00706   assert(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a> &lt;= <a class="code" href="intproto_8h.html#a267b5003cff8ab0fec1d3fef97738239">MAX_NUM_PROTO_SETS</a>);
<a name="l00707"></a>00707 
<a name="l00708"></a>00708   Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a> = 0;
<a name="l00709"></a>00709   Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a> = 0;
<a name="l00710"></a>00710 
<a name="l00711"></a>00711   <span class="keywordflow">for</span> (i = 0; i &lt; Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>; i++) {
<a name="l00712"></a>00712     <span class="comment">/* allocate space for a proto set, install in class, and initialize */</span>
<a name="l00713"></a>00713     ProtoSet = (<a class="code" href="intproto_8h.html#a75a17f28eba3fb341330351ef2ee9d87">PROTO_SET</a>) <a class="code" href="emalloc_8cpp.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET_STRUCT</a>));
<a name="l00714"></a>00714     memset(ProtoSet, 0, <span class="keyword">sizeof</span>(*ProtoSet));
<a name="l00715"></a>00715     Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[i] = ProtoSet;
<a name="l00716"></a>00716 
<a name="l00717"></a>00717     <span class="comment">/* allocate space for the proto lengths and install in class */</span>
<a name="l00718"></a>00718   }
<a name="l00719"></a>00719   <span class="keywordflow">if</span> (<a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class) &gt; 0) {
<a name="l00720"></a>00720     Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a> =
<a name="l00721"></a>00721       (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *)<a class="code" href="emalloc_8cpp.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(<a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class) * <span class="keyword">sizeof</span> (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>));
<a name="l00722"></a>00722     memset(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>, 0,
<a name="l00723"></a>00723            <a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a>(Class) * <span class="keyword">sizeof</span>(*Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>));
<a name="l00724"></a>00724   } <span class="keywordflow">else</span> {
<a name="l00725"></a>00725     Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a> = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00726"></a>00726   }
<a name="l00727"></a>00727   memset(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>, 0, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>));
<a name="l00728"></a>00728 
<a name="l00729"></a>00729   <span class="keywordflow">return</span> (Class);
<a name="l00730"></a>00730 
<a name="l00731"></a>00731 }                                <span class="comment">/* NewIntClass */</span>
<a name="l00732"></a>00732 
<a name="l00733"></a>00733 
<a name="l00734"></a>00734 <span class="comment">/*-------------------------------------------------------------------------*/</span>
<a name="l00735"></a><a class="code" href="intproto_8cpp.html#a4f621928b758b2595ba38e043140d35a">00735</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a4f621928b758b2595ba38e043140d35a">free_int_class</a>(<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> int_class) {
<a name="l00736"></a>00736   <span class="keywordtype">int</span> i;
<a name="l00737"></a>00737 
<a name="l00738"></a>00738   <span class="keywordflow">for</span> (i = 0; i &lt; int_class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>; i++) {
<a name="l00739"></a>00739     <a class="code" href="emalloc_8cpp.html#af846576ae65dc13e49ddc616e17baa27">Efree</a> (int_class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[i]);
<a name="l00740"></a>00740   }
<a name="l00741"></a>00741   <span class="keywordflow">if</span> (int_class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a> != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00742"></a>00742     <a class="code" href="emalloc_8cpp.html#af846576ae65dc13e49ddc616e17baa27">Efree</a> (int_class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>);
<a name="l00743"></a>00743   }
<a name="l00744"></a>00744   <a class="code" href="emalloc_8cpp.html#af846576ae65dc13e49ddc616e17baa27">Efree</a>(int_class);
<a name="l00745"></a>00745 }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 
<a name="l00748"></a>00748 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00749"></a><a class="code" href="intproto_8h.html#a020880b72d2d68c69edba44494fce647">00749</a> <a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> <a class="code" href="intproto_8cpp.html#a020880b72d2d68c69edba44494fce647">NewIntTemplates</a>() {
<a name="l00750"></a>00750 <span class="comment">/*</span>
<a name="l00751"></a>00751 <span class="comment"> ** Parameters: none</span>
<a name="l00752"></a>00752 <span class="comment"> ** Globals: none</span>
<a name="l00753"></a>00753 <span class="comment"> ** Operation: This routine allocates a new set of integer templates</span>
<a name="l00754"></a>00754 <span class="comment"> **   initialized to hold 0 classes.</span>
<a name="l00755"></a>00755 <span class="comment"> ** Return: The integer templates created.</span>
<a name="l00756"></a>00756 <span class="comment"> ** Exceptions: none</span>
<a name="l00757"></a>00757 <span class="comment"> ** History: Fri Feb  8 08:38:51 1991, DSJ, Created.</span>
<a name="l00758"></a>00758 <span class="comment"> */</span>
<a name="l00759"></a>00759   <a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> T;
<a name="l00760"></a>00760   <span class="keywordtype">int</span> i;
<a name="l00761"></a>00761 
<a name="l00762"></a>00762   T = (<a class="code" href="intproto_8h.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>) <a class="code" href="emalloc_8cpp.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES_STRUCT</a>));
<a name="l00763"></a>00763   T-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> = 0;
<a name="l00764"></a>00764   T-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a> = 0;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="matchdefs_8h.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>; i++)
<a name="l00767"></a>00767     <a class="code" href="intproto_8h.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (T, i) = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769   <span class="keywordflow">return</span> (T);
<a name="l00770"></a>00770 }                                <span class="comment">/* NewIntTemplates */</span>
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 
<a name="l00773"></a>00773 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00774"></a><a class="code" href="intproto_8h.html#aed61c96f41cad7c9871e809124987ca8">00774</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#aed61c96f41cad7c9871e809124987ca8">free_int_templates</a>(<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> templates) {
<a name="l00775"></a>00775   <span class="keywordtype">int</span> i;
<a name="l00776"></a>00776 
<a name="l00777"></a>00777   <span class="keywordflow">for</span> (i = 0; i &lt; templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++)
<a name="l00778"></a>00778     <a class="code" href="intproto_8cpp.html#a4f621928b758b2595ba38e043140d35a">free_int_class</a>(templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a2083307ebe623a6617ff38291a2f3614">Class</a>[i]);
<a name="l00779"></a>00779   <span class="keywordflow">for</span> (i = 0; i &lt; templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++)
<a name="l00780"></a>00780     <span class="keyword">delete</span> templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i];
<a name="l00781"></a>00781   <a class="code" href="emalloc_8cpp.html#af846576ae65dc13e49ddc616e17baa27">Efree</a>(templates);
<a name="l00782"></a>00782 }
<a name="l00783"></a>00783 
<a name="l00784"></a>00784 
<a name="l00785"></a>00785 <span class="keyword">namespace </span>tesseract {
<a name="l00786"></a><a class="code" href="classtesseract_1_1_classify.html#a98459996e5e6ab1dc1de71411fd32b89">00786</a> <a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> <a class="code" href="classtesseract_1_1_classify.html#a98459996e5e6ab1dc1de71411fd32b89">Classify::ReadIntTemplates</a>(FILE *File) {
<a name="l00787"></a>00787 <span class="comment">/*</span>
<a name="l00788"></a>00788 <span class="comment"> ** Parameters:</span>
<a name="l00789"></a>00789 <span class="comment"> **   File    open file to read templates from</span>
<a name="l00790"></a>00790 <span class="comment"> ** Globals: none</span>
<a name="l00791"></a>00791 <span class="comment"> ** Operation: This routine reads a set of integer templates from</span>
<a name="l00792"></a>00792 <span class="comment"> **   File.  File must already be open and must be in the</span>
<a name="l00793"></a>00793 <span class="comment"> **   correct binary format.</span>
<a name="l00794"></a>00794 <span class="comment"> ** Return: Pointer to integer templates read from File.</span>
<a name="l00795"></a>00795 <span class="comment"> ** Exceptions: none</span>
<a name="l00796"></a>00796 <span class="comment"> ** History: Wed Feb 27 11:48:46 1991, DSJ, Created.</span>
<a name="l00797"></a>00797 <span class="comment"> */</span>
<a name="l00798"></a>00798   <span class="keywordtype">int</span> i, j, w, x, y, z;
<a name="l00799"></a>00799   <a class="code" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> swap;
<a name="l00800"></a>00800   <span class="keywordtype">int</span> nread;
<a name="l00801"></a>00801   <span class="keywordtype">int</span> unicharset_size;
<a name="l00802"></a>00802   <span class="keywordtype">int</span> version_id = 0;
<a name="l00803"></a>00803   <a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> Templates;
<a name="l00804"></a>00804   <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>* Pruner;
<a name="l00805"></a>00805   <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class;
<a name="l00806"></a>00806   <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *Lengths;
<a name="l00807"></a>00807   <a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET</a> ProtoSet;
<a name="l00808"></a>00808 
<a name="l00809"></a>00809   <span class="comment">/* variables for conversion from older inttemp formats */</span>
<a name="l00810"></a>00810   <span class="keywordtype">int</span> b, bit_number, last_cp_bit_number, new_b, new_i, new_w;
<a name="l00811"></a>00811   <a class="code" href="matchdefs_8h.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> class_id, max_class_id;
<a name="l00812"></a>00812   <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> *IndexFor = <span class="keyword">new</span> <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>[<a class="code" href="matchdefs_8h.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>];
<a name="l00813"></a>00813   <a class="code" href="matchdefs_8h.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> *ClassIdFor = <span class="keyword">new</span> <a class="code" href="matchdefs_8h.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>[<a class="code" href="matchdefs_8h.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>];
<a name="l00814"></a>00814   <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a> **TempClassPruner =
<a name="l00815"></a>00815       <span class="keyword">new</span> <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>*[<a class="code" href="intproto_8h.html#aab6762087ba3ad713e2d76c3b19de53c">MAX_NUM_CLASS_PRUNERS</a>];
<a name="l00816"></a>00816   <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> SetBitsForMask =           <span class="comment">// word with NUM_BITS_PER_CLASS</span>
<a name="l00817"></a>00817     (1 &lt;&lt; <a class="code" href="intproto_8h.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a>) - 1;  <span class="comment">// set starting at bit 0</span>
<a name="l00818"></a>00818   <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> Mask, NewMask, ClassBits;
<a name="l00819"></a>00819   <span class="keywordtype">int</span> MaxNumConfigs = <a class="code" href="intproto_8h.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>;
<a name="l00820"></a>00820   <span class="keywordtype">int</span> WerdsPerConfigVec = <a class="code" href="intproto_8h.html#a884e587328e6d76dfc5e2abe80b9120a">WERDS_PER_CONFIG_VEC</a>;
<a name="l00821"></a>00821 
<a name="l00822"></a>00822   <span class="comment">/* first read the high level template struct */</span>
<a name="l00823"></a>00823   Templates = <a class="code" href="intproto_8cpp.html#a020880b72d2d68c69edba44494fce647">NewIntTemplates</a>();
<a name="l00824"></a>00824   <span class="comment">// Read Templates in parts for 64 bit compatibility.</span>
<a name="l00825"></a>00825   <span class="keywordflow">if</span> (fread(&amp;unicharset_size, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, File) != 1)
<a name="l00826"></a>00826     <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00827"></a>00827   <span class="keywordflow">if</span> (fread(&amp;Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>,
<a name="l00828"></a>00828             <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>), 1, File) != 1 ||
<a name="l00829"></a>00829       fread(&amp;Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>,
<a name="l00830"></a>00830             <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>), 1, File) != 1)
<a name="l00831"></a>00831     <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00832"></a>00832   <span class="comment">// Swap status is determined automatically.</span>
<a name="l00833"></a>00833   swap = Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a> &lt; 0 ||
<a name="l00834"></a>00834     Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a> &gt; <a class="code" href="intproto_8h.html#aab6762087ba3ad713e2d76c3b19de53c">MAX_NUM_CLASS_PRUNERS</a>;
<a name="l00835"></a>00835   <span class="keywordflow">if</span> (swap) {
<a name="l00836"></a>00836     <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>);
<a name="l00837"></a>00837     <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);
<a name="l00838"></a>00838     <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;unicharset_size);
<a name="l00839"></a>00839   }
<a name="l00840"></a>00840   <span class="keywordflow">if</span> (Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> &lt; 0) {
<a name="l00841"></a>00841     <span class="comment">// This file has a version id!</span>
<a name="l00842"></a>00842     version_id = -Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>;
<a name="l00843"></a>00843     <span class="keywordflow">if</span> (fread(&amp;Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>, <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>),
<a name="l00844"></a>00844               1, File) != 1)
<a name="l00845"></a>00845       <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00846"></a>00846     <span class="keywordflow">if</span> (swap)
<a name="l00847"></a>00847       <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);
<a name="l00848"></a>00848   }
<a name="l00849"></a>00849 
<a name="l00850"></a>00850   <span class="keywordflow">if</span> (version_id &lt; 3) {
<a name="l00851"></a>00851     MaxNumConfigs = <a class="code" href="intproto_8cpp.html#a140c8d6cda6a254c6bf42e7caa0390fc">OLD_MAX_NUM_CONFIGS</a>;
<a name="l00852"></a>00852     WerdsPerConfigVec = <a class="code" href="intproto_8cpp.html#aed02bb4e2adadad4fad1e2fc91e4643d">OLD_WERDS_PER_CONFIG_VEC</a>;
<a name="l00853"></a>00853   }
<a name="l00854"></a>00854 
<a name="l00855"></a>00855   <span class="keywordflow">if</span> (version_id &lt; 2) {
<a name="l00856"></a>00856     <span class="keywordflow">for</span> (i = 0; i &lt; unicharset_size; ++i) {
<a name="l00857"></a>00857       <span class="keywordflow">if</span> (fread(&amp;IndexFor[i], <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>), 1, File) != 1)
<a name="l00858"></a>00858         <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00859"></a>00859     }
<a name="l00860"></a>00860     <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; ++i) {
<a name="l00861"></a>00861       <span class="keywordflow">if</span> (fread(&amp;ClassIdFor[i], <span class="keyword">sizeof</span>(<a class="code" href="matchdefs_8h.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>), 1, File) != 1)
<a name="l00862"></a>00862         <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00863"></a>00863     }
<a name="l00864"></a>00864     <span class="keywordflow">if</span> (swap) {
<a name="l00865"></a>00865       <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++)
<a name="l00866"></a>00866         <a class="code" href="helpers_8h.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;IndexFor[i]);
<a name="l00867"></a>00867       <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++)
<a name="l00868"></a>00868         <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;ClassIdFor[i]);
<a name="l00869"></a>00869     }
<a name="l00870"></a>00870   }
<a name="l00871"></a>00871 
<a name="l00872"></a>00872   <span class="comment">/* then read in the class pruners */</span>
<a name="l00873"></a>00873   <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++) {
<a name="l00874"></a>00874     Pruner = <span class="keyword">new</span> <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>;
<a name="l00875"></a>00875     <span class="keywordflow">if</span> ((nread =
<a name="l00876"></a>00876          fread(Pruner, 1, <span class="keyword">sizeof</span>(<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>),
<a name="l00877"></a>00877                 File)) != <span class="keyword">sizeof</span>(<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>))
<a name="l00878"></a>00878       <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00879"></a>00879     <span class="keywordflow">if</span> (swap) {
<a name="l00880"></a>00880       <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; x++) {
<a name="l00881"></a>00881         <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; y++) {
<a name="l00882"></a>00882           <span class="keywordflow">for</span> (z = 0; z &lt; <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; z++) {
<a name="l00883"></a>00883             <span class="keywordflow">for</span> (w = 0; w &lt; <a class="code" href="intproto_8h.html#ab1e3efe229080aaa98b0df47adf46666">WERDS_PER_CP_VECTOR</a>; w++) {
<a name="l00884"></a>00884               <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Pruner-&gt;<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[x][y][z][w]);
<a name="l00885"></a>00885             }
<a name="l00886"></a>00886           }
<a name="l00887"></a>00887         }
<a name="l00888"></a>00888       }
<a name="l00889"></a>00889     }
<a name="l00890"></a>00890     <span class="keywordflow">if</span> (version_id &lt; 2) {
<a name="l00891"></a>00891       TempClassPruner[i] = Pruner;
<a name="l00892"></a>00892     } <span class="keywordflow">else</span> {
<a name="l00893"></a>00893       Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i] = Pruner;
<a name="l00894"></a>00894     }
<a name="l00895"></a>00895   }
<a name="l00896"></a>00896 
<a name="l00897"></a>00897   <span class="comment">/* fix class pruners if they came from an old version of inttemp */</span>
<a name="l00898"></a>00898   <span class="keywordflow">if</span> (version_id &lt; 2) {
<a name="l00899"></a>00899     <span class="comment">// Allocate enough class pruners to cover all the class ids.</span>
<a name="l00900"></a>00900     max_class_id = 0;
<a name="l00901"></a>00901     <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++)
<a name="l00902"></a>00902       <span class="keywordflow">if</span> (ClassIdFor[i] &gt; max_class_id)
<a name="l00903"></a>00903         max_class_id = ClassIdFor[i];
<a name="l00904"></a>00904     <span class="keywordflow">for</span> (i = 0; i &lt;= <a class="code" href="intproto_8h.html#a9e1bd1cdfd022a108d578009fe49ec51">CPrunerIdFor</a>(max_class_id); i++) {
<a name="l00905"></a>00905       Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i] = <span class="keyword">new</span> <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>;
<a name="l00906"></a>00906       memset(Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i], 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>));
<a name="l00907"></a>00907     }
<a name="l00908"></a>00908     <span class="comment">// Convert class pruners from the old format (indexed by class index)</span>
<a name="l00909"></a>00909     <span class="comment">// to the new format (indexed by class id).</span>
<a name="l00910"></a>00910     last_cp_bit_number = <a class="code" href="intproto_8h.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a> * Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> - 1;
<a name="l00911"></a>00911     <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++) {
<a name="l00912"></a>00912       <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; x++)
<a name="l00913"></a>00913         <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; y++)
<a name="l00914"></a>00914           <span class="keywordflow">for</span> (z = 0; z &lt; <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; z++)
<a name="l00915"></a>00915             <span class="keywordflow">for</span> (w = 0; w &lt; <a class="code" href="intproto_8h.html#ab1e3efe229080aaa98b0df47adf46666">WERDS_PER_CP_VECTOR</a>; w++) {
<a name="l00916"></a>00916               <span class="keywordflow">if</span> (TempClassPruner[i]-&gt;p[x][y][z][w] == 0)
<a name="l00917"></a>00917                 <span class="keywordflow">continue</span>;
<a name="l00918"></a>00918               <span class="keywordflow">for</span> (b = 0; b &lt; <a class="code" href="intproto_8h.html#a65e33e9e10361d8dc9c7760ee256beac">BITS_PER_WERD</a>; b += <a class="code" href="intproto_8h.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a>) {
<a name="l00919"></a>00919                 bit_number = i * <a class="code" href="intproto_8h.html#a0f9366ce0f73b02b2e9bc07a42cb0a00">BITS_PER_CP_VECTOR</a> + w * BITS_PER_WERD + b;
<a name="l00920"></a>00920                 <span class="keywordflow">if</span> (bit_number &gt; last_cp_bit_number)
<a name="l00921"></a>00921                   <span class="keywordflow">break</span>; <span class="comment">// the rest of the bits in this word are not used</span>
<a name="l00922"></a>00922                 class_id = ClassIdFor[bit_number / <a class="code" href="intproto_8h.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a>];
<a name="l00923"></a>00923                 <span class="comment">// Single out NUM_BITS_PER_CLASS bits relating to class_id.</span>
<a name="l00924"></a>00924                 Mask = SetBitsForMask &lt;&lt; b;
<a name="l00925"></a>00925                 ClassBits = TempClassPruner[i]-&gt;<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[x][y][z][w] &amp; Mask;
<a name="l00926"></a>00926                 <span class="comment">// Move these bits to the new position in which they should</span>
<a name="l00927"></a>00927                 <span class="comment">// appear (indexed corresponding to the class_id).</span>
<a name="l00928"></a>00928                 new_i = <a class="code" href="intproto_8h.html#a9e1bd1cdfd022a108d578009fe49ec51">CPrunerIdFor</a>(class_id);
<a name="l00929"></a>00929                 new_w = <a class="code" href="intproto_8h.html#a99d69701db6f22923e8c4027000f1bd7">CPrunerWordIndexFor</a>(class_id);
<a name="l00930"></a>00930                 new_b = <a class="code" href="intproto_8h.html#aa49eb773d3e7ef52fd291fcfb1464a83">CPrunerBitIndexFor</a>(class_id) * <a class="code" href="intproto_8h.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a>;
<a name="l00931"></a>00931                 <span class="keywordflow">if</span> (new_b &gt; b) {
<a name="l00932"></a>00932                   ClassBits &lt;&lt;= (new_b - b);
<a name="l00933"></a>00933                 } <span class="keywordflow">else</span> {
<a name="l00934"></a>00934                   ClassBits &gt;&gt;= (b - new_b);
<a name="l00935"></a>00935                 }
<a name="l00936"></a>00936                 <span class="comment">// Copy bits relating to class_id to the correct position</span>
<a name="l00937"></a>00937                 <span class="comment">// in Templates-&gt;ClassPruner.</span>
<a name="l00938"></a>00938                 NewMask = SetBitsForMask &lt;&lt; new_b;
<a name="l00939"></a>00939                 Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[new_i]-&gt;<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[x][y][z][new_w] &amp;= ~NewMask;
<a name="l00940"></a>00940                 Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[new_i]-&gt;<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[x][y][z][new_w] |= ClassBits;
<a name="l00941"></a>00941               }
<a name="l00942"></a>00942             }
<a name="l00943"></a>00943     }
<a name="l00944"></a>00944     <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++) {
<a name="l00945"></a>00945       <span class="keyword">delete</span> TempClassPruner[i];
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947   }
<a name="l00948"></a>00948 
<a name="l00949"></a>00949   <span class="comment">/* then read in each class */</span>
<a name="l00950"></a>00950   <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++) {
<a name="l00951"></a>00951     <span class="comment">/* first read in the high level struct for the class */</span>
<a name="l00952"></a>00952     Class = (<a class="code" href="intproto_8h.html#a8c3e30dcc19d515ce47bc6db3b02cf84">INT_CLASS</a>) <a class="code" href="emalloc_8cpp.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS_STRUCT</a>));
<a name="l00953"></a>00953     <span class="keywordflow">if</span> (fread(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>), 1, File) != 1 ||
<a name="l00954"></a>00954         fread(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>), 1, File) != 1 ||
<a name="l00955"></a>00955         fread(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>), 1, File) != 1)
<a name="l00956"></a>00956       <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00957"></a>00957     <span class="keywordflow">if</span> (version_id == 0) {
<a name="l00958"></a>00958       <span class="comment">// Only version 0 writes 5 pointless pointers to the file.</span>
<a name="l00959"></a>00959       <span class="keywordflow">for</span> (j = 0; j &lt; 5; ++j) {
<a name="l00960"></a>00960         <span class="keywordtype">int</span> junk;
<a name="l00961"></a>00961         <span class="keywordflow">if</span> (fread(&amp;junk, <span class="keyword">sizeof</span>(junk), 1, File) != 1)
<a name="l00962"></a>00962           <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00963"></a>00963       }
<a name="l00964"></a>00964     }
<a name="l00965"></a>00965     <span class="keywordflow">if</span> (version_id &lt; 4) {
<a name="l00966"></a>00966       <span class="keywordflow">for</span> (j = 0; j &lt; MaxNumConfigs; ++j) {
<a name="l00967"></a>00967         <span class="keywordflow">if</span> (fread(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j], <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a>), 1, File) != 1)
<a name="l00968"></a>00968           <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00969"></a>00969       }
<a name="l00970"></a>00970       <span class="keywordflow">if</span> (swap) {
<a name="l00971"></a>00971         <a class="code" href="helpers_8h.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>);
<a name="l00972"></a>00972         <span class="keywordflow">for</span> (j = 0; j &lt; MaxNumConfigs; j++)
<a name="l00973"></a>00973           <a class="code" href="helpers_8h.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j]);
<a name="l00974"></a>00974       }
<a name="l00975"></a>00975     } <span class="keywordflow">else</span> {
<a name="l00976"></a>00976       <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a> &lt; MaxNumConfigs);
<a name="l00977"></a>00977       <span class="keywordflow">for</span> (j = 0; j &lt; Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>; ++j) {
<a name="l00978"></a>00978         <span class="keywordflow">if</span> (fread(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j], <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a>), 1, File) != 1)
<a name="l00979"></a>00979           <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l00980"></a>00980       }
<a name="l00981"></a>00981       <span class="keywordflow">if</span> (swap) {
<a name="l00982"></a>00982         <a class="code" href="helpers_8h.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>);
<a name="l00983"></a>00983         <span class="keywordflow">for</span> (j = 0; j &lt; MaxNumConfigs; j++)
<a name="l00984"></a>00984           <a class="code" href="helpers_8h.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j]);
<a name="l00985"></a>00985       }
<a name="l00986"></a>00986     }
<a name="l00987"></a>00987     <span class="keywordflow">if</span> (version_id &lt; 2) {
<a name="l00988"></a>00988       <a class="code" href="intproto_8h.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, ClassIdFor[i]) = Class;
<a name="l00989"></a>00989     } <span class="keywordflow">else</span> {
<a name="l00990"></a>00990       <a class="code" href="intproto_8h.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, i) = Class;
<a name="l00991"></a>00991     }
<a name="l00992"></a>00992 
<a name="l00993"></a>00993     <span class="comment">/* then read in the proto lengths */</span>
<a name="l00994"></a>00994     Lengths = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00995"></a>00995     <span class="keywordflow">if</span> (<a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class) &gt; 0) {
<a name="l00996"></a>00996       Lengths = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *)<a class="code" href="emalloc_8cpp.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) * <a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a>(Class));
<a name="l00997"></a>00997       <span class="keywordflow">if</span> ((nread =
<a name="l00998"></a>00998            fread((<span class="keywordtype">char</span> *)Lengths, <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>),
<a name="l00999"></a>00999                  <a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a>(Class), File)) != <a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class))
<a name="l01000"></a>01000         <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l01001"></a>01001     }
<a name="l01002"></a>01002     Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a> = Lengths;
<a name="l01003"></a>01003 
<a name="l01004"></a>01004     <span class="comment">/* then read in the proto sets */</span>
<a name="l01005"></a>01005     <span class="keywordflow">for</span> (j = 0; j &lt; Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>; j++) {
<a name="l01006"></a>01006       ProtoSet = (<a class="code" href="intproto_8h.html#a75a17f28eba3fb341330351ef2ee9d87">PROTO_SET</a>)<a class="code" href="emalloc_8cpp.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET_STRUCT</a>));
<a name="l01007"></a>01007       <span class="keywordflow">if</span> (version_id &lt; 3) {
<a name="l01008"></a>01008         <span class="keywordflow">if</span> ((nread =
<a name="l01009"></a>01009              fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>, 1,
<a name="l01010"></a>01010                     <span class="keyword">sizeof</span>(<a class="code" href="intproto_8h.html#a2881fe4fb9235ee1ce2f53ed52b5444c">PROTO_PRUNER</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="intproto_8h.html#a2881fe4fb9235ee1ce2f53ed52b5444c">PROTO_PRUNER</a>))
<a name="l01011"></a>01011           <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l01012"></a>01012         <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="intproto_8h.html#ac6c8bf8f6110ef3cfc4bcd13d52c475c">PROTOS_PER_PROTO_SET</a>; x++) {
<a name="l01013"></a>01013           <span class="keywordflow">if</span> ((nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a1a04b5d1566d1ec88d99da275208f064">A</a>, 1,
<a name="l01014"></a>01014                              <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) ||
<a name="l01015"></a>01015               (nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#ae3a26a69bb3e3dcc7138fa036d3cb9e8">B</a>, 1,
<a name="l01016"></a>01016                              <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ||
<a name="l01017"></a>01017               (nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#af1c3246d7de60562deed8d58d292bb01">C</a>, 1,
<a name="l01018"></a>01018                              <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) ||
<a name="l01019"></a>01019               (nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a3595512379d43a12f92efef287db17d9">Angle</a>, 1,
<a name="l01020"></a>01020                              <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>))
<a name="l01021"></a>01021             <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l01022"></a>01022           <span class="keywordflow">for</span> (y = 0; y &lt; WerdsPerConfigVec; y++)
<a name="l01023"></a>01023             <span class="keywordflow">if</span> ((nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a897689cf42ad3255533f8d26f5fb4eb8">Configs</a>[y], 1,
<a name="l01024"></a>01024                                <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a>))
<a name="l01025"></a>01025               <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l01026"></a>01026         }
<a name="l01027"></a>01027       } <span class="keywordflow">else</span> {
<a name="l01028"></a>01028         <span class="keywordflow">if</span> ((nread =
<a name="l01029"></a>01029              fread((<span class="keywordtype">char</span> *) ProtoSet, 1, <span class="keyword">sizeof</span>(<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET_STRUCT</a>),
<a name="l01030"></a>01030                    File)) != <span class="keyword">sizeof</span>(<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET_STRUCT</a>))
<a name="l01031"></a>01031           <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);
<a name="l01032"></a>01032       }
<a name="l01033"></a>01033       <span class="keywordflow">if</span> (swap) {
<a name="l01034"></a>01034         <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="intproto_8h.html#a27a551120dac583bcc4134580a447768">NUM_PP_PARAMS</a>; x++)
<a name="l01035"></a>01035           <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>; y++)
<a name="l01036"></a>01036             <span class="keywordflow">for</span> (z = 0; z &lt; <a class="code" href="intproto_8h.html#a56d28cb646571fa14db5eb2ced4a5302">WERDS_PER_PP_VECTOR</a>; z++)
<a name="l01037"></a>01037               <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>[x][y][z]);
<a name="l01038"></a>01038         <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="intproto_8h.html#ac6c8bf8f6110ef3cfc4bcd13d52c475c">PROTOS_PER_PROTO_SET</a>; x++)
<a name="l01039"></a>01039           <span class="keywordflow">for</span> (y = 0; y &lt; WerdsPerConfigVec; y++)
<a name="l01040"></a>01040             <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a897689cf42ad3255533f8d26f5fb4eb8">Configs</a>[y]);
<a name="l01041"></a>01041       }
<a name="l01042"></a>01042       Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[j] = ProtoSet;
<a name="l01043"></a>01043     }
<a name="l01044"></a>01044     <span class="keywordflow">if</span> (version_id &lt; 4)
<a name="l01045"></a>01045       Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a> = -1;
<a name="l01046"></a>01046     <span class="keywordflow">else</span> {
<a name="l01047"></a>01047       fread(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, File);
<a name="l01048"></a>01048       <span class="keywordflow">if</span> (swap)
<a name="l01049"></a>01049         <a class="code" href="helpers_8h.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>);
<a name="l01050"></a>01050     }
<a name="l01051"></a>01051   }
<a name="l01052"></a>01052 
<a name="l01053"></a>01053   <span class="keywordflow">if</span> (version_id &lt; 2) {
<a name="l01054"></a>01054     <span class="comment">/* add an empty NULL class with class id 0 */</span>
<a name="l01055"></a>01055     assert(<a class="code" href="intproto_8h.html#a3e7ae3ffbac606326937a4c701aeeaf2">UnusedClassIdIn</a> (Templates, 0));
<a name="l01056"></a>01056     <a class="code" href="intproto_8h.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, 0) = <a class="code" href="intproto_8cpp.html#af77150e8523be2b3f6449e194eb55e7b">NewIntClass</a> (1, 1);
<a name="l01057"></a>01057     <a class="code" href="intproto_8h.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, 0)-&gt;font_set_id = -1;
<a name="l01058"></a>01058     Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>++;
<a name="l01059"></a>01059     <span class="comment">/* make sure the classes are contiguous */</span>
<a name="l01060"></a>01060     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="matchdefs_8h.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>; i++) {
<a name="l01061"></a>01061       <span class="keywordflow">if</span> (i &lt; Templates-&gt;NumClasses) {
<a name="l01062"></a>01062         <span class="keywordflow">if</span> (<a class="code" href="intproto_8h.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, i) == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01063"></a>01063           fprintf(stderr, <span class="stringliteral">&quot;Non-contiguous class ids in inttemp\n&quot;</span>);
<a name="l01064"></a>01064           exit(1);
<a name="l01065"></a>01065         }
<a name="l01066"></a>01066       } <span class="keywordflow">else</span> {
<a name="l01067"></a>01067         <span class="keywordflow">if</span> (<a class="code" href="intproto_8h.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, i) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01068"></a>01068           fprintf(stderr, <span class="stringliteral">&quot;Class id %d exceeds NumClassesIn (Templates) %d\n&quot;</span>,
<a name="l01069"></a>01069                   i, Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);
<a name="l01070"></a>01070           exit(1);
<a name="l01071"></a>01071         }
<a name="l01072"></a>01072       }
<a name="l01073"></a>01073     }
<a name="l01074"></a>01074   }
<a name="l01075"></a>01075   <span class="keywordflow">if</span> (version_id &gt;= 4) {
<a name="l01076"></a>01076     this-&gt;<a class="code" href="classtesseract_1_1_classify.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="class_unicity_table.html#a31e2edb3f92024b211332a850723d237" title="swap is used to switch the endianness.">read</a>(File, <a class="code" href="tesscallback_8h.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="namespacetesseract.html#a4a8355da6e96695bb003d778da05a95b">read_info</a>), swap);
<a name="l01077"></a>01077     <span class="keywordflow">if</span> (version_id &gt;= 5) {
<a name="l01078"></a>01078       this-&gt;<a class="code" href="classtesseract_1_1_classify.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="class_unicity_table.html#a31e2edb3f92024b211332a850723d237" title="swap is used to switch the endianness.">read</a>(File,
<a name="l01079"></a>01079                                  <a class="code" href="tesscallback_8h.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="namespacetesseract.html#a8643fbecc8aa5b606e53a534ad14d491">read_spacing_info</a>),
<a name="l01080"></a>01080                                  swap);
<a name="l01081"></a>01081     }
<a name="l01082"></a>01082     this-&gt;<a class="code" href="classtesseract_1_1_classify.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="class_unicity_table.html#a31e2edb3f92024b211332a850723d237" title="swap is used to switch the endianness.">read</a>(File, <a class="code" href="tesscallback_8h.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="namespacetesseract.html#a718a9f9121464dbaa6ef73c5f9dc6d5e">read_set</a>), swap);
<a name="l01083"></a>01083   }
<a name="l01084"></a>01084 
<a name="l01085"></a>01085   <span class="comment">// Clean up.</span>
<a name="l01086"></a>01086   <span class="keyword">delete</span>[] IndexFor;
<a name="l01087"></a>01087   <span class="keyword">delete</span>[] ClassIdFor;
<a name="l01088"></a>01088   <span class="keyword">delete</span>[] TempClassPruner;
<a name="l01089"></a>01089 
<a name="l01090"></a>01090   <span class="keywordflow">return</span> (Templates);
<a name="l01091"></a>01091 }                                <span class="comment">/* ReadIntTemplates */</span>
<a name="l01092"></a>01092 
<a name="l01093"></a>01093 
<a name="l01094"></a>01094 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01095"></a>01095 <span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<a name="l01096"></a><a class="code" href="classtesseract_1_1_classify.html#a44e1b8840fb841e621b902f3abdd8522">01096</a> <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_classify.html#a44e1b8840fb841e621b902f3abdd8522">Classify::ShowMatchDisplay</a>() {
<a name="l01097"></a>01097 <span class="comment">/*</span>
<a name="l01098"></a>01098 <span class="comment"> ** Parameters: none</span>
<a name="l01099"></a>01099 <span class="comment"> ** Globals:</span>
<a name="l01100"></a>01100 <span class="comment"> **   FeatureShapes display list containing feature matches</span>
<a name="l01101"></a>01101 <span class="comment"> **   ProtoShapes display list containing proto matches</span>
<a name="l01102"></a>01102 <span class="comment"> ** Operation: This routine sends the shapes in the global display</span>
<a name="l01103"></a>01103 <span class="comment"> **   lists to the match debugger window.</span>
<a name="l01104"></a>01104 <span class="comment"> ** Return: none</span>
<a name="l01105"></a>01105 <span class="comment"> ** Exceptions: none</span>
<a name="l01106"></a>01106 <span class="comment"> ** History: Thu Mar 21 15:47:33 1991, DSJ, Created.</span>
<a name="l01107"></a>01107 <span class="comment"> */</span>
<a name="l01108"></a>01108   <a class="code" href="intproto_8cpp.html#a142586ad15312463838c8202dd88d9b0">InitIntMatchWindowIfReqd</a>();
<a name="l01109"></a>01109   <span class="keywordflow">if</span> (ProtoDisplayWindow) {
<a name="l01110"></a>01110     ProtoDisplayWindow-&gt;<a class="code" href="class_scroll_view.html#a5386b0da16d7cbdd33044e53b95313ac">Clear</a>();
<a name="l01111"></a>01111   }
<a name="l01112"></a>01112   <span class="keywordflow">if</span> (FeatureDisplayWindow) {
<a name="l01113"></a>01113     FeatureDisplayWindow-&gt;<a class="code" href="class_scroll_view.html#a5386b0da16d7cbdd33044e53b95313ac">Clear</a>();
<a name="l01114"></a>01114   }
<a name="l01115"></a>01115   <a class="code" href="namespacetesseract.html#a50fae3caed4dccef6a71ac7e7aa9d63d">ClearFeatureSpaceWindow</a>(
<a name="l01116"></a>01116       static_cast&lt;NORM_METHOD&gt;(static_cast&lt;int&gt;(<a class="code" href="classtesseract_1_1_classify.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>)),
<a name="l01117"></a>01117       IntMatchWindow);
<a name="l01118"></a>01118   IntMatchWindow-&gt;<a class="code" href="class_scroll_view.html#a5a6c86ea0a618cf7642a8228fd7faab9">ZoomToRectangle</a>(<a class="code" href="intproto_8cpp.html#ac1a914c5ff58a0f8f9280ef2c9a29855">INT_MIN_X</a>, <a class="code" href="intproto_8cpp.html#a610ad70ab1731cabfb990c35cfd01dcf">INT_MIN_Y</a>,
<a name="l01119"></a>01119                                   <a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="intproto_8cpp.html#a4b0559f5844c194356263f55e3279d04">INT_MAX_Y</a>);
<a name="l01120"></a>01120   <span class="keywordflow">if</span> (ProtoDisplayWindow) {
<a name="l01121"></a>01121     ProtoDisplayWindow-&gt;<a class="code" href="class_scroll_view.html#a5a6c86ea0a618cf7642a8228fd7faab9">ZoomToRectangle</a>(<a class="code" href="intproto_8cpp.html#ac1a914c5ff58a0f8f9280ef2c9a29855">INT_MIN_X</a>, <a class="code" href="intproto_8cpp.html#a610ad70ab1731cabfb990c35cfd01dcf">INT_MIN_Y</a>,
<a name="l01122"></a>01122                                         <a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="intproto_8cpp.html#a4b0559f5844c194356263f55e3279d04">INT_MAX_Y</a>);
<a name="l01123"></a>01123   }
<a name="l01124"></a>01124   <span class="keywordflow">if</span> (FeatureDisplayWindow) {
<a name="l01125"></a>01125     FeatureDisplayWindow-&gt;<a class="code" href="class_scroll_view.html#a5a6c86ea0a618cf7642a8228fd7faab9">ZoomToRectangle</a>(<a class="code" href="intproto_8cpp.html#ac1a914c5ff58a0f8f9280ef2c9a29855">INT_MIN_X</a>, <a class="code" href="intproto_8cpp.html#a610ad70ab1731cabfb990c35cfd01dcf">INT_MIN_Y</a>,
<a name="l01126"></a>01126                                           <a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="intproto_8cpp.html#a4b0559f5844c194356263f55e3279d04">INT_MAX_Y</a>);
<a name="l01127"></a>01127   }
<a name="l01128"></a>01128 }                                <span class="comment">/* ShowMatchDisplay */</span>
<a name="l01129"></a>01129 
<a name="l01130"></a>01130 <span class="comment">// Clears the given window and draws the featurespace guides for the</span>
<a name="l01131"></a>01131 <span class="comment">// appropriate normalization method.</span>
<a name="l01132"></a><a class="code" href="namespacetesseract.html#a50fae3caed4dccef6a71ac7e7aa9d63d">01132</a> <span class="keywordtype">void</span> <a class="code" href="namespacetesseract.html#a50fae3caed4dccef6a71ac7e7aa9d63d">ClearFeatureSpaceWindow</a>(<a class="code" href="mfoutline_8h.html#a2a4b69f9a2827dc98bc4cbc233118865">NORM_METHOD</a> norm_method, <a class="code" href="class_scroll_view.html">ScrollView</a>* window) {
<a name="l01133"></a>01133   window-&gt;<a class="code" href="class_scroll_view.html#a5386b0da16d7cbdd33044e53b95313ac">Clear</a>();
<a name="l01134"></a>01134 
<a name="l01135"></a>01135   window-&gt;<a class="code" href="class_scroll_view.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(<a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a7bba33cbbab6aaa71dce1aad46ecc3a5">ScrollView::GREY</a>);
<a name="l01136"></a>01136   <span class="comment">// Draw the feature space limit rectangle.</span>
<a name="l01137"></a>01137   window-&gt;<a class="code" href="class_scroll_view.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a>(0, 0, <a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="intproto_8cpp.html#a4b0559f5844c194356263f55e3279d04">INT_MAX_Y</a>);
<a name="l01138"></a>01138   <span class="keywordflow">if</span> (norm_method == <a class="code" href="mfoutline_8h.html#a2a4b69f9a2827dc98bc4cbc233118865a83297de004f4e58b9be2108c6cd08a23">baseline</a>) {
<a name="l01139"></a>01139     window-&gt;<a class="code" href="class_scroll_view.html#a730b182e350dfe37b0986d7f0591fee5">SetCursor</a>(0, <a class="code" href="intproto_8cpp.html#a5c9809b9be37d6d221e2171fe42511df">INT_DESCENDER</a>);
<a name="l01140"></a>01140     window-&gt;<a class="code" href="class_scroll_view.html#a101de80a4722fe821969f61f6e7303a6">DrawTo</a>(<a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="intproto_8cpp.html#a5c9809b9be37d6d221e2171fe42511df">INT_DESCENDER</a>);
<a name="l01141"></a>01141     window-&gt;<a class="code" href="class_scroll_view.html#a730b182e350dfe37b0986d7f0591fee5">SetCursor</a>(0, <a class="code" href="intproto_8cpp.html#af29db3e707420f778975c37e5d66fd10">INT_BASELINE</a>);
<a name="l01142"></a>01142     window-&gt;<a class="code" href="class_scroll_view.html#a101de80a4722fe821969f61f6e7303a6">DrawTo</a>(<a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="intproto_8cpp.html#af29db3e707420f778975c37e5d66fd10">INT_BASELINE</a>);
<a name="l01143"></a>01143     window-&gt;<a class="code" href="class_scroll_view.html#a730b182e350dfe37b0986d7f0591fee5">SetCursor</a>(0, <a class="code" href="intproto_8cpp.html#a8c142ec5cff85d77ec4abc373999f6ec">INT_XHEIGHT</a>);
<a name="l01144"></a>01144     window-&gt;<a class="code" href="class_scroll_view.html#a101de80a4722fe821969f61f6e7303a6">DrawTo</a>(<a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="intproto_8cpp.html#a8c142ec5cff85d77ec4abc373999f6ec">INT_XHEIGHT</a>);
<a name="l01145"></a>01145     window-&gt;<a class="code" href="class_scroll_view.html#a730b182e350dfe37b0986d7f0591fee5">SetCursor</a>(0, <a class="code" href="intproto_8cpp.html#afa60433c26b09f744170ab10c8cfa716">INT_CAPHEIGHT</a>);
<a name="l01146"></a>01146     window-&gt;<a class="code" href="class_scroll_view.html#a101de80a4722fe821969f61f6e7303a6">DrawTo</a>(<a class="code" href="intproto_8cpp.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="intproto_8cpp.html#afa60433c26b09f744170ab10c8cfa716">INT_CAPHEIGHT</a>);
<a name="l01147"></a>01147   } <span class="keywordflow">else</span> {
<a name="l01148"></a>01148     window-&gt;<a class="code" href="class_scroll_view.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a>(<a class="code" href="intproto_8cpp.html#a983c9783c3f2d0492f157663437cf7bd">INT_XCENTER</a> - <a class="code" href="intproto_8cpp.html#af4a3bea04d2b29dafb4530473dd4f656">INT_XRADIUS</a>, <a class="code" href="intproto_8cpp.html#a7b4c65ba0ecc02ed3d969a4c07bff4dc">INT_YCENTER</a> - <a class="code" href="intproto_8cpp.html#a38e42261c045df095d799e2f19aec1e6">INT_YRADIUS</a>,
<a name="l01149"></a>01149                       <a class="code" href="intproto_8cpp.html#a983c9783c3f2d0492f157663437cf7bd">INT_XCENTER</a> + <a class="code" href="intproto_8cpp.html#af4a3bea04d2b29dafb4530473dd4f656">INT_XRADIUS</a>, <a class="code" href="intproto_8cpp.html#a7b4c65ba0ecc02ed3d969a4c07bff4dc">INT_YCENTER</a> + <a class="code" href="intproto_8cpp.html#a38e42261c045df095d799e2f19aec1e6">INT_YRADIUS</a>);
<a name="l01150"></a>01150   }
<a name="l01151"></a>01151 }
<a name="l01152"></a>01152 <span class="preprocessor">#endif</span>
<a name="l01153"></a>01153 <span class="preprocessor"></span>
<a name="l01154"></a>01154 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01155"></a><a class="code" href="classtesseract_1_1_classify.html#a81e8a5e5adfc60146ea3eb5b60936dd9">01155</a> <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_classify.html#a81e8a5e5adfc60146ea3eb5b60936dd9">Classify::WriteIntTemplates</a>(FILE *File, <a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html">INT_TEMPLATES</a> Templates,
<a name="l01156"></a>01156                                  <span class="keyword">const</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a>&amp; target_unicharset) {
<a name="l01157"></a>01157 <span class="comment">/*</span>
<a name="l01158"></a>01158 <span class="comment"> ** Parameters:</span>
<a name="l01159"></a>01159 <span class="comment"> **   File    open file to write templates to</span>
<a name="l01160"></a>01160 <span class="comment"> **   Templates templates to save into File</span>
<a name="l01161"></a>01161 <span class="comment"> ** Globals: none</span>
<a name="l01162"></a>01162 <span class="comment"> ** Operation: This routine writes Templates to File.  The format</span>
<a name="l01163"></a>01163 <span class="comment"> **   is an efficient binary format.  File must already be open</span>
<a name="l01164"></a>01164 <span class="comment"> **   for writing.</span>
<a name="l01165"></a>01165 <span class="comment"> ** Return: none</span>
<a name="l01166"></a>01166 <span class="comment"> ** Exceptions: none</span>
<a name="l01167"></a>01167 <span class="comment"> ** History: Wed Feb 27 11:48:46 1991, DSJ, Created.</span>
<a name="l01168"></a>01168 <span class="comment"> */</span>
<a name="l01169"></a>01169   <span class="keywordtype">int</span> i, j;
<a name="l01170"></a>01170   <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class;
<a name="l01171"></a>01171   <span class="keywordtype">int</span> unicharset_size = target_unicharset.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa3e8073ebaf3e0022654c45f27135032">size</a>();
<a name="l01172"></a>01172   <span class="keywordtype">int</span> version_id = -5;  <span class="comment">// When negated by the reader -1 becomes +1 etc.</span>
<a name="l01173"></a>01173 
<a name="l01174"></a>01174   <span class="keywordflow">if</span> (Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> != unicharset_size) {
<a name="l01175"></a>01175     <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Warning: executing WriteIntTemplates() with %d classes in&quot;</span>
<a name="l01176"></a>01176             <span class="stringliteral">&quot; Templates, while target_unicharset size is %d\n&quot;</span>,
<a name="l01177"></a>01177             Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>, unicharset_size);
<a name="l01178"></a>01178   }
<a name="l01179"></a>01179 
<a name="l01180"></a>01180   <span class="comment">/* first write the high level template struct */</span>
<a name="l01181"></a>01181   fwrite(&amp;unicharset_size, <span class="keyword">sizeof</span>(unicharset_size), 1, File);
<a name="l01182"></a>01182   fwrite(&amp;version_id, <span class="keyword">sizeof</span>(version_id), 1, File);
<a name="l01183"></a>01183   fwrite(&amp;Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>, <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>),
<a name="l01184"></a>01184          1, File);
<a name="l01185"></a>01185   fwrite(&amp;Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>, <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>), 1, File);
<a name="l01186"></a>01186 
<a name="l01187"></a>01187   <span class="comment">/* then write out the class pruners */</span>
<a name="l01188"></a>01188   <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++)
<a name="l01189"></a>01189     fwrite(Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i],
<a name="l01190"></a>01190            <span class="keyword">sizeof</span>(<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>), 1, File);
<a name="l01191"></a>01191 
<a name="l01192"></a>01192   <span class="comment">/* then write out each class */</span>
<a name="l01193"></a>01193   <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++) {
<a name="l01194"></a>01194     Class = Templates-&gt;<a class="code" href="struct_i_n_t___t_e_m_p_l_a_t_e_s___s_t_r_u_c_t.html#a2083307ebe623a6617ff38291a2f3614">Class</a>[i];
<a name="l01195"></a>01195 
<a name="l01196"></a>01196     <span class="comment">/* first write out the high level struct for the class */</span>
<a name="l01197"></a>01197     fwrite(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>), 1, File);
<a name="l01198"></a>01198     fwrite(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>), 1, File);
<a name="l01199"></a>01199     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a> == this-&gt;fontset_table_.get(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>).size);
<a name="l01200"></a>01200     fwrite(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>), 1, File);
<a name="l01201"></a>01201     <span class="keywordflow">for</span> (j = 0; j &lt; Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>; ++j) {
<a name="l01202"></a>01202       fwrite(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j], <span class="keyword">sizeof</span>(<a class="code" href="host_8h.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a>), 1, File);
<a name="l01203"></a>01203     }
<a name="l01204"></a>01204 
<a name="l01205"></a>01205     <span class="comment">/* then write out the proto lengths */</span>
<a name="l01206"></a>01206     <span class="keywordflow">if</span> (<a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class) &gt; 0) {
<a name="l01207"></a>01207       fwrite ((<span class="keywordtype">char</span> *) (Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>), sizeof (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>),
<a name="l01208"></a>01208               <a class="code" href="intproto_8h.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class), File);
<a name="l01209"></a>01209     }
<a name="l01210"></a>01210 
<a name="l01211"></a>01211     <span class="comment">/* then write out the proto sets */</span>
<a name="l01212"></a>01212     <span class="keywordflow">for</span> (j = 0; j &lt; Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>; j++)
<a name="l01213"></a>01213       fwrite ((<span class="keywordtype">char</span> *) Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[j],
<a name="l01214"></a>01214               sizeof (<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET_STRUCT</a>), 1, File);
<a name="l01215"></a>01215 
<a name="l01216"></a>01216     <span class="comment">/* then write the fonts info */</span>
<a name="l01217"></a>01217     fwrite(&amp;Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, File);
<a name="l01218"></a>01218   }
<a name="l01219"></a>01219 
<a name="l01220"></a>01220   <span class="comment">/* Write the fonts info tables */</span>
<a name="l01221"></a>01221   this-&gt;<a class="code" href="classtesseract_1_1_classify.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="class_unicity_table.html#a23b683e4ea0132af3004552f5d515d61">write</a>(File, <a class="code" href="tesscallback_8h.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="namespacetesseract.html#a39563e2e9bd26b96504e53ae2c9defcc">write_info</a>));
<a name="l01222"></a>01222   this-&gt;<a class="code" href="classtesseract_1_1_classify.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="class_unicity_table.html#a23b683e4ea0132af3004552f5d515d61">write</a>(File,
<a name="l01223"></a>01223                               <a class="code" href="tesscallback_8h.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="namespacetesseract.html#a48b60e911578a0285e73738e81181abf">write_spacing_info</a>));
<a name="l01224"></a>01224   this-&gt;<a class="code" href="classtesseract_1_1_classify.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="class_unicity_table.html#a23b683e4ea0132af3004552f5d515d61">write</a>(File, <a class="code" href="tesscallback_8h.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="namespacetesseract.html#a385582f69442d7d9588e2983c768cec1">write_set</a>));
<a name="l01225"></a>01225 }                                <span class="comment">/* WriteIntTemplates */</span>
<a name="l01226"></a>01226 } <span class="comment">// namespace tesseract</span>
<a name="l01227"></a>01227 
<a name="l01228"></a>01228 
<a name="l01229"></a>01229 <span class="comment">/*-----------------------------------------------------------------------------</span>
<a name="l01230"></a>01230 <span class="comment">              Private Code</span>
<a name="l01231"></a>01231 <span class="comment">-----------------------------------------------------------------------------*/</span>
<a name="l01232"></a>01232 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01233"></a><a class="code" href="intproto_8cpp.html#ae613a28d73bf2a76687f554e439a1c4c">01233</a> <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> <a class="code" href="intproto_8cpp.html#ae613a28d73bf2a76687f554e439a1c4c">BucketStart</a>(<span class="keywordtype">int</span> Bucket, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Offset, <span class="keywordtype">int</span> NumBuckets) {
<a name="l01234"></a>01234 <span class="comment">/*</span>
<a name="l01235"></a>01235 <span class="comment"> ** Parameters:</span>
<a name="l01236"></a>01236 <span class="comment"> **   Bucket    bucket whose start is to be computed</span>
<a name="l01237"></a>01237 <span class="comment"> **   Offset    offset used to map params to buckets</span>
<a name="l01238"></a>01238 <span class="comment"> **   NumBuckets  total number of buckets</span>
<a name="l01239"></a>01239 <span class="comment"> ** Globals: none</span>
<a name="l01240"></a>01240 <span class="comment"> ** Operation: This routine returns the parameter value which</span>
<a name="l01241"></a>01241 <span class="comment"> **   corresponds to the beginning of the specified bucket.</span>
<a name="l01242"></a>01242 <span class="comment"> **   The bucket number should have been generated using the</span>
<a name="l01243"></a>01243 <span class="comment"> **   BucketFor() function with parameters Offset and NumBuckets.</span>
<a name="l01244"></a>01244 <span class="comment"> ** Return: Param value corresponding to start position of Bucket.</span>
<a name="l01245"></a>01245 <span class="comment"> ** Exceptions: none</span>
<a name="l01246"></a>01246 <span class="comment"> ** History: Thu Feb 14 13:24:33 1991, DSJ, Created.</span>
<a name="l01247"></a>01247 <span class="comment"> */</span>
<a name="l01248"></a>01248   <span class="keywordflow">return</span> (((<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>) Bucket / NumBuckets) - Offset);
<a name="l01249"></a>01249 
<a name="l01250"></a>01250 }                                <span class="comment">/* BucketStart */</span>
<a name="l01251"></a>01251 
<a name="l01252"></a>01252 
<a name="l01253"></a>01253 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01254"></a><a class="code" href="intproto_8cpp.html#ac65eab1c9120551f8d4706d4dfaf0815">01254</a> <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> <a class="code" href="intproto_8cpp.html#ac65eab1c9120551f8d4706d4dfaf0815">BucketEnd</a>(<span class="keywordtype">int</span> Bucket, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Offset, <span class="keywordtype">int</span> NumBuckets) {
<a name="l01255"></a>01255 <span class="comment">/*</span>
<a name="l01256"></a>01256 <span class="comment"> ** Parameters:</span>
<a name="l01257"></a>01257 <span class="comment"> **   Bucket    bucket whose end is to be computed</span>
<a name="l01258"></a>01258 <span class="comment"> **   Offset    offset used to map params to buckets</span>
<a name="l01259"></a>01259 <span class="comment"> **   NumBuckets  total number of buckets</span>
<a name="l01260"></a>01260 <span class="comment"> ** Globals: none</span>
<a name="l01261"></a>01261 <span class="comment"> ** Operation: This routine returns the parameter value which</span>
<a name="l01262"></a>01262 <span class="comment"> **   corresponds to the end of the specified bucket.</span>
<a name="l01263"></a>01263 <span class="comment"> **   The bucket number should have been generated using the</span>
<a name="l01264"></a>01264 <span class="comment"> **   BucketFor() function with parameters Offset and NumBuckets.</span>
<a name="l01265"></a>01265 <span class="comment"> ** Return: Param value corresponding to end position of Bucket.</span>
<a name="l01266"></a>01266 <span class="comment"> ** Exceptions: none</span>
<a name="l01267"></a>01267 <span class="comment"> ** History: Thu Feb 14 13:24:33 1991, DSJ, Created.</span>
<a name="l01268"></a>01268 <span class="comment"> */</span>
<a name="l01269"></a>01269   <span class="keywordflow">return</span> (((<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>) (Bucket + 1) / NumBuckets) - Offset);
<a name="l01270"></a>01270 }                                <span class="comment">/* BucketEnd */</span>
<a name="l01271"></a>01271 
<a name="l01272"></a>01272 
<a name="l01273"></a>01273 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01274"></a><a class="code" href="intproto_8cpp.html#afaea93aff6c706adbe44d48f343ce2af">01274</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#afaea93aff6c706adbe44d48f343ce2af">DoFill</a>(<a class="code" href="struct_f_i_l_l___s_p_e_c.html">FILL_SPEC</a> *FillSpec,
<a name="l01275"></a>01275             <a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html">CLASS_PRUNER_STRUCT</a>* Pruner,
<a name="l01276"></a>01276             <span class="keyword">register</span> <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ClassMask,
<a name="l01277"></a>01277             <span class="keyword">register</span> <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ClassCount,
<a name="l01278"></a>01278             <span class="keyword">register</span> <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> WordIndex) {
<a name="l01279"></a>01279 <span class="comment">/*</span>
<a name="l01280"></a>01280 <span class="comment"> ** Parameters:</span>
<a name="l01281"></a>01281 <span class="comment"> **   FillSpec  specifies which bits to fill in pruner</span>
<a name="l01282"></a>01282 <span class="comment"> **   Pruner    class pruner to be filled</span>
<a name="l01283"></a>01283 <span class="comment"> **   ClassMask indicates which bits to change in each word</span>
<a name="l01284"></a>01284 <span class="comment"> **   ClassCount  indicates what to change bits to</span>
<a name="l01285"></a>01285 <span class="comment"> **   WordIndex indicates which word to change</span>
<a name="l01286"></a>01286 <span class="comment"> ** Globals: none</span>
<a name="l01287"></a>01287 <span class="comment"> ** Operation: This routine fills in the section of a class pruner</span>
<a name="l01288"></a>01288 <span class="comment"> **   corresponding to a single x value for a single proto of</span>
<a name="l01289"></a>01289 <span class="comment"> **   a class.</span>
<a name="l01290"></a>01290 <span class="comment"> ** Return: none</span>
<a name="l01291"></a>01291 <span class="comment"> ** Exceptions: none</span>
<a name="l01292"></a>01292 <span class="comment"> ** History: Tue Feb 19 11:11:29 1991, DSJ, Created.</span>
<a name="l01293"></a>01293 <span class="comment"> */</span>
<a name="l01294"></a>01294   <span class="keyword">register</span> <span class="keywordtype">int</span> X, Y, Angle;
<a name="l01295"></a>01295   <span class="keyword">register</span> <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> OldWord;
<a name="l01296"></a>01296 
<a name="l01297"></a>01297   X = FillSpec-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#af6f01125dbc9d3ffcdabff5ffde4cdd5">X</a>;
<a name="l01298"></a>01298   <span class="keywordflow">if</span> (X &lt; 0)
<a name="l01299"></a>01299     X = 0;
<a name="l01300"></a>01300   <span class="keywordflow">if</span> (X &gt;= <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>)
<a name="l01301"></a>01301     X = <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a> - 1;
<a name="l01302"></a>01302 
<a name="l01303"></a>01303   <span class="keywordflow">if</span> (FillSpec-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a8e3873d2bbb279c505af2a778f90d5d0">YStart</a> &lt; 0)
<a name="l01304"></a>01304     FillSpec-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a8e3873d2bbb279c505af2a778f90d5d0">YStart</a> = 0;
<a name="l01305"></a>01305   <span class="keywordflow">if</span> (FillSpec-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a1a589401e23c5cfc86eeabd0a6c553ec">YEnd</a> &gt;= <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>)
<a name="l01306"></a>01306     FillSpec-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a1a589401e23c5cfc86eeabd0a6c553ec">YEnd</a> = <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a> - 1;
<a name="l01307"></a>01307 
<a name="l01308"></a>01308   <span class="keywordflow">for</span> (Y = FillSpec-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a8e3873d2bbb279c505af2a778f90d5d0">YStart</a>; Y &lt;= FillSpec-&gt;YEnd; Y++)
<a name="l01309"></a>01309     <span class="keywordflow">for</span> (Angle = FillSpec-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a00f7ac32738ce5dc0e5e4955a4ab2afb">AngleStart</a>;
<a name="l01310"></a>01310          <a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <a class="code" href="intproto_8cpp.html#a2e059f536686155b975d46cecf190d77">CircularIncrement</a> (Angle, <a class="code" href="intproto_8h.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>)) {
<a name="l01311"></a>01311       OldWord = Pruner-&gt;<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[X][Y][Angle][WordIndex];
<a name="l01312"></a>01312       <span class="keywordflow">if</span> (ClassCount &gt; (OldWord &amp; ClassMask)) {
<a name="l01313"></a>01313         OldWord &amp;= ~ClassMask;
<a name="l01314"></a>01314         OldWord |= ClassCount;
<a name="l01315"></a>01315         Pruner-&gt;<a class="code" href="struct_c_l_a_s_s___p_r_u_n_e_r___s_t_r_u_c_t.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[X][Y][Angle][WordIndex] = OldWord;
<a name="l01316"></a>01316       }
<a name="l01317"></a>01317       <span class="keywordflow">if</span> (Angle == FillSpec-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a6a61a16750eab351b8ee14a3b0311afc">AngleEnd</a>)
<a name="l01318"></a>01318         <span class="keywordflow">break</span>;
<a name="l01319"></a>01319     }
<a name="l01320"></a>01320 }                                <span class="comment">/* DoFill */</span>
<a name="l01321"></a>01321 
<a name="l01322"></a>01322 
<a name="l01323"></a>01323 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01324"></a><a class="code" href="intproto_8cpp.html#a6e872ab9dec7a62d791536899847446b">01324</a> <a class="code" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> <a class="code" href="intproto_8cpp.html#a6e872ab9dec7a62d791536899847446b">FillerDone</a>(<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">TABLE_FILLER</a> *Filler) {
<a name="l01325"></a>01325 <span class="comment">/*</span>
<a name="l01326"></a>01326 <span class="comment"> ** Parameters:</span>
<a name="l01327"></a>01327 <span class="comment"> **   Filler    table filler to check if done</span>
<a name="l01328"></a>01328 <span class="comment"> ** Globals: none</span>
<a name="l01329"></a>01329 <span class="comment"> ** Operation: Return TRUE if the specified table filler is done, i.e.</span>
<a name="l01330"></a>01330 <span class="comment"> **   if it has no more lines to fill.</span>
<a name="l01331"></a>01331 <span class="comment"> ** Return: TRUE if no more lines to fill, FALSE otherwise.</span>
<a name="l01332"></a>01332 <span class="comment"> ** Exceptions: none</span>
<a name="l01333"></a>01333 <span class="comment"> ** History: Tue Feb 19 10:08:05 1991, DSJ, Created.</span>
<a name="l01334"></a>01334 <span class="comment"> */</span>
<a name="l01335"></a>01335   <a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html">FILL_SWITCH</a> *Next;
<a name="l01336"></a>01336 
<a name="l01337"></a>01337   Next = &amp;(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a652d9c1a4384ff077102496a96ac879e">NextSwitch</a>]);
<a name="l01338"></a>01338 
<a name="l01339"></a>01339   <span class="keywordflow">if</span> (Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a> &gt; Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> &amp;&amp; Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> == <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82adf8537429629d6c042ac3481208264e2">LastSwitch</a>)
<a name="l01340"></a>01340     <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l01341"></a>01341   <span class="keywordflow">else</span>
<a name="l01342"></a>01342     <span class="keywordflow">return</span> (<a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
<a name="l01343"></a>01343 
<a name="l01344"></a>01344 }                                <span class="comment">/* FillerDone */</span>
<a name="l01345"></a>01345 
<a name="l01346"></a>01346 
<a name="l01347"></a>01347 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01348"></a><a class="code" href="intproto_8cpp.html#a9fd79e26406505a10882c61ccec50fa5">01348</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a9fd79e26406505a10882c61ccec50fa5">FillPPCircularBits</a>(<a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ParamTable[<a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>][<a class="code" href="intproto_8h.html#a56d28cb646571fa14db5eb2ced4a5302">WERDS_PER_PP_VECTOR</a>],
<a name="l01349"></a>01349                         <span class="keywordtype">int</span> Bit, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Center, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Spread, <span class="keywordtype">bool</span> debug) {
<a name="l01350"></a>01350 <span class="comment">/*</span>
<a name="l01351"></a>01351 <span class="comment"> ** Parameters:</span>
<a name="l01352"></a>01352 <span class="comment"> **   ParamTable  table of bit vectors, one per param bucket</span>
<a name="l01353"></a>01353 <span class="comment"> **   Bit   bit position in vectors to be filled</span>
<a name="l01354"></a>01354 <span class="comment"> **   Center    center of filled area</span>
<a name="l01355"></a>01355 <span class="comment"> **   Spread    spread of filled area</span>
<a name="l01356"></a>01356 <span class="comment"> ** Globals: none</span>
<a name="l01357"></a>01357 <span class="comment"> ** Operation: This routine sets Bit in each bit vector whose</span>
<a name="l01358"></a>01358 <span class="comment"> **   bucket lies within the range Center +- Spread.  The fill</span>
<a name="l01359"></a>01359 <span class="comment"> **   is done for a circular dimension, i.e. bucket 0 is adjacent</span>
<a name="l01360"></a>01360 <span class="comment"> **   to the last bucket.  It is assumed that Center and Spread</span>
<a name="l01361"></a>01361 <span class="comment"> **   are expressed in a circular coordinate system whose range</span>
<a name="l01362"></a>01362 <span class="comment"> **   is 0 to 1.</span>
<a name="l01363"></a>01363 <span class="comment"> ** Return: none</span>
<a name="l01364"></a>01364 <span class="comment"> ** Exceptions: none</span>
<a name="l01365"></a>01365 <span class="comment"> ** History: Tue Oct 16 09:26:54 1990, DSJ, Created.</span>
<a name="l01366"></a>01366 <span class="comment"> */</span>
<a name="l01367"></a>01367   <span class="keywordtype">int</span> i, FirstBucket, LastBucket;
<a name="l01368"></a>01368 
<a name="l01369"></a>01369   <span class="keywordflow">if</span> (Spread &gt; 0.5)
<a name="l01370"></a>01370     Spread = 0.5;
<a name="l01371"></a>01371 
<a name="l01372"></a>01372   FirstBucket = (int) floor ((Center - Spread) * <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>);
<a name="l01373"></a>01373   <span class="keywordflow">if</span> (FirstBucket &lt; 0)
<a name="l01374"></a>01374     FirstBucket += <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>;
<a name="l01375"></a>01375 
<a name="l01376"></a>01376   LastBucket = (int) floor ((Center + Spread) * <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>);
<a name="l01377"></a>01377   <span class="keywordflow">if</span> (LastBucket &gt;= <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>)
<a name="l01378"></a>01378     LastBucket -= <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>;
<a name="l01379"></a>01379   <span class="keywordflow">if</span> (debug) <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Circular fill from %d to %d&quot;</span>, FirstBucket, LastBucket);
<a name="l01380"></a>01380   <span class="keywordflow">for</span> (i = FirstBucket; <a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <a class="code" href="intproto_8cpp.html#a2e059f536686155b975d46cecf190d77">CircularIncrement</a> (i, <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>)) {
<a name="l01381"></a>01381     <a class="code" href="bitvec_8h.html#ab02d606cf8dca49ccadb00248bdbafe9">SET_BIT</a> (ParamTable[i], Bit);
<a name="l01382"></a>01382 
<a name="l01383"></a>01383     <span class="comment">/* exit loop after we have set the bit for the last bucket */</span>
<a name="l01384"></a>01384     <span class="keywordflow">if</span> (i == LastBucket)
<a name="l01385"></a>01385       <span class="keywordflow">break</span>;
<a name="l01386"></a>01386   }
<a name="l01387"></a>01387 
<a name="l01388"></a>01388 }                                <span class="comment">/* FillPPCircularBits */</span>
<a name="l01389"></a>01389 
<a name="l01390"></a>01390 
<a name="l01391"></a>01391 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01392"></a><a class="code" href="intproto_8cpp.html#acec82005e652edf5912abcfae1166e19">01392</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#acec82005e652edf5912abcfae1166e19">FillPPLinearBits</a>(<a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ParamTable[<a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>][<a class="code" href="intproto_8h.html#a56d28cb646571fa14db5eb2ced4a5302">WERDS_PER_PP_VECTOR</a>],
<a name="l01393"></a>01393                       <span class="keywordtype">int</span> Bit, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Center, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Spread, <span class="keywordtype">bool</span> debug) {
<a name="l01394"></a>01394 <span class="comment">/*</span>
<a name="l01395"></a>01395 <span class="comment"> ** Parameters:</span>
<a name="l01396"></a>01396 <span class="comment"> **   ParamTable  table of bit vectors, one per param bucket</span>
<a name="l01397"></a>01397 <span class="comment"> **   Bit   bit number being filled</span>
<a name="l01398"></a>01398 <span class="comment"> **   Center    center of filled area</span>
<a name="l01399"></a>01399 <span class="comment"> **   Spread    spread of filled area</span>
<a name="l01400"></a>01400 <span class="comment"> ** Globals: none</span>
<a name="l01401"></a>01401 <span class="comment"> ** Operation: This routine sets Bit in each bit vector whose</span>
<a name="l01402"></a>01402 <span class="comment"> **   bucket lies within the range Center +- Spread.  The fill</span>
<a name="l01403"></a>01403 <span class="comment"> **   is done for a linear dimension, i.e. there is no wrap-around</span>
<a name="l01404"></a>01404 <span class="comment"> **   for this dimension.  It is assumed that Center and Spread</span>
<a name="l01405"></a>01405 <span class="comment"> **   are expressed in a linear coordinate system whose range</span>
<a name="l01406"></a>01406 <span class="comment"> **   is approximately 0 to 1.  Values outside this range will</span>
<a name="l01407"></a>01407 <span class="comment"> **   be clipped.</span>
<a name="l01408"></a>01408 <span class="comment"> ** Return: none</span>
<a name="l01409"></a>01409 <span class="comment"> ** Exceptions: none</span>
<a name="l01410"></a>01410 <span class="comment"> ** History: Tue Oct 16 09:26:54 1990, DSJ, Created.</span>
<a name="l01411"></a>01411 <span class="comment"> */</span>
<a name="l01412"></a>01412   <span class="keywordtype">int</span> i, FirstBucket, LastBucket;
<a name="l01413"></a>01413 
<a name="l01414"></a>01414   FirstBucket = (int) floor ((Center - Spread) * <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>);
<a name="l01415"></a>01415   <span class="keywordflow">if</span> (FirstBucket &lt; 0)
<a name="l01416"></a>01416     FirstBucket = 0;
<a name="l01417"></a>01417 
<a name="l01418"></a>01418   LastBucket = (int) floor ((Center + Spread) * <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>);
<a name="l01419"></a>01419   <span class="keywordflow">if</span> (LastBucket &gt;= <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>)
<a name="l01420"></a>01420     LastBucket = <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a> - 1;
<a name="l01421"></a>01421 
<a name="l01422"></a>01422   <span class="keywordflow">if</span> (debug) <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Linear fill from %d to %d&quot;</span>, FirstBucket, LastBucket);
<a name="l01423"></a>01423   <span class="keywordflow">for</span> (i = FirstBucket; i &lt;= LastBucket; i++)
<a name="l01424"></a>01424     <a class="code" href="bitvec_8h.html#ab02d606cf8dca49ccadb00248bdbafe9">SET_BIT</a> (ParamTable[i], Bit);
<a name="l01425"></a>01425 
<a name="l01426"></a>01426 }                                <span class="comment">/* FillPPLinearBits */</span>
<a name="l01427"></a>01427 
<a name="l01428"></a>01428 
<a name="l01429"></a>01429 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01430"></a>01430 <span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<a name="l01431"></a>01431 <span class="preprocessor"></span><span class="keyword">namespace </span>tesseract {
<a name="l01432"></a><a class="code" href="classtesseract_1_1_classify.html#a76f4e180bcab3a7cd2da75d42b524eba">01432</a> <a class="code" href="matchdefs_8h.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> <a class="code" href="classtesseract_1_1_classify.html#a76f4e180bcab3a7cd2da75d42b524eba">Classify::GetClassToDebug</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *Prompt, <span class="keywordtype">bool</span>* adaptive_on,
<a name="l01433"></a>01433                                    <span class="keywordtype">bool</span>* pretrained_on, <span class="keywordtype">int</span>* shape_id) {
<a name="l01434"></a>01434 <span class="comment">/*</span>
<a name="l01435"></a>01435 <span class="comment"> ** Parameters:</span>
<a name="l01436"></a>01436 <span class="comment"> **   Prompt  prompt to print while waiting for input from window</span>
<a name="l01437"></a>01437 <span class="comment"> ** Globals: none</span>
<a name="l01438"></a>01438 <span class="comment"> ** Operation: This routine prompts the user with Prompt and waits</span>
<a name="l01439"></a>01439 <span class="comment"> **   for the user to enter something in the debug window.</span>
<a name="l01440"></a>01440 <span class="comment"> ** Return: Character entered in the debug window.</span>
<a name="l01441"></a>01441 <span class="comment"> ** Exceptions: none</span>
<a name="l01442"></a>01442 <span class="comment"> ** History: Thu Mar 21 16:55:13 1991, DSJ, Created.</span>
<a name="l01443"></a>01443 <span class="comment"> */</span>
<a name="l01444"></a>01444   <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, Prompt);
<a name="l01445"></a>01445   <a class="code" href="struct_s_v_event.html">SVEvent</a>* ev;
<a name="l01446"></a>01446   <a class="code" href="scrollview_8h.html#a3688a0cf2f95d10a57e095222ccfe9a0">SVEventType</a> ev_type;
<a name="l01447"></a>01447   <span class="keywordtype">int</span> unichar_id = INVALID_UNICHAR_ID;
<a name="l01448"></a>01448   <span class="comment">// Wait until a click or popup event.</span>
<a name="l01449"></a>01449   <span class="keywordflow">do</span> {
<a name="l01450"></a>01450     ev = IntMatchWindow-&gt;<a class="code" href="class_scroll_view.html#a0b820b3fe7a2ce083da0784e9339a1ad">AwaitEvent</a>(<a class="code" href="scrollview_8h.html#a3688a0cf2f95d10a57e095222ccfe9a0a6eec81ed585bda7ff47ec38918cb2a0e">SVET_ANY</a>);
<a name="l01451"></a>01451     ev_type = ev-&gt;<a class="code" href="struct_s_v_event.html#a5bf8585bd1901b9103eb2783f8afe508">type</a>;
<a name="l01452"></a>01452     <span class="keywordflow">if</span> (ev_type == <a class="code" href="scrollview_8h.html#a3688a0cf2f95d10a57e095222ccfe9a0a3752863b11af097f289eb55405df8fa5">SVET_POPUP</a>) {
<a name="l01453"></a>01453       <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="struct_s_v_event.html#ad0db5c2aa893a41b6c6f65b9d3f62318">command_id</a> == <a class="code" href="intproto_8h.html#aaf26255ca73d9de95dc331fda7b25059a911e6b43103ceebb21666a23b77a0f73">IDA_SHAPE_INDEX</a>) {
<a name="l01454"></a>01454         <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_classify.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01455"></a>01455           *shape_id = atoi(ev-&gt;<a class="code" href="struct_s_v_event.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>);
<a name="l01456"></a>01456           *adaptive_on = <span class="keyword">false</span>;
<a name="l01457"></a>01457           *pretrained_on = <span class="keyword">true</span>;
<a name="l01458"></a>01458           <span class="keywordflow">if</span> (*shape_id &gt;= 0 &amp;&amp; *shape_id &lt; shape_table_-&gt;NumShapes()) {
<a name="l01459"></a>01459             <span class="keywordtype">int</span> font_id;
<a name="l01460"></a>01460             <a class="code" href="classtesseract_1_1_classify.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="classtesseract_1_1_shape_table.html#ade3f46eb910d83302b04f9f530277290">GetFirstUnicharAndFont</a>(*shape_id, &amp;unichar_id,
<a name="l01461"></a>01461                                                  &amp;font_id);
<a name="l01462"></a>01462             <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Shape %d, first unichar=%d, font=%d\n&quot;</span>,
<a name="l01463"></a>01463                     *shape_id, unichar_id, font_id);
<a name="l01464"></a>01464             <span class="keywordflow">return</span> unichar_id;
<a name="l01465"></a>01465           }
<a name="l01466"></a>01466           <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Shape index &#39;%s&#39; not found in shape table\n&quot;</span>, ev-&gt;<a class="code" href="struct_s_v_event.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>);
<a name="l01467"></a>01467         } <span class="keywordflow">else</span> {
<a name="l01468"></a>01468           <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;No shape table loaded!\n&quot;</span>);
<a name="l01469"></a>01469         }
<a name="l01470"></a>01470       } <span class="keywordflow">else</span> {
<a name="l01471"></a>01471         <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a9f8861ffb917e7341c821928da5865f0">contains_unichar</a>(ev-&gt;<a class="code" href="struct_s_v_event.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>)) {
<a name="l01472"></a>01472           unichar_id = <a class="code" href="classtesseract_1_1_c_c_util.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(ev-&gt;<a class="code" href="struct_s_v_event.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>);
<a name="l01473"></a>01473           <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="struct_s_v_event.html#ad0db5c2aa893a41b6c6f65b9d3f62318">command_id</a> == <a class="code" href="intproto_8h.html#aaf26255ca73d9de95dc331fda7b25059ad993f1c95a8775a97134029a0637e793">IDA_ADAPTIVE</a>) {
<a name="l01474"></a>01474             *adaptive_on = <span class="keyword">true</span>;
<a name="l01475"></a>01475             *pretrained_on = <span class="keyword">false</span>;
<a name="l01476"></a>01476             *shape_id = -1;
<a name="l01477"></a>01477           } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="struct_s_v_event.html#ad0db5c2aa893a41b6c6f65b9d3f62318">command_id</a> == <a class="code" href="intproto_8h.html#aaf26255ca73d9de95dc331fda7b25059a7e375f63c9aa7b991d070fb71afdf8a2">IDA_STATIC</a>) {
<a name="l01478"></a>01478             *adaptive_on = <span class="keyword">false</span>;
<a name="l01479"></a>01479             *pretrained_on = <span class="keyword">true</span>;
<a name="l01480"></a>01480           } <span class="keywordflow">else</span> {
<a name="l01481"></a>01481             *adaptive_on = <span class="keyword">true</span>;
<a name="l01482"></a>01482             *pretrained_on = <span class="keyword">true</span>;
<a name="l01483"></a>01483           }
<a name="l01484"></a>01484           <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="struct_s_v_event.html#ad0db5c2aa893a41b6c6f65b9d3f62318">command_id</a> == <a class="code" href="intproto_8h.html#aaf26255ca73d9de95dc331fda7b25059ad993f1c95a8775a97134029a0637e793">IDA_ADAPTIVE</a> || <a class="code" href="classtesseract_1_1_classify.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01485"></a>01485             *shape_id = -1;
<a name="l01486"></a>01486             <span class="keywordflow">return</span> unichar_id;
<a name="l01487"></a>01487           }
<a name="l01488"></a>01488           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; <a class="code" href="classtesseract_1_1_classify.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="classtesseract_1_1_shape_table.html#a924919daeadb48539e3d68c65013c173">NumShapes</a>(); ++s) {
<a name="l01489"></a>01489             <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_classify.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="classtesseract_1_1_shape_table.html#a9334161c64756c591ff7d4fca22277f5">GetShape</a>(s).<a class="code" href="classtesseract_1_1_shape.html#a736c652adf59c9e1bdc68756f7e1e7e6">ContainsUnichar</a>(unichar_id)) {
<a name="l01490"></a>01490               <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="classtesseract_1_1_classify.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="classtesseract_1_1_shape_table.html#a87937c115d25036a961833c8b8ab79dd">DebugStr</a>(s).<a class="code" href="class_s_t_r_i_n_g.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>());
<a name="l01491"></a>01491             }
<a name="l01492"></a>01492           }
<a name="l01493"></a>01493         } <span class="keywordflow">else</span> {
<a name="l01494"></a>01494           <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Char class &#39;%s&#39; not found in unicharset&quot;</span>,
<a name="l01495"></a>01495                   ev-&gt;<a class="code" href="struct_s_v_event.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>);
<a name="l01496"></a>01496         }
<a name="l01497"></a>01497       }
<a name="l01498"></a>01498     }
<a name="l01499"></a>01499     <span class="keyword">delete</span> ev;
<a name="l01500"></a>01500   } <span class="keywordflow">while</span> (ev_type != <a class="code" href="scrollview_8h.html#a3688a0cf2f95d10a57e095222ccfe9a0a2afe407abe8c055c45765b85d20e7946">SVET_CLICK</a>);
<a name="l01501"></a>01501   <span class="keywordflow">return</span> 0;
<a name="l01502"></a>01502 }                                <span class="comment">/* GetClassToDebug */</span>
<a name="l01503"></a>01503 
<a name="l01504"></a>01504 }  <span class="comment">// namespace tesseract</span>
<a name="l01505"></a>01505 <span class="preprocessor">#endif</span>
<a name="l01506"></a>01506 <span class="preprocessor"></span>
<a name="l01507"></a>01507 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01508"></a><a class="code" href="intproto_8cpp.html#a09e675cd233359d8763e744e402a3dfa">01508</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a09e675cd233359d8763e744e402a3dfa">GetCPPadsForLevel</a>(<span class="keywordtype">int</span> Level,
<a name="l01509"></a>01509                        <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *EndPad,
<a name="l01510"></a>01510                        <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *SidePad,
<a name="l01511"></a>01511                        <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *AnglePad) {
<a name="l01512"></a>01512 <span class="comment">/*</span>
<a name="l01513"></a>01513 <span class="comment"> ** Parameters:</span>
<a name="l01514"></a>01514 <span class="comment"> **   Level   &quot;tightness&quot; level to return pads for</span>
<a name="l01515"></a>01515 <span class="comment"> **   EndPad    place to put end pad for Level</span>
<a name="l01516"></a>01516 <span class="comment"> **   SidePad   place to put side pad for Level</span>
<a name="l01517"></a>01517 <span class="comment"> **   AnglePad  place to put angle pad for Level</span>
<a name="l01518"></a>01518 <span class="comment"> ** Globals: none</span>
<a name="l01519"></a>01519 <span class="comment"> ** Operation: This routine copies the appropriate global pad variables</span>
<a name="l01520"></a>01520 <span class="comment"> **   into EndPad, SidePad, and AnglePad.  This is a kludge used</span>
<a name="l01521"></a>01521 <span class="comment"> **   to get around the fact that global control variables cannot</span>
<a name="l01522"></a>01522 <span class="comment"> **   be arrays.  If the specified level is illegal, the tightest</span>
<a name="l01523"></a>01523 <span class="comment"> **   possible pads are returned.</span>
<a name="l01524"></a>01524 <span class="comment"> ** Return: none (results are returned in EndPad, SidePad, and AnglePad.</span>
<a name="l01525"></a>01525 <span class="comment"> ** Exceptions: none</span>
<a name="l01526"></a>01526 <span class="comment"> ** History: Thu Feb 14 08:26:49 1991, DSJ, Created.</span>
<a name="l01527"></a>01527 <span class="comment"> */</span>
<a name="l01528"></a>01528   <span class="keywordflow">switch</span> (Level) {
<a name="l01529"></a>01529     <span class="keywordflow">case</span> 0:
<a name="l01530"></a>01530       *EndPad = <a class="code" href="intproto_8cpp.html#a4d8bfc6ebe35b5adb23a0bf3d15eacfd">classify_cp_end_pad_loose</a> * <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ();
<a name="l01531"></a>01531       *SidePad = <a class="code" href="intproto_8cpp.html#a49b7762f3af6b46990015f43ab5fecbb">classify_cp_side_pad_loose</a> * <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ();
<a name="l01532"></a>01532       *AnglePad = <a class="code" href="intproto_8cpp.html#aa4b7c0da311eb727751febb60095f984">classify_cp_angle_pad_loose</a> / 360.0;
<a name="l01533"></a>01533       <span class="keywordflow">break</span>;
<a name="l01534"></a>01534 
<a name="l01535"></a>01535     <span class="keywordflow">case</span> 1:
<a name="l01536"></a>01536       *EndPad = <a class="code" href="intproto_8cpp.html#a493a912edd6934f6b4accd6ee19918fd">classify_cp_end_pad_medium</a> * <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ();
<a name="l01537"></a>01537       *SidePad = <a class="code" href="intproto_8cpp.html#a2b2b146704abdf3b01ddc9055cd80332">classify_cp_side_pad_medium</a> * <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ();
<a name="l01538"></a>01538       *AnglePad = <a class="code" href="intproto_8cpp.html#a22dd906b9f7a351c3f439b2c8d1f0349">classify_cp_angle_pad_medium</a> / 360.0;
<a name="l01539"></a>01539       <span class="keywordflow">break</span>;
<a name="l01540"></a>01540 
<a name="l01541"></a>01541     <span class="keywordflow">case</span> 2:
<a name="l01542"></a>01542       *EndPad = <a class="code" href="intproto_8cpp.html#a03725d3b8b95e80fe1d9fc7aada2245e">classify_cp_end_pad_tight</a> * <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ();
<a name="l01543"></a>01543       *SidePad = <a class="code" href="intproto_8cpp.html#ad71a71bd91b469b21e1b259aa4577045">classify_cp_side_pad_tight</a> * <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ();
<a name="l01544"></a>01544       *AnglePad = <a class="code" href="intproto_8cpp.html#a6ececa7b500f95b5b18df82d1fb75fcb">classify_cp_angle_pad_tight</a> / 360.0;
<a name="l01545"></a>01545       <span class="keywordflow">break</span>;
<a name="l01546"></a>01546 
<a name="l01547"></a>01547     <span class="keywordflow">default</span>:
<a name="l01548"></a>01548       *EndPad = <a class="code" href="intproto_8cpp.html#a03725d3b8b95e80fe1d9fc7aada2245e">classify_cp_end_pad_tight</a> * <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ();
<a name="l01549"></a>01549       *SidePad = <a class="code" href="intproto_8cpp.html#ad71a71bd91b469b21e1b259aa4577045">classify_cp_side_pad_tight</a> * <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a> ();
<a name="l01550"></a>01550       *AnglePad = <a class="code" href="intproto_8cpp.html#a6ececa7b500f95b5b18df82d1fb75fcb">classify_cp_angle_pad_tight</a> / 360.0;
<a name="l01551"></a>01551       <span class="keywordflow">break</span>;
<a name="l01552"></a>01552   }
<a name="l01553"></a>01553   <span class="keywordflow">if</span> (*AnglePad &gt; 0.5)
<a name="l01554"></a>01554     *AnglePad = 0.5;
<a name="l01555"></a>01555 
<a name="l01556"></a>01556 }                                <span class="comment">/* GetCPPadsForLevel */</span>
<a name="l01557"></a>01557 
<a name="l01558"></a>01558 
<a name="l01559"></a>01559 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01560"></a><a class="code" href="intproto_8cpp.html#afa296141a34309a16ea4fdc63904ecea">01560</a> <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> <a class="code" href="intproto_8cpp.html#afa296141a34309a16ea4fdc63904ecea">GetMatchColorFor</a>(<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Evidence) {
<a name="l01561"></a>01561 <span class="comment">/*</span>
<a name="l01562"></a>01562 <span class="comment"> ** Parameters:</span>
<a name="l01563"></a>01563 <span class="comment"> **   Evidence  evidence value to return color for</span>
<a name="l01564"></a>01564 <span class="comment"> ** Globals: none</span>
<a name="l01565"></a>01565 <span class="comment"> ** Operation:</span>
<a name="l01566"></a>01566 <span class="comment"> ** Return: Color which corresponds to specified Evidence value.</span>
<a name="l01567"></a>01567 <span class="comment"> ** Exceptions: none</span>
<a name="l01568"></a>01568 <span class="comment"> ** History: Thu Mar 21 15:24:52 1991, DSJ, Created.</span>
<a name="l01569"></a>01569 <span class="comment"> */</span>
<a name="l01570"></a>01570 
<a name="l01571"></a>01571   assert (Evidence &gt;= 0.0);
<a name="l01572"></a>01572   assert (Evidence &lt;= 1.0);
<a name="l01573"></a>01573 
<a name="l01574"></a>01574   <span class="keywordflow">if</span> (Evidence &gt;= 0.90)
<a name="l01575"></a>01575     <span class="keywordflow">return</span> <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0eab2b208fc9a5e2774f92cf3e768982">ScrollView::WHITE</a>;
<a name="l01576"></a>01576   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Evidence &gt;= 0.75)
<a name="l01577"></a>01577     <span class="keywordflow">return</span> <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a9d8c87be486dead41d198d6b97a22174">ScrollView::GREEN</a>;
<a name="l01578"></a>01578   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Evidence &gt;= 0.50)
<a name="l01579"></a>01579     <span class="keywordflow">return</span> <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>;
<a name="l01580"></a>01580   <span class="keywordflow">else</span>
<a name="l01581"></a>01581     <span class="keywordflow">return</span> <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>;
<a name="l01582"></a>01582 }                                <span class="comment">/* GetMatchColorFor */</span>
<a name="l01583"></a>01583 
<a name="l01584"></a>01584 
<a name="l01585"></a>01585 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01586"></a><a class="code" href="intproto_8cpp.html#a2d8b49f118901da6dbaf5d5b4c8da174">01586</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a2d8b49f118901da6dbaf5d5b4c8da174">GetNextFill</a>(<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">TABLE_FILLER</a> *Filler, <a class="code" href="struct_f_i_l_l___s_p_e_c.html">FILL_SPEC</a> *Fill) {
<a name="l01587"></a>01587 <span class="comment">/*</span>
<a name="l01588"></a>01588 <span class="comment"> ** Parameters:</span>
<a name="l01589"></a>01589 <span class="comment"> **   Filler    filler to get next fill spec from</span>
<a name="l01590"></a>01590 <span class="comment"> **   Fill    place to put spec for next fill</span>
<a name="l01591"></a>01591 <span class="comment"> ** Globals: none</span>
<a name="l01592"></a>01592 <span class="comment"> ** Operation: This routine returns (in Fill) the specification of</span>
<a name="l01593"></a>01593 <span class="comment"> **   the next line to be filled from Filler.  FillerDone() should</span>
<a name="l01594"></a>01594 <span class="comment"> **   always be called before GetNextFill() to ensure that we</span>
<a name="l01595"></a>01595 <span class="comment"> **   do not run past the end of the fill table.</span>
<a name="l01596"></a>01596 <span class="comment"> ** Return: none (results are returned in Fill)</span>
<a name="l01597"></a>01597 <span class="comment"> ** Exceptions: none</span>
<a name="l01598"></a>01598 <span class="comment"> ** History: Tue Feb 19 10:17:42 1991, DSJ, Created.</span>
<a name="l01599"></a>01599 <span class="comment"> */</span>
<a name="l01600"></a>01600   <a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html">FILL_SWITCH</a> *Next;
<a name="l01601"></a>01601 
<a name="l01602"></a>01602   <span class="comment">/* compute the fill assuming no switches will be encountered */</span>
<a name="l01603"></a>01603   Fill-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a00f7ac32738ce5dc0e5e4955a4ab2afb">AngleStart</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a202225304dab5e7f073f38a042c21aad">AngleStart</a>;
<a name="l01604"></a>01604   Fill-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a6a61a16750eab351b8ee14a3b0311afc">AngleEnd</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#afd5410f9221e682cb220f12c0bc16eba">AngleEnd</a>;
<a name="l01605"></a>01605   Fill-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#af6f01125dbc9d3ffcdabff5ffde4cdd5">X</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a>;
<a name="l01606"></a>01606   Fill-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a8e3873d2bbb279c505af2a778f90d5d0">YStart</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">YStart</a> &gt;&gt; 8;
<a name="l01607"></a>01607   Fill-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a1a589401e23c5cfc86eeabd0a6c553ec">YEnd</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#acc616ad7f1906b12e540aebfd0c773a9">YEnd</a> &gt;&gt; 8;
<a name="l01608"></a>01608 
<a name="l01609"></a>01609   <span class="comment">/* update the fill info and the filler for ALL switches at this X value */</span>
<a name="l01610"></a>01610   Next = &amp;(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a652d9c1a4384ff077102496a96ac879e">NextSwitch</a>]);
<a name="l01611"></a>01611   <span class="keywordflow">while</span> (Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a> &gt;= Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a>) {
<a name="l01612"></a>01612     Fill-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#af6f01125dbc9d3ffcdabff5ffde4cdd5">X</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a> = Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a>;
<a name="l01613"></a>01613     <span class="keywordflow">if</span> (Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> == <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a1cf2f15eb85b86e0ec9045e3619a3fa7">StartSwitch</a>) {
<a name="l01614"></a>01614       Fill-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a8e3873d2bbb279c505af2a778f90d5d0">YStart</a> = Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#afbfda1b2e13254c26369bb792b0edbaf">Y</a>;
<a name="l01615"></a>01615       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a> = Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#a6aab71c8cc5076d6299ac5153cc01ad8">Delta</a>;
<a name="l01616"></a>01616       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">YStart</a> = Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aecb5907178fad1760c3ba1911295f0e8">YInit</a>;
<a name="l01617"></a>01617     }
<a name="l01618"></a>01618     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> == <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a76e233dc90515aca43b7487c60694770">EndSwitch</a>) {
<a name="l01619"></a>01619       Fill-&gt;<a class="code" href="struct_f_i_l_l___s_p_e_c.html#a1a589401e23c5cfc86eeabd0a6c553ec">YEnd</a> = Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#afbfda1b2e13254c26369bb792b0edbaf">Y</a>;
<a name="l01620"></a>01620       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a00b48b823899944b51c3c53a65d0f53f">EndDelta</a> = Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#a6aab71c8cc5076d6299ac5153cc01ad8">Delta</a>;
<a name="l01621"></a>01621       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#acc616ad7f1906b12e540aebfd0c773a9">YEnd</a> = Next-&gt;<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aecb5907178fad1760c3ba1911295f0e8">YInit</a>;
<a name="l01622"></a>01622     }
<a name="l01623"></a>01623     <span class="keywordflow">else</span> {                       <span class="comment">/* Type must be LastSwitch */</span>
<a name="l01624"></a>01624       <span class="keywordflow">break</span>;
<a name="l01625"></a>01625     }
<a name="l01626"></a>01626     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a652d9c1a4384ff077102496a96ac879e">NextSwitch</a>++;
<a name="l01627"></a>01627     Next = &amp;(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a652d9c1a4384ff077102496a96ac879e">NextSwitch</a>]);
<a name="l01628"></a>01628   }
<a name="l01629"></a>01629 
<a name="l01630"></a>01630   <span class="comment">/* prepare the filler for the next call to this routine */</span>
<a name="l01631"></a>01631   Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a>++;
<a name="l01632"></a>01632   Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">YStart</a> += Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a>;
<a name="l01633"></a>01633   Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#acc616ad7f1906b12e540aebfd0c773a9">YEnd</a> += Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a00b48b823899944b51c3c53a65d0f53f">EndDelta</a>;
<a name="l01634"></a>01634 
<a name="l01635"></a>01635 }                                <span class="comment">/* GetNextFill */</span>
<a name="l01636"></a>01636 
<a name="l01637"></a>01637 
<a name="l01638"></a>01638 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01654"></a><a class="code" href="intproto_8cpp.html#adb682620c9100c1985218aeb25bbdb9f">01654</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#adb682620c9100c1985218aeb25bbdb9f">InitTableFiller</a> (<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> EndPad, <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> SidePad,
<a name="l01655"></a>01655                       <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> AnglePad, <a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html">PROTO</a> Proto, <a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html">TABLE_FILLER</a> * Filler)
<a name="l01656"></a>01656 <span class="preprocessor">#define XS          X_SHIFT</span>
<a name="l01657"></a>01657 <span class="preprocessor"></span><span class="preprocessor">#define YS          Y_SHIFT</span>
<a name="l01658"></a>01658 <span class="preprocessor"></span><span class="preprocessor">#define AS          ANGLE_SHIFT</span>
<a name="l01659"></a>01659 <span class="preprocessor"></span><span class="preprocessor">#define NB          NUM_CP_BUCKETS</span>
<a name="l01660"></a>01660 <span class="preprocessor"></span>{
<a name="l01661"></a>01661   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Angle;
<a name="l01662"></a>01662   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> X, Y, HalfLength;
<a name="l01663"></a>01663   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Cos, Sin;
<a name="l01664"></a>01664   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> XAdjust, YAdjust;
<a name="l01665"></a>01665   <a class="code" href="struct_f_p_o_i_n_t.html">FPOINT</a> Start, Switch1, Switch2, End;
<a name="l01666"></a>01666   <span class="keywordtype">int</span> S1 = 0;
<a name="l01667"></a>01667   <span class="keywordtype">int</span> S2 = 1;
<a name="l01668"></a>01668 
<a name="l01669"></a>01669   Angle = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a6cc7458f385f9c4673e1ce9a6dc9e80a">Angle</a>;
<a name="l01670"></a>01670   X = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a54dd1cca86a1fd5c9ead8499cba99784">X</a>;
<a name="l01671"></a>01671   Y = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#a8dcd81037c1bc672e97ef7a54306dd93">Y</a>;
<a name="l01672"></a>01672   HalfLength = Proto-&gt;<a class="code" href="struct_p_r_o_t_o___s_t_r_u_c_t.html#aa29d8aaab147327320e2bc94a821aad1">Length</a> / 2.0;
<a name="l01673"></a>01673 
<a name="l01674"></a>01674   Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a202225304dab5e7f073f38a042c21aad">AngleStart</a> = <a class="code" href="intproto_8cpp.html#ae3184eb086a2f8eb3b7b4c42bae5ca22">CircBucketFor</a>(Angle - AnglePad, <a class="code" href="intproto_8cpp.html#aa42a34d8f17233661a75fe8fc1235e49">AS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01675"></a>01675   Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#afd5410f9221e682cb220f12c0bc16eba">AngleEnd</a> = <a class="code" href="intproto_8cpp.html#ae3184eb086a2f8eb3b7b4c42bae5ca22">CircBucketFor</a>(Angle + AnglePad, <a class="code" href="intproto_8cpp.html#aa42a34d8f17233661a75fe8fc1235e49">AS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01676"></a>01676   Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a652d9c1a4384ff077102496a96ac879e">NextSwitch</a> = 0;
<a name="l01677"></a>01677 
<a name="l01678"></a>01678   <span class="keywordflow">if</span> (fabs (Angle - 0.0) &lt; <a class="code" href="intproto_8cpp.html#a83959744dc05db71c3e5ec880f31eb7a">HV_TOLERANCE</a> || fabs (Angle - 0.5) &lt; <a class="code" href="intproto_8cpp.html#a83959744dc05db71c3e5ec880f31eb7a">HV_TOLERANCE</a>) {
<a name="l01679"></a>01679     <span class="comment">/* horizontal proto - handle as special case */</span>
<a name="l01680"></a>01680     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a> = <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(X - HalfLength - EndPad, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01681"></a>01681     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">YStart</a> = <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(Y - SidePad, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01682"></a>01682     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#acc616ad7f1906b12e540aebfd0c773a9">YEnd</a> = <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(Y + SidePad, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01683"></a>01683     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a> = 0;
<a name="l01684"></a>01684     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a00b48b823899944b51c3c53a65d0f53f">EndDelta</a> = 0;
<a name="l01685"></a>01685     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[0].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> = <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82adf8537429629d6c042ac3481208264e2">LastSwitch</a>;
<a name="l01686"></a>01686     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[0].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> = <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(X + HalfLength + EndPad, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01687"></a>01687   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fabs(Angle - 0.25) &lt; <a class="code" href="intproto_8cpp.html#a83959744dc05db71c3e5ec880f31eb7a">HV_TOLERANCE</a> ||
<a name="l01688"></a>01688            fabs(Angle - 0.75) &lt; <a class="code" href="intproto_8cpp.html#a83959744dc05db71c3e5ec880f31eb7a">HV_TOLERANCE</a>) {
<a name="l01689"></a>01689     <span class="comment">/* vertical proto - handle as special case */</span>
<a name="l01690"></a>01690     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a> = <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(X - SidePad, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01691"></a>01691     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">YStart</a> = <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(Y - HalfLength - EndPad, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01692"></a>01692     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#acc616ad7f1906b12e540aebfd0c773a9">YEnd</a> = <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(Y + HalfLength + EndPad, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01693"></a>01693     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a> = 0;
<a name="l01694"></a>01694     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a00b48b823899944b51c3c53a65d0f53f">EndDelta</a> = 0;
<a name="l01695"></a>01695     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[0].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> = <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82adf8537429629d6c042ac3481208264e2">LastSwitch</a>;
<a name="l01696"></a>01696     Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[0].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> = <a class="code" href="intproto_8cpp.html#aae1e369081aff0da8ca513a261973598">BucketFor</a>(X + SidePad, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01697"></a>01697   } <span class="keywordflow">else</span> {
<a name="l01698"></a>01698     <span class="comment">/* diagonal proto */</span>
<a name="l01699"></a>01699 
<a name="l01700"></a>01700     <span class="keywordflow">if</span> ((Angle &gt; 0.0 &amp;&amp; Angle &lt; 0.25) || (Angle &gt; 0.5 &amp;&amp; Angle &lt; 0.75)) {
<a name="l01701"></a>01701       <span class="comment">/* rising diagonal proto */</span>
<a name="l01702"></a>01702       Angle *= 2.0 * <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>;
<a name="l01703"></a>01703       Cos = fabs(cos(Angle));
<a name="l01704"></a>01704       Sin = fabs(sin(Angle));
<a name="l01705"></a>01705 
<a name="l01706"></a>01706       <span class="comment">/* compute the positions of the corners of the acceptance region */</span>
<a name="l01707"></a>01707       Start.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> = X - (HalfLength + EndPad) * Cos - SidePad * Sin;
<a name="l01708"></a>01708       Start.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> = Y - (HalfLength + EndPad) * Sin + SidePad * Cos;
<a name="l01709"></a>01709       End.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> = 2.0 * X - Start.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>;
<a name="l01710"></a>01710       End.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> = 2.0 * Y - Start.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a>;
<a name="l01711"></a>01711       Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> = X - (HalfLength + EndPad) * Cos + SidePad * Sin;
<a name="l01712"></a>01712       Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> = Y - (HalfLength + EndPad) * Sin - SidePad * Cos;
<a name="l01713"></a>01713       Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> = 2.0 * X - Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>;
<a name="l01714"></a>01714       Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> = 2.0 * Y - Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a>;
<a name="l01715"></a>01715 
<a name="l01716"></a>01716       <span class="keywordflow">if</span> (Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> &gt; Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>) {
<a name="l01717"></a>01717         S1 = 1;
<a name="l01718"></a>01718         S2 = 0;
<a name="l01719"></a>01719       }
<a name="l01720"></a>01720 
<a name="l01721"></a>01721       <span class="comment">/* translate into bucket positions and deltas */</span>
<a name="l01722"></a>01722       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Start.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01723"></a>01723       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a> = -(<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) ((Cos / Sin) * 256);
<a name="l01724"></a>01724       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a00b48b823899944b51c3c53a65d0f53f">EndDelta</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) ((Sin / Cos) * 256);
<a name="l01725"></a>01725 
<a name="l01726"></a>01726       XAdjust = <a class="code" href="intproto_8cpp.html#ac65eab1c9120551f8d4706d4dfaf0815">BucketEnd</a>(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>) - Start.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>;
<a name="l01727"></a>01727       YAdjust = XAdjust * Cos / Sin;
<a name="l01728"></a>01728       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">YStart</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Start.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> - YAdjust, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01729"></a>01729       YAdjust = XAdjust * Sin / Cos;
<a name="l01730"></a>01730       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#acc616ad7f1906b12e540aebfd0c773a9">YEnd</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Start.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> + YAdjust, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01731"></a>01731 
<a name="l01732"></a>01732       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> = <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a1cf2f15eb85b86e0ec9045e3619a3fa7">StartSwitch</a>;
<a name="l01733"></a>01733       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01734"></a>01734       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#afbfda1b2e13254c26369bb792b0edbaf">Y</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a>, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01735"></a>01735       XAdjust = Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> - <a class="code" href="intproto_8cpp.html#ae613a28d73bf2a76687f554e439a1c4c">BucketStart</a>(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01736"></a>01736       YAdjust = XAdjust * Sin / Cos;
<a name="l01737"></a>01737       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aecb5907178fad1760c3ba1911295f0e8">YInit</a> =
<a name="l01738"></a>01738         (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> - YAdjust, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01739"></a>01739       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#a6aab71c8cc5076d6299ac5153cc01ad8">Delta</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a00b48b823899944b51c3c53a65d0f53f">EndDelta</a>;
<a name="l01740"></a>01740 
<a name="l01741"></a>01741       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> = <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a76e233dc90515aca43b7487c60694770">EndSwitch</a>;
<a name="l01742"></a>01742       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01743"></a>01743       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#afbfda1b2e13254c26369bb792b0edbaf">Y</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a>, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01744"></a>01744       XAdjust = Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> - <a class="code" href="intproto_8cpp.html#ae613a28d73bf2a76687f554e439a1c4c">BucketStart</a>(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01745"></a>01745       YAdjust = XAdjust * Cos / Sin;
<a name="l01746"></a>01746       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aecb5907178fad1760c3ba1911295f0e8">YInit</a> =
<a name="l01747"></a>01747         (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> + YAdjust, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01748"></a>01748       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#a6aab71c8cc5076d6299ac5153cc01ad8">Delta</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a>;
<a name="l01749"></a>01749 
<a name="l01750"></a>01750       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> = <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82adf8537429629d6c042ac3481208264e2">LastSwitch</a>;
<a name="l01751"></a>01751       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>)<a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(End.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01752"></a>01752     } <span class="keywordflow">else</span> {
<a name="l01753"></a>01753       <span class="comment">/* falling diagonal proto */</span>
<a name="l01754"></a>01754       Angle *= 2.0 * <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>;
<a name="l01755"></a>01755       Cos = fabs(cos(Angle));
<a name="l01756"></a>01756       Sin = fabs(sin(Angle));
<a name="l01757"></a>01757 
<a name="l01758"></a>01758       <span class="comment">/* compute the positions of the corners of the acceptance region */</span>
<a name="l01759"></a>01759       Start.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> = X - (HalfLength + EndPad) * Cos - SidePad * Sin;
<a name="l01760"></a>01760       Start.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> = Y + (HalfLength + EndPad) * Sin - SidePad * Cos;
<a name="l01761"></a>01761       End.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> = 2.0 * X - Start.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>;
<a name="l01762"></a>01762       End.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> = 2.0 * Y - Start.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a>;
<a name="l01763"></a>01763       Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> = X - (HalfLength + EndPad) * Cos + SidePad * Sin;
<a name="l01764"></a>01764       Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> = Y + (HalfLength + EndPad) * Sin + SidePad * Cos;
<a name="l01765"></a>01765       Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> = 2.0 * X - Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>;
<a name="l01766"></a>01766       Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> = 2.0 * Y - Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a>;
<a name="l01767"></a>01767 
<a name="l01768"></a>01768       <span class="keywordflow">if</span> (Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> &gt; Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>) {
<a name="l01769"></a>01769         S1 = 1;
<a name="l01770"></a>01770         S2 = 0;
<a name="l01771"></a>01771       }
<a name="l01772"></a>01772 
<a name="l01773"></a>01773       <span class="comment">/* translate into bucket positions and deltas */</span>
<a name="l01774"></a>01774       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Start.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01775"></a>01775       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a> = -(<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) ((Sin / Cos) * 256);
<a name="l01776"></a>01776       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a00b48b823899944b51c3c53a65d0f53f">EndDelta</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) ((Cos / Sin) * 256);
<a name="l01777"></a>01777 
<a name="l01778"></a>01778       XAdjust = <a class="code" href="intproto_8cpp.html#ac65eab1c9120551f8d4706d4dfaf0815">BucketEnd</a>(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a42f3f28b9f3741d73b0839326cc0eb91">X</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>) - Start.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>;
<a name="l01779"></a>01779       YAdjust = XAdjust * Sin / Cos;
<a name="l01780"></a>01780       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a8e7cfadab795302ac936c0904338eaaa">YStart</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Start.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> - YAdjust, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01781"></a>01781       YAdjust = XAdjust * Cos / Sin;
<a name="l01782"></a>01782       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#acc616ad7f1906b12e540aebfd0c773a9">YEnd</a> = (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Start.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> + YAdjust, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01783"></a>01783 
<a name="l01784"></a>01784       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> = <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a76e233dc90515aca43b7487c60694770">EndSwitch</a>;
<a name="l01785"></a>01785       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01786"></a>01786       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#afbfda1b2e13254c26369bb792b0edbaf">Y</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a>, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01787"></a>01787       XAdjust = Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> - <a class="code" href="intproto_8cpp.html#ae613a28d73bf2a76687f554e439a1c4c">BucketStart</a>(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01788"></a>01788       YAdjust = XAdjust * Sin / Cos;
<a name="l01789"></a>01789       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aecb5907178fad1760c3ba1911295f0e8">YInit</a> =
<a name="l01790"></a>01790         (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch1.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> + YAdjust, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01791"></a>01791       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S1].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#a6aab71c8cc5076d6299ac5153cc01ad8">Delta</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#ae6ec6ee3678f48c661437d812e5014e4">StartDelta</a>;
<a name="l01792"></a>01792 
<a name="l01793"></a>01793       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> = <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82a1cf2f15eb85b86e0ec9045e3619a3fa7">StartSwitch</a>;
<a name="l01794"></a>01794       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01795"></a>01795       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#afbfda1b2e13254c26369bb792b0edbaf">Y</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a>, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01796"></a>01796       XAdjust = Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a> - <a class="code" href="intproto_8cpp.html#ae613a28d73bf2a76687f554e439a1c4c">BucketStart</a>(Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01797"></a>01797       YAdjust = XAdjust * Cos / Sin;
<a name="l01798"></a>01798       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aecb5907178fad1760c3ba1911295f0e8">YInit</a> =
<a name="l01799"></a>01799         (<a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(Switch2.<a class="code" href="struct_f_p_o_i_n_t.html#a119bd5a9f0b29cabb3987fd94c5d4ca8">y</a> - YAdjust, <a class="code" href="intproto_8cpp.html#acb9aabf37c36ded0b95b83fcab70bdad">YS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a> * 256);
<a name="l01800"></a>01800       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[S2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#a6aab71c8cc5076d6299ac5153cc01ad8">Delta</a> = Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#a00b48b823899944b51c3c53a65d0f53f">EndDelta</a>;
<a name="l01801"></a>01801 
<a name="l01802"></a>01802       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#ab50007d49ca8aa85354f1cbdf186c52b">Type</a> = <a class="code" href="intproto_8cpp.html#a41273fdeb63230b3a5c360d8c7c11b82adf8537429629d6c042ac3481208264e2">LastSwitch</a>;
<a name="l01803"></a>01803       Filler-&gt;<a class="code" href="struct_t_a_b_l_e___f_i_l_l_e_r.html#aa9c4aa7eda49284aa105296e138ff379">Switch</a>[2].<a class="code" href="struct_f_i_l_l___s_w_i_t_c_h.html#aea6de45e16cbf7f43d1de6cf549bcc5b">X</a> = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) <a class="code" href="intproto_8cpp.html#a8e18e2c0fb86ce36d3a3d1b10236cbaa">MapParam</a>(End.<a class="code" href="struct_f_p_o_i_n_t.html#a96c1f94ff16244b06cb59b79152dc8ae">x</a>, <a class="code" href="intproto_8cpp.html#a44ee47e8957e8528ae8249a7e5559bca">XS</a>, <a class="code" href="intproto_8cpp.html#a58e95dc1eb9d6ce16f515e77beeadd58">NB</a>);
<a name="l01804"></a>01804     }
<a name="l01805"></a>01805   }
<a name="l01806"></a>01806 }                                <span class="comment">/* InitTableFiller */</span>
<a name="l01807"></a>01807 
<a name="l01808"></a>01808 
<a name="l01809"></a>01809 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01810"></a>01810 <span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<a name="l01811"></a><a class="code" href="intproto_8h.html#a83c43ef1a01f3be45cbf675da04c3930">01811</a> <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a83c43ef1a01f3be45cbf675da04c3930">RenderIntFeature</a>(<a class="code" href="class_scroll_view.html">ScrollView</a> *window, <span class="keyword">const</span> <a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html">INT_FEATURE_STRUCT</a>* Feature,
<a name="l01812"></a>01812                       <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color) {
<a name="l01813"></a>01813 <span class="comment">/*</span>
<a name="l01814"></a>01814 <span class="comment"> ** Parameters:</span>
<a name="l01815"></a>01815 <span class="comment"> **   ShapeList shape list to add feature rendering to</span>
<a name="l01816"></a>01816 <span class="comment"> **   Feature   feature to be rendered</span>
<a name="l01817"></a>01817 <span class="comment"> **   Color   color to use for feature rendering</span>
<a name="l01818"></a>01818 <span class="comment"> ** Globals: none</span>
<a name="l01819"></a>01819 <span class="comment"> ** Operation: This routine renders the specified feature into ShapeList.</span>
<a name="l01820"></a>01820 <span class="comment"> ** Return: New shape list with rendering of Feature added.</span>
<a name="l01821"></a>01821 <span class="comment"> ** Exceptions: none</span>
<a name="l01822"></a>01822 <span class="comment"> ** History: Thu Mar 21 14:57:41 1991, DSJ, Created.</span>
<a name="l01823"></a>01823 <span class="comment"> */</span>
<a name="l01824"></a>01824   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> X, Y, Dx, Dy, Length;
<a name="l01825"></a>01825 
<a name="l01826"></a>01826   window-&gt;<a class="code" href="class_scroll_view.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);
<a name="l01827"></a>01827   assert(Feature != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01828"></a>01828   assert(color != 0);
<a name="l01829"></a>01829 
<a name="l01830"></a>01830   X = Feature-&gt;<a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html#a6b250df12a9b06b5ed0c1a7c403f0275">X</a>;
<a name="l01831"></a>01831   Y = Feature-&gt;<a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html#a09931683890fb52d22ec6c75048a2bce">Y</a>;
<a name="l01832"></a>01832   Length = <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a>() * 0.7 * <a class="code" href="intproto_8h.html#a5a763027f420d44c110f0887f297259c">INT_CHAR_NORM_RANGE</a>;
<a name="l01833"></a>01833   <span class="comment">// The -PI has no significant effect here, but the value of Theta is computed</span>
<a name="l01834"></a>01834   <span class="comment">// using BinaryAnglePlusPi in intfx.cpp.</span>
<a name="l01835"></a>01835   Dx = (Length / 2.0) * cos((Feature-&gt;<a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html#af4a2ea6a7d9a82cba06f6ca9a126461b">Theta</a> / 256.0) * 2.0 * <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>);
<a name="l01836"></a>01836   Dy = (Length / 2.0) * sin((Feature-&gt;<a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html#af4a2ea6a7d9a82cba06f6ca9a126461b">Theta</a> / 256.0) * 2.0 * <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>);
<a name="l01837"></a>01837 
<a name="l01838"></a>01838   window-&gt;<a class="code" href="class_scroll_view.html#a730b182e350dfe37b0986d7f0591fee5">SetCursor</a>(X, Y);
<a name="l01839"></a>01839   window-&gt;<a class="code" href="class_scroll_view.html#a101de80a4722fe821969f61f6e7303a6">DrawTo</a>(X + Dx, Y + Dy);
<a name="l01840"></a>01840 }                                <span class="comment">/* RenderIntFeature */</span>
<a name="l01841"></a>01841 
<a name="l01842"></a>01842 
<a name="l01843"></a>01843 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01860"></a><a class="code" href="intproto_8cpp.html#a67948f52800e3964340ae96c2261c018">01860</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a67948f52800e3964340ae96c2261c018">RenderIntProto</a>(<a class="code" href="class_scroll_view.html">ScrollView</a> *window,
<a name="l01861"></a>01861                     <a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html">INT_CLASS</a> Class,
<a name="l01862"></a>01862                     <a class="code" href="matchdefs_8h.html#ac80a5d84c2805bfd10ac129d949f8b80">PROTO_ID</a> ProtoId,
<a name="l01863"></a>01863                     <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color) {
<a name="l01864"></a>01864   <a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html">PROTO_SET</a> ProtoSet;
<a name="l01865"></a>01865   <a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html">INT_PROTO</a> Proto;
<a name="l01866"></a>01866   <span class="keywordtype">int</span> ProtoSetIndex;
<a name="l01867"></a>01867   <span class="keywordtype">int</span> ProtoWordIndex;
<a name="l01868"></a>01868   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Length;
<a name="l01869"></a>01869   <span class="keywordtype">int</span> Xmin, Xmax, Ymin, Ymax;
<a name="l01870"></a>01870   <a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> X, Y, Dx, Dy;
<a name="l01871"></a>01871   <a class="code" href="host_8h.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ProtoMask;
<a name="l01872"></a>01872   <span class="keywordtype">int</span> Bucket;
<a name="l01873"></a>01873 
<a name="l01874"></a>01874   assert(ProtoId &gt;= 0);
<a name="l01875"></a>01875   assert(Class != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01876"></a>01876   assert(ProtoId &lt; Class-&gt;NumProtos);
<a name="l01877"></a>01877   assert(color != 0);
<a name="l01878"></a>01878   window-&gt;<a class="code" href="class_scroll_view.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);
<a name="l01879"></a>01879 
<a name="l01880"></a>01880   ProtoSet = Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[<a class="code" href="intproto_8h.html#aa370872941b0c4f6b9e771a17a536bfd">SetForProto</a>(ProtoId)];
<a name="l01881"></a>01881   ProtoSetIndex = <a class="code" href="intproto_8h.html#a40fe618eeb7d652b8cf2dce9f31a2d22">IndexForProto</a>(ProtoId);
<a name="l01882"></a>01882   Proto = &amp;(ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[ProtoSetIndex]);
<a name="l01883"></a>01883   Length = (Class-&gt;<a class="code" href="struct_i_n_t___c_l_a_s_s___s_t_r_u_c_t.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>[ProtoId] *
<a name="l01884"></a>01884     <a class="code" href="picofeat_8h.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a>() * <a class="code" href="intproto_8h.html#a5a763027f420d44c110f0887f297259c">INT_CHAR_NORM_RANGE</a>);
<a name="l01885"></a>01885   ProtoMask = <a class="code" href="intproto_8h.html#aa5e907e17b721089448946166789f7e6">PPrunerMaskFor</a>(ProtoId);
<a name="l01886"></a>01886   ProtoWordIndex = <a class="code" href="intproto_8h.html#a0855a639976fdb01523615955dd23e03">PPrunerWordIndexFor</a>(ProtoId);
<a name="l01887"></a>01887 
<a name="l01888"></a>01888   <span class="comment">// find the x and y extent of the proto from the proto pruning table</span>
<a name="l01889"></a>01889   Xmin = Ymin = <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>;
<a name="l01890"></a>01890   Xmax = Ymax = 0;
<a name="l01891"></a>01891   <span class="keywordflow">for</span> (Bucket = 0; Bucket &lt; <a class="code" href="intproto_8h.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>; Bucket++) {
<a name="l01892"></a>01892     <span class="keywordflow">if</span> (ProtoMask &amp; ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>[<a class="code" href="intproto_8h.html#af01cd9af1d00fa943dd1edfd19882833">PRUNER_X</a>][Bucket][ProtoWordIndex]) {
<a name="l01893"></a>01893       <a class="code" href="helpers_8h.html#a6eb00eb9bc5ed195953f334971c462ae">UpdateRange</a>(Bucket, &amp;Xmin, &amp;Xmax);
<a name="l01894"></a>01894     }
<a name="l01895"></a>01895 
<a name="l01896"></a>01896     <span class="keywordflow">if</span> (ProtoMask &amp; ProtoSet-&gt;<a class="code" href="struct_p_r_o_t_o___s_e_t___s_t_r_u_c_t.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>[<a class="code" href="intproto_8h.html#a7c72f47e4c4a455c9ac0d3855c1aeff2">PRUNER_Y</a>][Bucket][ProtoWordIndex]) {
<a name="l01897"></a>01897       <a class="code" href="helpers_8h.html#a6eb00eb9bc5ed195953f334971c462ae">UpdateRange</a>(Bucket, &amp;Ymin, &amp;Ymax);
<a name="l01898"></a>01898     }
<a name="l01899"></a>01899   }
<a name="l01900"></a>01900   X = (Xmin + Xmax + 1) / 2.0 * <a class="code" href="intproto_8cpp.html#ad0a217ed135414378d65558a77b9b2ba">PROTO_PRUNER_SCALE</a>;
<a name="l01901"></a>01901   Y = (Ymin + Ymax + 1) / 2.0 * <a class="code" href="intproto_8cpp.html#ad0a217ed135414378d65558a77b9b2ba">PROTO_PRUNER_SCALE</a>;
<a name="l01902"></a>01902   <span class="comment">// The -PI has no significant effect here, but the value of Theta is computed</span>
<a name="l01903"></a>01903   <span class="comment">// using BinaryAnglePlusPi in intfx.cpp.</span>
<a name="l01904"></a>01904   Dx = (Length / 2.0) * cos((Proto-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a3595512379d43a12f92efef287db17d9">Angle</a> / 256.0) * 2.0 * <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>);
<a name="l01905"></a>01905   Dy = (Length / 2.0) * sin((Proto-&gt;<a class="code" href="struct_i_n_t___p_r_o_t_o___s_t_r_u_c_t.html#a3595512379d43a12f92efef287db17d9">Angle</a> / 256.0) * 2.0 * <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code" href="const_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>);
<a name="l01906"></a>01906 
<a name="l01907"></a>01907   window-&gt;<a class="code" href="class_scroll_view.html#a730b182e350dfe37b0986d7f0591fee5">SetCursor</a>(X - Dx, Y - Dy);
<a name="l01908"></a>01908   window-&gt;<a class="code" href="class_scroll_view.html#a101de80a4722fe821969f61f6e7303a6">DrawTo</a>(X + Dx, Y + Dy);
<a name="l01909"></a>01909 }                                <span class="comment">/* RenderIntProto */</span>
<a name="l01910"></a>01910 <span class="preprocessor">#endif</span>
<a name="l01911"></a>01911 <span class="preprocessor"></span>
<a name="l01912"></a>01912 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01928"></a><a class="code" href="intproto_8cpp.html#a12134f53d5a57bb1dc79acf2711aae5d">01928</a> <span class="keywordtype">int</span> <a class="code" href="intproto_8cpp.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(<a class="code" href="host_8h.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Param, <span class="keywordtype">int</span> Min, <span class="keywordtype">int</span> Max, <span class="keywordtype">char</span> *Id) {
<a name="l01929"></a>01929   <span class="keywordflow">if</span> (Param &lt; Min) {
<a name="l01930"></a>01930     <span class="keywordflow">if</span> (Id)
<a name="l01931"></a>01931       <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Warning: Param %s truncated from %f to %d!\n&quot;</span>,
<a name="l01932"></a>01932               Id, Param, Min);
<a name="l01933"></a>01933     Param = Min;
<a name="l01934"></a>01934   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Param &gt; Max) {
<a name="l01935"></a>01935     <span class="keywordflow">if</span> (Id)
<a name="l01936"></a>01936       <a class="code" href="callcpp_8cpp.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Warning: Param %s truncated from %f to %d!\n&quot;</span>,
<a name="l01937"></a>01937               Id, Param, Max);
<a name="l01938"></a>01938     Param = Max;
<a name="l01939"></a>01939   }
<a name="l01940"></a>01940   <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(floor(Param));
<a name="l01941"></a>01941 }                                <span class="comment">/* TruncateParam */</span>
<a name="l01942"></a>01942 
<a name="l01943"></a>01943 
<a name="l01944"></a>01944 <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01945"></a>01945 <span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<a name="l01946"></a>01946 <span class="preprocessor"></span>
<a name="l01950"></a><a class="code" href="intproto_8h.html#a142586ad15312463838c8202dd88d9b0">01950</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a142586ad15312463838c8202dd88d9b0">InitIntMatchWindowIfReqd</a>() {
<a name="l01951"></a>01951   <span class="keywordflow">if</span> (IntMatchWindow == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01952"></a>01952     IntMatchWindow = <a class="code" href="intproto_8cpp.html#aa420561fce74b76450727980adea72b1">CreateFeatureSpaceWindow</a>(<span class="stringliteral">&quot;IntMatchWindow&quot;</span>, 50, 200);
<a name="l01953"></a>01953     <a class="code" href="class_s_v_menu_node.html">SVMenuNode</a>* popup_menu = <span class="keyword">new</span> <a class="code" href="class_s_v_menu_node.html">SVMenuNode</a>();
<a name="l01954"></a>01954 
<a name="l01955"></a>01955     popup_menu-&gt;<a class="code" href="class_s_v_menu_node.html#a2d119f4867dcb3015103eabb6cd7386d">AddChild</a>(<span class="stringliteral">&quot;Debug Adapted classes&quot;</span>, <a class="code" href="intproto_8h.html#aaf26255ca73d9de95dc331fda7b25059ad993f1c95a8775a97134029a0637e793">IDA_ADAPTIVE</a>,
<a name="l01956"></a>01956                          <span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;Class to debug&quot;</span>);
<a name="l01957"></a>01957     popup_menu-&gt;<a class="code" href="class_s_v_menu_node.html#a2d119f4867dcb3015103eabb6cd7386d">AddChild</a>(<span class="stringliteral">&quot;Debug Static classes&quot;</span>, <a class="code" href="intproto_8h.html#aaf26255ca73d9de95dc331fda7b25059a7e375f63c9aa7b991d070fb71afdf8a2">IDA_STATIC</a>,
<a name="l01958"></a>01958                          <span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;Class to debug&quot;</span>);
<a name="l01959"></a>01959     popup_menu-&gt;<a class="code" href="class_s_v_menu_node.html#a2d119f4867dcb3015103eabb6cd7386d">AddChild</a>(<span class="stringliteral">&quot;Debug Both&quot;</span>, <a class="code" href="intproto_8h.html#aaf26255ca73d9de95dc331fda7b25059a60cac146ffaba75a610163e6fd0ce17a">IDA_BOTH</a>,
<a name="l01960"></a>01960                          <span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;Class to debug&quot;</span>);
<a name="l01961"></a>01961     popup_menu-&gt;<a class="code" href="class_s_v_menu_node.html#a2d119f4867dcb3015103eabb6cd7386d">AddChild</a>(<span class="stringliteral">&quot;Debug Shape Index&quot;</span>, <a class="code" href="intproto_8h.html#aaf26255ca73d9de95dc331fda7b25059a911e6b43103ceebb21666a23b77a0f73">IDA_SHAPE_INDEX</a>,
<a name="l01962"></a>01962                          <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;Index to debug&quot;</span>);
<a name="l01963"></a>01963     popup_menu-&gt;<a class="code" href="class_s_v_menu_node.html#a693800de6b590b47e81213fef7de180a">BuildMenu</a>(IntMatchWindow, <span class="keyword">false</span>);
<a name="l01964"></a>01964   }
<a name="l01965"></a>01965 }
<a name="l01966"></a>01966 
<a name="l01971"></a><a class="code" href="intproto_8h.html#ad0d97c266889ef7d0dd78885b34b89d8">01971</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#ad0d97c266889ef7d0dd78885b34b89d8">InitProtoDisplayWindowIfReqd</a>() {
<a name="l01972"></a>01972   <span class="keywordflow">if</span> (ProtoDisplayWindow == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01973"></a>01973     ProtoDisplayWindow = <a class="code" href="intproto_8cpp.html#aa420561fce74b76450727980adea72b1">CreateFeatureSpaceWindow</a>(<span class="stringliteral">&quot;ProtoDisplayWindow&quot;</span>,
<a name="l01974"></a>01974                                                   550, 200);
<a name="l01975"></a>01975  }
<a name="l01976"></a>01976 }
<a name="l01977"></a>01977 
<a name="l01982"></a><a class="code" href="intproto_8h.html#a4879721f850252687fa5230fd661bc91">01982</a> <span class="keywordtype">void</span> <a class="code" href="intproto_8cpp.html#a4879721f850252687fa5230fd661bc91">InitFeatureDisplayWindowIfReqd</a>() {
<a name="l01983"></a>01983   <span class="keywordflow">if</span> (FeatureDisplayWindow == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01984"></a>01984     FeatureDisplayWindow = <a class="code" href="intproto_8cpp.html#aa420561fce74b76450727980adea72b1">CreateFeatureSpaceWindow</a>(<span class="stringliteral">&quot;FeatureDisplayWindow&quot;</span>,
<a name="l01985"></a>01985                                                     50, 700);
<a name="l01986"></a>01986   }
<a name="l01987"></a>01987 }
<a name="l01988"></a>01988 
<a name="l01989"></a>01989 <span class="comment">// Creates a window of the appropriate size for displaying elements</span>
<a name="l01990"></a>01990 <span class="comment">// in feature space.</span>
<a name="l01991"></a><a class="code" href="intproto_8h.html#aa420561fce74b76450727980adea72b1">01991</a> <a class="code" href="class_scroll_view.html">ScrollView</a>* <a class="code" href="intproto_8cpp.html#aa420561fce74b76450727980adea72b1">CreateFeatureSpaceWindow</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">int</span> xpos, <span class="keywordtype">int</span> ypos) {
<a name="l01992"></a>01992   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_scroll_view.html">ScrollView</a>(name, xpos, ypos, 520, 520, 260, 260, <span class="keyword">true</span>);
<a name="l01993"></a>01993 }
<a name="l01994"></a>01994 <span class="preprocessor">#endif  // GRAPHICS_DISABLED</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="intproto_8cpp.html">intproto.cpp</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Wed Mar 28 2012 22:38:36 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
