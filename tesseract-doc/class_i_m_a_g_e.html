<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tesseract: IMAGE Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_i_m_a_g_e.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">IMAGE Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="IMAGE" -->
<p><code>#include &lt;<a class="el" href="img_8h_source.html">img.h</a>&gt;</code></p>

<p><a href="class_i_m_a_g_e-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a4aebf0b0a3f7cf571059aa21fad3d1b2">IMAGE</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a3017bbf96700db6038915b84eb0f1344">~IMAGE</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#ab86d677f6dc940a04304c4108f17adfc">operator=</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> &amp;source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#aa827c8e72da25720295706017eda3d81">create</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bits_per_pixel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a406454ec5c9e065f6404b909d4ba19a7">capture</a> (<a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixels, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bits_per_pixel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a5f56124be0950f339d9060a7c7c4cdd7">destroy</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a940ac84dbf421b48d24602bd2df1bda3">get_bps</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a8925866607e7282397e798856c0b1ebc">white_high</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#afa7970786b9c8a5e93b5496b5a3ae71a">get_white_level</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a0e46e3e10daf7ee5fa7ddb15c1b38f7a">get_res</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#aadf539e1a16119867b48ba5128edd056">set_res</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> resolution)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a57b00c9b6bd4c915175f546404ddfb66">get_buffer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width, <a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *linebuf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width, <a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *linebuf, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> margins)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#ab528771e88deece5a5d153c619fc3593">get_column</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> height, <a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *linebuf, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> margins)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a97634582d0c01e510827711338a50425">fast_put_line</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width, <a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *linebuf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width, <a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *linebuf, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> margins)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a96f1d5eb41ec389c298ca7c386a49c41">put_column</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> height, <a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *linebuf, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> margins)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Pix *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a93a54ced5f2ee393fd3f634e31bbd145">ToPix</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#aac99e9fed5c4bc572e2415971e34591e">FromPix</a> (const Pix *src_pix)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a1eb61556c5959586a78a38e5faae1996">convolver</a> (<a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_width, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_height, void(*convolve)(<a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **pixels, <a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bytespp, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_wd, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_ht, <a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> ret_white_value, <a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *result))</td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#adf532c19ebf5ba5ec70086035b874dbc">copy_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#ad524b64ac508eee1576a4787e1f5f457">enlarge_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#ace8abc71ce7c0bb82ff54377abf45e66">fast_reduce_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DLLSYM void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_m_a_g_e.html#a987ea5c1e5f652311b99892283211a79">reduce_sub_image</a> (<a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *source, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *dest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>encapsulated image </p>

<p>Definition at line <a class="el" href="img_8h_source.html#l00051">51</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4aebf0b0a3f7cf571059aa21fad3d1b2"></a><!-- doxytag: member="IMAGE::IMAGE" ref="a4aebf0b0a3f7cf571059aa21fad3d1b2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IMAGE::IMAGE </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00072">72</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">             {  <span class="comment">//construct an image</span>
  bpp = 0;                       <span class="comment">//all illegal</span>
  fd = -1;
  image = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  photo_interp = 1;
  res = <a class="code" href="imgs_8cpp.html#ad6b98f3cec0ab73fe17c0edf24f90436">image_default_resolution</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3017bbf96700db6038915b84eb0f1344"></a><!-- doxytag: member="IMAGE::~IMAGE" ref="a3017bbf96700db6038915b84eb0f1344" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IMAGE::~IMAGE </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="img_8h_source.html#l00056">56</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">              {                  <span class="comment">//destructor</span>
      <a class="code" href="class_i_m_a_g_e.html#a5f56124be0950f339d9060a7c7c4cdd7">destroy</a>();  <span class="comment">//free memory</span>
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a406454ec5c9e065f6404b909d4ba19a7"></a><!-- doxytag: member="IMAGE::capture" ref="a406454ec5c9e065f6404b909d4ba19a7" args="(uinT8 *pixels, inT32 x, inT32 y, inT8 bits_per_pixel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> IMAGE::capture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>pixels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td>
          <td class="paramname"><em>bits_per_pixel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>capture raw image </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pixels</td><td>pixels to capture </td></tr>
    <tr><td class="paramname">x</td><td>x size required </td></tr>
    <tr><td class="paramname">y</td><td>y size required </td></tr>
    <tr><td class="paramname">bits_per_pixel</td><td>bpp required </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00170">170</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                     {
  <a class="code" href="class_i_m_a_g_e.html#a5f56124be0950f339d9060a7c7c4cdd7">destroy</a>();
  xdim = <a class="code" href="imgs_8cpp.html#a0df725752395af1328217c86bf552ed4">check_legal_image_size</a> (x, y, bits_per_pixel);
  <span class="keywordflow">if</span> (xdim &lt; 0)
    <span class="keywordflow">return</span> -1;
  xsize = x;
  ysize = y;
  bufheight = y;
  bpp = bits_per_pixel;
  bps = bpp == 24 ? 8 : bpp;
  photo_interp = 1;
  bytespp = (bpp + 7) / 8;
  image = pixels;                <span class="comment">//assign image area</span>
  ymin = 0;
  ymax = bufheight;              <span class="comment">//read it all</span>
  captured = <a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
  res = <a class="code" href="imgs_8cpp.html#ad6b98f3cec0ab73fe17c0edf24f90436">image_default_resolution</a>;
  <span class="keywordflow">return</span> 0;                      <span class="comment">//success</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a46c97959964cd92e2dc1a4f6248dfac3"></a><!-- doxytag: member="IMAGE::check_legal_access" ref="a46c97959964cd92e2dc1a4f6248dfac3" args="(inT32 x, inT32 y, inT32 xext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::check_legal_access </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>check coordinates </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>xcoord to check </td></tr>
    <tr><td class="paramname">y</td><td>ycoord to check </td></tr>
    <tr><td class="paramname">xext</td><td>extent </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01483">1483</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                {
  <span class="keywordflow">if</span> (x &lt; 0 || x &gt;= xsize || y &lt; 0 || y &gt;= ysize || x + xext &gt; xsize)
    <a class="code" href="imgerrs_8h.html#ae13bbdff95ec93e3a25dcd22cf28fcb0">BADIMAGECOORDS</a>.<a class="code" href="class_e_r_r_c_o_d_e.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;IMAGE::check_legal_access&quot;</span>,
      <a class="code" href="errcode_8h.html#a8a3a2e51383909b357fcdf8eda803637a781ad2788df9e25c59a70894c7832096">ABORT</a>, <span class="stringliteral">&quot;(%d+%d,%d)&quot;</span>, x, xext, y);
  <span class="keywordflow">if</span> (y &lt; ymin || y &gt;= ymax)
    <a class="code" href="imgerrs_8h.html#a6c6e337204e2ba6f45b303028e15dfc4">BADIMAGESEEK</a>.<a class="code" href="class_e_r_r_c_o_d_e.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;IMAGE::check_legal_access&quot;</span>, <a class="code" href="errcode_8h.html#a8a3a2e51383909b357fcdf8eda803637a781ad2788df9e25c59a70894c7832096">ABORT</a>, <span class="stringliteral">&quot;(%d,%d)&quot;</span>, x, y);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1eb61556c5959586a78a38e5faae1996"></a><!-- doxytag: member="IMAGE::convolver" ref="a1eb61556c5959586a78a38e5faae1996" args="(inT32 win_width, inT32 win_height, void(*convolve)(uinT8 **pixels, uinT8 bytespp, inT32 win_wd, inT32 win_ht, uinT8 ret_white_value, uinT8 *result))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::convolver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>win_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>win_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **pixels, <a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bytespp, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_wd, <a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_ht, <a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> ret_white_value, <a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *result)&#160;</td>
          <td class="paramname"><em>convolve</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Map function over window </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">win_width</td><td>Window width </td></tr>
    <tr><td class="paramname">win_height</td><td>Window height </td></tr>
    <tr><td class="paramname">convolve</td><td>Conv function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01637">1637</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">  {
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> new_row;             <span class="comment">//Replacement pixels</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *old_rows;           <span class="comment">//Rows being processed</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> oldest_imline;           <span class="comment">//Next imline to replace</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **window;                <span class="comment">//ptrs to pixel rows</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **winmax;                <span class="comment">//ptrs to pixel rows</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **win;                   <span class="comment">//ptrs to pixel rows</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> current_row;             <span class="comment">//Row being calculated</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> current_col;             <span class="comment">//Col being calculated</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> row = 0;                 <span class="comment">//Next row to get</span>

  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> i, j;
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pix;
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *max;
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xmargin = win_width / 2;
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ymargin = win_height / 2;
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> white = <a class="code" href="class_i_m_a_g_e.html#afa7970786b9c8a5e93b5496b5a3ae71a">get_white_level</a> ();
  <span class="keyword">const</span> <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> max_white = 255;
  <span class="keywordtype">float</span> white_scale = (float) 255 / <a class="code" href="class_i_m_a_g_e.html#afa7970786b9c8a5e93b5496b5a3ae71a">get_white_level</a> ();

  <span class="keywordflow">if</span> (((win_width % 2) == 0) ||
    ((win_height % 2) == 0) ||
    (win_height &lt; 3) ||
    (win_width &lt; 3) || (win_height &gt; ysize / 2) || (win_width &gt; xsize / 2))
    <a class="code" href="imgerrs_8h.html#af5a575550d9aa4b29089ca9bea192d49">BADWINDOW</a>.<a class="code" href="class_e_r_r_c_o_d_e.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;IMAGE::convolver&quot;</span>,
      <a class="code" href="errcode_8h.html#a8a3a2e51383909b357fcdf8eda803637a781ad2788df9e25c59a70894c7832096">ABORT</a>, <span class="stringliteral">&quot;(%d x %d)&quot;</span>, win_width, win_height);

  new_row.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (xsize * bytespp);
  new_row.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (bpp);
  old_rows = <span class="keyword">new</span> <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a>[win_height];
  <span class="keywordflow">for</span> (i = 0; i &lt; win_height; i++) {
    old_rows[i].<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ((xsize + 2 * xmargin) * bytespp);
    old_rows[i].<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (bpp);
  }

  window = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **) <a class="code" href="memry_8cpp.html#a4c14b091498fb7866a1dd0af51a591fe">alloc_mem</a> (win_height * <span class="keyword">sizeof</span> (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *));
  winmax = window + win_height;

  <span class="comment">/* Make bottom border */</span>
  <span class="keywordflow">for</span> (oldest_imline = 0; oldest_imline &lt; ymargin; oldest_imline++) {
    pix = old_rows[oldest_imline].<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
    max = pix + (xsize + 2 * xmargin) * bytespp;
    <span class="keywordflow">while</span> (pix &lt; max)
      *pix++ = max_white;
  }
  <span class="comment">/* Initialise remaining rows but one*/</span>
  <span class="keywordflow">for</span> (; oldest_imline &lt; win_height - 1; oldest_imline++) {
    <a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (0, row++, xsize, &amp;old_rows[oldest_imline], xmargin);
    <span class="keywordflow">if</span> (max_white != white) {
      pix = old_rows[oldest_imline].<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
      max = pix + (xsize + 2 * xmargin) * bytespp;
      <span class="keywordflow">while</span> (pix &lt; max) {
        *pix = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) (*pix * white_scale);
        ++pix;
      }
    }
  }

  <span class="comment">/* Image Processing */</span>

  <span class="keywordflow">for</span> (current_row = 0; current_row &lt; ysize;) {
    <span class="comment">/* Get next row and re-initialise window array */</span>
    <span class="keywordflow">if</span> (row &lt; ysize) {
      <a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (0, row++, xsize, &amp;old_rows[oldest_imline], xmargin);
      <span class="keywordflow">if</span> (max_white != white) {
        pix = old_rows[oldest_imline].<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
        max = pix + (xsize + 2 * xmargin) * bytespp;
        <span class="keywordflow">while</span> (pix &lt; max) {
          *pix = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) (*pix * white_scale);
          ++pix;
        }
      }
    }
    <span class="keywordflow">else</span> {
      pix = old_rows[oldest_imline].<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
      max = pix + (xsize + 2 * xmargin) * bytespp;
      <span class="keywordflow">while</span> (pix &lt; max)
        *pix++ = max_white;
    }
    oldest_imline++;
    <span class="keywordflow">if</span> (oldest_imline &gt;= win_height)
      oldest_imline = 0;

    <span class="comment">/* Process line */</span>
    pix = new_row.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
    <span class="keywordflow">for</span> (current_col = 0; current_col &lt; xsize;) {
      <span class="comment">/* Set up window ptrs */</span>
      <span class="keywordflow">if</span> (current_col == 0) {
        j = oldest_imline;
        <span class="keywordflow">for</span> (i = 0; i &lt; win_height; i++) {
          window[i] = old_rows[j++].<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
          <span class="keywordflow">if</span> (j &gt;= win_height)
            j = 0;
        }
      }
      <span class="keywordflow">else</span> {
        <span class="keywordflow">for</span> (win = window; win &lt; winmax; (*win++) += bytespp);
        <span class="comment">//Move along rows</span>
      }

      convolve(window, bytespp, win_width, win_height, white, pix);
      pix += bytespp;
      current_col++;
    }

    <a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (0, current_row, xsize, &amp;new_row, 0);
    new_row.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();
    new_row.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (bpp);
    current_row++;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa827c8e72da25720295706017eda3d81"></a><!-- doxytag: member="IMAGE::create" ref="aa827c8e72da25720295706017eda3d81" args="(inT32 x, inT32 y, inT8 bits_per_pixel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> IMAGE::create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td>
          <td class="paramname"><em>bits_per_pixel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>create blank image </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>x size required </td></tr>
    <tr><td class="paramname">y</td><td>y size required </td></tr>
    <tr><td class="paramname">bits_per_pixel</td><td>bpp required </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00121">121</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                    {
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixels;                 <span class="comment">//memory for image</span>

  xdim = <a class="code" href="imgs_8cpp.html#a0df725752395af1328217c86bf552ed4">check_legal_image_size</a> (x, y, bits_per_pixel);
  <span class="keywordflow">if</span> (xdim &lt; 0)
    <span class="keywordflow">return</span> -1;
  pixels = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *) <a class="code" href="memry_8cpp.html#ac8c475a93760aa04525aa0b4d1216fda">alloc_big_zeros</a> ((<span class="keywordtype">size_t</span>) (xdim * y * <span class="keyword">sizeof</span> (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>)));
  <span class="keywordflow">if</span> (pixels == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="stderr_8h.html#a669968baa4639e34aef50907918653df">MEMORY_OUT</a>.<a class="code" href="class_e_r_r_c_o_d_e.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;IMAGE::create&quot;</span>, <a class="code" href="errcode_8h.html#a8a3a2e51383909b357fcdf8eda803637a781ad2788df9e25c59a70894c7832096">ABORT</a>, <span class="stringliteral">&quot;Size=(%d,%d)&quot;</span>, xdim, y);
    <span class="keywordflow">return</span> -1;
  }
                                 <span class="comment">//allocate to image</span>
  this-&gt;<a class="code" href="class_i_m_a_g_e.html#a406454ec5c9e065f6404b909d4ba19a7">capture</a> (pixels, x, y, bits_per_pixel);
  captured = <a class="code" href="host_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
  res = <a class="code" href="imgs_8cpp.html#ad6b98f3cec0ab73fe17c0edf24f90436">image_default_resolution</a>;
  <span class="keywordflow">return</span> 0;                      <span class="comment">//success</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5f56124be0950f339d9060a7c7c4cdd7"></a><!-- doxytag: member="IMAGE::destroy" ref="a5f56124be0950f339d9060a7c7c4cdd7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>destroy image </p>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00150">150</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                    {  <span class="comment">//get rid of image</span>
  <span class="keywordflow">if</span> (image != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; !captured) {
    <a class="code" href="memry_8cpp.html#ab30c02896b354139efbfb8936dfe8b69">free_big_mem</a>(image);
  }
  image = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">if</span> (fd &gt;= 0) {
    close(fd);
    fd = -1;
  }
  bpp = 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a44de5c052ec0829de2aff958756beb0f"></a><!-- doxytag: member="IMAGE::fast_get_line" ref="a44de5c052ec0829de2aff958756beb0f" args="(inT32 x, inT32 y, inT32 width, IMAGELINE *linebuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::fast_get_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>get image line </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to get </td></tr>
    <tr><td class="paramname">width</td><td>line to get </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy to </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00977">977</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                           {
  <span class="keywordflow">if</span> (width &gt; 0 &amp;&amp; bpp &gt; 4) {
    <a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a>(x, y, width);
                                 <span class="comment">//get pointer only</span>
    linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> = image + xdim * (ymax - 1 - y) + x * bytespp;
  }
  <span class="keywordflow">else</span>
                                 <span class="comment">//just copy it</span>
    this-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (x, y, width, linebuf, 0);
  linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = bpp;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a97634582d0c01e510827711338a50425"></a><!-- doxytag: member="IMAGE::fast_put_line" ref="a97634582d0c01e510827711338a50425" args="(inT32 x, inT32 y, inT32 width, IMAGELINE *linebuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::fast_put_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>put image line </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to put </td></tr>
    <tr><td class="paramname">width</td><td>number of pixels to put </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy from </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01202">1202</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                           {
  <span class="keywordflow">if</span> (width &gt; 0 &amp;&amp; (bpp &lt;= 4 || linebuf-&gt;pixels == linebuf-&gt;line))
                                 <span class="comment">//just copy it</span>
    <a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (x, y, width, linebuf, 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aac99e9fed5c4bc572e2415971e34591e"></a><!-- doxytag: member="IMAGE::FromPix" ref="aac99e9fed5c4bc572e2415971e34591e" args="(const Pix *src_pix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::FromPix </td>
          <td>(</td>
          <td class="paramtype">const Pix *&#160;</td>
          <td class="paramname"><em>src_pix</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01560">1560</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                      {
  <span class="comment">// Leptonica doesn&#39;t const its inputs, but we don&#39;t change the input.</span>
  Pix* pix = <span class="keyword">const_cast&lt;</span>Pix*<span class="keyword">&gt;</span>(src_pix);
  Pix* destroy_this_pix = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordtype">int</span> depth = pixGetDepth(pix);
  <span class="keywordflow">if</span> (depth &gt; 1 &amp;&amp; depth &lt; 8) {
    <span class="comment">// Convert funny depths to 8 bit.</span>
    destroy_this_pix = pixConvertTo8(pix, <span class="keyword">false</span>);
    pix = destroy_this_pix;
    depth = pixGetDepth(pix);
  }
  <span class="keywordtype">int</span> width = pixGetWidth(pix);
  <span class="keywordtype">int</span> height = pixGetHeight(pix);
  <span class="keyword">const</span> l_uint32* data = pixGetData(pix);
  this-&gt;<a class="code" href="class_i_m_a_g_e.html#aa827c8e72da25720295706017eda3d81">create</a>(width, height, depth == 32 ? 24 : depth);
  <span class="comment">// For each line in the image, fill the IMAGELINE class and put it into the</span>
  <span class="comment">// destination image. Note that Tesseract stores images with the</span>
  <span class="comment">// bottom at y=0 and 0 is always black in grey and binary.</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> line;
  <span class="keywordflow">if</span> (depth == 32) {
    line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a>(width * 3);
    line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a>(24);
  } <span class="keywordflow">else</span> {
    line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a>(width);
  }
  <span class="keywordflow">switch</span> (depth) {
  <span class="keywordflow">case</span> 1:
    <span class="comment">// Binary images just flip the data bit.</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x)
        line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>[x] = GET_DATA_BIT((<span class="keywordtype">void</span> *)data, x) ^ 1;
      this-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a>(0, y, width, &amp;line, 0);
      data += pixGetWpl(pix);
    }
    <span class="keywordflow">break</span>;

  <span class="keywordflow">case</span> 8:
    <span class="comment">// Greyscale just copies the bytes in the right order.</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x)
        line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>[x] = GET_DATA_BYTE((<span class="keywordtype">void</span> *)data, x);
      this-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a>(0, y, width, &amp;line, 0);
      data += pixGetWpl(pix);
    }
    <span class="keywordflow">break</span>;

  <span class="keywordflow">case</span> 32:
    <span class="comment">// Put the colors in the correct places in the line buffer.</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x, ++data) {
        line[x][<a class="code" href="img_8h.html#ae5404c46e0b40591a45cc2d7998839adae6174e14bb1ea53a595df276e305b49d">RED_PIX</a>] = GET_DATA_BYTE((<span class="keywordtype">void</span> *)data, COLOR_RED);
        line[x][<a class="code" href="img_8h.html#ae5404c46e0b40591a45cc2d7998839adaf7fbd44fe4c622eb157a5a7a06e241ae">GREEN_PIX</a>] = GET_DATA_BYTE((<span class="keywordtype">void</span> *)data, COLOR_GREEN);
        line[x][<a class="code" href="img_8h.html#ae5404c46e0b40591a45cc2d7998839ada3bcd25abcbaf8665a2d1adf21cdb4820">BLUE_PIX</a>] = GET_DATA_BYTE((<span class="keywordtype">void</span> *)data, COLOR_BLUE);
      }
      this-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a>(0, y, width, &amp;line, 0);
    }
    <span class="keywordflow">break</span>;

  <span class="keywordflow">default</span>:
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Cannot convert Pix to image with bpp = %d\n&quot;</span>, depth);
  }
  <span class="keywordflow">if</span> (destroy_this_pix != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    pixDestroy(&amp;destroy_this_pix);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc989f275743a36c9a9bce4b83c48c72"></a><!-- doxytag: member="IMAGE::get_bpp" ref="adc989f275743a36c9a9bce4b83c48c72" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> IMAGE::get_bpp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>access function </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>bits per pixel </dd></dl>

<p>Definition at line <a class="el" href="img_8h_source.html#l00106">106</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                   {
      <span class="keywordflow">return</span> bpp;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a940ac84dbf421b48d24602bd2df1bda3"></a><!-- doxytag: member="IMAGE::get_bps" ref="a940ac84dbf421b48d24602bd2df1bda3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> IMAGE::get_bps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>access function </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>bits per sample </dd></dl>

<p>Definition at line <a class="el" href="img_8h_source.html#l00113">113</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                   {
      <span class="keywordflow">return</span> bps;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a57b00c9b6bd4c915175f546404ddfb66"></a><!-- doxytag: member="IMAGE::get_buffer" ref="a57b00c9b6bd4c915175f546404ddfb66" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* IMAGE::get_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="img_8h_source.html#l00132">132</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                        {
      <span class="keywordflow">return</span> image;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ab528771e88deece5a5d153c619fc3593"></a><!-- doxytag: member="IMAGE::get_column" ref="ab528771e88deece5a5d153c619fc3593" args="(inT32 x, inT32 y, inT32 height, IMAGELINE *linebuf, inT32 margins)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::get_column </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>margins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>get image column </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to get </td></tr>
    <tr><td class="paramname">height</td><td>number of pixels to get </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy to </td></tr>
    <tr><td class="paramname">margins</td><td>size of margins </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01104">1104</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                        {
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pointer</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *dest;                   <span class="comment">//destination pointer</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bit;                      <span class="comment">//bit index</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> pixperbyte;               <span class="comment">//pixels per byte</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> white;                   <span class="comment">//white colour</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//pixel index</span>

                                 <span class="comment">//test coords</span>
  this-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, 1);
                                 <span class="comment">//test coords</span>
  this-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y + height - 1, 1);
  <span class="keywordflow">if</span> (height &gt; ysize - y)
    height = ysize - y;          <span class="comment">//clip to image</span>
  linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (height * bytespp + margins * bytespp * 2);
                                 <span class="comment">//start of line</span>
  src = image + xdim * (ymax - 1 - y);
  dest = linebuf-&gt;line;          <span class="comment">//destination line</span>
  linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> = dest;
  white = (1 &lt;&lt; bpp) - 1;        <span class="comment">//max value of pixel</span>
  <span class="keywordflow">for</span> (pixel = margins * bytespp; pixel &gt; 0; pixel--) {
    *dest++ = white;             <span class="comment">//margins are white</span>
  }
  <span class="keywordflow">if</span> (height &gt; 0) {
    <span class="keywordflow">if</span> (bpp == 24) {
      src += x * bytespp;        <span class="comment">//offset</span>
      <span class="keywordflow">for</span> (; height &gt; 0; --height) {
        *dest++ = *src;          <span class="comment">//copy bytes</span>
        *dest++ = *(src + 1);
        *dest++ = *(src + 2);
        src -= xdim;
      }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp &gt; 4) {
      src += x;
      <span class="keywordflow">for</span> (; height &gt; 0; --height) {
        *dest++ = *src;          <span class="comment">//copy bytes</span>
        src -= xdim;
      }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 4) {
      src += x / 2;              <span class="comment">//offset on line</span>
      <span class="keywordflow">if</span> (x &amp; 1) {
        <span class="keywordflow">for</span> (; height &gt; 0; --height) {
                                 <span class="comment">//get coded nibble</span>
          *dest++ = <a class="code" href="imgunpk_8h.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src][1];
          src -= xdim;
        }
      }
      <span class="keywordflow">else</span> {
        <span class="keywordflow">for</span> (; height &gt; 0; --height) {
                                 <span class="comment">//get coded nibble</span>
          *dest++ = <a class="code" href="imgunpk_8h.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src][0];
          src -= xdim;
        }
      }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 2) {
      pixperbyte = 4;
      src += x / 4;              <span class="comment">//offset on line</span>
      bit = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 4);      <span class="comment">//offset in byte</span>
      <span class="keywordflow">for</span> (; height &gt; 0; --height) {
                                 <span class="comment">//get coded bits</span>
        *dest++ = <a class="code" href="imgunpk_8h.html#af8029b0244582336725348de950a2738">bpp2table</a>[*src][bit];
        src -= xdim;
      }
    }
    <span class="keywordflow">else</span> {
      pixperbyte = 8;
      src += x / 8;              <span class="comment">//offset on line</span>
      bit = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 8);      <span class="comment">//offset in byte</span>
      <span class="keywordflow">for</span> (; height &gt; 0; --height) {
                                 <span class="comment">//get coded bits</span>
        *dest++ = <a class="code" href="imgunpk_8h.html#a1d1e9f765fd3ff30e633e8f9708c7bda">bpp1table</a>[*src][bit];
        src -= xdim;
      }
    }
  }
  <span class="keywordflow">for</span> (pixel = margins * bytespp; pixel &gt; 0; pixel--) {
    *dest++ = white;             <span class="comment">//margins are white</span>
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad3cdcd971f7c3089a0eb3b6ea968018b"></a><!-- doxytag: member="IMAGE::get_line" ref="ad3cdcd971f7c3089a0eb3b6ea968018b" args="(inT32 x, inT32 y, inT32 width, IMAGELINE *linebuf, inT32 margins)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::get_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>margins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>get image line </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to get </td></tr>
    <tr><td class="paramname">width</td><td>line to get </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy to </td></tr>
    <tr><td class="paramname">margins</td><td>size of margins </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01002">1002</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                      {
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">// source pointer</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *dest;                   <span class="comment">// destination pointer</span>
  <span class="keyword">const</span> <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *unpacksrc;        <span class="comment">// unpacking pointer</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bit;                      <span class="comment">// bit index</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> pixperbyte;               <span class="comment">// pixels per byte</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> white;                   <span class="comment">// white colour</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">// pixel index</span>

  this-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, width);
  <span class="keywordflow">if</span> (width &gt; xsize - x)
    width = xsize - x;           <span class="comment">//clip to image</span>
  width *= bytespp;
  linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (width + margins * bytespp * 2);
  linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = bpp;
                                 <span class="comment">//start of line</span>
  src = image + xdim * (ymax - 1 - y);
  dest = linebuf-&gt;line;          <span class="comment">//destination line</span>
  linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> = dest;
  white = (1 &lt;&lt; bpp) - 1;        <span class="comment">//max value of pixel</span>
  <span class="keywordflow">for</span> (pixel = margins * bytespp; pixel &gt; 0; pixel--) {
    *dest++ = white;             <span class="comment">//margins are white</span>
  }
  <span class="keywordflow">if</span> (width &gt; 0) {
    <span class="keywordflow">if</span> (bpp &gt; 4) {
      src += x;                  <span class="comment">//offset</span>
                                 <span class="comment">//easy way</span>
      memmove (dest, src, (<span class="keywordtype">unsigned</span>) width);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 4) {
      src += x / 2;              <span class="comment">//offset on line</span>
      <span class="keywordflow">if</span> (x &amp; 1) {
                                 <span class="comment">//get coded nibble</span>
        *dest++ = <a class="code" href="imgunpk_8h.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src++][1];
        width--;
      }
      <span class="keywordflow">while</span> (width &gt;= 2) {
                                 <span class="comment">//get coded bits</span>
        unpacksrc = <a class="code" href="imgunpk_8h.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src++];
        *dest++ = *unpacksrc++;
        *dest++ = *unpacksrc++;  <span class="comment">//copy nibbles</span>
        width -= 2;
      }
      <span class="keywordflow">if</span> (width) {
                                 <span class="comment">//get coded nibble</span>
        *dest++ = <a class="code" href="imgunpk_8h.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src++][0];
      }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 2) {
      pixperbyte = 4;
      src += x / 4;              <span class="comment">//offset on line</span>
      bit = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 4);      <span class="comment">//offset in byte</span>
      width += bit;
      <span class="keywordflow">while</span> (width &gt; 0) {        <span class="comment">//until all done</span>
        <span class="keywordflow">if</span> (width &lt; pixperbyte)
                                 <span class="comment">//less on last byte</span>
          pixperbyte = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) width;
                                 <span class="comment">//get coded bits</span>
        unpacksrc = &amp;<a class="code" href="imgunpk_8h.html#af8029b0244582336725348de950a2738">bpp2table</a>[*src++][bit];
        <span class="keywordflow">for</span> (; bit &lt; pixperbyte; bit++)
          *dest++ = *unpacksrc++;<span class="comment">//copy bytes</span>
        width -= pixperbyte;
        bit = 0;
      }
    }
    <span class="keywordflow">else</span> {
      pixperbyte = 8;
      src += x / 8;              <span class="comment">//offset on line</span>
      bit = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 8);      <span class="comment">//offset in byte</span>
      width += bit;
      <span class="keywordflow">while</span> (width &gt; 0) {        <span class="comment">//until all done</span>
        <span class="keywordflow">if</span> (width &lt; pixperbyte)
                                 <span class="comment">//less on last byte</span>
          pixperbyte = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) width;
                                 <span class="comment">//get coded bits</span>
        unpacksrc = &amp;<a class="code" href="imgunpk_8h.html#a1d1e9f765fd3ff30e633e8f9708c7bda">bpp1table</a>[*src++][bit];
        <span class="keywordflow">for</span> (; bit &lt; pixperbyte; bit++)
          *dest++ = *unpacksrc++;<span class="comment">//copy bytes</span>
        width -= pixperbyte;
        bit = 0;
      }
    }
  }
  <span class="keywordflow">for</span> (pixel = margins * bytespp; pixel &gt; 0; pixel--) {
    *dest++ = white;             <span class="comment">//margins are white</span>
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0e46e3e10daf7ee5fa7ddb15c1b38f7a"></a><!-- doxytag: member="IMAGE::get_res" ref="a0e46e3e10daf7ee5fa7ddb15c1b38f7a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> IMAGE::get_res </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>get resolution </p>

<p>Definition at line <a class="el" href="img_8h_source.html#l00125">125</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                    {
      <span class="keywordflow">return</span> res;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="afa7970786b9c8a5e93b5496b5a3ae71a"></a><!-- doxytag: member="IMAGE::get_white_level" ref="afa7970786b9c8a5e93b5496b5a3ae71a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> IMAGE::get_white_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>access function </p>

<p>Definition at line <a class="el" href="img_8h_source.html#l00121">121</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                            {
      <span class="keywordflow">return</span> (1 &lt;&lt; bpp) - 1;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aee6f16416203f7d678fc61ae22dedc6e"></a><!-- doxytag: member="IMAGE::get_xsize" ref="aee6f16416203f7d678fc61ae22dedc6e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> IMAGE::get_xsize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>access function </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>xsize </dd></dl>

<p>Definition at line <a class="el" href="img_8h_source.html#l00092">92</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                      {
      <span class="keywordflow">return</span> xsize;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a3f8caf7062bd65eea2fc068fb3ec7c10"></a><!-- doxytag: member="IMAGE::get_ysize" ref="a3f8caf7062bd65eea2fc068fb3ec7c10" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> IMAGE::get_ysize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>access function </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>ysize </dd></dl>

<p>Definition at line <a class="el" href="img_8h_source.html#l00099">99</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                      {
      <span class="keywordflow">return</span> ysize;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ab86d677f6dc940a04304c4108f17adfc"></a><!-- doxytag: member="IMAGE::operator=" ref="ab86d677f6dc940a04304c4108f17adfc" args="(IMAGE &amp;source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> &amp; IMAGE::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00087">87</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">  {
  <a class="code" href="class_i_m_a_g_e.html#a5f56124be0950f339d9060a7c7c4cdd7">destroy</a>();
  bpp = source.bpp;
  photo_interp = source.photo_interp;
  bps = source.bps;
  bytespp = (bpp + 7) / 8;
  lineskip = source.lineskip;    <span class="comment">//copy everything</span>
  captured = source.captured;
  xsize = source.xsize;
  ysize = source.ysize;
  res = source.res;
  image = source.image;
  xdim = source.xdim;
  bufheight = source.bufheight;
  fd = source.fd;
  reader = source.reader;
  ymin = source.ymin;
  ymax = source.ymax;

  source.captured = <a class="code" href="host_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;        <span class="comment">//source now captured</span>
  source.fd = -1;

  <span class="keywordflow">return</span> *<span class="keyword">this</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a85c7d5cd8d14e7291e20c59e9a262174"></a><!-- doxytag: member="IMAGE::pixel" ref="a85c7d5cd8d14e7291e20c59e9a262174" args="(inT32 x, inT32 y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> IMAGE::pixel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>access pixel </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord </td></tr>
    <tr><td class="paramname">y</td><td>coord </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00202">202</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                    {
  <span class="keywordflow">if</span> (x &lt; 0)
    x = 0;                       <span class="comment">//silently clip</span>
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt;= xsize)
    x = xsize - 1;
  <span class="keywordflow">if</span> (y &lt; 0)
    y = 0;
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &gt;= ysize)
    y = ysize - 1;
  <a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, 1);
  <span class="keywordflow">switch</span> (bpp) {
    <span class="keywordflow">case</span> 5:
    <span class="keywordflow">case</span> 6:
    <span class="keywordflow">case</span> 8:
      <span class="keywordflow">return</span> image[(ymax - 1 - y) * xdim + x];
    <span class="keywordflow">case</span> 4:
      <span class="keywordflow">return</span> <a class="code" href="imgunpk_8h.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[image[(ymax - 1 - y) * xdim + x / 2]][x &amp; 1];
    <span class="keywordflow">case</span> 2:
      <span class="keywordflow">return</span> <a class="code" href="imgunpk_8h.html#af8029b0244582336725348de950a2738">bpp2table</a>[image[(ymax - 1 - y) * xdim + x / 4]][x &amp; 3];
    <span class="keywordflow">case</span> 1:
      <span class="keywordflow">return</span> <a class="code" href="imgunpk_8h.html#a1d1e9f765fd3ff30e633e8f9708c7bda">bpp1table</a>[image[(ymax - 1 - y) * xdim + x / 8]][x &amp; 7];
    <span class="keywordflow">default</span>:
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Unexpected bits per pixel %d\n&quot;</span>, bpp);
      <span class="keywordflow">return</span> 0;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a96f1d5eb41ec389c298ca7c386a49c41"></a><!-- doxytag: member="IMAGE::put_column" ref="a96f1d5eb41ec389c298ca7c386a49c41" args="(inT32 x, inT32 y, inT32 height, IMAGELINE *linebuf, inT32 margins)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::put_column </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>margins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>put image column </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to put </td></tr>
    <tr><td class="paramname">height</td><td>number of pixels to put </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy to </td></tr>
    <tr><td class="paramname">margins</td><td>size of margins </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01370">1370</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                        {
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pointer</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *dest;                   <span class="comment">//destination pointer</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bit;                      <span class="comment">//bit index</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//collected bits</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bytesperpix;              <span class="comment">//in source</span>

  this-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, 1);
  this-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y + height - 1, 1);
  <span class="keywordflow">if</span> (height &gt; ysize - y)
    height = ysize - y;          <span class="comment">//clip to image</span>
  <span class="keywordflow">if</span> (height &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>
                                 <span class="comment">//source line</span>
  src = linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> + margins;
                                 <span class="comment">//start of line</span>
  dest = image + xdim * (ymax - 1 - y);

  <span class="keywordflow">if</span> (linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {
    src++;
    bytesperpix = 3;
  }
  <span class="keywordflow">else</span>
    bytesperpix = 1;

  <span class="keywordflow">if</span> (bpp == 24 &amp;&amp; linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {
    dest += x * bytesperpix;
    src--;
    <span class="keywordflow">for</span> (; height &gt; 0; --height) {
      *dest = *src++;
      *(dest + 1) = *src++;
      *(dest + 2) = *src++;
      dest -= xdim;
    }
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 24) {
    src--;
    dest += x * bytesperpix;
    <span class="keywordflow">for</span> (; height &gt; 0; --height) {
      pixel = *src++;
      *dest = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;
      *(dest + 1) = pixel;
      *(dest + 2) = pixel;
      dest -= xdim;
    }
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp &gt; 4) {
    dest += x;                   <span class="comment">//offset</span>
    <span class="keywordflow">for</span> (; height &gt; 0; --height) {
      *dest = *src;
      src += bytesperpix;
      dest -= xdim;
    }
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 4) {
    dest += x / 2;               <span class="comment">//offset on line</span>
    <span class="keywordflow">if</span> (x &amp; 1) {
      <span class="keywordflow">for</span> (; height &gt; 0; --height) {
        *dest &amp;= 0xf0;           <span class="comment">//clean odd byte</span>
        *dest |= *src &amp; 0x0f;    <span class="comment">//and copy it</span>
        src += bytesperpix;
        dest -= xdim;
      }
    }
    <span class="keywordflow">else</span> {
      <span class="keywordflow">for</span> (; height &gt; 0; --height) {
        *dest &amp;= 0x0f;           <span class="comment">//clean odd byte</span>
        *dest |= *src &lt;&lt; 4;
        src += bytesperpix;
        dest -= xdim;
      }
    }
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 2) {
    dest += x / 4;               <span class="comment">//offset on line</span>
    bit = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 4);        <span class="comment">//offset in byte</span>
    bit = 6 - bit - bit;         <span class="comment">//bit shift</span>
    pixel = ~(3 &lt;&lt; bit);         <span class="comment">//mask</span>
    <span class="keywordflow">for</span> (; height &gt; 0; --height) {
                                 <span class="comment">//change 2 bits</span>
      *dest = (*dest &amp; <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>) | ((*src &amp; 3) &lt;&lt; bit);
      src += bytesperpix;
      dest -= xdim;
    }
  }
  <span class="keywordflow">else</span> {
    dest += x / 8;               <span class="comment">//offset on line</span>
    bit = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 8);        <span class="comment">//offset in byte</span>
    bit = 7 - bit;
    pixel = ~(1 &lt;&lt; bit);
    <span class="keywordflow">for</span> (; height &gt; 0; --height) {
                                 <span class="comment">//change 1 bit</span>
      *dest = (*dest &amp; <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>) | ((*src &amp; 1) &lt;&lt; bit);
      src += bytesperpix;
      dest -= xdim;
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="afbea9591218792f2be5e805a77ee167d"></a><!-- doxytag: member="IMAGE::put_line" ref="afbea9591218792f2be5e805a77ee167d" args="(inT32 x, inT32 y, inT32 width, IMAGELINE *linebuf, inT32 margins)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::put_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>margins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>put image line </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to put </td></tr>
    <tr><td class="paramname">width</td><td>number of pixels to put </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy from </td></tr>
    <tr><td class="paramname">margins</td><td>size of margins </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01221">1221</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                      {
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pointer</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *dest;                   <span class="comment">//destination pointer</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bit;                      <span class="comment">//bit index</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//collected bits</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> pixperbyte;               <span class="comment">//pixels in a byte</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bytesperpix;              <span class="comment">//in source</span>

  this-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, width);
  <span class="keywordflow">if</span> (width &gt; xsize - x)
    width = xsize - x;           <span class="comment">//clip to image</span>
  <span class="keywordflow">if</span> (width &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>
                                 <span class="comment">//source line</span>
  src = linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> + margins;
                                 <span class="comment">//start of line</span>
  dest = image + xdim * (ymax - 1 - y);

  <span class="keywordflow">if</span> (linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {
    src++;
    bytesperpix = 3;
  }
  <span class="keywordflow">else</span>
    bytesperpix = 1;
  <span class="keywordflow">if</span> (bpp == 24 &amp;&amp; linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {
    dest += x * bytespp;
    width *= bytespp;
    memmove (dest, src - 1, (<span class="keywordtype">unsigned</span>) width);
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 24) {
    src--;
    dest += x * bytespp;
    <span class="keywordflow">while</span> (width &gt; 0) {
      pixel = *src++;
      *dest++ = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;
      *dest++ = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;
      *dest++ = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;
      width--;
    }
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp &gt; 4) {
    dest += x;                   <span class="comment">//offset</span>
    <span class="keywordflow">if</span> (linebuf-&gt;<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {
      <span class="keywordflow">while</span> (width &gt; 0) {
        *dest++ = *src;
        src += 3;
        width--;
      }
    }
    <span class="keywordflow">else</span>
                                 <span class="comment">//easy way</span>
      memmove (dest, src, (<span class="keywordtype">unsigned</span>) width);
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 4) {
    dest += x / 2;               <span class="comment">//offset on line</span>
    <span class="keywordflow">if</span> (x &amp; 1) {
      *dest &amp;= 0xf0;             <span class="comment">//clean odd byte</span>
      *dest++ |= *src &amp; 0x0f;    <span class="comment">//and copy it</span>
      src += bytesperpix;
      width--;
    }
    <span class="keywordflow">while</span> (width &gt;= 2) {
      pixel = *src &lt;&lt; 4;         <span class="comment">//left pixel</span>
      src += bytesperpix;
      pixel |= *src &amp; 0x0f;      <span class="comment">//right pixel</span>
      src += bytesperpix;
      *dest++ = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;
      width -= 2;
    }
    <span class="keywordflow">if</span> (width) {
      *dest &amp;= 0x0f;             <span class="comment">//clean odd byte</span>
      *dest |= *src &lt;&lt; 4;
    }
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 2) {
    pixperbyte = 4;
    dest += x / 4;               <span class="comment">//offset on line</span>
    bit = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 4);        <span class="comment">//offset in byte</span>
    width += bit;
    pixel = *dest &gt;&gt; (8 - bit - bit);
    <span class="keywordflow">while</span> (width &gt;= 4) {         <span class="comment">//until all done</span>
      <span class="keywordflow">for</span> (; bit &lt; 4; bit++) {
        pixel &lt;&lt;= 2;             <span class="comment">//make space for new one</span>
        pixel |= *src &amp; 3;
        src += bytesperpix;
      }
      *dest++ = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;           <span class="comment">//new pixel</span>
      width -= 4;
      bit = 0;
    }
    <span class="keywordflow">if</span> (width &gt; 0) {             <span class="comment">//until all done</span>
      <span class="keywordflow">for</span> (bit = 0; bit &lt; width; bit++) {
        pixel &lt;&lt;= 2;             <span class="comment">//make space for new one</span>
        pixel |= *src &amp; 3;
        src += bytesperpix;
      }
      pixel &lt;&lt;= (8 - bit - bit); <span class="comment">//shift rest</span>
                                 <span class="comment">//keep trainling bits</span>
      pixel |= *dest &amp; ((1 &lt;&lt; (8 - bit - bit)) - 1);
      *dest++ = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;           <span class="comment">//new pixel</span>
    }
  }
  <span class="keywordflow">else</span> {
    pixperbyte = 8;
    dest += x / 8;               <span class="comment">//offset on line</span>
    bit = (<a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 8);        <span class="comment">//offset in byte</span>
    width += bit;
    pixel = *dest &gt;&gt; (8 - bit);
    <span class="keywordflow">while</span> (width &gt;= 8) {         <span class="comment">//until all done</span>
      <span class="keywordflow">for</span> (; bit &lt; 8; bit++) {
        pixel &lt;&lt;= 1;             <span class="comment">//make space for new one</span>
        pixel |= *src &amp; 1;
        src += bytesperpix;
      }
      *dest++ = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;           <span class="comment">//new pixel</span>
      width -= 8;
      bit = 0;
    }
    width -= bit;
    <span class="keywordflow">if</span> (width &gt; 0) {             <span class="comment">//until all done</span>
      <span class="keywordflow">while</span> (width &gt; 0) {
        pixel &lt;&lt;= 1;             <span class="comment">//make space for new one</span>
        pixel |= *src &amp; 1;
        src += bytesperpix;
        bit++;
        width--;
      }
      pixel &lt;&lt;= (8 - bit);       <span class="comment">//shift rest</span>
                                 <span class="comment">//keep trainling bits</span>
      pixel |= *dest &amp; ((1 &lt;&lt; (8 - bit)) - 1);
      *dest++ = <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;           <span class="comment">//new pixel</span>
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aadf539e1a16119867b48ba5128edd056"></a><!-- doxytag: member="IMAGE::set_res" ref="aadf539e1a16119867b48ba5128edd056" args="(inT32 resolution)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::set_res </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>resolution</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>set resolution </p>

<p>Definition at line <a class="el" href="img_8h_source.html#l00129">129</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
      res = resolution;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a93a54ced5f2ee393fd3f634e31bbd145"></a><!-- doxytag: member="IMAGE::ToPix" ref="a93a54ced5f2ee393fd3f634e31bbd145" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Pix * IMAGE::ToPix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Methods to convert image types. Only available if Leptonica is available. </p>

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l01500">1500</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                  {
  <span class="keywordtype">int</span> width = this-&gt;<a class="code" href="class_i_m_a_g_e.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a>();
  <span class="keywordtype">int</span> height = this-&gt;<a class="code" href="class_i_m_a_g_e.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a>();
  <span class="keywordtype">int</span> bpp = this-&gt;<a class="code" href="class_i_m_a_g_e.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a>();
  Pix* pix = pixCreate(width, height, bpp == 24 ? 32 : bpp);
  l_uint32* data = pixGetData(pix);
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> line;
  <span class="keywordflow">if</span> (bpp == 24) {
    line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a>(width * 3);
    line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a>(24);
  } <span class="keywordflow">else</span> {
    line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a>(width);
  }
  <span class="keywordflow">switch</span> (bpp) {
  <span class="keywordflow">case</span> 1:
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {
      this-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a>(0, y, width, &amp;line, 0);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x) {
        <span class="keywordflow">if</span> (line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>[x])
          CLEAR_DATA_BIT(data, x);
        <span class="keywordflow">else</span>
          SET_DATA_BIT(data, x);
      }
      data += pixGetWpl(pix);
    }
    <span class="keywordflow">break</span>;

  <span class="keywordflow">case</span> 8:
    <span class="comment">// Greyscale just copies the bytes in the right order.</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {
      this-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a>(0, y, width, &amp;line, 0);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x)
        SET_DATA_BYTE(data, x, line.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>[x]);
      data += pixGetWpl(pix);
    }
    <span class="keywordflow">break</span>;

  <span class="keywordflow">case</span> 24:
    <span class="comment">// Put the colors in the correct places in the line buffer.</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {
      this-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a>(0, y, width, &amp;line, 0);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x, ++data) {
        SET_DATA_BYTE(data, COLOR_RED, line[x][<a class="code" href="img_8h.html#ae5404c46e0b40591a45cc2d7998839adae6174e14bb1ea53a595df276e305b49d">RED_PIX</a>]);
        SET_DATA_BYTE(data, COLOR_GREEN, line[x][<a class="code" href="img_8h.html#ae5404c46e0b40591a45cc2d7998839adaf7fbd44fe4c622eb157a5a7a06e241ae">GREEN_PIX</a>]);
        SET_DATA_BYTE(data, COLOR_BLUE, line[x][<a class="code" href="img_8h.html#ae5404c46e0b40591a45cc2d7998839ada3bcd25abcbaf8665a2d1adf21cdb4820">BLUE_PIX</a>]);
      }
    }
    <span class="keywordflow">break</span>;

  <span class="keywordflow">default</span>:
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Cannot convert image to Pix with bpp = %d\n&quot;</span>, bpp);
  }
  <span class="keywordflow">return</span> pix;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8925866607e7282397e798856c0b1ebc"></a><!-- doxytag: member="IMAGE::white_high" ref="a8925866607e7282397e798856c0b1ebc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> IMAGE::white_high </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>photo interp </p>

<p>Definition at line <a class="el" href="img_8h_source.html#l00117">117</a> of file <a class="el" href="img_8h_source.html">img.h</a>.</p>
<div class="fragment"><pre class="fragment">                       {
      <span class="keywordflow">return</span> photo_interp;
    }
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="adf532c19ebf5ba5ec70086035b874dbc"></a><!-- doxytag: member="IMAGE::copy_sub_image" ref="adf532c19ebf5ba5ec70086035b874dbc" args="(IMAGE *source, inT32 xstart, inT32 ystart, inT32 xext, inT32 yext, IMAGE *dest, inT32 xdest, inT32 ydest, BOOL8 adjust_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void copy_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00269">269</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                            {
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *copy;                   <span class="comment">//source pointer</span>
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//pixel index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y;                       <span class="comment">//line index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> bytesize;                <span class="comment">//no of bytes to copy</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> srcppb;                  <span class="comment">//pixels per byte</span>
  <a class="code" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> aligned;

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;
  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = source-&gt;xsize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)
                                 <span class="comment">//clip to smallest</span>
      xext = source-&gt;xsize - xstart;
  <span class="keywordflow">if</span> (xext &gt; dest-&gt;xsize - xdest)
    xext = dest-&gt;xsize - xdest;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = source-&gt;ysize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)
                                 <span class="comment">//clip to smallest</span>
      yext = source-&gt;ysize - ystart;
  <span class="keywordflow">if</span> (yext &gt; dest-&gt;ysize - ydest)
    yext = dest-&gt;ysize - ydest;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  srcppb = 8 / source-&gt;bpp;      <span class="comment">//pixels per byte</span>
  <span class="keywordflow">if</span> (source-&gt;bpp == dest-&gt;bpp || !adjust_grey)
    shift = 0;                   <span class="comment">//no adjustment</span>
  <span class="keywordflow">else</span> {
    shift = source-&gt;bps - dest-&gt;bps;
    <span class="keywordflow">if</span> (shift &lt; 0)
      shift = -shift;            <span class="comment">//keep positive</span>
  }
  aligned = source-&gt;bpp == dest-&gt;bpp;
  <span class="keywordflow">if</span> (aligned &amp;&amp; srcppb != 0) {
    aligned = xstart % srcppb == 0
      &amp;&amp; xdest % srcppb == 0
      &amp;&amp; (xext % srcppb == 0 || xdest + xext == dest-&gt;xsize);
  }
  <span class="keywordflow">for</span> (y = 0; y &lt; yext; y++) {
    <span class="keywordflow">if</span> (ystart &gt;= ydest)
      yoffset = y;               <span class="comment">//top down</span>
    <span class="keywordflow">else</span>
      yoffset = yext - y - 1;    <span class="comment">//bottom up</span>
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);
    <span class="keywordflow">if</span> (aligned) {
      bytesize = <a class="code" href="img_8h.html#a0ee65bc5580141bc6e2f538915b8af70">COMPUTE_IMAGE_XDIM</a> (xext, source-&gt;bpp);
      <span class="comment">//get bytes per line</span>
      <span class="keywordflow">if</span> (srcppb == 0)
                                 <span class="comment">//do cheap move</span>
        memmove (dest-&gt;image + (dest-&gt;ymax - 1 - ydest - yoffset) * dest-&gt;xdim + xdest * 3, source-&gt;image + (source-&gt;ymax - 1 - ystart - yoffset) * source-&gt;xdim + xstart * 3, (<span class="keywordtype">unsigned</span>) bytesize);
      <span class="keywordflow">else</span>
                                 <span class="comment">//do cheap move</span>
        memmove (dest-&gt;image + (dest-&gt;ymax - 1 - ydest - yoffset) * dest-&gt;xdim + xdest / srcppb, source-&gt;image + (source-&gt;ymax - 1 - ystart - yoffset) * source-&gt;xdim + xstart / srcppb, (<span class="keywordtype">unsigned</span>) bytesize);
    }
    <span class="keywordflow">else</span> {
      <span class="keywordflow">if</span> (shift == 0) {
        source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext,
          &amp;copyline);
      }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (source-&gt;bpp &lt; dest-&gt;bpp) {
        source-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);
        <span class="keywordflow">if</span> (source-&gt;bpp &lt;= shift
        &amp;&amp; (source-&gt;bpp == 1 || source-&gt;bpp == 4)) {
          <span class="keywordflow">if</span> (source-&gt;bpp == 1) {
            <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;
              pixel++, copy++)
            <span class="keywordflow">if</span> (*copy)
              *copy = 0xff;
          }
          <span class="keywordflow">else</span> {
            <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;
              pixel++, copy++)
                                 <span class="comment">//scale up</span>
            *copy = (*copy &lt;&lt; shift) | *copy;
          }
        }
        <span class="keywordflow">else</span> {
          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;
            pixel++)
          *copy++ &lt;&lt;= shift;     <span class="comment">//scale up</span>
        }
      }
      <span class="keywordflow">else</span> {
        source-&gt;<a class="code" href="class_i_m_a_g_e.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);
        <span class="keywordflow">if</span> (source-&gt;bpp == 24) {
          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> + 1; pixel &lt; xext;
          pixel++) {
            *copy &gt;&gt;= shift;
            copy += 3;
          }
        }
        <span class="keywordflow">else</span> {
          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;
            pixel++)
          *copy++ &gt;&gt;= shift;     <span class="comment">//scale down</span>
        }
      }
      dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;copyline, 0);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad524b64ac508eee1576a4787e1f5f457"></a><!-- doxytag: member="IMAGE::enlarge_sub_image" ref="ad524b64ac508eee1576a4787e1f5f457" args="(IMAGE *source, inT32 xstart, inT32 ystart, IMAGE *dest, inT32 xdest, inT32 ydest, inT32 xext, inT32 yext, inT32 scale, BOOL8 adjust_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void enlarge_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00397">397</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                               {
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//current pixel</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> srcext;                  <span class="comment">//source extent</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xoffset;                 <span class="comment">//column index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//line index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//index in super pixel</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> startxindex;             <span class="comment">//initial x index</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xscale;                  <span class="comment">//x scale factor</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pixels</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *destpix;                <span class="comment">//dest pixels</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> bigline;             <span class="comment">//expanded line</span>

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = dest-&gt;xsize;          <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize * scale - xstart)
                                 <span class="comment">//clip to smallest</span>
    xext = source-&gt;xsize * scale - xstart;
  <span class="keywordflow">if</span> (xext &gt; dest-&gt;xsize - xdest)
    xext = dest-&gt;xsize - xdest;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = dest-&gt;ysize;          <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize * scale - ystart)
    yext = source-&gt;ysize * scale - ystart;
  <span class="keywordflow">if</span> (yext &gt; dest-&gt;ysize - ydest)
    yext = dest-&gt;ysize - ydest;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  xindex = xstart % scale;       <span class="comment">//offset in super pixel</span>
  startxindex = xindex;
  yindex = ystart % scale;
                                 <span class="comment">//no of source pixels</span>
  srcext = (xext + xindex + scale - 1) / scale;
  xstart /= scale;               <span class="comment">//actual start</span>
  ystart /= scale;
  <span class="keywordflow">if</span> (adjust_grey) {
    shift = dest-&gt;bps - source-&gt;bps;
  }
  <span class="keywordflow">else</span>
    shift = 0;                   <span class="comment">//no adjustment</span>
  bigline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (xext * 3);
  bigline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = dest-&gt;bpp == 24 ? source-&gt;bpp : dest-&gt;bpp;

  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ystart++) {
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart, srcext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart, srcext, &amp;copyline);
    src = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
    destpix = bigline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
    xscale = scale;              <span class="comment">//enlargement factor</span>
    <span class="keywordflow">if</span> (source-&gt;bpp == 24 &amp;&amp; dest-&gt;bpp == 24) {
      <span class="keywordflow">for</span> (xoffset = 0, xindex = startxindex; xoffset &lt; xext;
      src += source-&gt;bytespp) {
        xoffset += xscale - xindex;
        <span class="keywordflow">if</span> (xoffset &gt; xext)
          xscale -= xoffset - xext;
        <span class="keywordflow">for</span> (; xindex &lt; xscale; xindex++) {
          *destpix++ = *src;
          *destpix++ = *(src + 1);
          *destpix++ = *(src + 2);
        }
        xindex = 0;
      }
    }
    <span class="keywordflow">else</span> {
      <span class="keywordflow">if</span> (source-&gt;bpp == 24)
        src++;
      <span class="keywordflow">for</span> (xoffset = 0, xindex = startxindex; xoffset &lt; xext;
      src += source-&gt;bytespp) {
        xoffset += xscale - xindex;
        <span class="keywordflow">if</span> (xoffset &gt; xext)
                                 <span class="comment">//clip to dest limit</span>
            xscale -= xoffset - xext;
        <span class="keywordflow">if</span> (shift == 0)
          pixel = *src;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shift &gt; 0)
          pixel = *src &lt;&lt; shift;
        <span class="keywordflow">else</span>
          pixel = *src &gt;&gt; (-shift);
        <span class="keywordflow">for</span> (; xindex &lt; xscale; xindex++)
          *destpix++ = pixel;    <span class="comment">//duplicate pixel</span>
        xindex = 0;
      }
    }
    <span class="keywordflow">for</span> (; yoffset &lt; yext &amp;&amp; yindex &lt; scale; yindex++, yoffset++) {
      dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;bigline, 0);
    }
    yindex = 0;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ace8abc71ce7c0bb82ff54377abf45e66"></a><!-- doxytag: member="IMAGE::fast_reduce_sub_image" ref="ace8abc71ce7c0bb82ff54377abf45e66" args="(IMAGE *source, inT32 xstart, inT32 ystart, inT32 xext, inT32 yext, IMAGE *dest, inT32 xdest, inT32 ydest, inT32 scale, BOOL8 adjust_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void fast_reduce_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00515">515</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xfactor;                 <span class="comment">//run on x coord</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> divisor;                 <span class="comment">//total cell area</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//into averaging square</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xcoord;                  <span class="comment">//current x coord</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> destext;                 <span class="comment">//destination size</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *<a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                  <span class="comment">//ptr to source pixels</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *sums;                   <span class="comment">//ptr to sums array</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *linesums;               <span class="comment">//averaging sums</span>

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;
  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = source-&gt;xsize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)
                                 <span class="comment">//clip to smallest</span>
      xext = source-&gt;xsize - xstart;
  <span class="keywordflow">if</span> (xext &gt; (dest-&gt;xsize - xdest) * scale)
    xext = (dest-&gt;xsize - xdest) * scale;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = source-&gt;ysize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)
                                 <span class="comment">//clip to smallest</span>
      yext = source-&gt;ysize - ystart;
  <span class="keywordflow">if</span> (yext &gt; (dest-&gt;ysize - ydest) * scale)
    yext = (dest-&gt;ysize - ydest) * scale;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  xfactor = xext % scale;        <span class="comment">//left overs</span>
  <span class="keywordflow">if</span> (xfactor == 0)
    xfactor = scale;
                                 <span class="comment">//destination pixels</span>
  destext = (xext + scale - 1) / scale;
  <span class="keywordflow">if</span> (adjust_grey)
                                 <span class="comment">//shift factor</span>
    shift = dest-&gt;bps - source-&gt;bps;
  <span class="keywordflow">else</span>
    shift = 0;                   <span class="comment">//no adjustment</span>
  linesums = <span class="keyword">new</span> <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>[destext * source-&gt;bytespp];

  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ydest++) {
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest, destext);
    <span class="keywordflow">for</span> (xindex = destext * source-&gt;bytespp - 1; xindex &gt;= 0; xindex--)
      linesums[xindex] = 0;      <span class="comment">//zero sums</span>
    <span class="keywordflow">for</span> (yindex = 0; yindex &lt; scale
    &amp;&amp; ystart + yoffset &lt; source-&gt;ysize; yindex += 3) {
      source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline);
      pixel = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;   <span class="comment">//start of line</span>
      <span class="keywordflow">if</span> (source-&gt;bpp == 24) {
        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;
        xcoord++, sums += 3) {
          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex += 2) {
            *sums += *pixel++;
            *(sums + 1) += *pixel++;
            *(sums + 2) += *pixel++;
            pixel += 3;
          }
          <span class="keywordflow">if</span> (scale &amp; 1)
            pixel -= 3;          <span class="comment">//correct position</span>
        }
        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex += 2) {
          *sums += *pixel++;
          *(sums + 1) += *pixel++;
          *(sums + 2) += *pixel++;
          pixel += 3;
        }
      }
      <span class="keywordflow">else</span> {
        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;
        xcoord++, sums++) {
          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex += 2) {
            *sums += *<a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;
            pixel += 2;
          }
          <span class="keywordflow">if</span> (scale &amp; 1)
            pixel--;             <span class="comment">//correct position</span>
        }
        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex += 2) {
          *sums += *<a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;
          pixel += 2;
        }
      }
      yoffset += 3;              <span class="comment">//every 3 lines</span>
    }
    <span class="keywordflow">if</span> (yindex &gt; scale)
      yoffset -= yindex - scale; <span class="comment">//back on right scale</span>
    copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();            <span class="comment">//set pixels back to array</span>
    copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = source-&gt;bpp;
    pixel = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
                                 <span class="comment">//pixels in block</span>
    divisor = ((yindex + 2) / 3) * ((scale + 1) / 2);
    <span class="keywordflow">if</span> (shift &lt;= 0) {
      divisor &lt;&lt;= (-shift);      <span class="comment">//do greyscale correction</span>
      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;
        xindex &gt; 0; xindex--)
                                 <span class="comment">//turn to destination value</span>
      *pixel++ = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) (*sums++ / divisor);
      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)
        *pixel++ = *sums++
          / (((yindex + 2) / 3) * ((xfactor + 1) / 2) &lt;&lt; (-shift));
      <span class="comment">//lastone different</span>
    }
    <span class="keywordflow">else</span> {
      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;
        xindex &gt; 0; xindex--)
      *pixel++ = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((*sums++ &lt;&lt; shift) / divisor);
      <span class="comment">//destination value</span>
      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)
                                 <span class="comment">//last one different</span>
        *pixel++ = (*(sums++) &lt;&lt; shift) / (((yindex + 2) / 3) * ((xfactor + 1) / 2));
    }
                                 <span class="comment">//put in destination</span>
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest, destext, &amp;copyline, 0);
  }
  <span class="keyword">delete</span> [] linesums;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a987ea5c1e5f652311b99892283211a79"></a><!-- doxytag: member="IMAGE::reduce_sub_image" ref="a987ea5c1e5f652311b99892283211a79" args="(IMAGE *source, inT32 xstart, inT32 ystart, inT32 xext, inT32 yext, IMAGE *dest, inT32 xdest, inT32 ydest, inT32 scale, BOOL8 adjust_grey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLLSYM void reduce_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="host_8h.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="imgs_8cpp_source.html#l00657">657</a> of file <a class="el" href="imgs_8cpp_source.html">imgs.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                              {
  <a class="code" href="host_8h.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xfactor;                 <span class="comment">//run on x coord</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> divisor;                 <span class="comment">//total cell area</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> div2;                    <span class="comment">//total cell area divided by 2</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//into averaging square</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xcoord;                  <span class="comment">//current x coord</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> destext;                 <span class="comment">//destination size</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span>
  <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *<a class="code" href="class_i_m_a_g_e.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                  <span class="comment">//ptr to source pixels</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *sums;                   <span class="comment">//ptr to sums array</span>
  <a class="code" href="class_i_m_a_g_e_l_i_n_e.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span>
  <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *linesums;               <span class="comment">//averaging sums</span>

  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)
    <span class="keywordflow">return</span>;
  <span class="keywordflow">if</span> (xext &lt;= 0)
    xext = source-&gt;xsize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)
                                 <span class="comment">//clip to smallest</span>
      xext = source-&gt;xsize - xstart;
  <span class="keywordflow">if</span> (xext &gt; (dest-&gt;xsize - xdest) * scale)
    xext = (dest-&gt;xsize - xdest) * scale;
  <span class="keywordflow">if</span> (yext &lt;= 0)
    yext = source-&gt;ysize;        <span class="comment">//default to all</span>
  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)
                                 <span class="comment">//clip to smallest</span>
      yext = source-&gt;ysize - ystart;
  <span class="keywordflow">if</span> (yext &gt; (dest-&gt;ysize - ydest) * scale)
    yext = (dest-&gt;ysize - ydest) * scale;
  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)
    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span>

  xfactor = xext % scale;        <span class="comment">//left overs</span>
  <span class="keywordflow">if</span> (xfactor == 0)
    xfactor = scale;
                                 <span class="comment">//destination pixels</span>
  destext = (xext + scale - 1) / scale;
  <span class="keywordflow">if</span> (adjust_grey)
                                 <span class="comment">//shift factor</span>
    shift = dest-&gt;bps - source-&gt;bps;
  <span class="keywordflow">else</span>
    shift = 0;                   <span class="comment">//no adjustment</span>
  linesums = <span class="keyword">new</span> <a class="code" href="host_8h.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>[destext * source-&gt;bytespp];

  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ydest++) {
    source-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest, destext);
    <span class="keywordflow">for</span> (xindex = 0; xindex &lt; (destext) * source-&gt;bytespp; xindex++)
      linesums[xindex] = 0;      <span class="comment">//zero sums</span>
    <span class="keywordflow">for</span> (yindex = 0; yindex &lt; scale &amp;&amp; ystart + yoffset &lt; source-&gt;ysize;
    yindex++) {
      source-&gt;<a class="code" href="class_i_m_a_g_e.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline);
      pixel = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;   <span class="comment">//start of line</span>
      <span class="keywordflow">if</span> (source-&gt;bpp == 24) {
        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;
        xcoord++, sums += 3) {
          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex++) {
            *sums += *pixel++;
            *(sums + 1) += *pixel++;
            *(sums + 2) += *pixel++;
          }
        }
        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex++) {
          *sums += *pixel++;
          *(sums + 1) += *pixel++;
          *(sums + 2) += *pixel++;
        }
      }
      <span class="keywordflow">else</span> {
        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;
        xcoord++, sums++) {
          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex++)
            *sums += *pixel++;
        }
        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex++)
          *sums += *pixel++;
      }
      yoffset++;                 <span class="comment">//next line</span>
    }
    copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();            <span class="comment">//set pixels back to array</span>
    copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (source-&gt;bpp);
    pixel = copyline.<a class="code" href="class_i_m_a_g_e_l_i_n_e.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;
    divisor = yindex * scale;
    <span class="keywordflow">if</span> (divisor == 0) {
      <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>
        (<span class="stringliteral">&quot;Impossible:divisor=0!, yindex=%d, scale=%d, yoffset=%d,yext=%d\n&quot;</span>,
        yindex, scale, yoffset, yext);
      <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">if</span> (shift &lt;= 0) {
      divisor &lt;&lt;= (-shift);      <span class="comment">//do greyscale correction</span>
      div2 = divisor / 2;
      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;
        xindex &gt; 0; xindex--)
      *pixel++ = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + *sums++) / divisor);
      <span class="comment">//turn to destination value</span>
      div2 = (yindex * xfactor &lt;&lt; (-shift)) / 2;
      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)
        *pixel++ =
          (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + *sums++) / (yindex * xfactor &lt;&lt; (-shift)));
      <span class="comment">//lastone different</span>
    }
    <span class="keywordflow">else</span> {
      div2 = divisor / 2;
      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;
        xindex &gt; 0; xindex--)
      *pixel++ = (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + (*sums++ &lt;&lt; shift)) / divisor);
      <span class="comment">//destination value</span>
      div2 = (yindex * xfactor) / 2;
      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)
        *pixel++ =
          (<a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + (*sums++ &lt;&lt; shift)) / (yindex * xfactor));
      <span class="comment">//last one different</span>
    }
                                 <span class="comment">//put in destination</span>
    dest-&gt;<a class="code" href="class_i_m_a_g_e.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest, destext, &amp;copyline, 0);
  }
  <span class="keyword">delete</span> [] linesums;
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tesseract-ocr/image/<a class="el" href="img_8h_source.html">img.h</a></li>
<li>tesseract-ocr/image/<a class="el" href="imgs_8cpp_source.html">imgs.cpp</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_i_m_a_g_e.html">IMAGE</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Thu Mar 29 2012 23:42:20 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
