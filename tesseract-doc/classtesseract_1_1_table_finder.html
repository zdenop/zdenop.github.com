<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tesseract: tesseract::TableFinder Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classtesseract_1_1_table_finder.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">tesseract::TableFinder Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="tesseract::TableFinder" -->
<p><code>#include &lt;<a class="el" href="tablefind_8h_source.html">tablefind.h</a>&gt;</code></p>

<p><a href="classtesseract_1_1_table_finder-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a4df3eb2b591c4b8777339e2a300316cf">TableFinder</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#af785f06b1353645cece6b8873a6b78af">~TableFinder</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a6dc1406d2cfe1e8c868198d2532e5d2c">set_resolution</a> (int resolution)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aacc9d09ee5545c6ba681a73ddfff139b">set_left_to_right_language</a> (bool order)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a2addcdf6528f3a69fa25c94940cdc428">Init</a> (int grid_size, const <a class="el" href="class_i_c_o_o_r_d.html">ICOORD</a> &amp;bottom_left, const <a class="el" href="class_i_c_o_o_r_d.html">ICOORD</a> &amp;top_right)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a9f4115ada3be71a1106527aa59f31b43">InsertCleanPartitions</a> (<a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *grid, <a class="el" href="class_t_o___b_l_o_c_k.html">TO_BLOCK</a> *block)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a31d3976698617bc729409e1e0ff0c4ca">LocateTables</a> (<a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *grid, <a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **columns, <a class="el" href="namespacetesseract.html#add06f170e88dcbac90a80ff20c42cc0a">WidthCallback</a> *width_cb, const <a class="el" href="class_f_c_o_o_r_d.html">FCOORD</a> &amp;reskew)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aecbfe718794e99b2f15a43a7f7350848">gridsize</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a9234ae10ef078a56d67d6ceb91050b2e">gridwidth</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a704fbe9cb0edeaa969bb0cc2bd1f9dbd">gridheight</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_i_c_o_o_r_d.html">ICOORD</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_i_c_o_o_r_d.html">ICOORD</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#af994bc64825f51944fa63a0fc61b4e13">tright</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_scroll_view.html">ScrollView</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a> (int x, int y, const char *window_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ad312e62064f4964ac0eb6010d002b9cd">InsertTextPartition</a> (<a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *part)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a216c040efc8dff584076cc324240c524">InsertFragmentedTextPartition</a> (<a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *part)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a818a95d0b0bdb619e0170dac27426942">InsertLeaderPartition</a> (<a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *part)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aa7a21d1842c6592372eb69b49b2010a2">InsertRulingPartition</a> (<a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *part)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#af310b33b86e951125b49e4ac1df2bb68">InsertImagePartition</a> (<a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *part)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a34950c2f035a25bb75f29a5ab51fe191">SplitAndInsertFragmentedTextPartition</a> (<a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *part)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a534bca2a3fa57718c0bdf18b6af69af6">AllowTextPartition</a> (const <a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> &amp;part) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aec9b60ffceb19f3f82186b60c29b7f51">AllowBlob</a> (const <a class="el" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a> &amp;blob) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a81003bea37eced8d746035bd565b9c56">MoveColSegmentsToGrid</a> (ColSegment_LIST *segments, <a class="el" href="namespacetesseract.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> *col_seg_grid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a5dfc53ecb81ee804476fd04f32434e6c">InitializePartitions</a> (<a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **all_columns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ad6c2c9a0fdec2c14ef0ddc63a5d0217d">SetVerticalSpacing</a> (<a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *part)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a51c670936d76fcdf3ed1a0e2730a54c4">SetGlobalSpacings</a> (<a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *grid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a8be2bff4c272c65c0c4e896037620381">set_global_median_xheight</a> (int xheight)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a793bbaf0945bb838b9c934899c4de87a">set_global_median_blob_width</a> (int width)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aa5644866b8727722deec53b73c4d7831">set_global_median_ledding</a> (int ledding)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#acfb82ae105ee34d1360dd0c5dc8487ff">FindNeighbors</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a7f29dd0a40d57b00d4868ff1c656dd6a">MarkTablePartitions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aeb0fc1badeb2def5cf69aca53392c89c">MarkPartitionsUsingLocalInformation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a298f9f253a3fd3109133e6ea40842bc0">HasWideOrNoInterWordGap</a> (<a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *part) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a6436ad4194a19a38669a89b603c27801">HasLeaderAdjacent</a> (const <a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> &amp;part)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a34734ff8fb23f8bfb88dc60e06cb2c17">FilterFalseAlarms</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a5c5163764f1df032be42c7cf953c2ade">FilterParagraphEndings</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a28ab83ed3531ee5fd7c5608c2ec22de4">FilterHeaderAndFooter</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ae3d5e2e4c894d4514717d0593792226d">SmoothTablePartitionRuns</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a7869fe256b237ad13171f13c8a6cc449">GetColumnBlocks</a> (<a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **columns, ColSegment_LIST *col_segments)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a41bef91f2096c4a3bbe486b4d304bddb">GroupColumnBlocks</a> (ColSegment_LIST *current_segments, ColSegment_LIST *col_segments)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a4caabd9ca4346514d60c7dce8400a909">ConsecutiveBoxes</a> (const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;b1, const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;b2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ac3e8a6d03fcaf027677919f284af6500">SetColumnsType</a> (ColSegment_LIST *col_segments)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a7a3319f9a1eab06ef83a6e3f2df7e8d2">GridMergeColumnBlocks</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a30f071829b47f7bd9afdd4ef819f582d">GetTableColumns</a> (ColSegment_LIST *table_columns)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a581a66fbdfdd0da5c3679a31f8d7944e">GetTableRegions</a> (ColSegment_LIST *table_columns, ColSegment_LIST *table_regions)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a9298cd74b3e81315195a547a890752e0">GridMergeTableRegions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a0fdb92fd4cf6c71db61a8bf17f793226">BelongToOneTable</a> (const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;box1, const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;box2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a2af79bdd1c4edbf03f4d2a15ee203be8">AdjustTableBoundaries</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a11d07831ff21f641f54e51b42a446a26">GrowTableBox</a> (const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;table_box, <a class="el" href="class_t_b_o_x.html">TBOX</a> *result_box)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ac694dfdfaa119c35c337dd342073debf">GrowTableToIncludePartials</a> (const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;table_box, const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;search_range, <a class="el" href="class_t_b_o_x.html">TBOX</a> *result_box)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a2f2d85d386d90f680f518bf9e6496411">GrowTableToIncludeLines</a> (const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;table_box, const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;search_range, <a class="el" href="class_t_b_o_x.html">TBOX</a> *result_box)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a6fcf84582f86676bf93e6e49d08dc64a">HLineBelongsToTable</a> (const <a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> &amp;part, const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;table_box)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a265d046f7651f73362a3aa5f3c9453fd">IncludeLeftOutColumnHeaders</a> (<a class="el" href="class_t_b_o_x.html">TBOX</a> *table_box)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ad1d77425898bfe8808255b9a472663ab">DeleteSingleColumnTables</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a89d4134c1260f74cd0b0f6cbecfc2545">GapInXProjection</a> (int *xprojection, int length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a647fe056ae6bb33cc8989f08aac5172f">RecognizeTables</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a0778d0e3d6bc52330704d1143a73f90a">DisplayColSegments</a> (<a class="el" href="class_scroll_view.html">ScrollView</a> *win, ColSegment_LIST *cols, <a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a> (<a class="el" href="class_scroll_view.html">ScrollView</a> *win, <a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *grid, <a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> text_color, <a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> table_color)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a5bed5a7f636ee305aacc4818933cf3da">DisplayColPartitions</a> (<a class="el" href="class_scroll_view.html">ScrollView</a> *win, <a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *grid, <a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> default_color)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ae38774700a97b1690f1530d77432a762">DisplayColPartitionConnections</a> (<a class="el" href="class_scroll_view.html">ScrollView</a> *win, <a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *grid, <a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> default_color)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a7a179e84686323b5fd0d93cbb159bb6d">DisplayColSegmentGrid</a> (<a class="el" href="class_scroll_view.html">ScrollView</a> *win, <a class="el" href="namespacetesseract.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> *grid, <a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#abbd932c16cdfa0cf35f9ef93e2e87f49">WriteToPix</a> (const <a class="el" href="class_f_c_o_o_r_d.html">FCOORD</a> &amp;reskew)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a1856836a1386196d5784244b4a1aa2d0">MakeTableBlocks</a> (<a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *grid, <a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **columns, <a class="el" href="namespacetesseract.html#add06f170e88dcbac90a80ff20c42cc0a">WidthCallback</a> *width_cb)</td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aa4b52f48d63d4881da34b7d84932e84d">SetPartitionSpacings</a> (<a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *grid, <a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **all_columns)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a945f735c68a1f3fe672e759828f36f71">resolution_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a1d5828695e17f10f2d4140476c9f34fd">global_median_ledding_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetesseract.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetesseract.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtesseract_1_1_table_finder.html#a528595d792a34a2a361670aced196165">left_to_right_language_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00131">131</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4df3eb2b591c4b8777339e2a300316cf"></a><!-- doxytag: member="tesseract::TableFinder::TableFinder" ref="a4df3eb2b591c4b8777339e2a300316cf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tesseract::TableFinder::TableFinder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00168">168</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">    : <a class="code" href="classtesseract_1_1_table_finder.html#a945f735c68a1f3fe672e759828f36f71">resolution_</a>(0),
      <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a>(0),
      <a class="code" href="classtesseract_1_1_table_finder.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a>(0),
      <a class="code" href="classtesseract_1_1_table_finder.html#a1d5828695e17f10f2d4140476c9f34fd">global_median_ledding_</a>(0),
      <a class="code" href="classtesseract_1_1_table_finder.html#a528595d792a34a2a361670aced196165">left_to_right_language_</a>(<span class="keyword">true</span>) {
}
</pre></div>
</div>
</div>
<a class="anchor" id="af785f06b1353645cece6b8873a6b78af"></a><!-- doxytag: member="tesseract::TableFinder::~TableFinder" ref="af785f06b1353645cece6b8873a6b78af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tesseract::TableFinder::~TableFinder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00176">176</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                          {
  <span class="comment">// ColPartitions and ColSegments created by this class for storage in grids</span>
  <span class="comment">// need to be deleted explicitly.</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.ClearGridData(&amp;DeleteObject&lt;ColPartition&gt;);
  <a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>.ClearGridData(&amp;DeleteObject&lt;ColPartition&gt;);
  <a class="code" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>.ClearGridData(&amp;DeleteObject&lt;ColPartition&gt;);
  <a class="code" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>.ClearGridData(&amp;DeleteObject&lt;ColSegment&gt;);
  <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.ClearGridData(&amp;DeleteObject&lt;ColSegment&gt;);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a2af79bdd1c4edbf03f4d2a15ee203be8"></a><!-- doxytag: member="tesseract::TableFinder::AdjustTableBoundaries" ref="a2af79bdd1c4edbf03f4d2a15ee203be8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::AdjustTableBoundaries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01485">1485</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
  <span class="comment">// Iterate the table regions in the grid</span>
  ColSegment_CLIST adjusted_tables;
  ColSegment_C_IT it(&amp;adjusted_tables);
  <a class="code" href="namespacetesseract.html#ac7f2f25bfb4914e691db80a6b523c703">ColSegmentGridSearch</a> gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);
  gsearch.StartFullSearch();
  ColSegment* table = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((table = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; table_box = table-&gt;bounding_box();
    <a class="code" href="class_t_b_o_x.html">TBOX</a> grown_box = table_box;
    <a class="code" href="classtesseract_1_1_table_finder.html#a11d07831ff21f641f54e51b42a446a26">GrowTableBox</a>(table_box, &amp;grown_box);
    <span class="comment">// To prevent a table from expanding again, do not insert the</span>
    <span class="comment">// modified box back to the grid. Instead move it to a list and</span>
    <span class="comment">// and remove it from the grid. The list is moved later back to the grid.</span>
    <span class="keywordflow">if</span> (!grown_box.<a class="code" href="class_t_b_o_x.html#a7c6996aea1eb6be07b1d6634bf36cfd6">null_box</a>()) {
      ColSegment* col = <span class="keyword">new</span> ColSegment();
      col-&gt;InsertBox(grown_box);
      it.add_after_then_move(col);
    }
    gsearch.RemoveBBox();
    <span class="keyword">delete</span> table;
  }
  <span class="comment">// clear table grid to move final tables in it</span>
  <span class="comment">// TODO(nbeato): table_grid_ should already be empty. The above loop</span>
  <span class="comment">// removed everything. Maybe just assert it is empty?</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.Clear();
  it.move_to_first();
  <span class="comment">// move back final tables to table_grid_</span>
  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {
    ColSegment* seg = it.extract();
    <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, seg);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec9b60ffceb19f3f82186b60c29b7f51"></a><!-- doxytag: member="tesseract::TableFinder::AllowBlob" ref="aec9b60ffceb19f3f82186b60c29b7f51" args="(const BLOBNBOX &amp;blob) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::AllowBlob </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>blob</em></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00502">502</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                      {
  <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = blob.<a class="code" href="class_b_l_o_b_n_b_o_x.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>();
  <span class="keyword">const</span> <span class="keywordtype">double</span> kHeightRequired = <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * <a class="code" href="namespacetesseract.html#a0de56cf05a1e8a1aee7e6bcd81e34742">kAllowBlobHeight</a>;
  <span class="keyword">const</span> <span class="keywordtype">double</span> kWidthRequired = <a class="code" href="classtesseract_1_1_table_finder.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a> * <a class="code" href="namespacetesseract.html#aa86b1f68578cb7c0b834b2a137376ed7">kAllowBlobWidth</a>;
  <span class="keyword">const</span> <span class="keywordtype">int</span> median_area = <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * <a class="code" href="classtesseract_1_1_table_finder.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a>;
  <span class="keyword">const</span> <span class="keywordtype">double</span> kAreaRequired = median_area * <a class="code" href="namespacetesseract.html#a714f54e357a15f2578470c0430a9ec5f">kAllowBlobArea</a>;
  <span class="comment">// Keep comparisons strictly greater to disallow 0!</span>
  <span class="keywordflow">return</span> box.<a class="code" href="class_t_b_o_x.html#a8379d4bbc72bdbb1f069fc14790e632d">height</a>() &gt; kHeightRequired &amp;&amp;
         box.<a class="code" href="class_t_b_o_x.html#af95494a2ccacc70cc2b83820b2948619">width</a>() &gt; kWidthRequired &amp;&amp;
         box.<a class="code" href="class_t_b_o_x.html#a46fca3df91dc271b30b69531e9d8178a">area</a>() &gt; kAreaRequired;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a534bca2a3fa57718c0bdf18b6af69af6"></a><!-- doxytag: member="tesseract::TableFinder::AllowTextPartition" ref="a534bca2a3fa57718c0bdf18b6af69af6" args="(const ColPartition &amp;part) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::AllowTextPartition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> &amp;&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00489">489</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                   {
  <span class="keyword">const</span> <span class="keywordtype">double</span> kHeightRequired = <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * <a class="code" href="namespacetesseract.html#a9b013c09ae4bd53f0b147f3945ae9c8c">kAllowTextHeight</a>;
  <span class="keyword">const</span> <span class="keywordtype">double</span> kWidthRequired = <a class="code" href="classtesseract_1_1_table_finder.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a> * <a class="code" href="namespacetesseract.html#a92f436872c90049797ee7b1356f50133">kAllowTextWidth</a>;
  <span class="keyword">const</span> <span class="keywordtype">int</span> median_area = <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * <a class="code" href="classtesseract_1_1_table_finder.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a>;
  <span class="keyword">const</span> <span class="keywordtype">double</span> kAreaPerBlobRequired = median_area * <a class="code" href="namespacetesseract.html#a744c12bd96933e697e5afff35c492dc0">kAllowTextArea</a>;
  <span class="comment">// Keep comparisons strictly greater to disallow 0!</span>
  <span class="keywordflow">return</span> part.median_size() &gt; kHeightRequired &amp;&amp;
         part.median_width() &gt; kWidthRequired &amp;&amp;
         part.bounding_box().area() &gt; kAreaPerBlobRequired * part.boxes_count();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0fdb92fd4cf6c71db61a8bf17f793226"></a><!-- doxytag: member="tesseract::TableFinder::BelongToOneTable" ref="a0fdb92fd4cf6c71db61a8bf17f793226" args="(const TBOX &amp;box1, const TBOX &amp;box2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::BelongToOneTable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>box1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>box2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01444">1444</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     {
  <span class="comment">// Check the obvious case. Most likely not true because overlapping boxes</span>
  <span class="comment">// should already be merged, but seems like a good thing to do in case things</span>
  <span class="comment">// change.</span>
  <span class="keywordflow">if</span> (box1.<a class="code" href="class_t_b_o_x.html#adcc7d2858ccb61cd715dbcff32bd5582">overlap</a>(box2))
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
  <span class="comment">// Check for ColPartitions spanning both table regions</span>
  <a class="code" href="class_t_b_o_x.html">TBOX</a> bbox = box1.<a class="code" href="class_t_b_o_x.html#ab8ae7b66782fa1802f78ff034da16089">bounding_union</a>(box2);
  <span class="comment">// Start a rect search on bbox</span>
  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
      rectsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  rectsearch.StartRectSearch(bbox);
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = rectsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; part_box = part-&gt;bounding_box();
    <span class="comment">// return true if a colpartition spanning both table regions is found</span>
    <span class="keywordflow">if</span> (part_box.<a class="code" href="class_t_b_o_x.html#adcc7d2858ccb61cd715dbcff32bd5582">overlap</a>(box1) &amp;&amp; part_box.<a class="code" href="class_t_b_o_x.html#adcc7d2858ccb61cd715dbcff32bd5582">overlap</a>(box2))
      <span class="keywordflow">return</span> <span class="keyword">true</span>;
  }
  <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afaa3f28f4a9e645ded90e9f74016b217"></a><!-- doxytag: member="tesseract::TableFinder::bleft" ref="afaa3f28f4a9e645ded90e9f74016b217" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_c_o_o_r_d.html">ICOORD</a> &amp; tesseract::TableFinder::bleft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00387">387</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                       {
  <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.bleft();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4caabd9ca4346514d60c7dce8400a909"></a><!-- doxytag: member="tesseract::TableFinder::ConsecutiveBoxes" ref="a4caabd9ca4346514d60c7dce8400a909" args="(const TBOX &amp;b1, const TBOX &amp;b2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::ConsecutiveBoxes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>b1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>b2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00568">568</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {
  <span class="keywordtype">int</span> x_margin = 20;
  <span class="keywordtype">int</span> y_margin = 5;
  <span class="keywordflow">return</span> (abs(b1.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>() - b2.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>()) &lt; x_margin) &amp;&amp;
      (abs(b1.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() - b2.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>()) &lt; x_margin) &amp;&amp;
      (abs(b1.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>()-b2.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>()) &lt; y_margin ||
       abs(b2.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>()-b1.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>()) &lt; y_margin);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad1d77425898bfe8808255b9a472663ab"></a><!-- doxytag: member="tesseract::TableFinder::DeleteSingleColumnTables" ref="ad1d77425898bfe8808255b9a472663ab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DeleteSingleColumnTables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01702">1702</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                           {
  <span class="keywordtype">int</span> page_width = <a class="code" href="classtesseract_1_1_table_finder.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().<a class="code" href="class_i_c_o_o_r_d.html#a59722a47c540007c58a539f0e35b3f33" title="access function">x</a>() - <a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="class_i_c_o_o_r_d.html#a59722a47c540007c58a539f0e35b3f33" title="access function">x</a>();
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(page_width &gt; 0);
  <span class="comment">// create an integer array to hold projection on x-axis</span>
  <span class="keywordtype">int</span>* table_xprojection = <span class="keyword">new</span> <span class="keywordtype">int</span>[page_width];
  <span class="comment">// Iterate through all tables in the table grid</span>
  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
      table_search(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);
  table_search.StartFullSearch();
  ColSegment* table;
  <span class="keywordflow">while</span> ((table = table_search.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="class_t_b_o_x.html">TBOX</a> table_box = table-&gt;bounding_box();
    <span class="comment">// reset the projection array</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; page_width; i++) {
      table_xprojection[i] = 0;
    }
    <span class="comment">// Start a rect search on table_box</span>
    GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
        rectsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
    rectsearch.SetUniqueMode(<span class="keyword">true</span>);
    rectsearch.StartRectSearch(table_box);
    ColPartition* part;
    <span class="keywordflow">while</span> ((part = rectsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="keywordflow">if</span> (!part-&gt;IsTextType())
        <span class="keywordflow">continue</span>;  <span class="comment">// Do not consider non-text partitions</span>
      <span class="keywordflow">if</span> (part-&gt;flow() == <a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>)
        <span class="keywordflow">continue</span>;  <span class="comment">// Assume leaders are in tables</span>
      <a class="code" href="class_t_b_o_x.html">TBOX</a> part_box = part-&gt;bounding_box();
      <span class="comment">// Do not consider partitions partially covered by the table</span>
      <span class="keywordflow">if</span> (part_box.<a class="code" href="class_t_b_o_x.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(table_box) &lt; <a class="code" href="namespacetesseract.html#a0f2ae212b6b475efca7981fd1dc51e29">kMinOverlapWithTable</a>)
        <span class="keywordflow">continue</span>;
      BLOBNBOX_CLIST* part_boxes = part-&gt;boxes();
      BLOBNBOX_C_IT pit(part_boxes);

      <span class="comment">// Make sure overlapping blobs don&#39;t artificially inflate the number</span>
      <span class="comment">// of rows in the table. This happens frequently with things such as</span>
      <span class="comment">// decimals and split characters. Do this by assuming the column</span>
      <span class="comment">// partition is sorted mostly left to right and just clip</span>
      <span class="comment">// bounding boxes by the previous box&#39;s extent.</span>
      <span class="keywordtype">int</span> next_position_to_write = 0;

      <span class="keywordflow">for</span> (pit.mark_cycle_pt(); !pit.cycled_list(); pit.forward()) {
        <a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a> *pblob = pit.data();
        <span class="comment">// ignore blob height for the purpose of projection since we</span>
        <span class="comment">// are only interested in finding valleys</span>
        <span class="keywordtype">int</span> xstart = pblob-&gt;<a class="code" href="class_b_l_o_b_n_b_o_x.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>();
        <span class="keywordtype">int</span> xend = pblob-&gt;<a class="code" href="class_b_l_o_b_n_b_o_x.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();

        xstart = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(xstart, next_position_to_write);
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = xstart; i &lt; xend; i++)
          table_xprojection[i - <a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="class_i_c_o_o_r_d.html#a59722a47c540007c58a539f0e35b3f33" title="access function">x</a>()]++;
        next_position_to_write = xend;
      }
    }
    <span class="comment">// Find largest valley between two reasonable peaks in the table</span>
    <span class="keywordflow">if</span> (!<a class="code" href="classtesseract_1_1_table_finder.html#a89d4134c1260f74cd0b0f6cbecfc2545">GapInXProjection</a>(table_xprojection, page_width)) {
      table_search.RemoveBBox();
      <span class="keyword">delete</span> table;
    }
  }
  <span class="keyword">delete</span>[] table_xprojection;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae38774700a97b1690f1530d77432a762"></a><!-- doxytag: member="tesseract::TableFinder::DisplayColPartitionConnections" ref="ae38774700a97b1690f1530d77432a762" args="(ScrollView *win, ColPartitionGrid *grid, ScrollView::Color default_color)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColPartitionConnections </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>default_color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01949">1949</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
    gsearch(grid);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = part-&gt;bounding_box();
    <span class="keywordtype">int</span> left_x = box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>();
    <span class="keywordtype">int</span> right_x = box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
    <span class="keywordtype">int</span> top_y = box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();
    <span class="keywordtype">int</span> bottom_y = box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();

    ColPartition* upper_part = part-&gt;nearest_neighbor_above();
    <span class="keywordflow">if</span> (upper_part) {
      <a class="code" href="class_t_b_o_x.html">TBOX</a> upper_box = upper_part-&gt;bounding_box();
      <span class="keywordtype">int</span> mid_x = (left_x + right_x) / 2;
      <span class="keywordtype">int</span> mid_y = (top_y + bottom_y) / 2;
      <span class="keywordtype">int</span> other_x = (upper_box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>() + upper_box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>()) / 2;
      <span class="keywordtype">int</span> other_y = (upper_box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + upper_box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>()) / 2;
      win-&gt;<a class="code" href="class_scroll_view.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);
      win-&gt;<a class="code" href="class_scroll_view.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);
      win-&gt;<a class="code" href="class_scroll_view.html#a2ba16f17fc401bb28be1a08160207e45">Line</a>(mid_x, mid_y, other_x, other_y);
    }
    ColPartition* lower_part = part-&gt;nearest_neighbor_below();
    <span class="keywordflow">if</span> (lower_part) {
      <a class="code" href="class_t_b_o_x.html">TBOX</a> lower_box = lower_part-&gt;bounding_box();
      <span class="keywordtype">int</span> mid_x = (left_x + right_x) / 2;
      <span class="keywordtype">int</span> mid_y = (top_y + bottom_y) / 2;
      <span class="keywordtype">int</span> other_x = (lower_box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>() + lower_box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>()) / 2;
      <span class="keywordtype">int</span> other_y = (lower_box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + lower_box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>()) / 2;
      win-&gt;<a class="code" href="class_scroll_view.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);
      win-&gt;<a class="code" href="class_scroll_view.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);
      win-&gt;<a class="code" href="class_scroll_view.html#a2ba16f17fc401bb28be1a08160207e45">Line</a>(mid_x, mid_y, other_x, other_y);
    }
  }
  win-&gt;<a class="code" href="class_scroll_view.html#a609e2f95d6421deb558244f5d45cf25a">UpdateWindow</a>();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="aea205753ca3f6e11043801843025e59e"></a><!-- doxytag: member="tesseract::TableFinder::DisplayColPartitions" ref="aea205753ca3f6e11043801843025e59e" args="(ScrollView *win, ColPartitionGrid *grid, ScrollView::Color text_color, ScrollView::Color table_color)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColPartitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>text_color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>table_color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01915">1915</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                    {
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color = default_color;
  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
    gsearch(grid);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    color = default_color;
    <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)
      color = table_color;

    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = part-&gt;bounding_box();
    <span class="keywordtype">int</span> left_x = box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>();
    <span class="keywordtype">int</span> right_x = box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
    <span class="keywordtype">int</span> top_y = box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();
    <span class="keywordtype">int</span> bottom_y = box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();
    win-&gt;<a class="code" href="class_scroll_view.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);
    win-&gt;<a class="code" href="class_scroll_view.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);
    win-&gt;<a class="code" href="class_scroll_view.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a>(left_x, bottom_y, right_x, top_y);
  }
  win-&gt;<a class="code" href="class_scroll_view.html#a609e2f95d6421deb558244f5d45cf25a">UpdateWindow</a>();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a5bed5a7f636ee305aacc4818933cf3da"></a><!-- doxytag: member="tesseract::TableFinder::DisplayColPartitions" ref="a5bed5a7f636ee305aacc4818933cf3da" args="(ScrollView *win, ColPartitionGrid *grid, ScrollView::Color default_color)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColPartitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>default_color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01943">1943</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                      {
  <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(win, grid, default_color, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a61dec9bc0aaf1d527a731b2a6ce055c8">ScrollView::YELLOW</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a179e84686323b5fd0d93cbb159bb6d"></a><!-- doxytag: member="tesseract::TableFinder::DisplayColSegmentGrid" ref="a7a179e84686323b5fd0d93cbb159bb6d" args="(ScrollView *win, ColSegmentGrid *grid, ScrollView::Color color)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColSegmentGrid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetesseract.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01890">1890</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
    gsearch(grid);
  gsearch.StartFullSearch();
  ColSegment* seg = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((seg = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = seg-&gt;bounding_box();
    <span class="keywordtype">int</span> left_x = box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>();
    <span class="keywordtype">int</span> right_x = box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
    <span class="keywordtype">int</span> top_y = box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();
    <span class="keywordtype">int</span> bottom_y = box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();
    win-&gt;<a class="code" href="class_scroll_view.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);
    win-&gt;<a class="code" href="class_scroll_view.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);
    win-&gt;<a class="code" href="class_scroll_view.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a>(left_x, bottom_y, right_x, top_y);
  }
  win-&gt;<a class="code" href="class_scroll_view.html#a609e2f95d6421deb558244f5d45cf25a">UpdateWindow</a>();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a0778d0e3d6bc52330704d1143a73f90a"></a><!-- doxytag: member="tesseract::TableFinder::DisplayColSegments" ref="a0778d0e3d6bc52330704d1143a73f90a" args="(ScrollView *win, ColSegment_LIST *cols, ScrollView::Color color)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColSegments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01870">1870</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {
<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  win-&gt;<a class="code" href="class_scroll_view.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);
  win-&gt;<a class="code" href="class_scroll_view.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);
  ColSegment_IT it(segments);
  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {
    ColSegment* col = it.data();
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = col-&gt;bounding_box();
    <span class="keywordtype">int</span> left_x = box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>();
    <span class="keywordtype">int</span> right_x = box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
    <span class="keywordtype">int</span> top_y = box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();
    <span class="keywordtype">int</span> bottom_y = box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();
    win-&gt;<a class="code" href="class_scroll_view.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a>(left_x, bottom_y, right_x, top_y);
  }
  win-&gt;<a class="code" href="class_scroll_view.html#a609e2f95d6421deb558244f5d45cf25a">UpdateWindow</a>();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a34734ff8fb23f8bfb88dc60e06cb2c17"></a><!-- doxytag: member="tesseract::TableFinder::FilterFalseAlarms" ref="a34734ff8fb23f8bfb88dc60e06cb2c17" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::FilterFalseAlarms </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00988">988</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                    {
  <a class="code" href="classtesseract_1_1_table_finder.html#a5c5163764f1df032be42c7cf953c2ade">FilterParagraphEndings</a>();
  <a class="code" href="classtesseract_1_1_table_finder.html#a28ab83ed3531ee5fd7c5608c2ec22de4">FilterHeaderAndFooter</a>();
  <span class="comment">// TODO(nbeato): Fully justified text as non-table?</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a28ab83ed3531ee5fd7c5608c2ec22de4"></a><!-- doxytag: member="tesseract::TableFinder::FilterHeaderAndFooter" ref="a28ab83ed3531ee5fd7c5608c2ec22de4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::FilterHeaderAndFooter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01074">1074</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
  <span class="comment">// Consider top-most text colpartition as header and bottom most as footer</span>
  ColPartition* header = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  ColPartition* footer = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordtype">int</span> max_top = <a class="code" href="host_8h.html#ae6f88d5bb15e97510f484289f2fc89fd">MIN_INT32</a>;
  <span class="keywordtype">int</span> min_bottom = <a class="code" href="host_8h.html#aac62d87844689a18b6f5339a89ed6e7f">MAX_INT32</a>;
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (!part-&gt;IsTextType())
      <span class="keywordflow">continue</span>;  <span class="comment">// Consider only text partitions</span>
    <span class="keywordtype">int</span> top = part-&gt;bounding_box().top();
    <span class="keywordtype">int</span> bottom = part-&gt;bounding_box().bottom();
    <span class="keywordflow">if</span> (top &gt; max_top) {
      max_top = top;
      header = part;
    }
    <span class="keywordflow">if</span> (bottom &lt; min_bottom) {
      min_bottom = bottom;
      footer = part;
    }
  }
  <span class="keywordflow">if</span> (header)
    header-&gt;clear_table_type();
  <span class="keywordflow">if</span> (footer)
    footer-&gt;clear_table_type();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5c5163764f1df032be42c7cf953c2ade"></a><!-- doxytag: member="tesseract::TableFinder::FilterParagraphEndings" ref="a5c5163764f1df032be42c7cf953c2ade" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::FilterParagraphEndings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00994">994</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
  <span class="comment">// Detect last line of paragraph</span>
  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (part-&gt;type() != <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)
      <span class="keywordflow">continue</span>;  <span class="comment">// Consider only table partitions</span>

    <span class="comment">// Paragraph ending should have flowing text above it.</span>
    ColPartition* upper_part = part-&gt;nearest_neighbor_above();
    <span class="keywordflow">if</span> (!upper_part)
      <span class="keywordflow">continue</span>;
    <span class="keywordflow">if</span> (upper_part-&gt;type() != <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60aaa63d8d8a99ddc2b3957f8e8787b4eca">PT_FLOWING_TEXT</a>)
      <span class="keywordflow">continue</span>;
    <span class="keywordflow">if</span> (upper_part-&gt;bounding_box().width() &lt;
        2 * part-&gt;bounding_box().width())
      <span class="keywordflow">continue</span>;
    <span class="comment">// Check if its the last line of a paragraph.</span>
    <span class="comment">// In most cases, a paragraph ending should be left-aligned to text line</span>
    <span class="comment">// above it. Sometimes, it could be a 2 line paragraph, in which case</span>
    <span class="comment">// the line above it is indented.</span>
    <span class="comment">// To account for that, check if the partition center is to</span>
    <span class="comment">// the left of the one above it.</span>
    <span class="keywordtype">int</span> mid = (part-&gt;bounding_box().left() + part-&gt;bounding_box().right()) / 2;
    <span class="keywordtype">int</span> upper_mid = (upper_part-&gt;bounding_box().left() +
                     upper_part-&gt;bounding_box().right()) / 2;
    <span class="keywordtype">int</span> current_spacing = 0;  <span class="comment">// spacing of the current line to margin</span>
    <span class="keywordtype">int</span> upper_spacing = 0;    <span class="comment">// spacing of the previous line to the margin</span>
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_table_finder.html#a528595d792a34a2a361670aced196165">left_to_right_language_</a>) {
      <span class="comment">// Left to right languages, use mid - left to figure out the distance</span>
      <span class="comment">// the middle is from the left margin.</span>
      <span class="keywordtype">int</span> left = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a>(part-&gt;bounding_box().left(),
                     upper_part-&gt;bounding_box().left());
      current_spacing = mid - left;
      upper_spacing = upper_mid - left;
    } <span class="keywordflow">else</span> {
      <span class="comment">// Right to left languages, use right - mid to figure out the distance</span>
      <span class="comment">// the middle is from the right margin.</span>
      <span class="keywordtype">int</span> right = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(part-&gt;bounding_box().right(),
                      upper_part-&gt;bounding_box().right());
      current_spacing = right - mid;
      upper_spacing = right - upper_mid;
    }
    <span class="keywordflow">if</span> (current_spacing * <a class="code" href="namespacetesseract.html#ac6a1849ed370a22bb4a2b4a94ca1634c">kParagraphEndingPreviousLineRatio</a> &gt; upper_spacing)
      <span class="keywordflow">continue</span>;

    <span class="comment">// Paragraphs should have similar fonts.</span>
    <span class="keywordflow">if</span> (!part-&gt;MatchingSizes(*upper_part) ||
        !part-&gt;MatchingStrokeWidth(*upper_part, <a class="code" href="namespacetesseract.html#a477fb9ba9844da49a285692762b117d9">kStrokeWidthFractionalTolerance</a>,
                                   <a class="code" href="namespacetesseract.html#a7dc74940f73222c81918e8701c301516">kStrokeWidthConstantTolerance</a>)) {
      <span class="keywordflow">continue</span>;
    }

    <span class="comment">// The last line of a paragraph should be left aligned.</span>
    <span class="comment">// TODO(nbeato): This would be untrue if the text was right aligned.</span>
    <span class="comment">// How often is that?</span>
    <span class="keywordflow">if</span> (part-&gt;space_to_left() &gt;
        <a class="code" href="namespacetesseract.html#a1b76b5479d00c222f8a17e22d317b770">kMaxParagraphEndingLeftSpaceMultiple</a> * part-&gt;median_size())
      <span class="keywordflow">continue</span>;
    <span class="comment">// The line above it should be right aligned (assuming justified format).</span>
    <span class="comment">// Since we can&#39;t assume justified text, we compare whitespace to text.</span>
    <span class="comment">// The above line should have majority spanning text (or the current</span>
    <span class="comment">// line could have fit on the previous line). So compare</span>
    <span class="comment">// whitespace to text.</span>
    <span class="keywordflow">if</span> (upper_part-&gt;bounding_box().width() &lt;
        <a class="code" href="namespacetesseract.html#a59fff4582ea32f8a8661fbc20a3ab947">kMinParagraphEndingTextToWhitespaceRatio</a> * upper_part-&gt;space_to_right())
      <span class="keywordflow">continue</span>;

    <span class="comment">// Ledding above the line should be less than ledding below</span>
    <span class="keywordflow">if</span> (part-&gt;space_above() &gt;= part-&gt;space_below() ||
        part-&gt;space_above() &gt; 2 * <a class="code" href="classtesseract_1_1_table_finder.html#a1d5828695e17f10f2d4140476c9f34fd">global_median_ledding_</a>)
      <span class="keywordflow">continue</span>;

    <span class="comment">// If all checks failed, it is probably text.</span>
    part-&gt;clear_table_type();
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acfb82ae105ee34d1360dd0c5dc8487ff"></a><!-- doxytag: member="tesseract::TableFinder::FindNeighbors" ref="acfb82ae105ee34d1360dd0c5dc8487ff" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::FindNeighbors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00766">766</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                {
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="comment">// TODO(nbeato): Rename this function, meaning is different now.</span>
    <span class="comment">// IT is finding nearest neighbors its own way</span>
    <span class="comment">//SetVerticalSpacing(part);</span>

    ColPartition* upper = part-&gt;SingletonPartner(<span class="keyword">true</span>);
    <span class="keywordflow">if</span> (upper)
      part-&gt;set_nearest_neighbor_above(upper);

    ColPartition* lower = part-&gt;SingletonPartner(<span class="keyword">false</span>);
    <span class="keywordflow">if</span> (lower)
      part-&gt;set_nearest_neighbor_below(lower);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a89d4134c1260f74cd0b0f6cbecfc2545"></a><!-- doxytag: member="tesseract::TableFinder::GapInXProjection" ref="a89d4134c1260f74cd0b0f6cbecfc2545" args="(int *xprojection, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::GapInXProjection </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>xprojection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01767">1767</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                               {
  <span class="comment">// Find peak value of the histogram</span>
  <span class="keywordtype">int</span> peak_value = 0;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; length; i++) {
    <span class="keywordflow">if</span> (xprojection[i] &gt; peak_value) {
      peak_value = xprojection[i];
    }
  }
  <span class="comment">// Peak value represents the maximum number of horizontally</span>
  <span class="comment">// overlapping colpartitions, so this can be considered as the</span>
  <span class="comment">// number of rows in the table</span>
  <span class="keywordflow">if</span> (peak_value &lt; <a class="code" href="namespacetesseract.html#a4947294f7e711f5f1713df9de000b1b8">kMinRowsInTable</a>)
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
  <span class="keywordtype">double</span> projection_threshold = <a class="code" href="namespacetesseract.html#ae12e73878098046ae28b0d54408359f7">kSmallTableProjectionThreshold</a> * peak_value;
  <span class="keywordflow">if</span> (peak_value &gt;= <a class="code" href="namespacetesseract.html#adf7c67274b1cdc63e4afeb2500796de7">kLargeTableRowCount</a>)
    projection_threshold = <a class="code" href="namespacetesseract.html#a39b11305adc922233ab775b31d94b6bb">kLargeTableProjectionThreshold</a> * peak_value;
  <span class="comment">// Threshold the histogram</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; length; i++) {
    xprojection[i] = (xprojection[i] &gt;= projection_threshold) ? 1 : 0;
  }
  <span class="comment">// Find the largest run of zeros between two ones</span>
  <span class="keywordtype">int</span> largest_gap = 0;
  <span class="keywordtype">int</span> run_start = -1;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; length; i++) {
    <span class="comment">// detect start of a run of zeros</span>
    <span class="keywordflow">if</span> (xprojection[i - 1] &amp;&amp; !xprojection[i]) {
      run_start = i;
    }
    <span class="comment">// detect end of a run of zeros and update the value of largest gap</span>
    <span class="keywordflow">if</span> (run_start != -1 &amp;&amp; !xprojection[i - 1] &amp;&amp; xprojection[i]) {
      <span class="keywordtype">int</span> gap = i - run_start;
      <span class="keywordflow">if</span> (gap &gt; largest_gap)
        largest_gap = gap;
      run_start = -1;
    }
  }
  <span class="keywordflow">return</span> largest_gap &gt; <a class="code" href="namespacetesseract.html#af950654bba3a03e1ba3f1df8177cdd73">kMaxXProjectionGapFactor</a> * <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7869fe256b237ad13171f13c8a6cc449"></a><!-- doxytag: member="tesseract::TableFinder::GetColumnBlocks" ref="a7869fe256b237ad13171f13c8a6cc449" args="(ColPartitionSet **columns, ColSegment_LIST *col_segments)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GetColumnBlocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>col_segments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00523">523</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classtesseract_1_1_table_finder.html#a704fbe9cb0edeaa969bb0cc2bd1f9dbd">gridheight</a>(); ++i) {
    ColPartitionSet* columns = all_columns[i];
    <span class="keywordflow">if</span> (columns != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      ColSegment_LIST new_blocks;
      <span class="comment">// Get boxes from the current vertical position on the grid</span>
      columns-&gt;GetColumnBoxes(i * <a class="code" href="classtesseract_1_1_table_finder.html#aecbfe718794e99b2f15a43a7f7350848">gridsize</a>(), (i+1) * <a class="code" href="classtesseract_1_1_table_finder.html#aecbfe718794e99b2f15a43a7f7350848">gridsize</a>(), &amp;new_blocks);
      <span class="comment">// Merge the new_blocks boxes into column_blocks if they are well-aligned</span>
      <a class="code" href="classtesseract_1_1_table_finder.html#a41bef91f2096c4a3bbe486b4d304bddb">GroupColumnBlocks</a>(&amp;new_blocks, column_blocks);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a30f071829b47f7bd9afdd4ef819f582d"></a><!-- doxytag: member="tesseract::TableFinder::GetTableColumns" ref="a30f071829b47f7bd9afdd4ef819f582d" args="(ColSegment_LIST *table_columns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GetTableColumns </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>table_columns</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01273">1273</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {
  ColSegment_IT it(table_columns);
  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
    gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  gsearch.StartFullSearch();
  ColPartition* part;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (part-&gt;inside_table_column() || part-&gt;type() != <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)
      <span class="keywordflow">continue</span>;  <span class="comment">// prevent a partition to be assigned to multiple columns</span>
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = part-&gt;bounding_box();
    ColSegment* col = <span class="keyword">new</span> ColSegment();
    col-&gt;InsertBox(box);
    part-&gt;set_inside_table_column(<span class="keyword">true</span>);
    <span class="comment">// Start a search below the current cell to find bottom neighbours</span>
    <span class="comment">// Note: a full search will always process things above it first, so</span>
    <span class="comment">// this should be starting at the highest cell and working its way down.</span>
    GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
        vsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
    vsearch.StartVerticalSearch(box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());
    ColPartition* neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordtype">bool</span> found_neighbours = <span class="keyword">false</span>;
    <span class="keywordflow">while</span> ((neighbor = vsearch.NextVerticalSearch(<span class="keyword">true</span>)) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="comment">// only consider neighbors not assigned to any column yet</span>
      <span class="keywordflow">if</span> (neighbor-&gt;inside_table_column())
        <span class="keywordflow">continue</span>;
      <span class="comment">// Horizontal lines should not break the flow</span>
      <span class="keywordflow">if</span> (neighbor-&gt;IsHorizontalLine())
        <span class="keywordflow">continue</span>;
      <span class="comment">// presence of a non-table neighbor marks the end of current</span>
      <span class="comment">// table column</span>
      <span class="keywordflow">if</span> (neighbor-&gt;type() != <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)
        <span class="keywordflow">break</span>;
      <span class="comment">// add the neighbor partition to the table column</span>
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; neighbor_box = neighbor-&gt;bounding_box();
      col-&gt;InsertBox(neighbor_box);
      neighbor-&gt;set_inside_table_column(<span class="keyword">true</span>);
      found_neighbours = <span class="keyword">true</span>;
    }
    <span class="keywordflow">if</span> (found_neighbours) {
      it.add_after_then_move(col);
    } <span class="keywordflow">else</span> {
      part-&gt;set_inside_table_column(<span class="keyword">false</span>);
      <span class="keyword">delete</span> col;
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a581a66fbdfdd0da5c3679a31f8d7944e"></a><!-- doxytag: member="tesseract::TableFinder::GetTableRegions" ref="a581a66fbdfdd0da5c3679a31f8d7944e" args="(ColSegment_LIST *table_columns, ColSegment_LIST *table_regions)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GetTableRegions </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>table_columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>table_regions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01323">1323</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
  ColSegment_IT cit(table_columns);
  ColSegment_IT rit(table_regions);
  <span class="comment">// Iterate through column blocks</span>
  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
      gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>);
  gsearch.StartFullSearch();
  ColSegment* part;
  <span class="keywordtype">int</span> page_height = <a class="code" href="classtesseract_1_1_table_finder.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().<a class="code" href="class_i_c_o_o_r_d.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>() - <a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="class_i_c_o_o_r_d.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>();
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(page_height &gt; 0);
  <span class="comment">// create a bool array to hold projection on y-axis</span>
  <span class="keywordtype">bool</span>* table_region = <span class="keyword">new</span> <span class="keywordtype">bool</span>[page_height];
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="class_t_b_o_x.html">TBOX</a> part_box = part-&gt;bounding_box();
    <span class="comment">// reset the projection array</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; page_height; i++) {
      table_region[i] = <span class="keyword">false</span>;
    }
    <span class="comment">// iterate through all table columns to find regions in the current</span>
    <span class="comment">// page column block</span>
    cit.move_to_first();
    <span class="keywordflow">for</span> (cit.mark_cycle_pt(); !cit.cycled_list(); cit.forward()) {
      <a class="code" href="class_t_b_o_x.html">TBOX</a> col_box = cit.data()-&gt;bounding_box();
      <span class="comment">// find intersection region of table column and page column</span>
      <a class="code" href="class_t_b_o_x.html">TBOX</a> intersection_box = col_box.<a class="code" href="class_t_b_o_x.html#a33e45c7389737cdf1a908bca0af315c4">intersection</a>(part_box);
      <span class="comment">// project table column on the y-axis</span>
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = intersection_box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(); i &lt; intersection_box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(); i++) {
        table_region[i - <a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="class_i_c_o_o_r_d.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>()] = <span class="keyword">true</span>;
      }
    }
    <span class="comment">// set x-limits of table regions to page column width</span>
    <a class="code" href="class_t_b_o_x.html">TBOX</a> current_table_box;
    current_table_box.<a class="code" href="class_t_b_o_x.html#ae6151cd794841e100d8a346a0c4a46e6">set_left</a>(part_box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>());
    current_table_box.<a class="code" href="class_t_b_o_x.html#a2246293d3667b28c52a52353a2d5caea">set_right</a>(part_box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>());
    <span class="comment">// go through the y-axis projection to find runs of table</span>
    <span class="comment">// regions. Each run makes one table region.</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; page_height; i++) {
      <span class="comment">// detect start of a table region</span>
      <span class="keywordflow">if</span> (!table_region[i - 1] &amp;&amp; table_region[i]) {
        current_table_box.<a class="code" href="class_t_b_o_x.html#a6f803b24b046883cb0f3882dc3d92302">set_bottom</a>(i + <a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().y());
      }
      <span class="comment">// TODO(nbeato): Is it guaranteed that the last row is not a table region?</span>
      <span class="comment">// detect end of a table region</span>
      <span class="keywordflow">if</span> (table_region[i - 1] &amp;&amp; !table_region[i]) {
        current_table_box.<a class="code" href="class_t_b_o_x.html#a7f40dfd290a907200bdc98c196f63f45">set_top</a>(i + <a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().y());
        <span class="keywordflow">if</span> (!current_table_box.<a class="code" href="class_t_b_o_x.html#a7c6996aea1eb6be07b1d6634bf36cfd6">null_box</a>()) {
          ColSegment* seg = <span class="keyword">new</span> ColSegment();
          seg-&gt;InsertBox(current_table_box);
          rit.add_after_then_move(seg);
        }
      }
    }
  }
  <span class="keyword">delete</span>[] table_region;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a704fbe9cb0edeaa969bb0cc2bd1f9dbd"></a><!-- doxytag: member="tesseract::TableFinder::gridheight" ref="a704fbe9cb0edeaa969bb0cc2bd1f9dbd" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::gridheight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00384">384</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
  <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.gridheight();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a3319f9a1eab06ef83a6e3f2df7e8d2"></a><!-- doxytag: member="tesseract::TableFinder::GridMergeColumnBlocks" ref="a7a3319f9a1eab06ef83a6e3f2df7e8d2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GridMergeColumnBlocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01195">1195</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
  <span class="keywordtype">int</span> margin = <a class="code" href="classtesseract_1_1_table_finder.html#aecbfe718794e99b2f15a43a7f7350848">gridsize</a>();

  <span class="comment">// Iterate the Column Blocks in the grid.</span>
  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
    gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>);
  gsearch.StartFullSearch();
  ColSegment* seg;
  <span class="keywordflow">while</span> ((seg = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (seg-&gt;type() != <a class="code" href="namespacetesseract.html#a25254b3df45454565d58a62480d3a6cba05d5fe5bf814b3e82827a3a321d5b2ec">COL_TEXT</a>)
      <span class="keywordflow">continue</span>;  <span class="comment">// only consider text blocks for split detection</span>
    <span class="keywordtype">bool</span> neighbor_found = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> modified = <span class="keyword">false</span>;  <span class="comment">// Modified at least once</span>
    <span class="comment">// keep expanding current box as long as neighboring table columns</span>
    <span class="comment">// are found above or below it.</span>
    <span class="keywordflow">do</span> {
      <a class="code" href="class_t_b_o_x.html">TBOX</a> box = seg-&gt;bounding_box();
      <span class="comment">// slightly expand the search region vertically</span>
      <span class="keywordtype">int</span> top_range = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a>(box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + margin, <a class="code" href="classtesseract_1_1_table_finder.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().<a class="code" href="class_i_c_o_o_r_d.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>());
      <span class="keywordtype">int</span> bottom_range = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() - margin, <a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="class_i_c_o_o_r_d.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>());
      box.<a class="code" href="class_t_b_o_x.html#a7f40dfd290a907200bdc98c196f63f45">set_top</a>(top_range);
      box.<a class="code" href="class_t_b_o_x.html#a6f803b24b046883cb0f3882dc3d92302">set_bottom</a>(bottom_range);
      neighbor_found = <span class="keyword">false</span>;
      GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
          rectsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>);
      rectsearch.StartRectSearch(box);
      ColSegment* neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      <span class="keywordflow">while</span> ((neighbor = rectsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
        <span class="keywordflow">if</span> (neighbor == seg)
          <span class="keywordflow">continue</span>;
        <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; neighbor_box = neighbor-&gt;bounding_box();
        <span class="comment">// If the neighbor box significantly overlaps with the current</span>
        <span class="comment">// box (due to the expansion of the current box in the</span>
        <span class="comment">// previous iteration of this loop), remove the neighbor box</span>
        <span class="comment">// and expand the current box to include it.</span>
        <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="class_t_b_o_x.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(box) &gt;= 0.9) {
          seg-&gt;InsertBox(neighbor_box);
          modified = <span class="keyword">true</span>;
          rectsearch.RemoveBBox();
          gsearch.RepositionIterator();
          <span class="keyword">delete</span> neighbor;
          <span class="keywordflow">continue</span>;
        }
        <span class="comment">// Only expand if the neighbor box is of table type</span>
        <span class="keywordflow">if</span> (neighbor-&gt;type() != <a class="code" href="namespacetesseract.html#a25254b3df45454565d58a62480d3a6cba8943a61e53229e72f0f896ec8e415316">COL_TABLE</a>)
          <span class="keywordflow">continue</span>;
        <span class="comment">// Insert the neighbor box into the current column block</span>
        <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="class_t_b_o_x.html#a9f7e4e20bdfeee0d82db2f8d24aa72dc">major_x_overlap</a>(box) &amp;&amp;
            !box.<a class="code" href="class_t_b_o_x.html#a5d4e2c5f91b791e94d4c94e513180632">contains</a>(neighbor_box)) {
          seg-&gt;InsertBox(neighbor_box);
          neighbor_found = <span class="keyword">true</span>;
          modified = <span class="keyword">true</span>;
          rectsearch.RemoveBBox();
          gsearch.RepositionIterator();
          <span class="keyword">delete</span> neighbor;
        }
      }
    } <span class="keywordflow">while</span> (neighbor_found);
    <span class="keywordflow">if</span> (modified) {
      <span class="comment">// Because the box has changed, it has to be removed first.</span>
      gsearch.RemoveBBox();
      <a class="code" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, seg);
      gsearch.RepositionIterator();
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9298cd74b3e81315195a547a890752e0"></a><!-- doxytag: member="tesseract::TableFinder::GridMergeTableRegions" ref="a9298cd74b3e81315195a547a890752e0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GridMergeTableRegions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01386">1386</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
  <span class="comment">// Iterate the table regions in the grid.</span>
  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
      gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);
  gsearch.StartFullSearch();
  ColSegment* seg = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((seg = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordtype">bool</span> neighbor_found = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> modified = <span class="keyword">false</span>;  <span class="comment">// Modified at least once</span>
    <span class="keywordflow">do</span> {
      <span class="comment">// Start a rectangle search x-bounded by the image and y by the table</span>
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = seg-&gt;bounding_box();
      <a class="code" href="class_t_b_o_x.html">TBOX</a> search_region(box);
      search_region.set_left(<a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().x());
      search_region.set_right(<a class="code" href="classtesseract_1_1_table_finder.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().x());
      neighbor_found = <span class="keyword">false</span>;
      GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
          rectsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);
      rectsearch.StartRectSearch(search_region);
      ColSegment* neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      <span class="keywordflow">while</span> ((neighbor = rectsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
        <span class="keywordflow">if</span> (neighbor == seg)
          <span class="keywordflow">continue</span>;
        <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; neighbor_box = neighbor-&gt;bounding_box();
        <span class="comment">// Check if a neighbor box has a large overlap with the table</span>
        <span class="comment">// region.  This may happen as a result of merging two table</span>
        <span class="comment">// regions in the previous iteration.</span>
        <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="class_t_b_o_x.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(box) &gt;= 0.9) {
          seg-&gt;InsertBox(neighbor_box);
          rectsearch.RemoveBBox();
          gsearch.RepositionIterator();
          <span class="keyword">delete</span> neighbor;
          modified = <span class="keyword">true</span>;
          <span class="keywordflow">continue</span>;
        }
        <span class="comment">// Check if two table regions belong together based on a common</span>
        <span class="comment">// horizontal ruling line</span>
        <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_table_finder.html#a0fdb92fd4cf6c71db61a8bf17f793226">BelongToOneTable</a>(box, neighbor_box)) {
          seg-&gt;InsertBox(neighbor_box);
          neighbor_found = <span class="keyword">true</span>;
          modified = <span class="keyword">true</span>;
          rectsearch.RemoveBBox();
          gsearch.RepositionIterator();
          <span class="keyword">delete</span> neighbor;
        }
      }
    } <span class="keywordflow">while</span> (neighbor_found);
    <span class="keywordflow">if</span> (modified) {
      <span class="comment">// Because the box has changed, it has to be removed first.</span>
      gsearch.RemoveBBox();
      <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, seg);
      gsearch.RepositionIterator();
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aecbfe718794e99b2f15a43a7f7350848"></a><!-- doxytag: member="tesseract::TableFinder::gridsize" ref="aecbfe718794e99b2f15a43a7f7350848" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::gridsize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00378">378</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                {
  <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.gridsize();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9234ae10ef078a56d67d6ceb91050b2e"></a><!-- doxytag: member="tesseract::TableFinder::gridwidth" ref="a9234ae10ef078a56d67d6ceb91050b2e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::gridwidth </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00381">381</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                 {
  <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.gridwidth();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a41bef91f2096c4a3bbe486b4d304bddb"></a><!-- doxytag: member="tesseract::TableFinder::GroupColumnBlocks" ref="a41bef91f2096c4a3bbe486b4d304bddb" args="(ColSegment_LIST *current_segments, ColSegment_LIST *col_segments)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GroupColumnBlocks </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>current_segments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>col_segments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00538">538</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                    {
  ColSegment_IT src_it(new_blocks);
  ColSegment_IT dest_it(column_blocks);
  <span class="comment">// iterate through the source list</span>
  <span class="keywordflow">for</span> (src_it.mark_cycle_pt(); !src_it.cycled_list(); src_it.forward()) {
    ColSegment* src_seg = src_it.data();
    <a class="code" href="class_t_b_o_x.html">TBOX</a> src_box = src_seg-&gt;bounding_box();
    <span class="keywordtype">bool</span> match_found = <span class="keyword">false</span>;
    <span class="comment">// iterate through the destination list to find a matching column block</span>
    <span class="keywordflow">for</span> (dest_it.mark_cycle_pt(); !dest_it.cycled_list(); dest_it.forward()) {
      ColSegment* dest_seg = dest_it.data();
      <a class="code" href="class_t_b_o_x.html">TBOX</a> dest_box = dest_seg-&gt;bounding_box();
      <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_table_finder.html#a4caabd9ca4346514d60c7dce8400a909">ConsecutiveBoxes</a>(src_box, dest_box)) {
        <span class="comment">// If matching block is found, insert the current block into it</span>
        <span class="comment">// and delete the soure block</span>
        dest_seg-&gt;InsertBox(src_box);
        match_found = <span class="keyword">true</span>;
        <span class="keyword">delete</span> src_it.extract();
        <span class="keywordflow">break</span>;
      }
    }
    <span class="comment">// If no match is found, just append the source block to column_blocks</span>
    <span class="keywordflow">if</span> (!match_found) {
      dest_it.add_after_then_move(src_it.extract());
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a11d07831ff21f641f54e51b42a446a26"></a><!-- doxytag: member="tesseract::TableFinder::GrowTableBox" ref="a11d07831ff21f641f54e51b42a446a26" args="(const TBOX &amp;table_box, TBOX *result_box)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GrowTableBox </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>table_box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_b_o_x.html">TBOX</a> *&#160;</td>
          <td class="paramname"><em>result_box</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01519">1519</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                      {
  <span class="comment">// TODO(nbeato): The growing code is a bit excessive right now.</span>
  <span class="comment">// By removing these lines, the partitions considered need</span>
  <span class="comment">// to have some overlap or be special cases. These lines could</span>
  <span class="comment">// be added again once a check is put in place to make sure that</span>
  <span class="comment">// growing tables don&#39;t stomp on a lot of non-table partitions.</span>

  <span class="comment">// search for horizontal ruling lines within the vertical margin</span>
  <span class="comment">// int vertical_margin = kRulingVerticalMargin * gridsize();</span>
  <a class="code" href="class_t_b_o_x.html">TBOX</a> search_box = table_box;
  <span class="comment">// int top = MIN(search_box.top() + vertical_margin, tright().y());</span>
  <span class="comment">// int bottom = MAX(search_box.bottom() - vertical_margin, bleft().y());</span>
  <span class="comment">// search_box.set_top(top);</span>
  <span class="comment">// search_box.set_bottom(bottom);</span>

  <a class="code" href="classtesseract_1_1_table_finder.html#ac694dfdfaa119c35c337dd342073debf">GrowTableToIncludePartials</a>(table_box, search_box, result_box);
  <a class="code" href="classtesseract_1_1_table_finder.html#a2f2d85d386d90f680f518bf9e6496411">GrowTableToIncludeLines</a>(table_box, search_box, result_box);
  <a class="code" href="classtesseract_1_1_table_finder.html#a265d046f7651f73362a3aa5f3c9453fd">IncludeLeftOutColumnHeaders</a>(result_box);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f2d85d386d90f680f518bf9e6496411"></a><!-- doxytag: member="tesseract::TableFinder::GrowTableToIncludeLines" ref="a2f2d85d386d90f680f518bf9e6496411" args="(const TBOX &amp;table_box, const TBOX &amp;search_range, TBOX *result_box)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GrowTableToIncludeLines </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>table_box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>search_range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_b_o_x.html">TBOX</a> *&#160;</td>
          <td class="paramname"><em>result_box</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01569">1569</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> rsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>);
  rsearch.SetUniqueMode(<span class="keyword">true</span>);
  rsearch.StartRectSearch(search_range);
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = rsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="comment">// TODO(nbeato) This should also do vertical, but column</span>
    <span class="comment">// boundaries are breaking things. This function needs to be</span>
    <span class="comment">// updated to allow vertical lines as well.</span>
    <span class="keywordflow">if</span> (!part-&gt;IsLineType())
      <span class="keywordflow">continue</span>;
    <span class="comment">// Avoid the following function call if the result of the</span>
    <span class="comment">// function is irrelevant.</span>
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; part_box = part-&gt;bounding_box();
    <span class="keywordflow">if</span> (result_box-&gt;<a class="code" href="class_t_b_o_x.html#a5d4e2c5f91b791e94d4c94e513180632">contains</a>(part_box))
      <span class="keywordflow">continue</span>;
    <span class="comment">// Include a partially overlapping horizontal line only if the</span>
    <span class="comment">// extra ColPartitions that will be included due to expansion</span>
    <span class="comment">// have large side spacing w.r.t. columns containing them.</span>
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_table_finder.html#a6fcf84582f86676bf93e6e49d08dc64a">HLineBelongsToTable</a>(*part, table_box))
      *result_box = result_box-&gt;<a class="code" href="class_t_b_o_x.html#ab8ae7b66782fa1802f78ff034da16089">bounding_union</a>(part_box);
    <span class="comment">// TODO(nbeato): Vertical</span>
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac694dfdfaa119c35c337dd342073debf"></a><!-- doxytag: member="tesseract::TableFinder::GrowTableToIncludePartials" ref="ac694dfdfaa119c35c337dd342073debf" args="(const TBOX &amp;table_box, const TBOX &amp;search_range, TBOX *result_box)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GrowTableToIncludePartials </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>table_box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>search_range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_b_o_x.html">TBOX</a> *&#160;</td>
          <td class="paramname"><em>result_box</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01541">1541</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                               {
  <span class="comment">// Rulings are in a different grid, so search 2 grids for rulings, text,</span>
  <span class="comment">// and table partitions that are not entirely within the new box.</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; ++i) {
    ColPartitionGrid* grid = (i == 0) ? &amp;<a class="code" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a> :
                                        &amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>;
    <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> rectsearch(grid);
    rectsearch.StartRectSearch(search_range);
    ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">while</span> ((part = rectsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
     <span class="comment">// Only include text and table types.</span>
      <span class="keywordflow">if</span> (part-&gt;IsImageType())
        <span class="keywordflow">continue</span>;
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; part_box = part-&gt;bounding_box();
      <span class="comment">// Include partition in the table if more than half of it</span>
      <span class="comment">// is covered by the table</span>
      <span class="keywordflow">if</span> (part_box.<a class="code" href="class_t_b_o_x.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(table_box) &gt; <a class="code" href="namespacetesseract.html#a0f2ae212b6b475efca7981fd1dc51e29">kMinOverlapWithTable</a>) {
        *result_box = result_box-&gt;<a class="code" href="class_t_b_o_x.html#ab8ae7b66782fa1802f78ff034da16089">bounding_union</a>(part_box);
        <span class="keywordflow">continue</span>;
      }
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6436ad4194a19a38669a89b603c27801"></a><!-- doxytag: member="tesseract::TableFinder::HasLeaderAdjacent" ref="a6436ad4194a19a38669a89b603c27801" args="(const ColPartition &amp;part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::HasLeaderAdjacent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> &amp;&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00946">946</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {
  <span class="keywordflow">if</span> (part.flow() == <a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>)
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
  <span class="comment">// Search range is left and right bounded by an offset of the</span>
  <span class="comment">// median xheight. This offset is to allow some tolerance to the</span>
  <span class="comment">// the leaders on the page in the event that the alignment is still</span>
  <span class="comment">// a bit off.</span>
  <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = part.bounding_box();
  <span class="keyword">const</span> <span class="keywordtype">int</span> search_size = <a class="code" href="namespacetesseract.html#a7c23a9af9374381d1a961227ce653ea6">kAdjacentLeaderSearchPadding</a> * <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a>;
  <span class="keyword">const</span> <span class="keywordtype">int</span> top = box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + search_size;
  <span class="keyword">const</span> <span class="keywordtype">int</span> bottom = box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() - search_size;
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> hsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>);
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="vecfuncs_8cpp.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a> = 0; <a class="code" href="vecfuncs_8cpp.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a> &lt; 2; ++<a class="code" href="vecfuncs_8cpp.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a>) {
    <span class="keywordtype">bool</span> right_to_left = (<a class="code" href="vecfuncs_8cpp.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a> == 0);
    <span class="keywordtype">int</span> x = right_to_left ? box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() : box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>();
    hsearch.StartSideSearch(x, bottom, top);
    ColPartition* leader = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">while</span> ((leader = hsearch.NextSideSearch(right_to_left)) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="comment">// This should not happen, they are in different grids.</span>
      <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(&amp;part != leader);
      <span class="comment">// The leader could be a horizontal ruling in the grid.</span>
      <span class="comment">// Make sure it is actually a leader.</span>
      <span class="keywordflow">if</span> (leader-&gt;flow() != <a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>)
        <span class="keywordflow">continue</span>;
      <span class="comment">// Make sure the leader shares a page column with the partition,</span>
      <span class="comment">// otherwise we are spreading across columns.</span>
      <span class="keywordflow">if</span> (!part.IsInSameColumnAs(*leader))
        <span class="keywordflow">break</span>;
      <span class="comment">// There should be a significant vertical overlap</span>
      <span class="keywordflow">if</span> (!leader-&gt;VSignificantCoreOverlap(part))
        <span class="keywordflow">continue</span>;
      <span class="comment">// Leader passed all tests, so it is adjacent.</span>
      <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
  }
  <span class="comment">// No leaders are adjacent to the given partition.</span>
  <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a298f9f253a3fd3109133e6ea40842bc0"></a><!-- doxytag: member="tesseract::TableFinder::HasWideOrNoInterWordGap" ref="a298f9f253a3fd3109133e6ea40842bc0" args="(ColPartition *part) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::HasWideOrNoInterWordGap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00857">857</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
  <span class="comment">// Should only get text partitions.</span>
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part-&gt;IsTextType());
  <span class="comment">// Blob access</span>
  BLOBNBOX_CLIST* part_boxes = part-&gt;boxes();
  BLOBNBOX_C_IT it(part_boxes);
  <span class="comment">// Check if this is a relatively small partition (such as a single word)</span>
  <span class="keywordflow">if</span> (part-&gt;bounding_box().width() &lt;
      <a class="code" href="namespacetesseract.html#a3fe030812946d2ca16b873bde30d5431">kMinBoxesInTextPartition</a> * part-&gt;median_size() &amp;&amp;
      part_boxes-&gt;length() &lt; <a class="code" href="namespacetesseract.html#a3fe030812946d2ca16b873bde30d5431">kMinBoxesInTextPartition</a>)
    <span class="keywordflow">return</span> <span class="keyword">true</span>;

  <span class="comment">// Variables used to compute inter-blob spacing.</span>
  <span class="keywordtype">int</span> current_x0 = -1;
  <span class="keywordtype">int</span> current_x1 = -1;
  <span class="keywordtype">int</span> previous_x1 = -1;
  <span class="comment">// Stores the maximum gap detected.</span>
  <span class="keywordtype">int</span> largest_partition_gap_found = -1;
  <span class="comment">// Text partition gap limits. If this is text (and not a table),</span>
  <span class="comment">// there should be at least one gap larger than min_gap and no gap</span>
  <span class="comment">// larger than max_gap.</span>
  <span class="keyword">const</span> <span class="keywordtype">double</span> max_gap = <a class="code" href="namespacetesseract.html#a632cb2dd79696389be8feb970de28e3e">kMaxGapInTextPartition</a> * part-&gt;median_size();
  <span class="keyword">const</span> <span class="keywordtype">double</span> min_gap = <a class="code" href="namespacetesseract.html#a25dab2777976176c8de47ef2fb5b74a5">kMinMaxGapInTextPartition</a> * part-&gt;median_size();

  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {
    <a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a>* blob = it.data();
    current_x0 = blob-&gt;<a class="code" href="class_b_l_o_b_n_b_o_x.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>();
    current_x1 = blob-&gt;<a class="code" href="class_b_l_o_b_n_b_o_x.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>().<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
    <span class="keywordflow">if</span> (previous_x1 != -1) {
      <span class="keywordtype">int</span> gap = current_x0 - previous_x1;

      <span class="comment">// TODO(nbeato): Boxes may overlap? Huh?</span>
      <span class="comment">// For example, mag.3B 8003_033.3B.tif in UNLV data. The titles/authors</span>
      <span class="comment">// on the top right of the page are filtered out with this line.</span>
      <span class="comment">// Note 2: Iterating over blobs in a partition, so we are looking for</span>
      <span class="comment">// spacing between the words.</span>
      <span class="keywordflow">if</span> (gap &lt; 0) {
        <span class="comment">// More likely case, the blobs slightly overlap. This can happen</span>
        <span class="comment">// with diacritics (accents) or broken alphabet symbols (characters).</span>
        <span class="comment">// Merge boxes together by taking max of right sides.</span>
        <span class="keywordflow">if</span> (-gap &lt; part-&gt;median_size() * <a class="code" href="namespacetesseract.html#af7577bf68e7e1466e0d58eb91ad999c6">kMaxBlobOverlapFactor</a>) {
          previous_x1 = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(previous_x1, current_x1);
          <span class="keywordflow">continue</span>;
        }
        <span class="comment">// Extreme case, blobs overlap significantly in the same partition...</span>
        <span class="comment">// This should not happen often (if at all), but it does.</span>
        <span class="comment">// TODO(nbeato): investigate cases when this happens.</span>
        <span class="keywordflow">else</span> {
          <span class="comment">// The behavior before was to completely ignore this case.</span>
        }
      }

      <span class="comment">// If a large enough gap is found, mark it as a table cell (return true)</span>
      <span class="keywordflow">if</span> (gap &gt; max_gap)
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
      <span class="keywordflow">if</span> (gap &gt; largest_partition_gap_found)
        largest_partition_gap_found = gap;
    }
    previous_x1 = current_x1;
  }
  <span class="comment">// Since no large gap was found, return false if the partition is too</span>
  <span class="comment">// long to be a data cell</span>
  <span class="keywordflow">if</span> (part-&gt;bounding_box().width() &gt;
      <a class="code" href="namespacetesseract.html#ac2d16b5be5214a804964b939c8111bc7">kMaxBoxesInDataPartition</a> * part-&gt;median_size() ||
      part_boxes-&gt;length() &gt; <a class="code" href="namespacetesseract.html#ac2d16b5be5214a804964b939c8111bc7">kMaxBoxesInDataPartition</a>)
    <span class="keywordflow">return</span> <span class="keyword">false</span>;

  <span class="comment">// A partition may be a single blob. In this case, it&#39;s an isolated symbol</span>
  <span class="comment">// or non-text (such as a ruling or image).</span>
  <span class="comment">// Detect these as table partitions? Shouldn&#39;t this be case by case?</span>
  <span class="comment">// The behavior before was to ignore this, making max_partition_gap &lt; 0</span>
  <span class="comment">// and implicitly return true. Just making it explicit.</span>
  <span class="keywordflow">if</span> (largest_partition_gap_found == -1)
    <span class="keywordflow">return</span> <span class="keyword">true</span>;

  <span class="comment">// return true if the maximum gap found is smaller than the minimum allowed</span>
  <span class="comment">// max_gap in a text partition. This indicates that there is no signficant</span>
  <span class="comment">// space in the partition, hence it is likely a single word.</span>
  <span class="keywordflow">return</span> largest_partition_gap_found &lt; min_gap;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6fcf84582f86676bf93e6e49d08dc64a"></a><!-- doxytag: member="tesseract::TableFinder::HLineBelongsToTable" ref="a6fcf84582f86676bf93e6e49d08dc64a" args="(const ColPartition &amp;part, const TBOX &amp;table_box)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::HLineBelongsToTable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> &amp;&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_t_b_o_x.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>table_box</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01599">1599</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
  <span class="keywordflow">if</span> (!part.IsHorizontalLine())
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
  <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; part_box = part.bounding_box();
  <span class="keywordflow">if</span> (!part_box.<a class="code" href="class_t_b_o_x.html#a9f7e4e20bdfeee0d82db2f8d24aa72dc">major_x_overlap</a>(table_box))
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
  <span class="comment">// Do not consider top-most horizontal line since it usually</span>
  <span class="comment">// originates from noise.</span>
  <span class="comment">// TODO(nbeato): I had to comment this out because the ruling grid doesn&#39;t</span>
  <span class="comment">// have neighbors solved.</span>
  <span class="comment">// if (!part.nearest_neighbor_above())</span>
  <span class="comment">//   return false;</span>
  <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a> bbox = part_box.<a class="code" href="class_t_b_o_x.html#ab8ae7b66782fa1802f78ff034da16089">bounding_union</a>(table_box);
  <span class="comment">// In the &quot;unioned table&quot; box (the table extents expanded by the line),</span>
  <span class="comment">// keep track of how many partitions have significant padding to the left</span>
  <span class="comment">// and right. If more than half of the partitions covered by the new table</span>
  <span class="comment">// have significant spacing, the line belongs to the table and the table</span>
  <span class="comment">// grows to include all of the partitions.</span>
  <span class="keywordtype">int</span> num_extra_partitions = 0;
  <span class="keywordtype">int</span> extra_space_to_right = 0;
  <span class="keywordtype">int</span> extra_space_to_left = 0;
  <span class="comment">// Rulings are in a different grid, so search 2 grids for rulings, text,</span>
  <span class="comment">// and table partitions that are introduced by the new box.</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; ++i) {
    ColPartitionGrid* grid = (i == 0) ? &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a> :
                                        &amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>;
    <span class="comment">// Start a rect search on bbox</span>
    <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> rectsearch(grid);
    rectsearch.SetUniqueMode(<span class="keyword">true</span>);
    rectsearch.StartRectSearch(bbox);
    ColPartition* extra_part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">while</span> ((extra_part = rectsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="comment">// ColPartition already in table</span>
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; extra_part_box = extra_part-&gt;bounding_box();
      <span class="keywordflow">if</span> (extra_part_box.<a class="code" href="class_t_b_o_x.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(table_box) &gt; <a class="code" href="namespacetesseract.html#a0f2ae212b6b475efca7981fd1dc51e29">kMinOverlapWithTable</a>)
        <span class="keywordflow">continue</span>;
      <span class="comment">// Non-text ColPartitions do not contribute</span>
      <span class="keywordflow">if</span> (extra_part-&gt;IsImageType())
        <span class="keywordflow">continue</span>;
      <span class="comment">// Consider this partition.</span>
      num_extra_partitions++;
      <span class="comment">// presence of a table cell is a strong hint, so just increment the scores</span>
      <span class="comment">// without looking at the spacing.</span>
      <span class="keywordflow">if</span> (extra_part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a> || extra_part-&gt;IsLineType()) {
        extra_space_to_right++;
        extra_space_to_left++;
        <span class="keywordflow">continue</span>;
      }
      <span class="keywordtype">int</span> space_threshold = <a class="code" href="namespacetesseract.html#aee32ef58150f63a980c7b4f736c4a22a">kSideSpaceMargin</a> * part.median_size();
      <span class="keywordflow">if</span> (extra_part-&gt;space_to_right() &gt; space_threshold)
        extra_space_to_right++;
      <span class="keywordflow">if</span> (extra_part-&gt;space_to_left() &gt; space_threshold)
        extra_space_to_left++;
    }
  }
  <span class="comment">// tprintf(&quot;%d %d %d\n&quot;,</span>
  <span class="comment">// num_extra_partitions,extra_space_to_right,extra_space_to_left);</span>
  <span class="keywordflow">return</span> (extra_space_to_right &gt; num_extra_partitions / 2) ||
      (extra_space_to_left &gt; num_extra_partitions / 2);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a265d046f7651f73362a3aa5f3c9453fd"></a><!-- doxytag: member="tesseract::TableFinder::IncludeLeftOutColumnHeaders" ref="a265d046f7651f73362a3aa5f3c9453fd" args="(TBOX *table_box)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::IncludeLeftOutColumnHeaders </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_t_b_o_x.html">TBOX</a> *&#160;</td>
          <td class="paramname"><em>table_box</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01663">1663</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
  <span class="comment">// Start a search above the current table to look for column headers</span>
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> vsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  vsearch.StartVerticalSearch(table_box-&gt;<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), table_box-&gt;<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(),
                              table_box-&gt;<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());
  ColPartition* neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  ColPartition* previous_neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((neighbor = vsearch.NextVerticalSearch(<span class="keyword">false</span>)) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="comment">// Max distance to find a table heading.</span>
    <span class="keyword">const</span> <span class="keywordtype">int</span> max_distance = <a class="code" href="namespacetesseract.html#aae5eb999d710e50055ba3096b2f54c38">kMaxColumnHeaderDistance</a> *
                             neighbor-&gt;median_size();
    <span class="keywordtype">int</span> table_top = table_box-&gt;<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = neighbor-&gt;bounding_box();
    <span class="comment">// Do not continue if the next box is way above</span>
    <span class="keywordflow">if</span> (box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() - table_top &gt; max_distance)
      <span class="keywordflow">break</span>;
    <span class="comment">// Unconditionally include partitions of type TABLE or LINE</span>
    <span class="comment">// TODO(faisal): add some reasonable conditions here</span>
    <span class="keywordflow">if</span> (neighbor-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a> || neighbor-&gt;IsLineType()) {
      table_box-&gt;<a class="code" href="class_t_b_o_x.html#a7f40dfd290a907200bdc98c196f63f45">set_top</a>(box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());
      previous_neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      <span class="keywordflow">continue</span>;
    }
    <span class="comment">// If there are two text partitions, one above the other, without a table</span>
    <span class="comment">// cell on their left or right side, consider them a barrier and quit</span>
    <span class="keywordflow">if</span> (previous_neighbor == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      previous_neighbor = neighbor;
    } <span class="keywordflow">else</span> {
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; previous_box = previous_neighbor-&gt;bounding_box();
      <span class="keywordflow">if</span> (!box.<a class="code" href="class_t_b_o_x.html#a6b8b3bf99ea363303e11c26866335f23">major_y_overlap</a>(previous_box))
        <span class="keywordflow">break</span>;
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2addcdf6528f3a69fa25c94940cdc428"></a><!-- doxytag: member="tesseract::TableFinder::Init" ref="a2addcdf6528f3a69fa25c94940cdc428" args="(int grid_size, const ICOORD &amp;bottom_left, const ICOORD &amp;top_right)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::Init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>grid_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_c_o_o_r_d.html">ICOORD</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_i_c_o_o_r_d.html">ICOORD</a> &amp;&#160;</td>
          <td class="paramname"><em>top_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00190">190</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
  <span class="comment">// Initialize clean partitions list and grid</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.Init(grid_size, bottom_left, top_right);
  <a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>.Init(grid_size, bottom_left, top_right);
  <a class="code" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>.Init(grid_size, bottom_left, top_right);
  <a class="code" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>.Init(grid_size, bottom_left, top_right);
  <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.Init(grid_size, bottom_left, top_right);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5dfc53ecb81ee804476fd04f32434e6c"></a><!-- doxytag: member="tesseract::TableFinder::InitializePartitions" ref="a5dfc53ecb81ee804476fd04f32434e6c" args="(ColPartitionSet **all_columns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InitializePartitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>all_columns</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00579">579</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                    {
  <a class="code" href="classtesseract_1_1_table_finder.html#acfb82ae105ee34d1360dd0c5dc8487ff">FindNeighbors</a>();
  <a class="code" href="classtesseract_1_1_table_finder.html#aa4b52f48d63d4881da34b7d84932e84d">SetPartitionSpacings</a>(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, all_columns);
  <a class="code" href="classtesseract_1_1_table_finder.html#a51c670936d76fcdf3ed1a0e2730a54c4">SetGlobalSpacings</a>(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9f4115ada3be71a1106527aa59f31b43"></a><!-- doxytag: member="tesseract::TableFinder::InsertCleanPartitions" ref="a9f4115ada3be71a1106527aa59f31b43" args="(ColPartitionGrid *grid, TO_BLOCK *block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertCleanPartitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_t_o___b_l_o_c_k.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00202">202</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
  <span class="comment">// Calculate stats. This lets us filter partitions in AllowTextPartition()</span>
  <span class="comment">// and filter blobs in AllowBlob().</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a51c670936d76fcdf3ed1a0e2730a54c4">SetGlobalSpacings</a>(grid);

  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(grid);
  gsearch.SetUniqueMode(<span class="keyword">true</span>);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="comment">// Reject partitions with nothing useful inside of them.</span>
    <span class="keywordflow">if</span> (part-&gt;blob_type() == <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575ae09c6f7e99c3a3885c3469d52d0292d2">BRT_NOISE</a> || part-&gt;bounding_box().area() &lt;= 0)
      <span class="keywordflow">continue</span>;
    ColPartition* clean_part = part-&gt;ShallowCopy();
    ColPartition* leader_part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">if</span> (part-&gt;IsLineType()) {
      <a class="code" href="classtesseract_1_1_table_finder.html#aa7a21d1842c6592372eb69b49b2010a2">InsertRulingPartition</a>(clean_part);
      <span class="keywordflow">continue</span>;
    }
    <span class="comment">// Insert all non-text partitions to clean_parts</span>
    <span class="keywordflow">if</span> (!part-&gt;IsTextType()) {
      <a class="code" href="classtesseract_1_1_table_finder.html#af310b33b86e951125b49e4ac1df2bb68">InsertImagePartition</a>(clean_part);
      <span class="keywordflow">continue</span>;
    }
    <span class="comment">// Insert text colpartitions after removing noisy components from them</span>
    <span class="comment">// The leaders are split into a separate grid.</span>
    BLOBNBOX_CLIST* part_boxes = part-&gt;boxes();
    BLOBNBOX_C_IT pit(part_boxes);
    <span class="keywordflow">for</span> (pit.mark_cycle_pt(); !pit.cycled_list(); pit.forward()) {
      <a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a> *pblob = pit.data();
      <span class="comment">// Bad blobs... happens in UNLV set.</span>
      <span class="comment">// news.3G1, page 17 (around x=6)</span>
      <span class="keywordflow">if</span> (!<a class="code" href="classtesseract_1_1_table_finder.html#aec9b60ffceb19f3f82186b60c29b7f51">AllowBlob</a>(*pblob))
        <span class="keywordflow">continue</span>;
      <span class="keywordflow">if</span> (pblob-&gt;<a class="code" href="class_b_l_o_b_n_b_o_x.html#afafe7113396a8cc27b882d622db46f05">flow</a>() == <a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>) {
        <span class="keywordflow">if</span> (leader_part == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
          leader_part = part-&gt;ShallowCopy();
          leader_part-&gt;<a class="code" href="class_b_l_o_b_n_b_o_x.html#a75340334988feba52ce36ba596750a35">set_flow</a>(<a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>);
        }
        leader_part-&gt;AddBox(pblob);
      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pblob-&gt;<a class="code" href="class_b_l_o_b_n_b_o_x.html#a9e7100e6d08c78cca5f9c0453e11565d">region_type</a>() != <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575ae09c6f7e99c3a3885c3469d52d0292d2">BRT_NOISE</a>) {
        clean_part-&gt;AddBox(pblob);
      }
    }
    clean_part-&gt;ComputeLimits();
    ColPartition* fragmented = clean_part-&gt;CopyButDontOwnBlobs();
    <a class="code" href="classtesseract_1_1_table_finder.html#ad312e62064f4964ac0eb6010d002b9cd">InsertTextPartition</a>(clean_part);
    <a class="code" href="classtesseract_1_1_table_finder.html#a34950c2f035a25bb75f29a5ab51fe191">SplitAndInsertFragmentedTextPartition</a>(fragmented);
    <span class="keywordflow">if</span> (leader_part != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="comment">// TODO(nbeato): Note that ComputeLimits does not update the column</span>
      <span class="comment">// information. So the leader may appear to span more columns than it</span>
      <span class="comment">// really does later on when IsInSameColumnAs gets called to test</span>
      <span class="comment">// for adjacent leaders.</span>
      leader_part-&gt;ComputeLimits();
      <a class="code" href="classtesseract_1_1_table_finder.html#a818a95d0b0bdb619e0170dac27426942">InsertLeaderPartition</a>(leader_part);
    }
  }

  <span class="comment">// Make the partition partners better for upper and lower neighbors.</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.FindPartitionPartners();
  <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.RefinePartitionPartners(<span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a216c040efc8dff584076cc324240c524"></a><!-- doxytag: member="tesseract::TableFinder::InsertFragmentedTextPartition" ref="a216c040efc8dff584076cc324240c524" args="(ColPartition *part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertFragmentedTextPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00402">402</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_table_finder.html#a534bca2a3fa57718c0bdf18b6af69af6">AllowTextPartition</a>(*part)) {
    <a class="code" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, part);
  } <span class="keywordflow">else</span> {
    <span class="keyword">delete</span> part;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af310b33b86e951125b49e4ac1df2bb68"></a><!-- doxytag: member="tesseract::TableFinder::InsertImagePartition" ref="af310b33b86e951125b49e4ac1df2bb68" args="(ColPartition *part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertImagePartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00421">421</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
  <span class="comment">// NOTE: If images are placed into a different grid in the future,</span>
  <span class="comment">// the function SetPartitionSpacings needs to be updated. It should</span>
  <span class="comment">// be the only thing that cares about image partitions.</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, part);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a818a95d0b0bdb619e0170dac27426942"></a><!-- doxytag: member="tesseract::TableFinder::InsertLeaderPartition" ref="a818a95d0b0bdb619e0170dac27426942" args="(ColPartition *part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertLeaderPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00410">410</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                          {
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  <span class="keywordflow">if</span> (!part-&gt;IsEmpty() &amp;&amp; part-&gt;bounding_box().area() &gt; 0) {
    <a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, part);
  } <span class="keywordflow">else</span> {
    <span class="keyword">delete</span> part;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7a21d1842c6592372eb69b49b2010a2"></a><!-- doxytag: member="tesseract::TableFinder::InsertRulingPartition" ref="aa7a21d1842c6592372eb69b49b2010a2" args="(ColPartition *part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertRulingPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00418">418</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                          {
  <a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, part);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad312e62064f4964ac0eb6010d002b9cd"></a><!-- doxytag: member="tesseract::TableFinder::InsertTextPartition" ref="ad312e62064f4964ac0eb6010d002b9cd" args="(ColPartition *part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertTextPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00394">394</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                        {
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_table_finder.html#a534bca2a3fa57718c0bdf18b6af69af6">AllowTextPartition</a>(*part)) {
    <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, part);
  } <span class="keywordflow">else</span> {
    <span class="keyword">delete</span> part;
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31d3976698617bc729409e1e0ff0c4ca"></a><!-- doxytag: member="tesseract::TableFinder::LocateTables" ref="a31d3976698617bc729409e1e0ff0c4ca" args="(ColPartitionGrid *grid, ColPartitionSet **columns, WidthCallback *width_cb, const FCOORD &amp;reskew)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::LocateTables </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetesseract.html#add06f170e88dcbac90a80ff20c42cc0a">WidthCallback</a> *&#160;</td>
          <td class="paramname"><em>width_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_f_c_o_o_r_d.html">FCOORD</a> &amp;&#160;</td>
          <td class="paramname"><em>reskew</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00268">268</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                     {
  <span class="comment">// initialize spacing, neighbors, and columns</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a5dfc53ecb81ee804476fd04f32434e6c">InitializePartitions</a>(all_columns);
  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {
    <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(0, 300, <span class="stringliteral">&quot;Column Partitions &amp; Neighbors&quot;</span>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,
                         <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);
    <a class="code" href="classtesseract_1_1_table_finder.html#ae38774700a97b1690f1530d77432a762">DisplayColPartitionConnections</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>,
                                   <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0691e22f5da865103a497f9503269a61">ScrollView::ORANGE</a>);

    table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(100, 300, <span class="stringliteral">&quot;Fragmented Text&quot;</span>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
  }
  <span class="comment">// mark, filter, and smooth candidate table partitions</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a7f29dd0a40d57b00d4868ff1c656dd6a">MarkTablePartitions</a>();

  <span class="comment">// Make single-column blocks from good_columns_ partitions. col_segments are</span>
  <span class="comment">// moved to a grid later which takes the ownership</span>
  ColSegment_LIST column_blocks;
  <a class="code" href="classtesseract_1_1_table_finder.html#a7869fe256b237ad13171f13c8a6cc449">GetColumnBlocks</a>(all_columns, &amp;column_blocks);
  <span class="comment">// Set the ratio of candidate table partitions in each column</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#ac3e8a6d03fcaf027677919f284af6500">SetColumnsType</a>(&amp;column_blocks);

  <span class="comment">// Move column segments to col_seg_grid_</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a81003bea37eced8d746035bd565b9c56">MoveColSegmentsToGrid</a>(&amp;column_blocks, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>);

  <span class="comment">// Detect split in column layout that might have occurred due to the</span>
  <span class="comment">// presence of a table. In such a case, merge the corresponding columns.</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a7a3319f9a1eab06ef83a6e3f2df7e8d2">GridMergeColumnBlocks</a>();

  <span class="comment">// Group horizontally overlapping table partitions into table columns.</span>
  <span class="comment">// table_columns created here get deleted at the end of this method.</span>
  ColSegment_LIST table_columns;
  <a class="code" href="classtesseract_1_1_table_finder.html#a30f071829b47f7bd9afdd4ef819f582d">GetTableColumns</a>(&amp;table_columns);

  <span class="comment">// Within each column, mark the range table regions occupy based on the</span>
  <span class="comment">// table columns detected. table_regions are moved to a grid later which</span>
  <span class="comment">// takes the ownership</span>
  ColSegment_LIST table_regions;
  <a class="code" href="classtesseract_1_1_table_finder.html#a581a66fbdfdd0da5c3679a31f8d7944e">GetTableRegions</a>(&amp;table_columns, &amp;table_regions);

  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a>) {
    <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(1200, 300, <span class="stringliteral">&quot;Table Columns and Regions&quot;</span>);
    <a class="code" href="classtesseract_1_1_table_finder.html#a0778d0e3d6bc52330704d1143a73f90a">DisplayColSegments</a>(table_win, &amp;table_columns, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a46dc68c065ac8c61e1213f2449479f8c">ScrollView::DARK_TURQUOISE</a>);
    <a class="code" href="classtesseract_1_1_table_finder.html#a0778d0e3d6bc52330704d1143a73f90a">DisplayColSegments</a>(table_win, &amp;table_regions, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a61dec9bc0aaf1d527a731b2a6ce055c8">ScrollView::YELLOW</a>);
  }

  <span class="comment">// Merge table regions across columns for tables spanning multiple</span>
  <span class="comment">// columns</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a81003bea37eced8d746035bd565b9c56">MoveColSegmentsToGrid</a>(&amp;table_regions, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);
  <a class="code" href="classtesseract_1_1_table_finder.html#a9298cd74b3e81315195a547a890752e0">GridMergeTableRegions</a>();

  <span class="comment">// Adjust table boundaries by including nearby horizontal lines and left</span>
  <span class="comment">// out column headers</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a2af79bdd1c4edbf03f4d2a15ee203be8">AdjustTableBoundaries</a>();
  <a class="code" href="classtesseract_1_1_table_finder.html#a9298cd74b3e81315195a547a890752e0">GridMergeTableRegions</a>();

  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#afbb5c3604dee9b42d1490616dd0bdd77">textord_tablefind_recognize_tables</a>) {
    <span class="comment">// Remove false alarms consiting of a single column</span>
    <a class="code" href="classtesseract_1_1_table_finder.html#ad1d77425898bfe8808255b9a472663ab">DeleteSingleColumnTables</a>();

    <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {
      <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(1200, 300, <span class="stringliteral">&quot;Detected Table Locations&quot;</span>);
      <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
      <a class="code" href="classtesseract_1_1_table_finder.html#a0778d0e3d6bc52330704d1143a73f90a">DisplayColSegments</a>(table_win, &amp;table_columns, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8afcf7a70cd729b6f0a668f762ec8a5820">ScrollView::KHAKI</a>);
      <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.DisplayBoxes(table_win);
    }

    <span class="comment">// Find table grid structure and reject tables that are malformed.</span>
    <a class="code" href="classtesseract_1_1_table_finder.html#a647fe056ae6bb33cc8989f08aac5172f">RecognizeTables</a>();
    <a class="code" href="classtesseract_1_1_table_finder.html#a9298cd74b3e81315195a547a890752e0">GridMergeTableRegions</a>();
    <a class="code" href="classtesseract_1_1_table_finder.html#a647fe056ae6bb33cc8989f08aac5172f">RecognizeTables</a>();

    <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {
      <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(1400, 600, <span class="stringliteral">&quot;Recognized Tables&quot;</span>);
      <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>,
                           <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
      <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.DisplayBoxes(table_win);
    }
  } <span class="keywordflow">else</span> {
    <span class="comment">// Remove false alarms consiting of a single column</span>
    <span class="comment">// TODO(nbeato): verify this is a NOP after structured table rejection.</span>
    <span class="comment">// Right now it isn&#39;t. If the recognize function is doing what it is</span>
    <span class="comment">// supposed to do, this function is obsolete.</span>
    <a class="code" href="classtesseract_1_1_table_finder.html#ad1d77425898bfe8808255b9a472663ab">DeleteSingleColumnTables</a>();

    <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {
      <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(1500, 300, <span class="stringliteral">&quot;Detected Tables&quot;</span>);
      <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>,
                           <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
      <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.DisplayBoxes(table_win);
    }
  }

  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a0706071af2ebaf3922f717646c41bc16">textord_dump_table_images</a>)
    <a class="code" href="classtesseract_1_1_table_finder.html#abbd932c16cdfa0cf35f9ef93e2e87f49">WriteToPix</a>(reskew);

  <span class="comment">// Merge all colpartitions in table regions to make them a single</span>
  <span class="comment">// colpartition and revert types of isolated table cells not</span>
  <span class="comment">// assigned to any table to their original types.</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a1856836a1386196d5784244b4a1aa2d0">MakeTableBlocks</a>(grid, all_columns, width_cb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1856836a1386196d5784244b4a1aa2d0"></a><!-- doxytag: member="tesseract::TableFinder::MakeTableBlocks" ref="a1856836a1386196d5784244b4a1aa2d0" args="(ColPartitionGrid *grid, ColPartitionSet **columns, WidthCallback *width_cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::MakeTableBlocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetesseract.html#add06f170e88dcbac90a80ff20c42cc0a">WidthCallback</a> *&#160;</td>
          <td class="paramname"><em>width_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l02070">2070</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                           {
  <span class="comment">// Since we have table blocks already, remove table tags from all</span>
  <span class="comment">// colpartitions</span>
  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
    gsearch(grid);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>) {
      part-&gt;clear_table_type();
    }
  }
  <span class="comment">// Now make a single colpartition out of each table block and remove</span>
  <span class="comment">// all colpartitions contained within a table</span>
  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
      table_search(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);
  table_search.StartFullSearch();
  ColSegment* table;
  <span class="keywordflow">while</span> ((table = table_search.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="class_t_b_o_x.html">TBOX</a> table_box = table-&gt;bounding_box();
    <span class="comment">// Start a rect search on table_box</span>
    GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
        rectsearch(grid);
    rectsearch.StartRectSearch(table_box);
    ColPartition* part;
    ColPartition* table_partition = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">while</span> ((part = rectsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
     <span class="comment">// Do not consider image partitions</span>
      <span class="keywordflow">if</span> (!part-&gt;IsTextType())
        <span class="keywordflow">continue</span>;
      <a class="code" href="class_t_b_o_x.html">TBOX</a> part_box = part-&gt;bounding_box();
      <span class="comment">// Include partition in the table if more than half of it</span>
      <span class="comment">// is covered by the table</span>
      <span class="keywordflow">if</span> (part_box.<a class="code" href="class_t_b_o_x.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(table_box) &gt; <a class="code" href="namespacetesseract.html#a0f2ae212b6b475efca7981fd1dc51e29">kMinOverlapWithTable</a>) {
        rectsearch.RemoveBBox();
        <span class="keywordflow">if</span> (table_partition) {
          table_partition-&gt;Absorb(part, width_cb);
        } <span class="keywordflow">else</span> {
          table_partition = part;
        }
      }
    }
    <span class="comment">// Insert table colpartition back to part_grid_</span>
    <span class="keywordflow">if</span> (table_partition) {
      <span class="comment">// To match the columns used when transforming to blocks, the new table</span>
      <span class="comment">// partition must have its first and last column set at the grid y that</span>
      <span class="comment">// corresponds to its bottom.</span>
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; table_box = table_partition-&gt;bounding_box();
      <span class="keywordtype">int</span> grid_x, grid_y;
      grid-&gt;GridCoords(table_box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), table_box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(), &amp;grid_x, &amp;grid_y);
      table_partition-&gt;SetPartitionType(<a class="code" href="classtesseract_1_1_table_finder.html#a945f735c68a1f3fe672e759828f36f71">resolution_</a>, all_columns[grid_y]);
      table_partition-&gt;set_table_type();
      table_partition-&gt;set_blob_type(<a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575a4f0b1431532d0e838187df32f2e822d7">BRT_TEXT</a>);
      table_partition-&gt;set_flow(<a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1a8fa903eb3c633ef681659563769a8007">BTFT_CHAIN</a>);
      table_partition-&gt;SetBlobTypes();
      grid-&gt;InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, table_partition);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1d45a058db096f6040af24af402b2042"></a><!-- doxytag: member="tesseract::TableFinder::MakeWindow" ref="a1d45a058db096f6040af24af402b2042" args="(int x, int y, const char *window_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_scroll_view.html">ScrollView</a> * tesseract::TableFinder::MakeWindow </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>window_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00518">518</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                         {
  <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.MakeWindow(x, y, window_name);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeb0fc1badeb2def5cf69aca53392c89c"></a><!-- doxytag: member="tesseract::TableFinder::MarkPartitionsUsingLocalInformation" ref="aeb0fc1badeb2def5cf69aca53392c89c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::MarkPartitionsUsingLocalInformation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00827">827</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                      {
  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
    gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (!part-&gt;IsTextType())  <span class="comment">// Only consider text partitions</span>
      <span class="keywordflow">continue</span>;
    <span class="comment">// Only consider partitions in dominant font size or smaller</span>
    <span class="keywordflow">if</span> (part-&gt;median_size() &gt; <a class="code" href="namespacetesseract.html#a12f077d41b2f5c668c1b25912b9b6244">kMaxTableCellXheight</a> * <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a>)
      <span class="keywordflow">continue</span>;
    <span class="comment">// Mark partitions with a large gap, or no significant gap as</span>
    <span class="comment">// table partitions.</span>
    <span class="comment">// Comments: It produces several false alarms at:</span>
    <span class="comment">//  - last line of a paragraph (fixed)</span>
    <span class="comment">//  - single word section headings</span>
    <span class="comment">//  - page headers and footers</span>
    <span class="comment">//  - numbered equations</span>
    <span class="comment">//  - line drawing regions</span>
    <span class="comment">// TODO(faisal): detect and fix above-mentioned cases</span>
    <span class="keywordflow">if</span> (<a class="code" href="classtesseract_1_1_table_finder.html#a298f9f253a3fd3109133e6ea40842bc0">HasWideOrNoInterWordGap</a>(part) ||
        <a class="code" href="classtesseract_1_1_table_finder.html#a6436ad4194a19a38669a89b603c27801">HasLeaderAdjacent</a>(*part)) {
      part-&gt;set_table_type();
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f29dd0a40d57b00d4868ff1c656dd6a"></a><!-- doxytag: member="tesseract::TableFinder::MarkTablePartitions" ref="a7f29dd0a40d57b00d4868ff1c656dd6a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::MarkTablePartitions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00789">789</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                      {
  <a class="code" href="classtesseract_1_1_table_finder.html#aeb0fc1badeb2def5cf69aca53392c89c">MarkPartitionsUsingLocalInformation</a>();
  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a>) {
    <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(300, 300, <span class="stringliteral">&quot;Initial Table Partitions&quot;</span>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,
                         <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);
  }
  <a class="code" href="classtesseract_1_1_table_finder.html#a34734ff8fb23f8bfb88dc60e06cb2c17">FilterFalseAlarms</a>();
  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a>) {
    <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(600, 300, <span class="stringliteral">&quot;Filtered Table Partitions&quot;</span>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,
                         <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);
  }
  <a class="code" href="classtesseract_1_1_table_finder.html#ae3d5e2e4c894d4514717d0593792226d">SmoothTablePartitionRuns</a>();
  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a>) {
    <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(900, 300, <span class="stringliteral">&quot;Smoothed Table Partitions&quot;</span>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,
                         <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);
  }
  <a class="code" href="classtesseract_1_1_table_finder.html#a34734ff8fb23f8bfb88dc60e06cb2c17">FilterFalseAlarms</a>();
  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a> || <a class="code" href="namespacetesseract.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {
    <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(900, 300, <span class="stringliteral">&quot;Final Table Partitions&quot;</span>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,
                         <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a81003bea37eced8d746035bd565b9c56"></a><!-- doxytag: member="tesseract::TableFinder::MoveColSegmentsToGrid" ref="a81003bea37eced8d746035bd565b9c56" args="(ColSegment_LIST *segments, ColSegmentGrid *col_seg_grid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::MoveColSegmentsToGrid </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>segments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetesseract.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> *&#160;</td>
          <td class="paramname"><em>col_seg_grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01176">1176</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                       {
  ColSegment_IT it(segments);
  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {
    ColSegment* seg = it.extract();
    col_seg_grid-&gt;InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, seg);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a647fe056ae6bb33cc8989f08aac5172f"></a><!-- doxytag: member="tesseract::TableFinder::RecognizeTables" ref="a647fe056ae6bb33cc8989f08aac5172f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::RecognizeTables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01816">1816</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
  <a class="code" href="class_scroll_view.html">ScrollView</a>* table_win = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {
    table_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(0, 0, <span class="stringliteral">&quot;Table Structure&quot;</span>);
    <a class="code" href="classtesseract_1_1_table_finder.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>,
                         <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a93aaf384b4a674f176e3dd1655c1ad95">ScrollView::LIGHT_BLUE</a>);
    <span class="comment">// table_grid_.DisplayBoxes(table_win);</span>
  }


  TableRecognizer recognizer;
  recognizer.Init();
  recognizer.set_line_grid(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>);
  recognizer.set_text_grid(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>);
  recognizer.set_max_text_height(<a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * 2.0);
  recognizer.set_min_height(1.5 * <a class="code" href="classtesseract_1_1_table_finder.html#a704fbe9cb0edeaa969bb0cc2bd1f9dbd">gridheight</a>());
  <span class="comment">// Loop over all of the tables and try to fit them.</span>
  <span class="comment">// Store the good tables here.</span>
  ColSegment_CLIST good_tables;
  ColSegment_C_IT good_it(&amp;good_tables);

  <a class="code" href="namespacetesseract.html#ac7f2f25bfb4914e691db80a6b523c703">ColSegmentGridSearch</a> gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);
  gsearch.StartFullSearch();
  ColSegment* found_table = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((found_table = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    gsearch.RemoveBBox();

    <span class="comment">// The goal is to make the tables persistent in a list.</span>
    <span class="comment">// When that happens, this will move into the search loop.</span>
    <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; found_box = found_table-&gt;bounding_box();
    StructuredTable* table_structure = recognizer.RecognizeTable(found_box);

    <span class="comment">// Process a table. Good tables are inserted into the grid again later on</span>
    <span class="comment">// We can&#39;t change boxes in the grid while it is running a search.</span>
    <span class="keywordflow">if</span> (table_structure != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {
        table_structure-&gt;Display(table_win, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a3312de9754e4e61d9a699f23528a059a">ScrollView::LIME_GREEN</a>);
      }
      found_table-&gt;set_bounding_box(table_structure-&gt;bounding_box());
      <span class="keyword">delete</span> table_structure;
      good_it.add_after_then_move(found_table);
    } <span class="keywordflow">else</span> {
      <span class="keyword">delete</span> found_table;
    }
  }
  <span class="comment">// TODO(nbeato): MERGE!! There is awesome info now available for merging.</span>

  <span class="comment">// At this point, the grid is empty. We can safely insert the good tables</span>
  <span class="comment">// back into grid.</span>
  <span class="keywordflow">for</span> (good_it.mark_cycle_pt(); !good_it.cycled_list(); good_it.forward())
    <a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, good_it.extract());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a793bbaf0945bb838b9c934899c4de87a"></a><!-- doxytag: member="tesseract::TableFinder::set_global_median_blob_width" ref="a793bbaf0945bb838b9c934899c4de87a" args="(int width)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_global_median_blob_width </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00759">759</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                        {
  <a class="code" href="classtesseract_1_1_table_finder.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a> = width;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5644866b8727722deec53b73c4d7831"></a><!-- doxytag: member="tesseract::TableFinder::set_global_median_ledding" ref="aa5644866b8727722deec53b73c4d7831" args="(int ledding)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_global_median_ledding </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ledding</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00762">762</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                       {
  <a class="code" href="classtesseract_1_1_table_finder.html#a1d5828695e17f10f2d4140476c9f34fd">global_median_ledding_</a> = ledding;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8be2bff4c272c65c0c4e896037620381"></a><!-- doxytag: member="tesseract::TableFinder::set_global_median_xheight" ref="a8be2bff4c272c65c0c4e896037620381" args="(int xheight)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_global_median_xheight </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xheight</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00756">756</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                       {
  <a class="code" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> = xheight;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aacc9d09ee5545c6ba681a73ddfff139b"></a><!-- doxytag: member="tesseract::TableFinder::set_left_to_right_language" ref="aacc9d09ee5545c6ba681a73ddfff139b" args="(bool order)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_left_to_right_language </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>order</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00186">186</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                       {
  <a class="code" href="classtesseract_1_1_table_finder.html#a528595d792a34a2a361670aced196165">left_to_right_language_</a> = order;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6dc1406d2cfe1e8c868198d2532e5d2c"></a><!-- doxytag: member="tesseract::TableFinder::set_resolution" ref="a6dc1406d2cfe1e8c868198d2532e5d2c" args="(int resolution)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_resolution </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>resolution</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00138">138</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>
<div class="fragment"><pre class="fragment">                                      {
    <a class="code" href="classtesseract_1_1_table_finder.html#a945f735c68a1f3fe672e759828f36f71">resolution_</a> = resolution;
  }
</pre></div>
</div>
</div>
<a class="anchor" id="ac3e8a6d03fcaf027677919f284af6500"></a><!-- doxytag: member="tesseract::TableFinder::SetColumnsType" ref="ac3e8a6d03fcaf027677919f284af6500" args="(ColSegment_LIST *col_segments)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SetColumnsType </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>col_segments</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01143">1143</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                               {
  ColSegment_IT it(column_blocks);
  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {
    ColSegment* seg = it.data();
    <a class="code" href="class_t_b_o_x.html">TBOX</a> box = seg-&gt;bounding_box();
    <span class="keywordtype">int</span> num_table_cells = 0;
    <span class="keywordtype">int</span> num_text_cells = 0;
    GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
        rsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
    rsearch.SetUniqueMode(<span class="keyword">true</span>);
    rsearch.StartRectSearch(box);
    ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">while</span> ((part = rsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>) {
        num_table_cells++;
      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60aaa63d8d8a99ddc2b3957f8e8787b4eca">PT_FLOWING_TEXT</a>) {
        num_text_cells++;
      }
    }
    <span class="comment">// If a column block has no text or table partition in it, it is not needed</span>
    <span class="comment">// for table detection.</span>
    <span class="keywordflow">if</span> (!num_table_cells &amp;&amp; !num_text_cells) {
      <span class="keyword">delete</span> it.extract();
    } <span class="keywordflow">else</span> {
      seg-&gt;set_num_table_cells(num_table_cells);
      seg-&gt;set_num_text_cells(num_text_cells);
      <span class="comment">// set column type based on the ratio of table to text cells</span>
      seg-&gt;set_type();
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a51c670936d76fcdf3ed1a0e2730a54c4"></a><!-- doxytag: member="tesseract::TableFinder::SetGlobalSpacings" ref="a51c670936d76fcdf3ed1a0e2730a54c4" args="(ColPartitionGrid *grid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SetGlobalSpacings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00709">709</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                          {
  <a class="code" href="class_s_t_a_t_s.html">STATS</a> xheight_stats(0, <a class="code" href="namespacetesseract.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a> + 1);
  <a class="code" href="class_s_t_a_t_s.html">STATS</a> width_stats(0, <a class="code" href="namespacetesseract.html#a83ac44e5e0c7348fd8591b3cba175dff">kMaxBlobWidth</a> + 1);
  <a class="code" href="class_s_t_a_t_s.html">STATS</a> ledding_stats(0, <a class="code" href="namespacetesseract.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a> + 1);
  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(grid);
  gsearch.SetUniqueMode(<span class="keyword">true</span>);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="comment">// TODO(nbeato): HACK HACK HACK! medians are equal to partition length.</span>
    <span class="comment">// ComputeLimits needs to get called somewhere outside of TableFinder</span>
    <span class="comment">// to make sure the partitions are properly initialized.</span>
    <span class="comment">// When this is called, SmoothPartitionPartners dies in an assert after</span>
    <span class="comment">// table find runs. Alternative solution.</span>
    <span class="comment">// part-&gt;ComputeLimits();</span>
    <span class="keywordflow">if</span> (part-&gt;IsTextType()) {
      <span class="comment">// xheight_stats.add(part-&gt;median_size(), part-&gt;boxes_count());</span>
      <span class="comment">// width_stats.add(part-&gt;median_width(), part-&gt;boxes_count());</span>

      <span class="comment">// This loop can be removed when above issues are fixed.</span>
      <span class="comment">// Replace it with the 2 lines commented out above.</span>
      BLOBNBOX_C_IT it(part-&gt;boxes());
      <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {
        xheight_stats.add(it.data()-&gt;bounding_box().height(), 1);
        width_stats.add(it.data()-&gt;bounding_box().width(), 1);
      }

      ledding_stats.add(part-&gt;space_above(), 1);
      ledding_stats.add(part-&gt;space_below(), 1);
    }
  }
  <span class="comment">// Set estimates based on median of statistics obtained</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a8be2bff4c272c65c0c4e896037620381">set_global_median_xheight</a>(static_cast&lt;int&gt;(xheight_stats.median() + 0.5));
  <a class="code" href="classtesseract_1_1_table_finder.html#a793bbaf0945bb838b9c934899c4de87a">set_global_median_blob_width</a>(static_cast&lt;int&gt;(width_stats.median() + 0.5));
  <a class="code" href="classtesseract_1_1_table_finder.html#aa5644866b8727722deec53b73c4d7831">set_global_median_ledding</a>(static_cast&lt;int&gt;(ledding_stats.median() + 0.5));
<span class="preprocessor">  #ifndef GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="namespacetesseract.html#a1b028e05393678b0316a80361e18c9a4">textord_tablefind_show_stats</a>) {
    <span class="keyword">const</span> <span class="keywordtype">char</span>* kWindowName = <span class="stringliteral">&quot;X-height (R), X-width (G), and ledding (B)&quot;</span>;
    <a class="code" href="class_scroll_view.html">ScrollView</a>* stats_win = <a class="code" href="classtesseract_1_1_table_finder.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(500, 10, kWindowName);
    xheight_stats.plot(stats_win, 10, 200, 2, 15, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>);
    width_stats.plot(stats_win, 10, 200, 2, 15, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a9d8c87be486dead41d198d6b97a22174">ScrollView::GREEN</a>);
    ledding_stats.plot(stats_win, 10, 200, 2, 15, <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);
  }
<span class="preprocessor">  #endif  // GRAPHICS_DISABLED</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="aa4b52f48d63d4881da34b7d84932e84d"></a><!-- doxytag: member="tesseract::TableFinder::SetPartitionSpacings" ref="aa4b52f48d63d4881da34b7d84932e84d" args="(ColPartitionGrid *grid, ColPartitionSet **all_columns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SetPartitionSpacings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>all_columns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00586">586</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                      {
  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(grid);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    ColPartitionSet* columns = all_columns[gsearch.GridY()];
    <a class="code" href="class_t_b_o_x.html">TBOX</a> box = part-&gt;bounding_box();
    <span class="keywordtype">int</span> y = part-&gt;MidY();
    ColPartition* left_column = columns-&gt;ColumnContaining(box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), y);
    ColPartition* right_column = columns-&gt;ColumnContaining(box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), y);
    <span class="comment">// set distance from left column as space to the left</span>
    <span class="keywordflow">if</span> (left_column) {
      <span class="keywordtype">int</span> left_space = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(0, box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>() - left_column-&gt;LeftAtY(y));
      part-&gt;set_space_to_left(left_space);
    }
    <span class="comment">// set distance from right column as space to the right</span>
    <span class="keywordflow">if</span> (right_column) {
      <span class="keywordtype">int</span> right_space = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(0, right_column-&gt;RightAtY(y) - box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>());
      part-&gt;set_space_to_right(right_space);
    }

    <span class="comment">// Look for images that may be closer.</span>
    <span class="comment">// NOTE: used to be part_grid_, might cause issues now</span>
    <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> hsearch(grid);
    hsearch.StartSideSearch(box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(), box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());
    ColPartition* neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">while</span> ((neighbor = hsearch.NextSideSearch(<span class="keyword">true</span>)) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="keywordflow">if</span> (neighbor-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a88dcd7f4800095eb2f18b8a9bd521001">PT_PULLOUT_IMAGE</a> ||
          neighbor-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60ae4dd1e076e7d8354de8123bbdfb9e6b0">PT_FLOWING_IMAGE</a> ||
          neighbor-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a919711bca6bed2e6a9846e4dc91f3900">PT_HEADING_IMAGE</a>) {
        <span class="keywordtype">int</span> right = neighbor-&gt;bounding_box().right();
        <span class="keywordflow">if</span> (right &lt; box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>()) {
          <span class="keywordtype">int</span> space = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a>(box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>() - right, part-&gt;space_to_left());
          part-&gt;set_space_to_left(space);
        }
      }
    }
    hsearch.StartSideSearch(box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(), box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());
    neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordflow">while</span> ((neighbor = hsearch.NextSideSearch(<span class="keyword">false</span>)) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
      <span class="keywordflow">if</span> (neighbor-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a88dcd7f4800095eb2f18b8a9bd521001">PT_PULLOUT_IMAGE</a> ||
          neighbor-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60ae4dd1e076e7d8354de8123bbdfb9e6b0">PT_FLOWING_IMAGE</a> ||
          neighbor-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a919711bca6bed2e6a9846e4dc91f3900">PT_HEADING_IMAGE</a>) {
        <span class="keywordtype">int</span> left = neighbor-&gt;bounding_box().left();
        <span class="keywordflow">if</span> (left &gt; box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>()) {
          <span class="keywordtype">int</span> space = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a>(left - box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), part-&gt;space_to_right());
          part-&gt;set_space_to_right(space);
        }
      }
    }

    ColPartition* upper_part = part-&gt;SingletonPartner(<span class="keyword">true</span>);
    <span class="keywordflow">if</span> (upper_part) {
      <span class="keywordtype">int</span> space = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(0, upper_part-&gt;bounding_box().bottom() -
                         part-&gt;bounding_box().bottom());
      part-&gt;set_space_above(space);
    } <span class="keywordflow">else</span> {
      <span class="comment">// TODO(nbeato): What constitutes a good value?</span>
      <span class="comment">// 0 is the default value when not set, explicitly noting it needs to</span>
      <span class="comment">// be something else.</span>
      part-&gt;set_space_above(<a class="code" href="host_8h.html#aac62d87844689a18b6f5339a89ed6e7f">MAX_INT32</a>);
    }

    ColPartition* lower_part = part-&gt;SingletonPartner(<span class="keyword">false</span>);
    <span class="keywordflow">if</span> (lower_part) {
      <span class="keywordtype">int</span> space = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(0, part-&gt;bounding_box().bottom() -
                         lower_part-&gt;bounding_box().bottom());
      part-&gt;set_space_below(space);
    } <span class="keywordflow">else</span> {
      <span class="comment">// TODO(nbeato): What constitutes a good value?</span>
      <span class="comment">// 0 is the default value when not set, explicitly noting it needs to</span>
      <span class="comment">// be something else.</span>
      part-&gt;set_space_below(<a class="code" href="host_8h.html#aac62d87844689a18b6f5339a89ed6e7f">MAX_INT32</a>);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad6c2c9a0fdec2c14ef0ddc63a5d0217d"></a><!-- doxytag: member="tesseract::TableFinder::SetVerticalSpacing" ref="ad6c2c9a0fdec2c14ef0ddc63a5d0217d" args="(ColPartition *part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SetVerticalSpacing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00666">666</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                       {
  <a class="code" href="class_t_b_o_x.html">TBOX</a> box = part-&gt;bounding_box();
  <span class="keywordtype">int</span> top_range = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a>(box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + <a class="code" href="namespacetesseract.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a>, <a class="code" href="classtesseract_1_1_table_finder.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().<a class="code" href="class_i_c_o_o_r_d.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>());
  <span class="keywordtype">int</span> bottom_range = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() - <a class="code" href="namespacetesseract.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a>, <a class="code" href="classtesseract_1_1_table_finder.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="class_i_c_o_o_r_d.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>());
  box.<a class="code" href="class_t_b_o_x.html#a7f40dfd290a907200bdc98c196f63f45">set_top</a>(top_range);
  box.<a class="code" href="class_t_b_o_x.html#a6f803b24b046883cb0f3882dc3d92302">set_bottom</a>(bottom_range);

  <a class="code" href="class_t_b_o_x.html">TBOX</a> part_box = part-&gt;bounding_box();
  <span class="comment">// Start a rect search</span>
  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
      rectsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  rectsearch.StartRectSearch(box);
  ColPartition* neighbor;
  <span class="keywordtype">int</span> min_space_above = <a class="code" href="namespacetesseract.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a>;
  <span class="keywordtype">int</span> min_space_below = <a class="code" href="namespacetesseract.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a>;
  ColPartition* above_neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  ColPartition* below_neighbor = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((neighbor = rectsearch.NextRectSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (neighbor == part)
      <span class="keywordflow">continue</span>;
    <a class="code" href="class_t_b_o_x.html">TBOX</a> neighbor_box = neighbor-&gt;bounding_box();
    <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="class_t_b_o_x.html#a9f7e4e20bdfeee0d82db2f8d24aa72dc">major_x_overlap</a>(part_box)) {
      <span class="keywordtype">int</span> gap = abs(part-&gt;median_bottom() - neighbor-&gt;median_bottom());
      <span class="comment">// If neighbor is below current partition</span>
      <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() &lt; part_box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() &amp;&amp;
          gap &lt; min_space_below) {
        min_space_below = gap;
        below_neighbor = neighbor;
      }  <span class="comment">// If neighbor is above current partition</span>
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (part_box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() &lt; neighbor_box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() &amp;&amp;
               gap &lt; min_space_above) {
        min_space_above = gap;
        above_neighbor = neighbor;
       }
    }
  }
  part-&gt;set_space_above(min_space_above);
  part-&gt;set_space_below(min_space_below);
  part-&gt;set_nearest_neighbor_above(above_neighbor);
  part-&gt;set_nearest_neighbor_below(below_neighbor);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae3d5e2e4c894d4514717d0593792226d"></a><!-- doxytag: member="tesseract::TableFinder::SmoothTablePartitionRuns" ref="ae3d5e2e4c894d4514717d0593792226d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SmoothTablePartitionRuns </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01108">1108</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                           {
  <span class="comment">// Iterate the ColPartitions in the grid.</span>
  <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  gsearch.StartFullSearch();
  ColPartition* part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (part-&gt;type() &gt;= <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a> || part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60ac0b3cd1b4592e1a3c609ff4273fb505b">PT_UNKNOWN</a>)
      <span class="keywordflow">continue</span>;  <span class="comment">// Consider only text partitions</span>
    ColPartition* upper_part = part-&gt;nearest_neighbor_above();
    ColPartition* lower_part = part-&gt;nearest_neighbor_below();
    <span class="keywordflow">if</span> (!upper_part || !lower_part)
      <span class="keywordflow">continue</span>;
    <span class="keywordflow">if</span> (upper_part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a> &amp;&amp; lower_part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)
      part-&gt;set_table_type();
  }

  <span class="comment">// Pass 2, do the opposite. If both the upper and lower neighbors</span>
  <span class="comment">// exist and are not tables, this probably shouldn&#39;t be a table.</span>
  gsearch.StartFullSearch();
  part = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <span class="keywordflow">if</span> (part-&gt;type() != <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)
      <span class="keywordflow">continue</span>;  <span class="comment">// Consider only text partitions</span>
    ColPartition* upper_part = part-&gt;nearest_neighbor_above();
    ColPartition* lower_part = part-&gt;nearest_neighbor_below();

    <span class="comment">// table can&#39;t be by itself</span>
    <span class="keywordflow">if</span> ((upper_part &amp;&amp; upper_part-&gt;type() != <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>) &amp;&amp;
        (lower_part &amp;&amp; lower_part-&gt;type() != <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)) {
      part-&gt;clear_table_type();
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a34950c2f035a25bb75f29a5ab51fe191"></a><!-- doxytag: member="tesseract::TableFinder::SplitAndInsertFragmentedTextPartition" ref="a34950c2f035a25bb75f29a5ab51fe191" args="(ColPartition *part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SplitAndInsertFragmentedTextPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtesseract_1_1_col_partition.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00436">436</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                          {
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  <span class="comment">// Bye bye empty partitions!</span>
  <span class="keywordflow">if</span> (part-&gt;boxes()-&gt;empty()) {
    <span class="keyword">delete</span> part;
    <span class="keywordflow">return</span>;
  }

  <span class="comment">// The AllowBlob function prevents this.</span>
  <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part-&gt;median_width() &gt; 0);
  <span class="keyword">const</span> <span class="keywordtype">double</span> kThreshold = part-&gt;median_width() * <a class="code" href="namespacetesseract.html#aeecbc7f84d79acc5731cfdcccc164bde">kSplitPartitionSize</a>;

  ColPartition* right_part = part;
  <span class="keywordtype">bool</span> found_split = <span class="keyword">true</span>;
  <span class="keywordflow">while</span> (found_split) {
    found_split = <span class="keyword">false</span>;
    BLOBNBOX_C_IT box_it(right_part-&gt;boxes());
    <span class="comment">// Blobs are sorted left side first. If blobs overlap,</span>
    <span class="comment">// the previous blob may have a &quot;more right&quot; right side.</span>
    <span class="comment">// Account for this by always keeping the largest &quot;right&quot;</span>
    <span class="comment">// so far.</span>
    <span class="keywordtype">int</span> previous_right = <a class="code" href="host_8h.html#ae6f88d5bb15e97510f484289f2fc89fd">MIN_INT32</a>;

    <span class="comment">// Look for the next split in the partition.</span>
    <span class="keywordflow">for</span> (box_it.mark_cycle_pt(); !box_it.cycled_list(); box_it.forward()) {
      <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box = box_it.data()-&gt;bounding_box();
      <span class="keywordflow">if</span> (previous_right != <a class="code" href="host_8h.html#ae6f88d5bb15e97510f484289f2fc89fd">MIN_INT32</a> &amp;&amp;
          box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>() - previous_right &gt; kThreshold) {
        <span class="comment">// We have a split position. Split the partition in two pieces.</span>
        <span class="comment">// Insert the left piece in the grid and keep processing the right.</span>
        <span class="keywordtype">int</span> mid_x = (box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>() + previous_right) / 2;
        ColPartition* left_part = right_part;
        right_part = left_part-&gt;SplitAt(mid_x);

        <a class="code" href="classtesseract_1_1_table_finder.html#a216c040efc8dff584076cc324240c524">InsertFragmentedTextPartition</a>(left_part);
        found_split = <span class="keyword">true</span>;
        <span class="keywordflow">break</span>;
      }

      <span class="comment">// The right side of the previous blobs.</span>
      previous_right = <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(previous_right, box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>());
    }
  }
  <span class="comment">// When a split is not found, the right part is minimized</span>
  <span class="comment">// as much as possible, so process it.</span>
  <a class="code" href="classtesseract_1_1_table_finder.html#a216c040efc8dff584076cc324240c524">InsertFragmentedTextPartition</a>(right_part);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af994bc64825f51944fa63a0fc61b4e13"></a><!-- doxytag: member="tesseract::TableFinder::tright" ref="af994bc64825f51944fa63a0fc61b4e13" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_i_c_o_o_r_d.html">ICOORD</a> &amp; tesseract::TableFinder::tright </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l00390">390</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
  <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.tright();
}
</pre></div>
</div>
</div>
<a class="anchor" id="abbd932c16cdfa0cf35f9ef93e2e87f49"></a><!-- doxytag: member="tesseract::TableFinder::WriteToPix" ref="abbd932c16cdfa0cf35f9ef93e2e87f49" args="(const FCOORD &amp;reskew)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::WriteToPix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_f_c_o_o_r_d.html">FCOORD</a> &amp;&#160;</td>
          <td class="paramname"><em>reskew</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8cpp_source.html#l01997">1997</a> of file <a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                 {
  <span class="comment">// Input file must be named test1.tif</span>
  PIX* pix = pixRead(<span class="stringliteral">&quot;test1.tif&quot;</span>);
  <span class="keywordflow">if</span> (!pix) {
    <a class="code" href="tprintf_8cpp.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Input file test1.tif not found.\n&quot;</span>);
    <span class="keywordflow">return</span>;
  }
  <span class="keywordtype">int</span> img_height = pixGetHeight(pix);
  <span class="keywordtype">int</span> img_width = pixGetWidth(pix);
  <span class="comment">// Maximum number of text or table partitions</span>
  <span class="keywordtype">int</span> num_boxes = 10;
  BOXA* text_box_array = boxaCreate(num_boxes);
  BOXA* table_box_array = boxaCreate(num_boxes);
  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;
    gsearch(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);
  gsearch.StartFullSearch();
  ColPartition* part;
  <span class="comment">// load colpartitions into text_box_array and table_box_array</span>
  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="class_t_b_o_x.html">TBOX</a> box = part-&gt;bounding_box();
    box.<a class="code" href="class_t_b_o_x.html#a56b4e1cc91e8abcb9f97622da7468e98">rotate_large</a>(reskew);
    BOX* lept_box = boxCreate(box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), img_height - box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(),
                              box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() - box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(),
                              box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() - box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());
    <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)
      boxaAddBox(table_box_array, lept_box, L_INSERT);
    <span class="keywordflow">else</span>
      boxaAddBox(text_box_array, lept_box, L_INSERT);
  }
  <span class="comment">// draw colpartitions on the output image</span>
  PIX* out = pixDrawBoxa(pix, text_box_array, 3, 0xff000000);
  out = pixDrawBoxa(out, table_box_array, 3, 0x0000ff00);

  BOXA* table_array = boxaCreate(num_boxes);
  <span class="comment">// text file containing detected table bounding boxes</span>
  FILE* fptr = fopen(<span class="stringliteral">&quot;tess-table.txt&quot;</span>, <span class="stringliteral">&quot;wb&quot;</span>);
  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;
      table_search(&amp;<a class="code" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);
  table_search.StartFullSearch();
  ColSegment* table;
  <span class="comment">// load table boxes to table_array and write them to text file as well</span>
  <span class="keywordflow">while</span> ((table = table_search.NextFullSearch()) != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
    <a class="code" href="class_t_b_o_x.html">TBOX</a> box = table-&gt;bounding_box();
    box.<a class="code" href="class_t_b_o_x.html#a56b4e1cc91e8abcb9f97622da7468e98">rotate_large</a>(reskew);
    <span class="comment">// Since deskewing introduces negative coordinates, reskewing</span>
    <span class="comment">// might not completely recover from that since both steps enlarge</span>
    <span class="comment">// the actual box. Hence a box that undergoes deskewing/reskewing</span>
    <span class="comment">// may go out of image boundaries. Crop a table box if needed to</span>
    <span class="comment">// contain it inside the image dimensions.</span>
    box = box.<a class="code" href="class_t_b_o_x.html#a33e45c7389737cdf1a908bca0af315c4">intersection</a>(<a class="code" href="class_t_b_o_x.html">TBOX</a>(0, 0, img_width - 1, img_height - 1));
    BOX* lept_box = boxCreate(box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(), img_height - box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(),
                              box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() - box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(),
                              box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() - box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());
    boxaAddBox(table_array, lept_box, L_INSERT);
    fprintf(fptr, <span class="stringliteral">&quot;%d %d %d %d TABLE\n&quot;</span>, box.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>(),
            img_height - box.<a class="code" href="class_t_b_o_x.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(), box.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), img_height - box.<a class="code" href="class_t_b_o_x.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());
  }
  fclose(fptr);
  <span class="comment">// paint table boxes on the debug image</span>
  out = pixDrawBoxa(out, table_array, 5, 0x7fff0000);

  pixWrite(<span class="stringliteral">&quot;out.png&quot;</span>, out, IFF_PNG);
  <span class="comment">// memory cleanup</span>
  boxaDestroy(&amp;text_box_array);
  boxaDestroy(&amp;table_box_array);
  boxaDestroy(&amp;table_array);
  pixDestroy(&amp;pix);
  pixDestroy(&amp;out);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aec2f605cdeff11cb17d4cb9aba585b1b"></a><!-- doxytag: member="tesseract::TableFinder::clean_part_grid_" ref="aec2f605cdeff11cb17d4cb9aba585b1b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> <a class="el" href="classtesseract_1_1_table_finder.html#aec2f605cdeff11cb17d4cb9aba585b1b">tesseract::TableFinder::clean_part_grid_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00418">418</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a94f0570afcc478097685ccdb59928903"></a><!-- doxytag: member="tesseract::TableFinder::col_seg_grid_" ref="a94f0570afcc478097685ccdb59928903" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetesseract.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> <a class="el" href="classtesseract_1_1_table_finder.html#a94f0570afcc478097685ccdb59928903">tesseract::TableFinder::col_seg_grid_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00426">426</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad2da282ac5f2a2d4efbc463d80c7113c"></a><!-- doxytag: member="tesseract::TableFinder::fragmented_text_grid_" ref="ad2da282ac5f2a2d4efbc463d80c7113c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> <a class="el" href="classtesseract_1_1_table_finder.html#ad2da282ac5f2a2d4efbc463d80c7113c">tesseract::TableFinder::fragmented_text_grid_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00424">424</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a761fd57460670c531131bd2a77227911"></a><!-- doxytag: member="tesseract::TableFinder::global_median_blob_width_" ref="a761fd57460670c531131bd2a77227911" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_table_finder.html#a761fd57460670c531131bd2a77227911">tesseract::TableFinder::global_median_blob_width_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00412">412</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d5828695e17f10f2d4140476c9f34fd"></a><!-- doxytag: member="tesseract::TableFinder::global_median_ledding_" ref="a1d5828695e17f10f2d4140476c9f34fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_table_finder.html#a1d5828695e17f10f2d4140476c9f34fd">tesseract::TableFinder::global_median_ledding_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00414">414</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab66e5e7382edbd8bc260fd5bca4f2914"></a><!-- doxytag: member="tesseract::TableFinder::global_median_xheight_" ref="ab66e5e7382edbd8bc260fd5bca4f2914" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_table_finder.html#ab66e5e7382edbd8bc260fd5bca4f2914">tesseract::TableFinder::global_median_xheight_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00410">410</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7fddea88c90c15d996f36963481b81cf"></a><!-- doxytag: member="tesseract::TableFinder::leader_and_ruling_grid_" ref="a7fddea88c90c15d996f36963481b81cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a> <a class="el" href="classtesseract_1_1_table_finder.html#a7fddea88c90c15d996f36963481b81cf">tesseract::TableFinder::leader_and_ruling_grid_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00420">420</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a528595d792a34a2a361670aced196165"></a><!-- doxytag: member="tesseract::TableFinder::left_to_right_language_" ref="a528595d792a34a2a361670aced196165" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtesseract_1_1_table_finder.html#a528595d792a34a2a361670aced196165">tesseract::TableFinder::left_to_right_language_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00430">430</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a945f735c68a1f3fe672e759828f36f71"></a><!-- doxytag: member="tesseract::TableFinder::resolution_" ref="a945f735c68a1f3fe672e759828f36f71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtesseract_1_1_table_finder.html#a945f735c68a1f3fe672e759828f36f71">tesseract::TableFinder::resolution_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00408">408</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="aba8f5765a3c7bbe13bee05b94308fec1"></a><!-- doxytag: member="tesseract::TableFinder::table_grid_" ref="aba8f5765a3c7bbe13bee05b94308fec1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetesseract.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> <a class="el" href="classtesseract_1_1_table_finder.html#aba8f5765a3c7bbe13bee05b94308fec1">tesseract::TableFinder::table_grid_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="tablefind_8h_source.html#l00428">428</a> of file <a class="el" href="tablefind_8h_source.html">tablefind.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tesseract-ocr/textord/<a class="el" href="tablefind_8h_source.html">tablefind.h</a></li>
<li>tesseract-ocr/textord/<a class="el" href="tablefind_8cpp_source.html">tablefind.cpp</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacetesseract.html">tesseract</a>      </li>
      <li class="navelem"><a class="el" href="classtesseract_1_1_table_finder.html">TableFinder</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Wed Mar 28 2012 22:38:53 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
